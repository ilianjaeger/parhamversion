ARM GAS  /tmp/ccaFhF6z.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.comm	hspi1,100,4
  18              		.comm	htim2,64,4
  19              		.section	.data.config_ShortData_Fast,"aw"
  20              		.align	2
  23              	config_ShortData_Fast:
  24 0000 02       		.byte	2
  25 0001 02       		.byte	2
  26 0002 14       		.byte	20
  27 0003 00       		.byte	0
  28 0004 09       		.byte	9
  29 0005 09       		.byte	9
  30 0006 00       		.byte	0
  31 0007 02       		.byte	2
  32 0008 00       		.byte	0
  33 0009 00       		.space	1
  34 000a 8100     		.short	129
  35              		.section	.data.config_LongData_Range,"aw"
  36              		.align	2
  39              	config_LongData_Range:
  40 0000 02       		.byte	2
  41 0001 02       		.byte	2
  42 0002 08       		.byte	8
  43 0003 02       		.byte	2
  44 0004 09       		.byte	9
  45 0005 09       		.byte	9
  46 0006 01       		.byte	1
  47 0007 00       		.byte	0
  48 0008 00       		.byte	0
  49 0009 00       		.space	1
  50 000a 2104     		.short	1057
  51              		.section	.data.config_LongData_Fast,"aw"
  52              		.align	2
  55              	config_LongData_Fast:
  56 0000 02       		.byte	2
  57 0001 02       		.byte	2
  58 0002 08       		.byte	8
  59 0003 03       		.byte	3
  60 0004 09       		.byte	9
  61 0005 09       		.byte	9
  62 0006 00       		.byte	0
  63 0007 02       		.byte	2
ARM GAS  /tmp/ccaFhF6z.s 			page 2


  64 0008 00       		.byte	0
  65 0009 00       		.space	1
  66 000a C903     		.short	969
  67              		.section	.data.rx_poll_msg,"aw"
  68              		.align	2
  71              	rx_poll_msg:
  72 0000 418800CA 		.ascii	"A\210\000\312\336WAVE!\000\000"
  72      DE574156 
  72      45210000 
  73              		.section	.data.tx_resp_msg,"aw"
  74              		.align	2
  77              	tx_resp_msg:
  78 0000 418800CA 		.ascii	"A\210\000\312\336VEWA\020\002\000\000\000\000"
  78      DE564557 
  78      41100200 
  78      000000
  79              		.section	.data.rx_final_msg,"aw"
  80              		.align	2
  83              	rx_final_msg:
  84 0000 418800CA 		.ascii	"A\210\000\312\336WAVE#\000\000\000\000\000\000\000\000"
  84      DE574156 
  84      45230000 
  84      00000000 
  84      0000
  85 0012 00000000 		.ascii	"\000\000\000\000\000\000"
  85      0000
  86              		.section	.data.tx_poll_msg,"aw"
  87              		.align	2
  90              	tx_poll_msg:
  91 0000 418800CA 		.ascii	"A\210\000\312\336WAVE!\000\000"
  91      DE574156 
  91      45210000 
  92              		.section	.data.rx_resp_msg,"aw"
  93              		.align	2
  96              	rx_resp_msg:
  97 0000 418800CA 		.ascii	"A\210\000\312\336VEWA\020\002\000\000\000\000"
  97      DE564557 
  97      41100200 
  97      000000
  98              		.section	.data.tx_final_msg,"aw"
  99              		.align	2
 102              	tx_final_msg:
 103 0000 418800CA 		.ascii	"A\210\000\312\336WAVE#\000\000\000\000\000\000\000\000"
 103      DE574156 
 103      45230000 
 103      00000000 
 103      0000
 104 0012 00000000 		.ascii	"\000\000\000\000\000\000"
 104      0000
 105              		.section	.bss.frame_seq_nb_initiator,"aw",%nobits
 108              	frame_seq_nb_initiator:
 109 0000 00       		.space	1
 110              		.section	.bss.frame_seq_nb_responder,"aw",%nobits
 113              	frame_seq_nb_responder:
 114 0000 00       		.space	1
 115              		.section	.bss.rx_buffer,"aw",%nobits
 116              		.align	2
ARM GAS  /tmp/ccaFhF6z.s 			page 3


 119              	rx_buffer:
 120 0000 00000000 		.space	24
 120      00000000 
 120      00000000 
 120      00000000 
 120      00000000 
 121              		.section	.bss.status_reg,"aw",%nobits
 122              		.align	2
 125              	status_reg:
 126 0000 00000000 		.space	4
 127              		.section	.bss.poll_rx_ts,"aw",%nobits
 128              		.align	3
 131              	poll_rx_ts:
 132 0000 00000000 		.space	8
 132      00000000 
 133              		.section	.bss.resp_tx_ts,"aw",%nobits
 134              		.align	3
 137              	resp_tx_ts:
 138 0000 00000000 		.space	8
 138      00000000 
 139              		.section	.bss.final_rx_ts,"aw",%nobits
 140              		.align	3
 143              	final_rx_ts:
 144 0000 00000000 		.space	8
 144      00000000 
 145              		.section	.bss.poll_tx_ts,"aw",%nobits
 146              		.align	3
 149              	poll_tx_ts:
 150 0000 00000000 		.space	8
 150      00000000 
 151              		.section	.bss.resp_rx_ts,"aw",%nobits
 152              		.align	3
 155              	resp_rx_ts:
 156 0000 00000000 		.space	8
 156      00000000 
 157              		.section	.bss.final_tx_ts,"aw",%nobits
 158              		.align	3
 161              	final_tx_ts:
 162 0000 00000000 		.space	8
 162      00000000 
 163              		.section	.bss.tof,"aw",%nobits
 164              		.align	3
 167              	tof:
 168 0000 00000000 		.space	8
 168      00000000 
 169              		.section	.bss.distance,"aw",%nobits
 170              		.align	3
 173              	distance:
 174 0000 00000000 		.space	8
 174      00000000 
 175              		.global	t1
 176              		.section	.bss.t1,"aw",%nobits
 177              		.align	3
 180              	t1:
 181 0000 00000000 		.space	8
 181      00000000 
 182              		.global	t2
ARM GAS  /tmp/ccaFhF6z.s 			page 4


 183              		.section	.bss.t2,"aw",%nobits
 184              		.align	3
 187              	t2:
 188 0000 00000000 		.space	8
 188      00000000 
 189              		.comm	configTX,8,4
 190              		.global	state
 191              		.section	.bss.state,"aw",%nobits
 194              	state:
 195 0000 00       		.space	1
 196              		.global	ConfigSel
 197              		.section	.data.ConfigSel,"aw"
 200              	ConfigSel:
 201 0000 01       		.byte	1
 202              		.global	numRanged
 203              		.section	.bss.numRanged,"aw",%nobits
 204              		.align	1
 207              	numRanged:
 208 0000 0000     		.space	2
 209              		.comm	ranges,16000,8
 210              		.global	numMeasure
 211              		.section	.data.numMeasure,"aw"
 212              		.align	1
 215              	numMeasure:
 216 0000 C800     		.short	200
 217              		.section	.text.__io_putchar,"ax",%progbits
 218              		.align	1
 219              		.global	__io_putchar
 220              		.arch armv7e-m
 221              		.syntax unified
 222              		.thumb
 223              		.thumb_func
 224              		.fpu fpv4-sp-d16
 226              	__io_putchar:
 227              	.LFB133:
 228              		.file 1 "Src/main.c"
   1:Src/main.c    **** /* USER CODE BEGIN Header */
   2:Src/main.c    **** /**
   3:Src/main.c    ****   ******************************************************************************
   4:Src/main.c    ****   * @file           : main.c
   5:Src/main.c    ****   * @brief          : Main program body
   6:Src/main.c    ****   ******************************************************************************
   7:Src/main.c    ****   * @attention
   8:Src/main.c    ****   *
   9:Src/main.c    ****   * <h2><center>&copy; Copyright (c) 2020 STMicroelectronics.
  10:Src/main.c    ****   * All rights reserved.</center></h2>
  11:Src/main.c    ****   *
  12:Src/main.c    ****   * This software component is licensed by ST under Ultimate Liberty license
  13:Src/main.c    ****   * SLA0044, the "License"; You may not use this file except in compliance with
  14:Src/main.c    ****   * the License. You may obtain a copy of the License at:
  15:Src/main.c    ****   *                             www.st.com/SLA0044
  16:Src/main.c    ****   *
  17:Src/main.c    ****   ******************************************************************************
  18:Src/main.c    ****   */
  19:Src/main.c    **** /* USER CODE END Header */
  20:Src/main.c    **** 
  21:Src/main.c    **** /* Includes ------------------------------------------------------------------*/
ARM GAS  /tmp/ccaFhF6z.s 			page 5


  22:Src/main.c    **** #include "main.h"
  23:Src/main.c    **** #include "usb_device.h"
  24:Src/main.c    **** 
  25:Src/main.c    **** /* Private includes ----------------------------------------------------------*/
  26:Src/main.c    **** /* USER CODE BEGIN Includes */
  27:Src/main.c    **** 
  28:Src/main.c    **** #include "usbd_cdc_if.h"
  29:Src/main.c    **** #include <stdio.h>
  30:Src/main.c    **** #include <stdlib.h>
  31:Src/main.c    **** #include <stdbool.h>
  32:Src/main.c    **** 
  33:Src/main.c    **** /************************************************ DECAWAVE *******************************/
  34:Src/main.c    **** #include "port.h"
  35:Src/main.c    **** #include "deca_device_api.h"
  36:Src/main.c    **** #include "deca_regs.h"
  37:Src/main.c    **** 
  38:Src/main.c    **** /* USER CODE END Includes */
  39:Src/main.c    **** 
  40:Src/main.c    **** /* Private typedef -----------------------------------------------------------*/
  41:Src/main.c    **** /* USER CODE BEGIN PTD */
  42:Src/main.c    **** 
  43:Src/main.c    **** /* Configuration enum */
  44:Src/main.c    **** typedef enum
  45:Src/main.c    **** {
  46:Src/main.c    ****     LongData_Fast,
  47:Src/main.c    ****     ShortData_Fast,
  48:Src/main.c    **** 		LongData_Range
  49:Src/main.c    **** } configSel_t;
  50:Src/main.c    **** 
  51:Src/main.c    **** /* FSM state enum */
  52:Src/main.c    **** typedef enum
  53:Src/main.c    **** {
  54:Src/main.c    ****     IDLE,
  55:Src/main.c    ****     RECEIVE_I,
  56:Src/main.c    ****     WAIT,
  57:Src/main.c    ****     PROCESS,
  58:Src/main.c    **** 		INITIATOR
  59:Src/main.c    **** } tag_FSM_state_t;
  60:Src/main.c    **** /* USER CODE END PTD */
  61:Src/main.c    **** 
  62:Src/main.c    **** /* Private define ------------------------------------------------------------*/
  63:Src/main.c    **** /* USER CODE BEGIN PD */
  64:Src/main.c    **** 
  65:Src/main.c    **** /************************************************ DECAWAVE *******************************/
  66:Src/main.c    **** /* Inter-ranging delay period, in milliseconds. */
  67:Src/main.c    **** #define RNG_DELAY_MS 500
  68:Src/main.c    **** 
  69:Src/main.c    **** /* Buffer size to hold ranging measurements */
  70:Src/main.c    **** #define RANGE_BUF_SIZE 2000
  71:Src/main.c    **** 
  72:Src/main.c    **** /* Number of Measurements to perform in each run */
  73:Src/main.c    **** #define NUM_MEASUREMENTS 200
  74:Src/main.c    **** 
  75:Src/main.c    **** /* Default antenna delay values for 64 MHz PRF. See NOTE 2 below. */
  76:Src/main.c    **** #define TX_ANT_DLY 16436
  77:Src/main.c    **** #define RX_ANT_DLY 16436
  78:Src/main.c    **** 
ARM GAS  /tmp/ccaFhF6z.s 			page 6


  79:Src/main.c    **** /* Length of the common part of the message (up to and including the function code, see NOTE 3 belo
  80:Src/main.c    **** #define ALL_MSG_COMMON_LEN 10
  81:Src/main.c    **** /* Indexes to access some of the fields in the frames defined above. */
  82:Src/main.c    **** #define ALL_MSG_SN_IDX 2
  83:Src/main.c    **** #define FINAL_MSG_POLL_TX_TS_IDX 10
  84:Src/main.c    **** #define FINAL_MSG_RESP_RX_TS_IDX 14
  85:Src/main.c    **** #define FINAL_MSG_FINAL_TX_TS_IDX 18
  86:Src/main.c    **** #define FINAL_MSG_TS_LEN 4
  87:Src/main.c    **** 
  88:Src/main.c    **** /* Buffer to store received response message.
  89:Src/main.c    ****  * Its size is adjusted to longest frame that this example code is supposed to handle. */
  90:Src/main.c    **** #define RX_BUF_LEN 24
  91:Src/main.c    **** 
  92:Src/main.c    **** /* UWB microsecond (uus) to device time unit (dtu, around 15.65 ps) conversion factor.
  93:Src/main.c    ****  * 1 uus = 512 / 499.2 µs and 1 µs = 499.2 * 128 dtu. */
  94:Src/main.c    **** #define UUS_TO_DWT_TIME 65536
  95:Src/main.c    **** 
  96:Src/main.c    **** /* Delay between frames, in UWB microseconds. See NOTE 4 below. */
  97:Src/main.c    **** /* This is the delay from Frame RX timestamp to TX reply timestamp used for calculating/setting the
  98:Src/main.c    ****  * frame length of approximately 2.46 ms with above configuration. */
  99:Src/main.c    **** //#define POLL_RX_TO_RESP_TX_DLY_UUS 3500			//ShortData_Fast
 100:Src/main.c    **** //#define POLL_RX_TO_RESP_TX_DLY_UUS 3500				//LongData_Fast
 101:Src/main.c    **** #define POLL_RX_TO_RESP_TX_DLY_UUS 3500
 102:Src/main.c    **** /* This is the delay from the end of the frame transmission to the enable of the receiver, as progr
 103:Src/main.c    **** //#define RESP_TX_TO_FINAL_RX_DLY_UUS 300			//ShortData_Fast
 104:Src/main.c    **** //#define RESP_TX_TO_FINAL_RX_DLY_UUS 300				//LongData_Fast
 105:Src/main.c    **** #define RESP_TX_TO_FINAL_RX_DLY_UUS 300
 106:Src/main.c    **** /* Receive final timeout. See NOTE 5 below. */
 107:Src/main.c    **** //#define FINAL_RX_TIMEOUT_UUS    5000				//ShortData_Fast
 108:Src/main.c    **** //#define FINAL_RX_TIMEOUT_UUS    10000				//LongData_Fast
 109:Src/main.c    **** //#define FINAL_RX_TIMEOUT_UUS    20000				//LongData_Range
 110:Src/main.c    **** #define FINAL_RX_TIMEOUT_UUS    20000
 111:Src/main.c    **** 
 112:Src/main.c    **** /* This is the delay from the end of the frame transmission to the enable of the receiver, as progr
 113:Src/main.c    **** //#define POLL_TX_TO_RESP_RX_DLY_UUS 300			//ShortData_Fast
 114:Src/main.c    **** //#define POLL_TX_TO_RESP_RX_DLY_UUS 300				//LongData_Fast
 115:Src/main.c    **** #define POLL_TX_TO_RESP_RX_DLY_UUS 300
 116:Src/main.c    **** /* This is the delay from Frame RX timestamp to TX reply timestamp used for calculating/setting the
 117:Src/main.c    ****  * frame length of approximately 2.66 ms with above configuration. */
 118:Src/main.c    **** //#define RESP_RX_TO_FINAL_TX_DLY_UUS 3500		//ShortData_Fast
 119:Src/main.c    **** //#define RESP_RX_TO_FINAL_TX_DLY_UUS 3500			//LongData_Fast
 120:Src/main.c    **** #define RESP_RX_TO_FINAL_TX_DLY_UUS 3500
 121:Src/main.c    **** /* Receive response timeout. See NOTE 5 below. */
 122:Src/main.c    **** //#define RESP_RX_TIMEOUT_UUS 5000						//ShortData_Fast
 123:Src/main.c    **** //#define RESP_RX_TIMEOUT_UUS 10000						//LongData_Fast
 124:Src/main.c    **** //#define RESP_RX_TIMEOUT_UUS 20000						//LongData_Range
 125:Src/main.c    **** #define RESP_RX_TIMEOUT_UUS 20000
 126:Src/main.c    **** 
 127:Src/main.c    **** /* Preamble timeout, in multiple of PAC size. See NOTE 6 below. */
 128:Src/main.c    **** //#define PRE_TIMEOUT 8
 129:Src/main.c    **** #define PRE_TIMEOUT 60
 130:Src/main.c    **** 
 131:Src/main.c    **** /* Speed of light in air, in metres per second. */
 132:Src/main.c    **** #define SPEED_OF_LIGHT 299702547
 133:Src/main.c    **** 
 134:Src/main.c    **** /* USER CODE END PD */
 135:Src/main.c    **** 
ARM GAS  /tmp/ccaFhF6z.s 			page 7


 136:Src/main.c    **** /* Private macro -------------------------------------------------------------*/
 137:Src/main.c    **** /* USER CODE BEGIN PM */
 138:Src/main.c    **** 
 139:Src/main.c    **** /* USER CODE END PM */
 140:Src/main.c    **** 
 141:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
 142:Src/main.c    **** SPI_HandleTypeDef hspi1;
 143:Src/main.c    **** 
 144:Src/main.c    **** TIM_HandleTypeDef htim2;
 145:Src/main.c    **** 
 146:Src/main.c    **** /* USER CODE BEGIN PV */
 147:Src/main.c    **** 
 148:Src/main.c    **** /************************************************ DECAWAVE *******************************/
 149:Src/main.c    **** 
 150:Src/main.c    **** /*	Configuration modes
 151:Src/main.c    **** 1. MODE_SHORTDATA_FAST[] = {TRX_RATE_6800KBPS, TX_PULSE_FREQ_64MHZ, TX_PREAMBLE_LEN_128};
 152:Src/main.c    **** 
 153:Src/main.c    **** 2. MODE_LONGDATA_RANGE[] = {TRX_RATE_110KBPS, TX_PULSE_FREQ_64MHZ, TX_PREAMBLE_LEN_1024};
 154:Src/main.c    **** 
 155:Src/main.c    **** 3. MODE_LONGDATA_FAST[] = {TRX_RATE_6800KBPS, TX_PULSE_FREQ_64MHZ, TX_PREAMBLE_LEN_1024};
 156:Src/main.c    **** */
 157:Src/main.c    **** 
 158:Src/main.c    **** /* Default communication configuration. We use here EVK1000's mode 4. See NOTE 1 below. */
 159:Src/main.c    **** static dwt_config_t config_ShortData_Fast = {
 160:Src/main.c    ****     2,               /* Channel number. */
 161:Src/main.c    ****     DWT_PRF_64M,     /* Pulse repetition frequency. */
 162:Src/main.c    ****     DWT_PLEN_128,    /* Preamble length. Used in TX only. */
 163:Src/main.c    ****     DWT_PAC8,        /* Preamble acquisition chunk size. Used in RX only. */
 164:Src/main.c    ****     9,               /* TX preamble code. Used in TX only. */
 165:Src/main.c    ****     9,               /* RX preamble code. Used in RX only. */
 166:Src/main.c    ****     0,               /* 0 to use standard SFD, 1 to use non-standard SFD. */
 167:Src/main.c    ****     DWT_BR_6M8,      /* Data rate. */
 168:Src/main.c    ****     DWT_PHRMODE_STD, /* PHY header mode. */
 169:Src/main.c    ****     (129 + 8 - 8)    /* SFD timeout (preamble length + 1 + SFD length - PAC size). Used in RX only.
 170:Src/main.c    **** };
 171:Src/main.c    **** 
 172:Src/main.c    **** static dwt_config_t config_LongData_Range = {
 173:Src/main.c    ****     2,               /* Channel number. */
 174:Src/main.c    ****     DWT_PRF_64M,     /* Pulse repetition frequency. */
 175:Src/main.c    ****     DWT_PLEN_1024,   /* Preamble length. Used in TX only. */
 176:Src/main.c    ****     DWT_PAC32,        /* Preamble acquisition chunk size. Used in RX only. */
 177:Src/main.c    ****     9,               /* TX preamble code. Used in TX only. */
 178:Src/main.c    ****     9,               /* RX preamble code. Used in RX only. */
 179:Src/main.c    ****     1,               /* 0 to use standard SFD, 1 to use non-standard SFD. */
 180:Src/main.c    ****     DWT_BR_110K,     /* Data rate. */
 181:Src/main.c    ****     DWT_PHRMODE_STD, /* PHY header mode. */
 182:Src/main.c    ****     (1025 + 64 - 32)   /* SFD timeout (preamble length + 1 + SFD length - PAC size). Used in RX onl
 183:Src/main.c    **** };
 184:Src/main.c    **** 
 185:Src/main.c    **** static dwt_config_t config_LongData_Fast = {
 186:Src/main.c    ****     2,               /* Channel number. */
 187:Src/main.c    ****     DWT_PRF_64M,     /* Pulse repetition frequency. */
 188:Src/main.c    ****     DWT_PLEN_1024,    /* Preamble length. Used in TX only. */
 189:Src/main.c    ****     DWT_PAC64,        /* Preamble acquisition chunk size. Used in RX only. */
 190:Src/main.c    ****     9,               /* TX preamble code. Used in TX only. */
 191:Src/main.c    ****     9,               /* RX preamble code. Used in RX only. */
 192:Src/main.c    ****     0,               /* 0 to use standard SFD, 1 to use non-standard SFD. */
ARM GAS  /tmp/ccaFhF6z.s 			page 8


 193:Src/main.c    ****     DWT_BR_6M8,      /* Data rate. */
 194:Src/main.c    ****     DWT_PHRMODE_STD, /* PHY header mode. */
 195:Src/main.c    ****     (1025 + 8 - 64)    /* SFD timeout (preamble length + 1 + SFD length - PAC size). Used in RX onl
 196:Src/main.c    **** };
 197:Src/main.c    **** 
 198:Src/main.c    **** /* Frames used in the ranging process. See NOTE 3 below. */
 199:Src/main.c    **** static uint8 rx_poll_msg[] = {0x41, 0x88, 0, 0xCA, 0xDE, 'W', 'A', 'V', 'E', 0x21, 0, 0};
 200:Src/main.c    **** static uint8 tx_resp_msg[] = {0x41, 0x88, 0, 0xCA, 0xDE, 'V', 'E', 'W', 'A', 0x10, 0x02, 0, 0, 0, 0
 201:Src/main.c    **** static uint8 rx_final_msg[] = {0x41, 0x88, 0, 0xCA, 0xDE, 'W', 'A', 'V', 'E', 0x23, 0, 0, 0, 0, 0, 
 202:Src/main.c    **** 
 203:Src/main.c    **** static uint8 tx_poll_msg[] = {0x41, 0x88, 0, 0xCA, 0xDE, 'W', 'A', 'V', 'E', 0x21, 0, 0};
 204:Src/main.c    **** static uint8 rx_resp_msg[] = {0x41, 0x88, 0, 0xCA, 0xDE, 'V', 'E', 'W', 'A', 0x10, 0x02, 0, 0, 0, 0
 205:Src/main.c    **** static uint8 tx_final_msg[] = {0x41, 0x88, 0, 0xCA, 0xDE, 'W', 'A', 'V', 'E', 0x23, 0, 0, 0, 0, 0, 
 206:Src/main.c    **** 	
 207:Src/main.c    **** /* Frame sequence number, incremented after each transmission. */
 208:Src/main.c    **** static uint8 frame_seq_nb_initiator = 0;
 209:Src/main.c    **** static uint8 frame_seq_nb_responder = 0;
 210:Src/main.c    **** 	
 211:Src/main.c    **** static uint8 rx_buffer[RX_BUF_LEN];
 212:Src/main.c    **** 
 213:Src/main.c    **** /* Hold copy of status register state here for reference so that it can be examined at a debug brea
 214:Src/main.c    **** static uint32 status_reg = 0;
 215:Src/main.c    **** 
 216:Src/main.c    **** static uint64 poll_rx_ts;
 217:Src/main.c    **** static uint64 resp_tx_ts;
 218:Src/main.c    **** static uint64 final_rx_ts;
 219:Src/main.c    **** 
 220:Src/main.c    **** static uint64 poll_tx_ts;
 221:Src/main.c    **** static uint64 resp_rx_ts;
 222:Src/main.c    **** static uint64 final_tx_ts;
 223:Src/main.c    **** 
 224:Src/main.c    **** /* Hold copies of computed time of flight and distance here for reference so that it can be examine
 225:Src/main.c    **** static double tof;
 226:Src/main.c    **** static double distance;
 227:Src/main.c    **** 	
 228:Src/main.c    **** /* timing variables to determine the ranging period */
 229:Src/main.c    **** uint64_t t1 = 0;
 230:Src/main.c    **** uint64_t t2 = 0;
 231:Src/main.c    **** 
 232:Src/main.c    **** dwt_txconfig_t    configTX;
 233:Src/main.c    **** 
 234:Src/main.c    **** tag_FSM_state_t state = IDLE;
 235:Src/main.c    **** 
 236:Src/main.c    **** /* Variable to set and select the configuration mode */
 237:Src/main.c    **** configSel_t ConfigSel = ShortData_Fast;
 238:Src/main.c    **** 
 239:Src/main.c    **** /* Buffer to save ranging distances */
 240:Src/main.c    **** uint16_t numRanged = 0;
 241:Src/main.c    **** double ranges[RANGE_BUF_SIZE];
 242:Src/main.c    **** 
 243:Src/main.c    **** 
 244:Src/main.c    **** uint16_t numMeasure = NUM_MEASUREMENTS;
 245:Src/main.c    **** 
 246:Src/main.c    **** /* USER CODE END PV */
 247:Src/main.c    **** 
 248:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
 249:Src/main.c    **** void SystemClock_Config(void);
ARM GAS  /tmp/ccaFhF6z.s 			page 9


 250:Src/main.c    **** static void MX_GPIO_Init(void);
 251:Src/main.c    **** static void MX_SPI1_Init(void);
 252:Src/main.c    **** static void MX_TIM2_Init(void);
 253:Src/main.c    **** 
 254:Src/main.c    **** /* USER CODE BEGIN PFP */
 255:Src/main.c    **** 
 256:Src/main.c    **** /************************************************ DECAWAVE *******************************/
 257:Src/main.c    **** uint64_t getRxTimestamp(void);
 258:Src/main.c    **** uint64_t getTxTimestamp(void);
 259:Src/main.c    **** 
 260:Src/main.c    **** /* Declaration of static functions. */
 261:Src/main.c    **** static void MX_DWM_Init(volatile bool responder);
 262:Src/main.c    **** static void initiator_go (uint16_t numMeasure);
 263:Src/main.c    **** static void final_msg_get_ts(const uint8 *ts_field, uint32 *ts);
 264:Src/main.c    **** static void final_msg_set_ts(uint8 *ts_field, uint64 ts);
 265:Src/main.c    **** static void tx_conf_cb(const dwt_cb_data_t *);
 266:Src/main.c    **** static void rx_ok_cb(const dwt_cb_data_t *);
 267:Src/main.c    **** static void rx_to_cb(const dwt_cb_data_t *);
 268:Src/main.c    **** static void rx_err_cb(const dwt_cb_data_t *);
 269:Src/main.c    **** /* USER CODE END PFP */
 270:Src/main.c    **** 
 271:Src/main.c    **** /* Private user code ---------------------------------------------------------*/
 272:Src/main.c    **** /* USER CODE BEGIN 0 */
 273:Src/main.c    **** #ifdef __GNUC__
 274:Src/main.c    **** /* With GCC/RAISONANCE, small msg_info (option LD Linker->Libraries->Small msg_info
 275:Src/main.c    ****    set to 'Yes') calls __io_putchar() */
 276:Src/main.c    **** #define PUTCHAR_PROTOTYPE int __io_putchar(int ch)
 277:Src/main.c    **** #define GETCHAR_PROTOTYPE int __io_getchar(void)
 278:Src/main.c    **** #else
 279:Src/main.c    **** #define PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)
 280:Src/main.c    **** #define GETCHAR_PROTOTYPE int fgetc(FILE *f)
 281:Src/main.c    **** #endif /* __GNUC__ */
 282:Src/main.c    **** 
 283:Src/main.c    **** /**
 284:Src/main.c    ****   * @brief Retargets the C library printf function to the USB.
 285:Src/main.c    ****   * @param None
 286:Src/main.c    ****   * @retval None
 287:Src/main.c    ****   */
 288:Src/main.c    **** PUTCHAR_PROTOTYPE
 289:Src/main.c    **** {
 229              		.loc 1 289 1
 230              		.cfi_startproc
 231              		@ args = 0, pretend = 0, frame = 8
 232              		@ frame_needed = 1, uses_anonymous_args = 0
 233 0000 80B5     		push	{r7, lr}
 234              	.LCFI0:
 235              		.cfi_def_cfa_offset 8
 236              		.cfi_offset 7, -8
 237              		.cfi_offset 14, -4
 238 0002 82B0     		sub	sp, sp, #8
 239              	.LCFI1:
 240              		.cfi_def_cfa_offset 16
 241 0004 00AF     		add	r7, sp, #0
 242              	.LCFI2:
 243              		.cfi_def_cfa_register 7
 244 0006 7860     		str	r0, [r7, #4]
 290:Src/main.c    ****   /* Place your implementation of fputc here */
ARM GAS  /tmp/ccaFhF6z.s 			page 10


 291:Src/main.c    ****   /* e.g. write a character to the serial port and Loop until the end of transmission */
 292:Src/main.c    ****   while (USBD_OK != CDC_Transmit_FS((uint8_t *) &ch, 1))
 245              		.loc 1 292 9
 246 0008 00BF     		nop
 247              	.L2:
 248              		.loc 1 292 21 discriminator 1
 249 000a 3B1D     		adds	r3, r7, #4
 250 000c 0121     		movs	r1, #1
 251 000e 1846     		mov	r0, r3
 252 0010 FFF7FEFF 		bl	CDC_Transmit_FS
 253 0014 0346     		mov	r3, r0
 254              		.loc 1 292 9 discriminator 1
 255 0016 002B     		cmp	r3, #0
 256 0018 F7D1     		bne	.L2
 293:Src/main.c    ****   {
 294:Src/main.c    ****     ;
 295:Src/main.c    ****   }
 296:Src/main.c    ****   return ch;
 257              		.loc 1 296 10
 258 001a 7B68     		ldr	r3, [r7, #4]
 297:Src/main.c    **** }
 259              		.loc 1 297 1
 260 001c 1846     		mov	r0, r3
 261 001e 0837     		adds	r7, r7, #8
 262              	.LCFI3:
 263              		.cfi_def_cfa_offset 8
 264 0020 BD46     		mov	sp, r7
 265              	.LCFI4:
 266              		.cfi_def_cfa_register 13
 267              		@ sp needed
 268 0022 80BD     		pop	{r7, pc}
 269              		.cfi_endproc
 270              	.LFE133:
 272              		.section	.rodata
 273              		.align	2
 274              	.LC0:
 275 0000 53746172 		.ascii	"Starting the Great Application!!\000"
 275      74696E67 
 275      20746865 
 275      20477265 
 275      61742041 
 276 0021 000000   		.align	2
 277              	.LC1:
 278 0024 49444C45 		.ascii	"IDLE state\000"
 278      20737461 
 278      746500
 279 002f 00       		.align	2
 280              	.LC2:
 281 0030 4D656173 		.ascii	"Measurement: %d, Distance: %f, Time: %llu\012\000"
 281      7572656D 
 281      656E743A 
 281      2025642C 
 281      20446973 
 282 005b 00       		.align	2
 283              	.LC3:
 284 005c 496E6974 		.ascii	"Initiator state\000"
 284      6961746F 
ARM GAS  /tmp/ccaFhF6z.s 			page 11


 284      72207374 
 284      61746500 
 285              		.section	.text.main,"ax",%progbits
 286              		.align	1
 287              		.global	main
 288              		.syntax unified
 289              		.thumb
 290              		.thumb_func
 291              		.fpu fpv4-sp-d16
 293              	main:
 294              	.LFB134:
 298:Src/main.c    **** /* USER CODE END 0 */
 299:Src/main.c    **** 
 300:Src/main.c    **** /**
 301:Src/main.c    ****   * @brief  The application entry point.
 302:Src/main.c    ****   * @retval int
 303:Src/main.c    ****   */
 304:Src/main.c    **** int main(void)
 305:Src/main.c    **** {
 295              		.loc 1 305 1
 296              		.cfi_startproc
 297              		@ args = 0, pretend = 0, frame = 0
 298              		@ frame_needed = 1, uses_anonymous_args = 0
 299 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 300              	.LCFI5:
 301              		.cfi_def_cfa_offset 20
 302              		.cfi_offset 4, -20
 303              		.cfi_offset 5, -16
 304              		.cfi_offset 6, -12
 305              		.cfi_offset 7, -8
 306              		.cfi_offset 14, -4
 307 0002 83B0     		sub	sp, sp, #12
 308              	.LCFI6:
 309              		.cfi_def_cfa_offset 32
 310 0004 02AF     		add	r7, sp, #8
 311              	.LCFI7:
 312              		.cfi_def_cfa 7, 24
 306:Src/main.c    ****   /* USER CODE BEGIN 1 */
 307:Src/main.c    **** 
 308:Src/main.c    ****   /* USER CODE END 1 */
 309:Src/main.c    **** 
 310:Src/main.c    ****   /* MCU Configuration--------------------------------------------------------*/
 311:Src/main.c    **** 
 312:Src/main.c    ****   /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
 313:Src/main.c    ****   HAL_Init();
 313              		.loc 1 313 3
 314 0006 FFF7FEFF 		bl	HAL_Init
 314:Src/main.c    **** 
 315:Src/main.c    ****   /* USER CODE BEGIN Init */
 316:Src/main.c    **** 
 317:Src/main.c    ****   /* USER CODE END Init */
 318:Src/main.c    **** 
 319:Src/main.c    ****   /* Configure the system clock */
 320:Src/main.c    ****   SystemClock_Config();
 315              		.loc 1 320 3
 316 000a FFF7FEFF 		bl	SystemClock_Config
 321:Src/main.c    **** 
ARM GAS  /tmp/ccaFhF6z.s 			page 12


 322:Src/main.c    ****   /* USER CODE BEGIN SysInit */
 323:Src/main.c    **** 
 324:Src/main.c    ****   /* USER CODE END SysInit */
 325:Src/main.c    **** 
 326:Src/main.c    ****   /* Initialize all configured peripherals */
 327:Src/main.c    ****   MX_GPIO_Init();
 317              		.loc 1 327 3
 318 000e FFF7FEFF 		bl	MX_GPIO_Init
 328:Src/main.c    ****   MX_SPI1_Init();
 319              		.loc 1 328 3
 320 0012 FFF7FEFF 		bl	MX_SPI1_Init
 329:Src/main.c    ****   MX_TIM2_Init();
 321              		.loc 1 329 3
 322 0016 FFF7FEFF 		bl	MX_TIM2_Init
 330:Src/main.c    ****   MX_USB_DEVICE_Init();
 323              		.loc 1 330 3
 324 001a FFF7FEFF 		bl	MX_USB_DEVICE_Init
 331:Src/main.c    ****   /* USER CODE BEGIN 2 */
 332:Src/main.c    **** 
 333:Src/main.c    **** 	HAL_Delay (3000);
 325              		.loc 1 333 2
 326 001e 40F6B830 		movw	r0, #3000
 327 0022 FFF7FEFF 		bl	HAL_Delay
 334:Src/main.c    **** 	printf("Starting the Great Application!!\n");
 328              		.loc 1 334 2
 329 0026 3C48     		ldr	r0, .L13
 330 0028 FFF7FEFF 		bl	puts
 331              	.L12:
 335:Src/main.c    **** 	
 336:Src/main.c    ****   /* USER CODE END 2 */
 337:Src/main.c    **** 
 338:Src/main.c    ****   /* Infinite loop */
 339:Src/main.c    ****   /* USER CODE BEGIN WHILE */
 340:Src/main.c    ****   while (1)
 341:Src/main.c    ****   {
 342:Src/main.c    **** 		/* State machine of the application, application starts in IDLE mode and configs for responder,
 343:Src/main.c    **** 			then it goes to RECEIVE_I which enables RX, it then goes to WAIT state to wait for ranging to co
 344:Src/main.c    **** 			finally, whenever the ranging ends, the application goes to PROCESS state and sends measured dis
 345:Src/main.c    **** 			If the debug button is pressed, application goes into INITIATOR state and starts ranging for the
 346:Src/main.c    **** 		switch (state)
 332              		.loc 1 346 3
 333 002c 3B4B     		ldr	r3, .L13+4
 334 002e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 335 0030 042B     		cmp	r3, #4
 336 0032 FBD8     		bhi	.L12
 337 0034 01A2     		adr	r2, .L7
 338 0036 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 339 003a 00BF     		.p2align 2
 340              	.L7:
 341 003c 51000000 		.word	.L11+1
 342 0040 6B000000 		.word	.L10+1
 343 0044 2D000000 		.word	.L12+1
 344 0048 89000000 		.word	.L8+1
 345 004c F3000000 		.word	.L6+1
 346              		.p2align 1
 347              	.L11:
 347:Src/main.c    **** 		{
ARM GAS  /tmp/ccaFhF6z.s 			page 13


 348:Src/main.c    **** 			case IDLE: 
 349:Src/main.c    **** 				printf ("IDLE state\n");
 348              		.loc 1 349 5
 349 0050 3348     		ldr	r0, .L13+8
 350 0052 FFF7FEFF 		bl	puts
 350:Src/main.c    **** 				/* Initilizing Decawave module for responder configuration */
 351:Src/main.c    **** 				MX_DWM_Init(1);
 351              		.loc 1 351 5
 352 0056 0120     		movs	r0, #1
 353 0058 FFF7FEFF 		bl	MX_DWM_Init
 352:Src/main.c    **** 				HAL_NVIC_EnableIRQ(EXTI2_IRQn);
 354              		.loc 1 352 5
 355 005c 0820     		movs	r0, #8
 356 005e FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 353:Src/main.c    **** 				state = RECEIVE_I;
 357              		.loc 1 353 11
 358 0062 2E4B     		ldr	r3, .L13+4
 359 0064 0122     		movs	r2, #1
 360 0066 1A70     		strb	r2, [r3]
 354:Src/main.c    **** 				break;
 361              		.loc 1 354 5
 362 0068 55E0     		b	.L5
 363              	.L10:
 355:Src/main.c    **** 
 356:Src/main.c    **** 			case RECEIVE_I:
 357:Src/main.c    **** 				//printf("STATE RECEIVE_I\n");
 358:Src/main.c    **** 				HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_RESET);
 364              		.loc 1 358 5
 365 006a 0022     		movs	r2, #0
 366 006c 2021     		movs	r1, #32
 367 006e 2D48     		ldr	r0, .L13+12
 368 0070 FFF7FEFF 		bl	HAL_GPIO_WritePin
 359:Src/main.c    **** 				 /* Clear reception timeout to start next ranging process. */
 360:Src/main.c    **** 				dwt_setrxtimeout(0);
 369              		.loc 1 360 5
 370 0074 0020     		movs	r0, #0
 371 0076 FFF7FEFF 		bl	dwt_setrxtimeout
 361:Src/main.c    **** 				/* Activate reception immediately. */
 362:Src/main.c    **** 				dwt_rxenable(DWT_START_RX_IMMEDIATE);
 372              		.loc 1 362 5
 373 007a 0020     		movs	r0, #0
 374 007c FFF7FEFF 		bl	dwt_rxenable
 363:Src/main.c    **** 				state = WAIT;
 375              		.loc 1 363 11
 376 0080 264B     		ldr	r3, .L13+4
 377 0082 0222     		movs	r2, #2
 378 0084 1A70     		strb	r2, [r3]
 364:Src/main.c    **** 				break;
 379              		.loc 1 364 5
 380 0086 46E0     		b	.L5
 381              	.L8:
 365:Src/main.c    **** 
 366:Src/main.c    **** 			case WAIT:
 367:Src/main.c    **** 				break;
 368:Src/main.c    **** 
 369:Src/main.c    **** 			case PROCESS:
 370:Src/main.c    **** 				t2 = HAL_GetTick() - t1;
ARM GAS  /tmp/ccaFhF6z.s 			page 14


 382              		.loc 1 370 10
 383 0088 FFF7FEFF 		bl	HAL_GetTick
 384 008c 0346     		mov	r3, r0
 385 008e 1846     		mov	r0, r3
 386 0090 4FF00001 		mov	r1, #0
 387              		.loc 1 370 24
 388 0094 244B     		ldr	r3, .L13+16
 389 0096 D3E90023 		ldrd	r2, [r3]
 390 009a 841A     		subs	r4, r0, r2
 391 009c 61EB0305 		sbc	r5, r1, r3
 392              		.loc 1 370 8
 393 00a0 224B     		ldr	r3, .L13+20
 394 00a2 C3E90045 		strd	r4, [r3]
 371:Src/main.c    **** 				ranges[numRanged] = distance;
 395              		.loc 1 371 11
 396 00a6 224B     		ldr	r3, .L13+24
 397 00a8 1B88     		ldrh	r3, [r3]
 398 00aa 1946     		mov	r1, r3
 399              		.loc 1 371 23
 400 00ac 214B     		ldr	r3, .L13+28
 401 00ae D3E90023 		ldrd	r2, [r3]
 402 00b2 2148     		ldr	r0, .L13+32
 403 00b4 C900     		lsls	r1, r1, #3
 404 00b6 0144     		add	r1, r1, r0
 405 00b8 C1E90023 		strd	r2, [r1]
 372:Src/main.c    **** 				printf("Measurement: %d, Distance: %f, Time: %llu\n",numRanged,distance,t2);
 406              		.loc 1 372 5
 407 00bc 1C4B     		ldr	r3, .L13+24
 408 00be 1B88     		ldrh	r3, [r3]
 409 00c0 1E46     		mov	r6, r3
 410 00c2 1C4B     		ldr	r3, .L13+28
 411 00c4 D3E90001 		ldrd	r0, [r3]
 412 00c8 184B     		ldr	r3, .L13+20
 413 00ca D3E90023 		ldrd	r2, [r3]
 414 00ce CDE90023 		strd	r2, [sp]
 415 00d2 0246     		mov	r2, r0
 416 00d4 0B46     		mov	r3, r1
 417 00d6 3146     		mov	r1, r6
 418 00d8 1848     		ldr	r0, .L13+36
 419 00da FFF7FEFF 		bl	printf
 373:Src/main.c    **** 				numRanged++;
 420              		.loc 1 373 14
 421 00de 144B     		ldr	r3, .L13+24
 422 00e0 1B88     		ldrh	r3, [r3]
 423 00e2 0133     		adds	r3, r3, #1
 424 00e4 9AB2     		uxth	r2, r3
 425 00e6 124B     		ldr	r3, .L13+24
 426 00e8 1A80     		strh	r2, [r3]	@ movhi
 374:Src/main.c    **** 
 375:Src/main.c    **** 				state = RECEIVE_I;
 427              		.loc 1 375 11
 428 00ea 0C4B     		ldr	r3, .L13+4
 429 00ec 0122     		movs	r2, #1
 430 00ee 1A70     		strb	r2, [r3]
 376:Src/main.c    **** 				break; 
 431              		.loc 1 376 5
 432 00f0 11E0     		b	.L5
ARM GAS  /tmp/ccaFhF6z.s 			page 15


 433              	.L6:
 377:Src/main.c    **** 			
 378:Src/main.c    **** 			case INITIATOR:
 379:Src/main.c    **** 				/* Initilizing Decawave module for initiator configuration */
 380:Src/main.c    **** 				HAL_NVIC_DisableIRQ (EXTI2_IRQn);
 434              		.loc 1 380 5
 435 00f2 0820     		movs	r0, #8
 436 00f4 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 381:Src/main.c    **** 				printf("Initiator state\n");
 437              		.loc 1 381 5
 438 00f8 1148     		ldr	r0, .L13+40
 439 00fa FFF7FEFF 		bl	puts
 382:Src/main.c    **** 	
 383:Src/main.c    **** 				MX_DWM_Init (0);	
 440              		.loc 1 383 5
 441 00fe 0020     		movs	r0, #0
 442 0100 FFF7FEFF 		bl	MX_DWM_Init
 384:Src/main.c    **** 			
 385:Src/main.c    **** 				initiator_go(numMeasure);
 443              		.loc 1 385 5
 444 0104 0F4B     		ldr	r3, .L13+44
 445 0106 1B88     		ldrh	r3, [r3]
 446 0108 1846     		mov	r0, r3
 447 010a FFF7FEFF 		bl	initiator_go
 386:Src/main.c    **** 				
 387:Src/main.c    **** 				state = IDLE ;
 448              		.loc 1 387 11
 449 010e 034B     		ldr	r3, .L13+4
 450 0110 0022     		movs	r2, #0
 451 0112 1A70     		strb	r2, [r3]
 388:Src/main.c    **** 				break; 
 452              		.loc 1 388 5
 453 0114 00BF     		nop
 454              	.L5:
 346:Src/main.c    **** 		{
 455              		.loc 1 346 3
 456 0116 89E7     		b	.L12
 457              	.L14:
 458              		.align	2
 459              	.L13:
 460 0118 00000000 		.word	.LC0
 461 011c 00000000 		.word	state
 462 0120 24000000 		.word	.LC1
 463 0124 00040048 		.word	1207960576
 464 0128 00000000 		.word	t1
 465 012c 00000000 		.word	t2
 466 0130 00000000 		.word	numRanged
 467 0134 00000000 		.word	distance
 468 0138 00000000 		.word	ranges
 469 013c 30000000 		.word	.LC2
 470 0140 5C000000 		.word	.LC3
 471 0144 00000000 		.word	numMeasure
 472              		.cfi_endproc
 473              	.LFE134:
 475              		.section	.text.SystemClock_Config,"ax",%progbits
 476              		.align	1
 477              		.global	SystemClock_Config
ARM GAS  /tmp/ccaFhF6z.s 			page 16


 478              		.syntax unified
 479              		.thumb
 480              		.thumb_func
 481              		.fpu fpv4-sp-d16
 483              	SystemClock_Config:
 484              	.LFB135:
 389:Src/main.c    **** 		}
 390:Src/main.c    **** 
 391:Src/main.c    **** 
 392:Src/main.c    **** 
 393:Src/main.c    **** 				
 394:Src/main.c    ****     /* USER CODE END WHILE */
 395:Src/main.c    **** 
 396:Src/main.c    ****     /* USER CODE BEGIN 3 */
 397:Src/main.c    ****   }
 398:Src/main.c    ****   /* USER CODE END 3 */
 399:Src/main.c    **** }
 400:Src/main.c    **** 
 401:Src/main.c    **** /**
 402:Src/main.c    ****   * @brief System Clock Configuration
 403:Src/main.c    ****   * @retval None
 404:Src/main.c    ****   */
 405:Src/main.c    **** void SystemClock_Config(void)
 406:Src/main.c    **** {
 485              		.loc 1 406 1
 486              		.cfi_startproc
 487              		@ args = 0, pretend = 0, frame = 184
 488              		@ frame_needed = 1, uses_anonymous_args = 0
 489 0000 80B5     		push	{r7, lr}
 490              	.LCFI8:
 491              		.cfi_def_cfa_offset 8
 492              		.cfi_offset 7, -8
 493              		.cfi_offset 14, -4
 494 0002 AEB0     		sub	sp, sp, #184
 495              	.LCFI9:
 496              		.cfi_def_cfa_offset 192
 497 0004 00AF     		add	r7, sp, #0
 498              	.LCFI10:
 499              		.cfi_def_cfa_register 7
 407:Src/main.c    ****   RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 500              		.loc 1 407 22
 501 0006 07F17403 		add	r3, r7, #116
 502 000a 4422     		movs	r2, #68
 503 000c 0021     		movs	r1, #0
 504 000e 1846     		mov	r0, r3
 505 0010 FFF7FEFF 		bl	memset
 408:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 506              		.loc 1 408 22
 507 0014 07F16003 		add	r3, r7, #96
 508 0018 0022     		movs	r2, #0
 509 001a 1A60     		str	r2, [r3]
 510 001c 5A60     		str	r2, [r3, #4]
 511 001e 9A60     		str	r2, [r3, #8]
 512 0020 DA60     		str	r2, [r3, #12]
 513 0022 1A61     		str	r2, [r3, #16]
 409:Src/main.c    ****   RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
 514              		.loc 1 409 28
ARM GAS  /tmp/ccaFhF6z.s 			page 17


 515 0024 3B46     		mov	r3, r7
 516 0026 6022     		movs	r2, #96
 517 0028 0021     		movs	r1, #0
 518 002a 1846     		mov	r0, r3
 519 002c FFF7FEFF 		bl	memset
 410:Src/main.c    **** 
 411:Src/main.c    ****   /** Initializes the CPU, AHB and APB busses clocks 
 412:Src/main.c    ****   */
 413:Src/main.c    ****   RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
 520              		.loc 1 413 36
 521 0030 0123     		movs	r3, #1
 522 0032 7B67     		str	r3, [r7, #116]
 414:Src/main.c    ****   RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 523              		.loc 1 414 30
 524 0034 4FF48033 		mov	r3, #65536
 525 0038 BB67     		str	r3, [r7, #120]
 415:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 526              		.loc 1 415 34
 527 003a 0223     		movs	r3, #2
 528 003c C7F89C30 		str	r3, [r7, #156]
 416:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 529              		.loc 1 416 35
 530 0040 0323     		movs	r3, #3
 531 0042 C7F8A030 		str	r3, [r7, #160]
 417:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLM = 1;
 532              		.loc 1 417 30
 533 0046 0123     		movs	r3, #1
 534 0048 C7F8A430 		str	r3, [r7, #164]
 418:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLN = 40;
 535              		.loc 1 418 30
 536 004c 2823     		movs	r3, #40
 537 004e C7F8A830 		str	r3, [r7, #168]
 419:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV7;
 538              		.loc 1 419 30
 539 0052 0723     		movs	r3, #7
 540 0054 C7F8AC30 		str	r3, [r7, #172]
 420:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLQ = RCC_PLLQ_DIV2;
 541              		.loc 1 420 30
 542 0058 0223     		movs	r3, #2
 543 005a C7F8B030 		str	r3, [r7, #176]
 421:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLR = RCC_PLLR_DIV4;
 544              		.loc 1 421 30
 545 005e 0423     		movs	r3, #4
 546 0060 C7F8B430 		str	r3, [r7, #180]
 422:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 547              		.loc 1 422 7
 548 0064 07F17403 		add	r3, r7, #116
 549 0068 1846     		mov	r0, r3
 550 006a FFF7FEFF 		bl	HAL_RCC_OscConfig
 551 006e 0346     		mov	r3, r0
 552              		.loc 1 422 6
 553 0070 002B     		cmp	r3, #0
 554 0072 01D0     		beq	.L16
 423:Src/main.c    ****   {
 424:Src/main.c    ****     Error_Handler();
 555              		.loc 1 424 5
 556 0074 FFF7FEFF 		bl	Error_Handler
ARM GAS  /tmp/ccaFhF6z.s 			page 18


 557              	.L16:
 425:Src/main.c    ****   }
 426:Src/main.c    ****   /** Initializes the CPU, AHB and APB busses clocks 
 427:Src/main.c    ****   */
 428:Src/main.c    ****   RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
 558              		.loc 1 428 31
 559 0078 0F23     		movs	r3, #15
 560 007a 3B66     		str	r3, [r7, #96]
 429:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 430:Src/main.c    ****   RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 561              		.loc 1 430 34
 562 007c 0323     		movs	r3, #3
 563 007e 7B66     		str	r3, [r7, #100]
 431:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 564              		.loc 1 431 35
 565 0080 0023     		movs	r3, #0
 566 0082 BB66     		str	r3, [r7, #104]
 432:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 567              		.loc 1 432 36
 568 0084 0023     		movs	r3, #0
 569 0086 FB66     		str	r3, [r7, #108]
 433:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 570              		.loc 1 433 36
 571 0088 0023     		movs	r3, #0
 572 008a 3B67     		str	r3, [r7, #112]
 434:Src/main.c    **** 
 435:Src/main.c    ****   if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_4) != HAL_OK)
 573              		.loc 1 435 7
 574 008c 07F16003 		add	r3, r7, #96
 575 0090 0421     		movs	r1, #4
 576 0092 1846     		mov	r0, r3
 577 0094 FFF7FEFF 		bl	HAL_RCC_ClockConfig
 578 0098 0346     		mov	r3, r0
 579              		.loc 1 435 6
 580 009a 002B     		cmp	r3, #0
 581 009c 01D0     		beq	.L17
 436:Src/main.c    ****   {
 437:Src/main.c    ****     Error_Handler();
 582              		.loc 1 437 5
 583 009e FFF7FEFF 		bl	Error_Handler
 584              	.L17:
 438:Src/main.c    ****   }
 439:Src/main.c    ****   PeriphClkInit.PeriphClockSelection = RCC_PERIPHCLK_USB;
 585              		.loc 1 439 38
 586 00a2 4FF40053 		mov	r3, #8192
 587 00a6 3B60     		str	r3, [r7]
 440:Src/main.c    ****   PeriphClkInit.UsbClockSelection = RCC_USBCLKSOURCE_PLLSAI1;
 588              		.loc 1 440 35
 589 00a8 4FF08063 		mov	r3, #67108864
 590 00ac BB64     		str	r3, [r7, #72]
 441:Src/main.c    ****   PeriphClkInit.PLLSAI1.PLLSAI1Source = RCC_PLLSOURCE_HSE;
 591              		.loc 1 441 39
 592 00ae 0323     		movs	r3, #3
 593 00b0 7B60     		str	r3, [r7, #4]
 442:Src/main.c    ****   PeriphClkInit.PLLSAI1.PLLSAI1M = 1;
 594              		.loc 1 442 34
 595 00b2 0123     		movs	r3, #1
ARM GAS  /tmp/ccaFhF6z.s 			page 19


 596 00b4 BB60     		str	r3, [r7, #8]
 443:Src/main.c    ****   PeriphClkInit.PLLSAI1.PLLSAI1N = 12;
 597              		.loc 1 443 34
 598 00b6 0C23     		movs	r3, #12
 599 00b8 FB60     		str	r3, [r7, #12]
 444:Src/main.c    ****   PeriphClkInit.PLLSAI1.PLLSAI1P = RCC_PLLP_DIV7;
 600              		.loc 1 444 34
 601 00ba 0723     		movs	r3, #7
 602 00bc 3B61     		str	r3, [r7, #16]
 445:Src/main.c    ****   PeriphClkInit.PLLSAI1.PLLSAI1Q = RCC_PLLQ_DIV2;
 603              		.loc 1 445 34
 604 00be 0223     		movs	r3, #2
 605 00c0 7B61     		str	r3, [r7, #20]
 446:Src/main.c    ****   PeriphClkInit.PLLSAI1.PLLSAI1R = RCC_PLLR_DIV2;
 606              		.loc 1 446 34
 607 00c2 0223     		movs	r3, #2
 608 00c4 BB61     		str	r3, [r7, #24]
 447:Src/main.c    ****   PeriphClkInit.PLLSAI1.PLLSAI1ClockOut = RCC_PLLSAI1_48M2CLK;
 609              		.loc 1 447 41
 610 00c6 4FF48013 		mov	r3, #1048576
 611 00ca FB61     		str	r3, [r7, #28]
 448:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK)
 612              		.loc 1 448 7
 613 00cc 3B46     		mov	r3, r7
 614 00ce 1846     		mov	r0, r3
 615 00d0 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 616 00d4 0346     		mov	r3, r0
 617              		.loc 1 448 6
 618 00d6 002B     		cmp	r3, #0
 619 00d8 01D0     		beq	.L18
 449:Src/main.c    ****   {
 450:Src/main.c    ****     Error_Handler();
 620              		.loc 1 450 5
 621 00da FFF7FEFF 		bl	Error_Handler
 622              	.L18:
 451:Src/main.c    ****   }
 452:Src/main.c    ****   /** Configure the main internal regulator output voltage 
 453:Src/main.c    ****   */
 454:Src/main.c    ****   if (HAL_PWREx_ControlVoltageScaling(PWR_REGULATOR_VOLTAGE_SCALE1) != HAL_OK)
 623              		.loc 1 454 7
 624 00de 4FF40070 		mov	r0, #512
 625 00e2 FFF7FEFF 		bl	HAL_PWREx_ControlVoltageScaling
 626 00e6 0346     		mov	r3, r0
 627              		.loc 1 454 6
 628 00e8 002B     		cmp	r3, #0
 629 00ea 01D0     		beq	.L20
 455:Src/main.c    ****   {
 456:Src/main.c    ****     Error_Handler();
 630              		.loc 1 456 5
 631 00ec FFF7FEFF 		bl	Error_Handler
 632              	.L20:
 457:Src/main.c    ****   }
 458:Src/main.c    **** }
 633              		.loc 1 458 1
 634 00f0 00BF     		nop
 635 00f2 B837     		adds	r7, r7, #184
 636              	.LCFI11:
ARM GAS  /tmp/ccaFhF6z.s 			page 20


 637              		.cfi_def_cfa_offset 8
 638 00f4 BD46     		mov	sp, r7
 639              	.LCFI12:
 640              		.cfi_def_cfa_register 13
 641              		@ sp needed
 642 00f6 80BD     		pop	{r7, pc}
 643              		.cfi_endproc
 644              	.LFE135:
 646              		.section	.text.MX_SPI1_Init,"ax",%progbits
 647              		.align	1
 648              		.syntax unified
 649              		.thumb
 650              		.thumb_func
 651              		.fpu fpv4-sp-d16
 653              	MX_SPI1_Init:
 654              	.LFB136:
 459:Src/main.c    **** 
 460:Src/main.c    **** /**
 461:Src/main.c    ****   * @brief SPI1 Initialization Function
 462:Src/main.c    ****   * @param None
 463:Src/main.c    ****   * @retval None
 464:Src/main.c    ****   */
 465:Src/main.c    **** static void MX_SPI1_Init(void)
 466:Src/main.c    **** {
 655              		.loc 1 466 1
 656              		.cfi_startproc
 657              		@ args = 0, pretend = 0, frame = 0
 658              		@ frame_needed = 1, uses_anonymous_args = 0
 659 0000 80B5     		push	{r7, lr}
 660              	.LCFI13:
 661              		.cfi_def_cfa_offset 8
 662              		.cfi_offset 7, -8
 663              		.cfi_offset 14, -4
 664 0002 00AF     		add	r7, sp, #0
 665              	.LCFI14:
 666              		.cfi_def_cfa_register 7
 467:Src/main.c    **** 
 468:Src/main.c    ****   /* USER CODE BEGIN SPI1_Init 0 */
 469:Src/main.c    **** 
 470:Src/main.c    ****   /* USER CODE END SPI1_Init 0 */
 471:Src/main.c    **** 
 472:Src/main.c    ****   /* USER CODE BEGIN SPI1_Init 1 */
 473:Src/main.c    **** 
 474:Src/main.c    ****   /* USER CODE END SPI1_Init 1 */
 475:Src/main.c    ****   /* SPI1 parameter configuration*/
 476:Src/main.c    ****   hspi1.Instance = SPI1;
 667              		.loc 1 476 18
 668 0004 1B4B     		ldr	r3, .L24
 669 0006 1C4A     		ldr	r2, .L24+4
 670 0008 1A60     		str	r2, [r3]
 477:Src/main.c    ****   hspi1.Init.Mode = SPI_MODE_MASTER;
 671              		.loc 1 477 19
 672 000a 1A4B     		ldr	r3, .L24
 673 000c 4FF48272 		mov	r2, #260
 674 0010 5A60     		str	r2, [r3, #4]
 478:Src/main.c    ****   hspi1.Init.Direction = SPI_DIRECTION_2LINES;
 675              		.loc 1 478 24
ARM GAS  /tmp/ccaFhF6z.s 			page 21


 676 0012 184B     		ldr	r3, .L24
 677 0014 0022     		movs	r2, #0
 678 0016 9A60     		str	r2, [r3, #8]
 479:Src/main.c    ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
 679              		.loc 1 479 23
 680 0018 164B     		ldr	r3, .L24
 681 001a 4FF4E062 		mov	r2, #1792
 682 001e DA60     		str	r2, [r3, #12]
 480:Src/main.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;
 683              		.loc 1 480 26
 684 0020 144B     		ldr	r3, .L24
 685 0022 0022     		movs	r2, #0
 686 0024 1A61     		str	r2, [r3, #16]
 481:Src/main.c    ****   hspi1.Init.CLKPhase = SPI_PHASE_1EDGE;
 687              		.loc 1 481 23
 688 0026 134B     		ldr	r3, .L24
 689 0028 0022     		movs	r2, #0
 690 002a 5A61     		str	r2, [r3, #20]
 482:Src/main.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
 691              		.loc 1 482 18
 692 002c 114B     		ldr	r3, .L24
 693 002e 4FF40072 		mov	r2, #512
 694 0032 9A61     		str	r2, [r3, #24]
 483:Src/main.c    ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_64;
 695              		.loc 1 483 32
 696 0034 0F4B     		ldr	r3, .L24
 697 0036 2822     		movs	r2, #40
 698 0038 DA61     		str	r2, [r3, #28]
 484:Src/main.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 699              		.loc 1 484 23
 700 003a 0E4B     		ldr	r3, .L24
 701 003c 0022     		movs	r2, #0
 702 003e 1A62     		str	r2, [r3, #32]
 485:Src/main.c    ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
 703              		.loc 1 485 21
 704 0040 0C4B     		ldr	r3, .L24
 705 0042 0022     		movs	r2, #0
 706 0044 5A62     		str	r2, [r3, #36]
 486:Src/main.c    ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 707              		.loc 1 486 29
 708 0046 0B4B     		ldr	r3, .L24
 709 0048 0022     		movs	r2, #0
 710 004a 9A62     		str	r2, [r3, #40]
 487:Src/main.c    ****   hspi1.Init.CRCPolynomial = 7;
 711              		.loc 1 487 28
 712 004c 094B     		ldr	r3, .L24
 713 004e 0722     		movs	r2, #7
 714 0050 DA62     		str	r2, [r3, #44]
 488:Src/main.c    ****   hspi1.Init.CRCLength = SPI_CRC_LENGTH_DATASIZE;
 715              		.loc 1 488 24
 716 0052 084B     		ldr	r3, .L24
 717 0054 0022     		movs	r2, #0
 718 0056 1A63     		str	r2, [r3, #48]
 489:Src/main.c    ****   hspi1.Init.NSSPMode = SPI_NSS_PULSE_DISABLE;
 719              		.loc 1 489 23
 720 0058 064B     		ldr	r3, .L24
 721 005a 0022     		movs	r2, #0
ARM GAS  /tmp/ccaFhF6z.s 			page 22


 722 005c 5A63     		str	r2, [r3, #52]
 490:Src/main.c    ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
 723              		.loc 1 490 7
 724 005e 0548     		ldr	r0, .L24
 725 0060 FFF7FEFF 		bl	HAL_SPI_Init
 726 0064 0346     		mov	r3, r0
 727              		.loc 1 490 6
 728 0066 002B     		cmp	r3, #0
 729 0068 01D0     		beq	.L23
 491:Src/main.c    ****   {
 492:Src/main.c    ****     Error_Handler();
 730              		.loc 1 492 5
 731 006a FFF7FEFF 		bl	Error_Handler
 732              	.L23:
 493:Src/main.c    ****   }
 494:Src/main.c    ****   /* USER CODE BEGIN SPI1_Init 2 */
 495:Src/main.c    **** 
 496:Src/main.c    ****   /* USER CODE END SPI1_Init 2 */
 497:Src/main.c    **** 
 498:Src/main.c    **** }
 733              		.loc 1 498 1
 734 006e 00BF     		nop
 735 0070 80BD     		pop	{r7, pc}
 736              	.L25:
 737 0072 00BF     		.align	2
 738              	.L24:
 739 0074 00000000 		.word	hspi1
 740 0078 00300140 		.word	1073819648
 741              		.cfi_endproc
 742              	.LFE136:
 744              		.section	.text.MX_TIM2_Init,"ax",%progbits
 745              		.align	1
 746              		.syntax unified
 747              		.thumb
 748              		.thumb_func
 749              		.fpu fpv4-sp-d16
 751              	MX_TIM2_Init:
 752              	.LFB137:
 499:Src/main.c    **** 
 500:Src/main.c    **** /**
 501:Src/main.c    ****   * @brief TIM2 Initialization Function
 502:Src/main.c    ****   * @param None
 503:Src/main.c    ****   * @retval None
 504:Src/main.c    ****   */
 505:Src/main.c    **** static void MX_TIM2_Init(void)
 506:Src/main.c    **** {
 753              		.loc 1 506 1
 754              		.cfi_startproc
 755              		@ args = 0, pretend = 0, frame = 32
 756              		@ frame_needed = 1, uses_anonymous_args = 0
 757 0000 80B5     		push	{r7, lr}
 758              	.LCFI15:
 759              		.cfi_def_cfa_offset 8
 760              		.cfi_offset 7, -8
 761              		.cfi_offset 14, -4
 762 0002 88B0     		sub	sp, sp, #32
 763              	.LCFI16:
ARM GAS  /tmp/ccaFhF6z.s 			page 23


 764              		.cfi_def_cfa_offset 40
 765 0004 00AF     		add	r7, sp, #0
 766              	.LCFI17:
 767              		.cfi_def_cfa_register 7
 507:Src/main.c    **** 
 508:Src/main.c    ****   /* USER CODE BEGIN TIM2_Init 0 */
 509:Src/main.c    **** 
 510:Src/main.c    ****   /* USER CODE END TIM2_Init 0 */
 511:Src/main.c    **** 
 512:Src/main.c    ****   TIM_ClockConfigTypeDef sClockSourceConfig = {0};
 768              		.loc 1 512 26
 769 0006 07F11003 		add	r3, r7, #16
 770 000a 0022     		movs	r2, #0
 771 000c 1A60     		str	r2, [r3]
 772 000e 5A60     		str	r2, [r3, #4]
 773 0010 9A60     		str	r2, [r3, #8]
 774 0012 DA60     		str	r2, [r3, #12]
 513:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig = {0};
 775              		.loc 1 513 27
 776 0014 3B1D     		adds	r3, r7, #4
 777 0016 0022     		movs	r2, #0
 778 0018 1A60     		str	r2, [r3]
 779 001a 5A60     		str	r2, [r3, #4]
 780 001c 9A60     		str	r2, [r3, #8]
 514:Src/main.c    **** 
 515:Src/main.c    ****   /* USER CODE BEGIN TIM2_Init 1 */
 516:Src/main.c    **** 
 517:Src/main.c    ****   /* USER CODE END TIM2_Init 1 */
 518:Src/main.c    ****   htim2.Instance = TIM2;
 781              		.loc 1 518 18
 782 001e 1F4B     		ldr	r3, .L30
 783 0020 4FF08042 		mov	r2, #1073741824
 784 0024 1A60     		str	r2, [r3]
 519:Src/main.c    ****   htim2.Init.Prescaler = 799;
 785              		.loc 1 519 24
 786 0026 1D4B     		ldr	r3, .L30
 787 0028 40F21F32 		movw	r2, #799
 788 002c 5A60     		str	r2, [r3, #4]
 520:Src/main.c    ****   htim2.Init.CounterMode = TIM_COUNTERMODE_UP;
 789              		.loc 1 520 26
 790 002e 1B4B     		ldr	r3, .L30
 791 0030 0022     		movs	r2, #0
 792 0032 9A60     		str	r2, [r3, #8]
 521:Src/main.c    ****   htim2.Init.Period = 4000000000;
 793              		.loc 1 521 21
 794 0034 194B     		ldr	r3, .L30
 795 0036 1A4A     		ldr	r2, .L30+4
 796 0038 DA60     		str	r2, [r3, #12]
 522:Src/main.c    ****   htim2.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 797              		.loc 1 522 28
 798 003a 184B     		ldr	r3, .L30
 799 003c 0022     		movs	r2, #0
 800 003e 1A61     		str	r2, [r3, #16]
 523:Src/main.c    ****   htim2.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 801              		.loc 1 523 32
 802 0040 164B     		ldr	r3, .L30
 803 0042 0022     		movs	r2, #0
ARM GAS  /tmp/ccaFhF6z.s 			page 24


 804 0044 9A61     		str	r2, [r3, #24]
 524:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim2) != HAL_OK)
 805              		.loc 1 524 7
 806 0046 1548     		ldr	r0, .L30
 807 0048 FFF7FEFF 		bl	HAL_TIM_Base_Init
 808 004c 0346     		mov	r3, r0
 809              		.loc 1 524 6
 810 004e 002B     		cmp	r3, #0
 811 0050 01D0     		beq	.L27
 525:Src/main.c    ****   {
 526:Src/main.c    ****     Error_Handler();
 812              		.loc 1 526 5
 813 0052 FFF7FEFF 		bl	Error_Handler
 814              	.L27:
 527:Src/main.c    ****   }
 528:Src/main.c    ****   sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
 815              		.loc 1 528 34
 816 0056 4FF48053 		mov	r3, #4096
 817 005a 3B61     		str	r3, [r7, #16]
 529:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim2, &sClockSourceConfig) != HAL_OK)
 818              		.loc 1 529 7
 819 005c 07F11003 		add	r3, r7, #16
 820 0060 1946     		mov	r1, r3
 821 0062 0E48     		ldr	r0, .L30
 822 0064 FFF7FEFF 		bl	HAL_TIM_ConfigClockSource
 823 0068 0346     		mov	r3, r0
 824              		.loc 1 529 6
 825 006a 002B     		cmp	r3, #0
 826 006c 01D0     		beq	.L28
 530:Src/main.c    ****   {
 531:Src/main.c    ****     Error_Handler();
 827              		.loc 1 531 5
 828 006e FFF7FEFF 		bl	Error_Handler
 829              	.L28:
 532:Src/main.c    ****   }
 533:Src/main.c    ****   sMasterConfig.MasterOutputTrigger = TIM_TRGO_RESET;
 830              		.loc 1 533 37
 831 0072 0023     		movs	r3, #0
 832 0074 7B60     		str	r3, [r7, #4]
 534:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 833              		.loc 1 534 33
 834 0076 0023     		movs	r3, #0
 835 0078 FB60     		str	r3, [r7, #12]
 535:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim2, &sMasterConfig) != HAL_OK)
 836              		.loc 1 535 7
 837 007a 3B1D     		adds	r3, r7, #4
 838 007c 1946     		mov	r1, r3
 839 007e 0748     		ldr	r0, .L30
 840 0080 FFF7FEFF 		bl	HAL_TIMEx_MasterConfigSynchronization
 841 0084 0346     		mov	r3, r0
 842              		.loc 1 535 6
 843 0086 002B     		cmp	r3, #0
 844 0088 01D0     		beq	.L29
 536:Src/main.c    ****   {
 537:Src/main.c    ****     Error_Handler();
 845              		.loc 1 537 5
 846 008a FFF7FEFF 		bl	Error_Handler
ARM GAS  /tmp/ccaFhF6z.s 			page 25


 847              	.L29:
 538:Src/main.c    ****   }
 539:Src/main.c    ****   /* USER CODE BEGIN TIM2_Init 2 */
 540:Src/main.c    **** 	
 541:Src/main.c    ****   //HAL_TIM_Base_Init(&htim2);
 542:Src/main.c    ****   HAL_TIM_Base_Start(&htim2);
 848              		.loc 1 542 3
 849 008e 0348     		ldr	r0, .L30
 850 0090 FFF7FEFF 		bl	HAL_TIM_Base_Start
 543:Src/main.c    ****   /* USER CODE END TIM2_Init 2 */
 544:Src/main.c    **** 
 545:Src/main.c    **** }
 851              		.loc 1 545 1
 852 0094 00BF     		nop
 853 0096 2037     		adds	r7, r7, #32
 854              	.LCFI18:
 855              		.cfi_def_cfa_offset 8
 856 0098 BD46     		mov	sp, r7
 857              	.LCFI19:
 858              		.cfi_def_cfa_register 13
 859              		@ sp needed
 860 009a 80BD     		pop	{r7, pc}
 861              	.L31:
 862              		.align	2
 863              	.L30:
 864 009c 00000000 		.word	htim2
 865 00a0 00286BEE 		.word	-294967296
 866              		.cfi_endproc
 867              	.LFE137:
 869              		.section	.text.MX_GPIO_Init,"ax",%progbits
 870              		.align	1
 871              		.syntax unified
 872              		.thumb
 873              		.thumb_func
 874              		.fpu fpv4-sp-d16
 876              	MX_GPIO_Init:
 877              	.LFB138:
 546:Src/main.c    **** 
 547:Src/main.c    **** /**
 548:Src/main.c    ****   * @brief GPIO Initialization Function
 549:Src/main.c    ****   * @param None
 550:Src/main.c    ****   * @retval None
 551:Src/main.c    ****   */
 552:Src/main.c    **** static void MX_GPIO_Init(void)
 553:Src/main.c    **** {
 878              		.loc 1 553 1
 879              		.cfi_startproc
 880              		@ args = 0, pretend = 0, frame = 32
 881              		@ frame_needed = 1, uses_anonymous_args = 0
 882 0000 80B5     		push	{r7, lr}
 883              	.LCFI20:
 884              		.cfi_def_cfa_offset 8
 885              		.cfi_offset 7, -8
 886              		.cfi_offset 14, -4
 887 0002 88B0     		sub	sp, sp, #32
 888              	.LCFI21:
 889              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/ccaFhF6z.s 			page 26


 890 0004 00AF     		add	r7, sp, #0
 891              	.LCFI22:
 892              		.cfi_def_cfa_register 7
 554:Src/main.c    ****   GPIO_InitTypeDef GPIO_InitStruct = {0};
 893              		.loc 1 554 20
 894 0006 07F10C03 		add	r3, r7, #12
 895 000a 0022     		movs	r2, #0
 896 000c 1A60     		str	r2, [r3]
 897 000e 5A60     		str	r2, [r3, #4]
 898 0010 9A60     		str	r2, [r3, #8]
 899 0012 DA60     		str	r2, [r3, #12]
 900 0014 1A61     		str	r2, [r3, #16]
 901              	.LBB2:
 555:Src/main.c    **** 
 556:Src/main.c    ****   /* GPIO Ports Clock Enable */
 557:Src/main.c    ****   __HAL_RCC_GPIOH_CLK_ENABLE();
 902              		.loc 1 557 3
 903 0016 444B     		ldr	r3, .L33
 904 0018 DB6C     		ldr	r3, [r3, #76]
 905 001a 434A     		ldr	r2, .L33
 906 001c 43F08003 		orr	r3, r3, #128
 907 0020 D364     		str	r3, [r2, #76]
 908 0022 414B     		ldr	r3, .L33
 909 0024 DB6C     		ldr	r3, [r3, #76]
 910 0026 03F08003 		and	r3, r3, #128
 911 002a BB60     		str	r3, [r7, #8]
 912 002c BB68     		ldr	r3, [r7, #8]
 913              	.LBE2:
 914              	.LBB3:
 558:Src/main.c    ****   __HAL_RCC_GPIOA_CLK_ENABLE();
 915              		.loc 1 558 3
 916 002e 3E4B     		ldr	r3, .L33
 917 0030 DB6C     		ldr	r3, [r3, #76]
 918 0032 3D4A     		ldr	r2, .L33
 919 0034 43F00103 		orr	r3, r3, #1
 920 0038 D364     		str	r3, [r2, #76]
 921 003a 3B4B     		ldr	r3, .L33
 922 003c DB6C     		ldr	r3, [r3, #76]
 923 003e 03F00103 		and	r3, r3, #1
 924 0042 7B60     		str	r3, [r7, #4]
 925 0044 7B68     		ldr	r3, [r7, #4]
 926              	.LBE3:
 927              	.LBB4:
 559:Src/main.c    ****   __HAL_RCC_GPIOB_CLK_ENABLE();
 928              		.loc 1 559 3
 929 0046 384B     		ldr	r3, .L33
 930 0048 DB6C     		ldr	r3, [r3, #76]
 931 004a 374A     		ldr	r2, .L33
 932 004c 43F00203 		orr	r3, r3, #2
 933 0050 D364     		str	r3, [r2, #76]
 934 0052 354B     		ldr	r3, .L33
 935 0054 DB6C     		ldr	r3, [r3, #76]
 936 0056 03F00203 		and	r3, r3, #2
 937 005a 3B60     		str	r3, [r7]
 938 005c 3B68     		ldr	r3, [r7]
 939              	.LBE4:
 560:Src/main.c    **** 
ARM GAS  /tmp/ccaFhF6z.s 			page 27


 561:Src/main.c    ****   /*Configure GPIO pin Output Level */
 562:Src/main.c    ****   HAL_GPIO_WritePin(DW_RESET_GPIO_Port, DW_RESET_Pin, GPIO_PIN_RESET);
 940              		.loc 1 562 3
 941 005e 0022     		movs	r2, #0
 942 0060 0821     		movs	r1, #8
 943 0062 4FF09040 		mov	r0, #1207959552
 944 0066 FFF7FEFF 		bl	HAL_GPIO_WritePin
 563:Src/main.c    **** 
 564:Src/main.c    ****   /*Configure GPIO pin Output Level */
 565:Src/main.c    ****   HAL_GPIO_WritePin(GPIOB, DW_NSS_Pin|DW_WU_Pin, GPIO_PIN_SET);
 945              		.loc 1 565 3
 946 006a 0122     		movs	r2, #1
 947 006c 8421     		movs	r1, #132
 948 006e 2F48     		ldr	r0, .L33+4
 949 0070 FFF7FEFF 		bl	HAL_GPIO_WritePin
 566:Src/main.c    **** 
 567:Src/main.c    ****   /*Configure GPIO pin Output Level */
 568:Src/main.c    ****   HAL_GPIO_WritePin(GPIOB, LED_Pin|GPIO_PIN_6, GPIO_PIN_RESET);
 950              		.loc 1 568 3
 951 0074 0022     		movs	r2, #0
 952 0076 6021     		movs	r1, #96
 953 0078 2C48     		ldr	r0, .L33+4
 954 007a FFF7FEFF 		bl	HAL_GPIO_WritePin
 569:Src/main.c    **** 
 570:Src/main.c    ****   /*Configure GPIO pin : DW_IRQn_Pin */
 571:Src/main.c    ****   GPIO_InitStruct.Pin = DW_IRQn_Pin;
 955              		.loc 1 571 23
 956 007e 0423     		movs	r3, #4
 957 0080 FB60     		str	r3, [r7, #12]
 572:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_IT_RISING;
 958              		.loc 1 572 24
 959 0082 2B4B     		ldr	r3, .L33+8
 960 0084 3B61     		str	r3, [r7, #16]
 573:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_PULLDOWN;
 961              		.loc 1 573 24
 962 0086 0223     		movs	r3, #2
 963 0088 7B61     		str	r3, [r7, #20]
 574:Src/main.c    ****   HAL_GPIO_Init(DW_IRQn_GPIO_Port, &GPIO_InitStruct);
 964              		.loc 1 574 3
 965 008a 07F10C03 		add	r3, r7, #12
 966 008e 1946     		mov	r1, r3
 967 0090 4FF09040 		mov	r0, #1207959552
 968 0094 FFF7FEFF 		bl	HAL_GPIO_Init
 575:Src/main.c    **** 
 576:Src/main.c    ****   /*Configure GPIO pin : DW_RESET_Pin */
 577:Src/main.c    ****   GPIO_InitStruct.Pin = DW_RESET_Pin;
 969              		.loc 1 577 23
 970 0098 0823     		movs	r3, #8
 971 009a FB60     		str	r3, [r7, #12]
 578:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_OD;
 972              		.loc 1 578 24
 973 009c 1123     		movs	r3, #17
 974 009e 3B61     		str	r3, [r7, #16]
 579:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
 975              		.loc 1 579 24
 976 00a0 0023     		movs	r3, #0
 977 00a2 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccaFhF6z.s 			page 28


 580:Src/main.c    ****   GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 978              		.loc 1 580 25
 979 00a4 0023     		movs	r3, #0
 980 00a6 BB61     		str	r3, [r7, #24]
 581:Src/main.c    ****   HAL_GPIO_Init(DW_RESET_GPIO_Port, &GPIO_InitStruct);
 981              		.loc 1 581 3
 982 00a8 07F10C03 		add	r3, r7, #12
 983 00ac 1946     		mov	r1, r3
 984 00ae 4FF09040 		mov	r0, #1207959552
 985 00b2 FFF7FEFF 		bl	HAL_GPIO_Init
 582:Src/main.c    **** 
 583:Src/main.c    ****   /*Configure GPIO pins : DW_NSS_Pin PB6 DW_WU_Pin */
 584:Src/main.c    ****   GPIO_InitStruct.Pin = DW_NSS_Pin|GPIO_PIN_6|DW_WU_Pin;
 986              		.loc 1 584 23
 987 00b6 C423     		movs	r3, #196
 988 00b8 FB60     		str	r3, [r7, #12]
 585:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 989              		.loc 1 585 24
 990 00ba 0123     		movs	r3, #1
 991 00bc 3B61     		str	r3, [r7, #16]
 586:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
 992              		.loc 1 586 24
 993 00be 0023     		movs	r3, #0
 994 00c0 7B61     		str	r3, [r7, #20]
 587:Src/main.c    ****   GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
 995              		.loc 1 587 25
 996 00c2 0223     		movs	r3, #2
 997 00c4 BB61     		str	r3, [r7, #24]
 588:Src/main.c    ****   HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 998              		.loc 1 588 3
 999 00c6 07F10C03 		add	r3, r7, #12
 1000 00ca 1946     		mov	r1, r3
 1001 00cc 1748     		ldr	r0, .L33+4
 1002 00ce FFF7FEFF 		bl	HAL_GPIO_Init
 589:Src/main.c    **** 
 590:Src/main.c    ****   /*Configure GPIO pin : Button_Pin */
 591:Src/main.c    ****   GPIO_InitStruct.Pin = Button_Pin;
 1003              		.loc 1 591 23
 1004 00d2 1023     		movs	r3, #16
 1005 00d4 FB60     		str	r3, [r7, #12]
 592:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_IT_RISING;
 1006              		.loc 1 592 24
 1007 00d6 164B     		ldr	r3, .L33+8
 1008 00d8 3B61     		str	r3, [r7, #16]
 593:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
 1009              		.loc 1 593 24
 1010 00da 0023     		movs	r3, #0
 1011 00dc 7B61     		str	r3, [r7, #20]
 594:Src/main.c    ****   HAL_GPIO_Init(Button_GPIO_Port, &GPIO_InitStruct);
 1012              		.loc 1 594 3
 1013 00de 07F10C03 		add	r3, r7, #12
 1014 00e2 1946     		mov	r1, r3
 1015 00e4 1148     		ldr	r0, .L33+4
 1016 00e6 FFF7FEFF 		bl	HAL_GPIO_Init
 595:Src/main.c    **** 
 596:Src/main.c    ****   /*Configure GPIO pin : LED_Pin */
 597:Src/main.c    ****   GPIO_InitStruct.Pin = LED_Pin;
ARM GAS  /tmp/ccaFhF6z.s 			page 29


 1017              		.loc 1 597 23
 1018 00ea 2023     		movs	r3, #32
 1019 00ec FB60     		str	r3, [r7, #12]
 598:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 1020              		.loc 1 598 24
 1021 00ee 0123     		movs	r3, #1
 1022 00f0 3B61     		str	r3, [r7, #16]
 599:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
 1023              		.loc 1 599 24
 1024 00f2 0023     		movs	r3, #0
 1025 00f4 7B61     		str	r3, [r7, #20]
 600:Src/main.c    ****   GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 1026              		.loc 1 600 25
 1027 00f6 0023     		movs	r3, #0
 1028 00f8 BB61     		str	r3, [r7, #24]
 601:Src/main.c    ****   HAL_GPIO_Init(LED_GPIO_Port, &GPIO_InitStruct);
 1029              		.loc 1 601 3
 1030 00fa 07F10C03 		add	r3, r7, #12
 1031 00fe 1946     		mov	r1, r3
 1032 0100 0A48     		ldr	r0, .L33+4
 1033 0102 FFF7FEFF 		bl	HAL_GPIO_Init
 602:Src/main.c    **** 
 603:Src/main.c    ****   /* EXTI interrupt init*/
 604:Src/main.c    ****   HAL_NVIC_SetPriority(EXTI4_IRQn, 2, 0);
 1034              		.loc 1 604 3
 1035 0106 0022     		movs	r2, #0
 1036 0108 0221     		movs	r1, #2
 1037 010a 0A20     		movs	r0, #10
 1038 010c FFF7FEFF 		bl	HAL_NVIC_SetPriority
 605:Src/main.c    ****   HAL_NVIC_EnableIRQ(EXTI4_IRQn);
 1039              		.loc 1 605 3
 1040 0110 0A20     		movs	r0, #10
 1041 0112 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 606:Src/main.c    **** 	
 607:Src/main.c    ****   HAL_NVIC_SetPriority(EXTI2_IRQn, 4, 0);
 1042              		.loc 1 607 3
 1043 0116 0022     		movs	r2, #0
 1044 0118 0421     		movs	r1, #4
 1045 011a 0820     		movs	r0, #8
 1046 011c FFF7FEFF 		bl	HAL_NVIC_SetPriority
 608:Src/main.c    ****   //HAL_NVIC_EnableIRQ(EXTI2_IRQn);
 609:Src/main.c    **** 
 610:Src/main.c    **** }
 1047              		.loc 1 610 1
 1048 0120 00BF     		nop
 1049 0122 2037     		adds	r7, r7, #32
 1050              	.LCFI23:
 1051              		.cfi_def_cfa_offset 8
 1052 0124 BD46     		mov	sp, r7
 1053              	.LCFI24:
 1054              		.cfi_def_cfa_register 13
 1055              		@ sp needed
 1056 0126 80BD     		pop	{r7, pc}
 1057              	.L34:
 1058              		.align	2
 1059              	.L33:
 1060 0128 00100240 		.word	1073876992
ARM GAS  /tmp/ccaFhF6z.s 			page 30


 1061 012c 00040048 		.word	1207960576
 1062 0130 00001110 		.word	269549568
 1063              		.cfi_endproc
 1064              	.LFE138:
 1066              		.section	.rodata
 1067              		.align	2
 1068              	.LC4:
 1069 006c 696E6974 		.ascii	"initialize NOT ok\000"
 1069      69616C69 
 1069      7A65204E 
 1069      4F54206F 
 1069      6B00
 1070 007e 0000     		.align	2
 1071              	.LC5:
 1072 0080 696E6974 		.ascii	"initialize OK\000"
 1072      69616C69 
 1072      7A65204F 
 1072      4B00
 1073              		.section	.text.MX_DWM_Init,"ax",%progbits
 1074              		.align	1
 1075              		.syntax unified
 1076              		.thumb
 1077              		.thumb_func
 1078              		.fpu fpv4-sp-d16
 1080              	MX_DWM_Init:
 1081              	.LFB139:
 611:Src/main.c    **** 
 612:Src/main.c    **** /* USER CODE BEGIN 4 */
 613:Src/main.c    **** 
 614:Src/main.c    **** 
 615:Src/main.c    **** 	/************************************************ DECAWAVE *******************************/
 616:Src/main.c    **** /**
 617:Src/main.c    ****   * @brief Decawave Initialization Function
 618:Src/main.c    ****   * @param responder	parameter to select responder or initiator mode, to set callbacks for the resp
 619:Src/main.c    **** 						time variables for the initiator
 620:Src/main.c    ****   * @retval None
 621:Src/main.c    ****   */
 622:Src/main.c    **** static void MX_DWM_Init(volatile bool responder)
 623:Src/main.c    **** {
 1082              		.loc 1 623 1
 1083              		.cfi_startproc
 1084              		@ args = 0, pretend = 0, frame = 8
 1085              		@ frame_needed = 1, uses_anonymous_args = 0
 1086 0000 80B5     		push	{r7, lr}
 1087              	.LCFI25:
 1088              		.cfi_def_cfa_offset 8
 1089              		.cfi_offset 7, -8
 1090              		.cfi_offset 14, -4
 1091 0002 82B0     		sub	sp, sp, #8
 1092              	.LCFI26:
 1093              		.cfi_def_cfa_offset 16
 1094 0004 00AF     		add	r7, sp, #0
 1095              	.LCFI27:
 1096              		.cfi_def_cfa_register 7
 1097 0006 0346     		mov	r3, r0
 1098 0008 FB71     		strb	r3, [r7, #7]
 624:Src/main.c    **** 	/* Reduce spi baudrate to send commands to the Decawave module */
ARM GAS  /tmp/ccaFhF6z.s 			page 31


 625:Src/main.c    **** 	HAL_SPI_DeInit (&hspi1);
 1099              		.loc 1 625 2
 1100 000a 6148     		ldr	r0, .L44
 1101 000c FFF7FEFF 		bl	HAL_SPI_DeInit
 626:Src/main.c    **** 	hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_64;
 1102              		.loc 1 626 31
 1103 0010 5F4B     		ldr	r3, .L44
 1104 0012 2822     		movs	r2, #40
 1105 0014 DA61     		str	r2, [r3, #28]
 627:Src/main.c    **** 	HAL_SPI_Init (&hspi1);
 1106              		.loc 1 627 2
 1107 0016 5E48     		ldr	r0, .L44
 1108 0018 FFF7FEFF 		bl	HAL_SPI_Init
 628:Src/main.c    **** 	
 629:Src/main.c    **** 	/* Reset and initializing DWM */
 630:Src/main.c    **** 	setup_DW1000RSTnIRQ(0);
 1109              		.loc 1 630 2
 1110 001c 0020     		movs	r0, #0
 1111 001e FFF7FEFF 		bl	setup_DW1000RSTnIRQ
 631:Src/main.c    **** 	reset_DW1000(); 
 1112              		.loc 1 631 2
 1113 0022 FFF7FEFF 		bl	reset_DW1000
 632:Src/main.c    **** 	port_set_deca_isr (dwt_isr);
 1114              		.loc 1 632 2
 1115 0026 5B48     		ldr	r0, .L44+4
 1116 0028 FFF7FEFF 		bl	port_set_deca_isr
 633:Src/main.c    **** 	HAL_Delay (500);
 1117              		.loc 1 633 2
 1118 002c 4FF4FA70 		mov	r0, #500
 1119 0030 FFF7FEFF 		bl	HAL_Delay
 634:Src/main.c    **** 	
 635:Src/main.c    **** 	if (dwt_initialise(DWT_LOADUCODE) == DWT_ERROR)	{
 1120              		.loc 1 635 6
 1121 0034 0120     		movs	r0, #1
 1122 0036 FFF7FEFF 		bl	dwt_initialise
 1123 003a 0346     		mov	r3, r0
 1124              		.loc 1 635 5
 1125 003c B3F1FF3F 		cmp	r3, #-1
 1126 0040 35D1     		bne	.L36
 636:Src/main.c    **** 		printf("initialize NOT ok\n");
 1127              		.loc 1 636 3
 1128 0042 5548     		ldr	r0, .L44+8
 1129 0044 FFF7FEFF 		bl	puts
 637:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);
 1130              		.loc 1 637 3
 1131 0048 0122     		movs	r2, #1
 1132 004a 2021     		movs	r1, #32
 1133 004c 5348     		ldr	r0, .L44+12
 1134 004e FFF7FEFF 		bl	HAL_GPIO_WritePin
 638:Src/main.c    **** 		HAL_Delay(400);
 1135              		.loc 1 638 3
 1136 0052 4FF4C870 		mov	r0, #400
 1137 0056 FFF7FEFF 		bl	HAL_Delay
 639:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_RESET);
 1138              		.loc 1 639 3
 1139 005a 0022     		movs	r2, #0
 1140 005c 2021     		movs	r1, #32
ARM GAS  /tmp/ccaFhF6z.s 			page 32


 1141 005e 4F48     		ldr	r0, .L44+12
 1142 0060 FFF7FEFF 		bl	HAL_GPIO_WritePin
 640:Src/main.c    **** 		HAL_Delay(400);
 1143              		.loc 1 640 3
 1144 0064 4FF4C870 		mov	r0, #400
 1145 0068 FFF7FEFF 		bl	HAL_Delay
 641:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);
 1146              		.loc 1 641 3
 1147 006c 0122     		movs	r2, #1
 1148 006e 2021     		movs	r1, #32
 1149 0070 4A48     		ldr	r0, .L44+12
 1150 0072 FFF7FEFF 		bl	HAL_GPIO_WritePin
 642:Src/main.c    **** 		HAL_Delay(400);
 1151              		.loc 1 642 3
 1152 0076 4FF4C870 		mov	r0, #400
 1153 007a FFF7FEFF 		bl	HAL_Delay
 643:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_RESET);
 1154              		.loc 1 643 3
 1155 007e 0022     		movs	r2, #0
 1156 0080 2021     		movs	r1, #32
 1157 0082 4648     		ldr	r0, .L44+12
 1158 0084 FFF7FEFF 		bl	HAL_GPIO_WritePin
 644:Src/main.c    **** 		HAL_Delay(400);
 1159              		.loc 1 644 3
 1160 0088 4FF4C870 		mov	r0, #400
 1161 008c FFF7FEFF 		bl	HAL_Delay
 645:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);
 1162              		.loc 1 645 3
 1163 0090 0122     		movs	r2, #1
 1164 0092 2021     		movs	r1, #32
 1165 0094 4148     		ldr	r0, .L44+12
 1166 0096 FFF7FEFF 		bl	HAL_GPIO_WritePin
 646:Src/main.c    **** 		HAL_Delay(400);
 1167              		.loc 1 646 3
 1168 009a 4FF4C870 		mov	r0, #400
 1169 009e FFF7FEFF 		bl	HAL_Delay
 647:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_RESET);
 1170              		.loc 1 647 3
 1171 00a2 0022     		movs	r2, #0
 1172 00a4 2021     		movs	r1, #32
 1173 00a6 3D48     		ldr	r0, .L44+12
 1174 00a8 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1175 00ac 14E0     		b	.L37
 1176              	.L36:
 648:Src/main.c    **** 	}
 649:Src/main.c    **** 	else {
 650:Src/main.c    **** 		printf("initialize OK\n");
 1177              		.loc 1 650 3
 1178 00ae 3C48     		ldr	r0, .L44+16
 1179 00b0 FFF7FEFF 		bl	puts
 651:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);
 1180              		.loc 1 651 3
 1181 00b4 0122     		movs	r2, #1
 1182 00b6 2021     		movs	r1, #32
 1183 00b8 3848     		ldr	r0, .L44+12
 1184 00ba FFF7FEFF 		bl	HAL_GPIO_WritePin
 652:Src/main.c    **** 		HAL_Delay(400);
ARM GAS  /tmp/ccaFhF6z.s 			page 33


 1185              		.loc 1 652 3
 1186 00be 4FF4C870 		mov	r0, #400
 1187 00c2 FFF7FEFF 		bl	HAL_Delay
 653:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_RESET);
 1188              		.loc 1 653 3
 1189 00c6 0022     		movs	r2, #0
 1190 00c8 2021     		movs	r1, #32
 1191 00ca 3448     		ldr	r0, .L44+12
 1192 00cc FFF7FEFF 		bl	HAL_GPIO_WritePin
 654:Src/main.c    **** 		HAL_Delay(400);
 1193              		.loc 1 654 3
 1194 00d0 4FF4C870 		mov	r0, #400
 1195 00d4 FFF7FEFF 		bl	HAL_Delay
 1196              	.L37:
 655:Src/main.c    **** 	}
 656:Src/main.c    ****   
 657:Src/main.c    **** 	/* Increase spi baudrate to exploit the Decawave module speed*/
 658:Src/main.c    **** 	HAL_SPI_DeInit (&hspi1);
 1197              		.loc 1 658 2
 1198 00d8 2D48     		ldr	r0, .L44
 1199 00da FFF7FEFF 		bl	HAL_SPI_DeInit
 659:Src/main.c    **** 	hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_4;
 1200              		.loc 1 659 31
 1201 00de 2C4B     		ldr	r3, .L44
 1202 00e0 0822     		movs	r2, #8
 1203 00e2 DA61     		str	r2, [r3, #28]
 660:Src/main.c    **** 	HAL_SPI_Init (&hspi1);
 1204              		.loc 1 660 2
 1205 00e4 2A48     		ldr	r0, .L44
 1206 00e6 FFF7FEFF 		bl	HAL_SPI_Init
 661:Src/main.c    **** 	
 662:Src/main.c    **** 	/* Select the desired mode configuration */
 663:Src/main.c    **** 	if (ConfigSel == LongData_Fast)
 1207              		.loc 1 663 16
 1208 00ea 2E4B     		ldr	r3, .L44+20
 1209 00ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1210              		.loc 1 663 5
 1211 00ee 002B     		cmp	r3, #0
 1212 00f0 03D1     		bne	.L38
 664:Src/main.c    **** 		dwt_configure(&config_LongData_Fast);
 1213              		.loc 1 664 3
 1214 00f2 2D48     		ldr	r0, .L44+24
 1215 00f4 FFF7FEFF 		bl	dwt_configure
 1216 00f8 11E0     		b	.L39
 1217              	.L38:
 665:Src/main.c    **** 	else if (ConfigSel == ShortData_Fast)
 1218              		.loc 1 665 21
 1219 00fa 2A4B     		ldr	r3, .L44+20
 1220 00fc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1221              		.loc 1 665 10
 1222 00fe 012B     		cmp	r3, #1
 1223 0100 03D1     		bne	.L40
 666:Src/main.c    **** 		dwt_configure(&config_ShortData_Fast);
 1224              		.loc 1 666 3
 1225 0102 2A48     		ldr	r0, .L44+28
 1226 0104 FFF7FEFF 		bl	dwt_configure
 1227 0108 09E0     		b	.L39
ARM GAS  /tmp/ccaFhF6z.s 			page 34


 1228              	.L40:
 667:Src/main.c    **** 	else if (ConfigSel == LongData_Range)
 1229              		.loc 1 667 21
 1230 010a 264B     		ldr	r3, .L44+20
 1231 010c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1232              		.loc 1 667 10
 1233 010e 022B     		cmp	r3, #2
 1234 0110 03D1     		bne	.L41
 668:Src/main.c    **** 		dwt_configure(&config_LongData_Range);
 1235              		.loc 1 668 3
 1236 0112 2748     		ldr	r0, .L44+32
 1237 0114 FFF7FEFF 		bl	dwt_configure
 1238 0118 01E0     		b	.L39
 1239              	.L41:
 669:Src/main.c    **** 	else
 670:Src/main.c    **** 		Error_Handler();
 1240              		.loc 1 670 3
 1241 011a FFF7FEFF 		bl	Error_Handler
 1242              	.L39:
 671:Src/main.c    **** 	
 672:Src/main.c    **** 	/* If the application is in the responder mode, it should sets the callbacks */
 673:Src/main.c    **** 	if (responder == 1){
 1243              		.loc 1 673 16
 1244 011e FB79     		ldrb	r3, [r7, #7]
 1245 0120 DBB2     		uxtb	r3, r3
 1246              		.loc 1 673 5
 1247 0122 002B     		cmp	r3, #0
 1248 0124 09D0     		beq	.L42
 674:Src/main.c    **** 		dwt_setcallbacks(&tx_conf_cb, &rx_ok_cb, &rx_to_cb, &rx_err_cb);
 1249              		.loc 1 674 3
 1250 0126 234B     		ldr	r3, .L44+36
 1251 0128 234A     		ldr	r2, .L44+40
 1252 012a 2449     		ldr	r1, .L44+44
 1253 012c 2448     		ldr	r0, .L44+48
 1254 012e FFF7FEFF 		bl	dwt_setcallbacks
 675:Src/main.c    **** 		dwt_setinterrupt(DWT_INT_TFRS | DWT_INT_RFCG | DWT_INT_RFTO | DWT_INT_RXPTO | DWT_INT_RPHE | DWT_
 1255              		.loc 1 675 3
 1256 0132 0121     		movs	r1, #1
 1257 0134 2348     		ldr	r0, .L44+52
 1258 0136 FFF7FEFF 		bl	dwt_setinterrupt
 1259              	.L42:
 676:Src/main.c    **** 	}
 677:Src/main.c    **** 	
 678:Src/main.c    **** 	/* Apply default antenna delay value. See NOTE 2 below. */
 679:Src/main.c    ****   dwt_setrxantennadelay(RX_ANT_DLY);
 1260              		.loc 1 679 3
 1261 013a 44F23400 		movw	r0, #16436
 1262 013e FFF7FEFF 		bl	dwt_setrxantennadelay
 680:Src/main.c    ****   dwt_settxantennadelay(TX_ANT_DLY);
 1263              		.loc 1 680 3
 1264 0142 44F23400 		movw	r0, #16436
 1265 0146 FFF7FEFF 		bl	dwt_settxantennadelay
 681:Src/main.c    **** 	
 682:Src/main.c    ****   /* Set expected response's delay and timeout. See NOTE 1 and 5 below.
 683:Src/main.c    ****    * As this example only handles one incoming frame with always the same delay and timeout, those 
 684:Src/main.c    ****   //dwt_setpreambledetecttimeout(PRE_TIMEOUT);
 685:Src/main.c    ****   dwt_setleds(DWT_LEDS_ENABLE);
ARM GAS  /tmp/ccaFhF6z.s 			page 35


 1266              		.loc 1 685 3
 1267 014a 0120     		movs	r0, #1
 1268 014c FFF7FEFF 		bl	dwt_setleds
 686:Src/main.c    **** 
 687:Src/main.c    **** 	/* If the application is in the initiator mode, set expected response's delay and timeout. See NOT
 688:Src/main.c    **** 		* As this example only handles one incoming frame with always the same delay and timeout, those v
 689:Src/main.c    **** 	if (responder ==0){
 1269              		.loc 1 689 16
 1270 0150 FB79     		ldrb	r3, [r7, #7]
 1271 0152 DBB2     		uxtb	r3, r3
 1272 0154 83F00103 		eor	r3, r3, #1
 1273 0158 DBB2     		uxtb	r3, r3
 1274              		.loc 1 689 5
 1275 015a 002B     		cmp	r3, #0
 1276 015c 07D0     		beq	.L43
 690:Src/main.c    **** 		dwt_setrxaftertxdelay(POLL_TX_TO_RESP_RX_DLY_UUS);
 1277              		.loc 1 690 3
 1278 015e 4FF49670 		mov	r0, #300
 1279 0162 FFF7FEFF 		bl	dwt_setrxaftertxdelay
 691:Src/main.c    **** 		dwt_setrxtimeout(RESP_RX_TIMEOUT_UUS);
 1280              		.loc 1 691 3
 1281 0166 44F62060 		movw	r0, #20000
 1282 016a FFF7FEFF 		bl	dwt_setrxtimeout
 1283              	.L43:
 692:Src/main.c    **** 	}
 693:Src/main.c    **** 	
 694:Src/main.c    ****   dwt_setsmarttxpower(0);
 1284              		.loc 1 694 3
 1285 016e 0020     		movs	r0, #0
 1286 0170 FFF7FEFF 		bl	dwt_setsmarttxpower
 695:Src/main.c    ****   configTX.power = 0x1F1F1F1F;
 1287              		.loc 1 695 18
 1288 0174 144B     		ldr	r3, .L44+56
 1289 0176 4FF01F32 		mov	r2, #522133279
 1290 017a 5A60     		str	r2, [r3, #4]
 696:Src/main.c    ****   configTX.PGdly = 0xC2;
 1291              		.loc 1 696 18
 1292 017c 124B     		ldr	r3, .L44+56
 1293 017e C222     		movs	r2, #194
 1294 0180 1A70     		strb	r2, [r3]
 697:Src/main.c    ****   dwt_configuretxrf(&configTX);
 1295              		.loc 1 697 3
 1296 0182 1148     		ldr	r0, .L44+56
 1297 0184 FFF7FEFF 		bl	dwt_configuretxrf
 698:Src/main.c    **** }
 1298              		.loc 1 698 1
 1299 0188 00BF     		nop
 1300 018a 0837     		adds	r7, r7, #8
 1301              	.LCFI28:
 1302              		.cfi_def_cfa_offset 8
 1303 018c BD46     		mov	sp, r7
 1304              	.LCFI29:
 1305              		.cfi_def_cfa_register 13
 1306              		@ sp needed
 1307 018e 80BD     		pop	{r7, pc}
 1308              	.L45:
 1309              		.align	2
ARM GAS  /tmp/ccaFhF6z.s 			page 36


 1310              	.L44:
 1311 0190 00000000 		.word	hspi1
 1312 0194 00000000 		.word	dwt_isr
 1313 0198 6C000000 		.word	.LC4
 1314 019c 00040048 		.word	1207960576
 1315 01a0 80000000 		.word	.LC5
 1316 01a4 00000000 		.word	ConfigSel
 1317 01a8 00000000 		.word	config_LongData_Fast
 1318 01ac 00000000 		.word	config_ShortData_Fast
 1319 01b0 00000000 		.word	config_LongData_Range
 1320 01b4 00000000 		.word	rx_err_cb
 1321 01b8 00000000 		.word	rx_to_cb
 1322 01bc 00000000 		.word	rx_ok_cb
 1323 01c0 00000000 		.word	tx_conf_cb
 1324 01c4 80D02304 		.word	69456000
 1325 01c8 00000000 		.word	configTX
 1326              		.cfi_endproc
 1327              	.LFE139:
 1329              		.section	.text.get_tx_timestamp_u64,"ax",%progbits
 1330              		.align	1
 1331              		.syntax unified
 1332              		.thumb
 1333              		.thumb_func
 1334              		.fpu fpv4-sp-d16
 1336              	get_tx_timestamp_u64:
 1337              	.LFB140:
 699:Src/main.c    **** 
 700:Src/main.c    **** /*! -----------------------------------------------------------------------------------------------
 701:Src/main.c    ****  * @fn get_tx_timestamp_u64()
 702:Src/main.c    ****  *
 703:Src/main.c    ****  * @brief Get the TX time-stamp in a 64-bit variable.
 704:Src/main.c    ****  *        /!\ This function assumes that length of time-stamps is 40 bits, for both TX and RX!
 705:Src/main.c    ****  *
 706:Src/main.c    ****  * @param  none
 707:Src/main.c    ****  *
 708:Src/main.c    ****  * @return  64-bit value of the read time-stamp.
 709:Src/main.c    ****  */
 710:Src/main.c    **** static uint64 get_tx_timestamp_u64(void)
 711:Src/main.c    **** {
 1338              		.loc 1 711 1
 1339              		.cfi_startproc
 1340              		@ args = 0, pretend = 0, frame = 24
 1341              		@ frame_needed = 1, uses_anonymous_args = 0
 1342 0000 B0B5     		push	{r4, r5, r7, lr}
 1343              	.LCFI30:
 1344              		.cfi_def_cfa_offset 16
 1345              		.cfi_offset 4, -16
 1346              		.cfi_offset 5, -12
 1347              		.cfi_offset 7, -8
 1348              		.cfi_offset 14, -4
 1349 0002 86B0     		sub	sp, sp, #24
 1350              	.LCFI31:
 1351              		.cfi_def_cfa_offset 40
 1352 0004 00AF     		add	r7, sp, #0
 1353              	.LCFI32:
 1354              		.cfi_def_cfa_register 7
 712:Src/main.c    ****     uint8 ts_tab[5];
ARM GAS  /tmp/ccaFhF6z.s 			page 37


 713:Src/main.c    ****     uint64 ts = 0;
 1355              		.loc 1 713 12
 1356 0006 4FF00002 		mov	r2, #0
 1357 000a 4FF00003 		mov	r3, #0
 1358 000e C7E90423 		strd	r2, [r7, #16]
 714:Src/main.c    ****     int i;
 715:Src/main.c    ****     dwt_readtxtimestamp(ts_tab);
 1359              		.loc 1 715 5
 1360 0012 3B1D     		adds	r3, r7, #4
 1361 0014 1846     		mov	r0, r3
 1362 0016 FFF7FEFF 		bl	dwt_readtxtimestamp
 716:Src/main.c    ****     for (i = 4; i >= 0; i--)
 1363              		.loc 1 716 12
 1364 001a 0423     		movs	r3, #4
 1365 001c FB60     		str	r3, [r7, #12]
 1366              		.loc 1 716 5
 1367 001e 1DE0     		b	.L47
 1368              	.L48:
 717:Src/main.c    ****     {
 718:Src/main.c    ****         ts <<= 8;
 1369              		.loc 1 718 12 discriminator 3
 1370 0020 D7E90401 		ldrd	r0, [r7, #16]
 1371 0024 4FF00002 		mov	r2, #0
 1372 0028 4FF00003 		mov	r3, #0
 1373 002c 0B02     		lsls	r3, r1, #8
 1374 002e 43EA1063 		orr	r3, r3, r0, lsr #24
 1375 0032 0202     		lsls	r2, r0, #8
 1376 0034 C7E90423 		strd	r2, [r7, #16]
 719:Src/main.c    ****         ts |= ts_tab[i];
 1377              		.loc 1 719 21 discriminator 3
 1378 0038 3A1D     		adds	r2, r7, #4
 1379 003a FB68     		ldr	r3, [r7, #12]
 1380 003c 1344     		add	r3, r3, r2
 1381 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1382 0040 DAB2     		uxtb	r2, r3
 1383 0042 4FF00003 		mov	r3, #0
 1384              		.loc 1 719 12 discriminator 3
 1385 0046 D7E90401 		ldrd	r0, [r7, #16]
 1386 004a 40EA0204 		orr	r4, r0, r2
 1387 004e 41EA0305 		orr	r5, r1, r3
 1388 0052 C7E90445 		strd	r4, [r7, #16]
 716:Src/main.c    ****     for (i = 4; i >= 0; i--)
 1389              		.loc 1 716 26 discriminator 3
 1390 0056 FB68     		ldr	r3, [r7, #12]
 1391 0058 013B     		subs	r3, r3, #1
 1392 005a FB60     		str	r3, [r7, #12]
 1393              	.L47:
 716:Src/main.c    ****     for (i = 4; i >= 0; i--)
 1394              		.loc 1 716 5 discriminator 1
 1395 005c FB68     		ldr	r3, [r7, #12]
 1396 005e 002B     		cmp	r3, #0
 1397 0060 DEDA     		bge	.L48
 720:Src/main.c    ****     }
 721:Src/main.c    ****     return ts;
 1398              		.loc 1 721 12
 1399 0062 D7E90423 		ldrd	r2, [r7, #16]
 722:Src/main.c    **** }
ARM GAS  /tmp/ccaFhF6z.s 			page 38


 1400              		.loc 1 722 1
 1401 0066 1046     		mov	r0, r2
 1402 0068 1946     		mov	r1, r3
 1403 006a 1837     		adds	r7, r7, #24
 1404              	.LCFI33:
 1405              		.cfi_def_cfa_offset 16
 1406 006c BD46     		mov	sp, r7
 1407              	.LCFI34:
 1408              		.cfi_def_cfa_register 13
 1409              		@ sp needed
 1410 006e B0BD     		pop	{r4, r5, r7, pc}
 1411              		.cfi_endproc
 1412              	.LFE140:
 1414              		.section	.text.get_rx_timestamp_u64,"ax",%progbits
 1415              		.align	1
 1416              		.syntax unified
 1417              		.thumb
 1418              		.thumb_func
 1419              		.fpu fpv4-sp-d16
 1421              	get_rx_timestamp_u64:
 1422              	.LFB141:
 723:Src/main.c    **** 
 724:Src/main.c    **** /*! -----------------------------------------------------------------------------------------------
 725:Src/main.c    ****  * @fn get_rx_timestamp_u64()
 726:Src/main.c    ****  *
 727:Src/main.c    ****  * @brief Get the RX time-stamp in a 64-bit variable.
 728:Src/main.c    ****  *        /!\ This function assumes that length of time-stamps is 40 bits, for both TX and RX!
 729:Src/main.c    ****  *
 730:Src/main.c    ****  * @param  none
 731:Src/main.c    ****  *
 732:Src/main.c    ****  * @return  64-bit value of the read time-stamp.
 733:Src/main.c    ****  */
 734:Src/main.c    **** static uint64 get_rx_timestamp_u64(void)
 735:Src/main.c    **** {
 1423              		.loc 1 735 1
 1424              		.cfi_startproc
 1425              		@ args = 0, pretend = 0, frame = 24
 1426              		@ frame_needed = 1, uses_anonymous_args = 0
 1427 0000 B0B5     		push	{r4, r5, r7, lr}
 1428              	.LCFI35:
 1429              		.cfi_def_cfa_offset 16
 1430              		.cfi_offset 4, -16
 1431              		.cfi_offset 5, -12
 1432              		.cfi_offset 7, -8
 1433              		.cfi_offset 14, -4
 1434 0002 86B0     		sub	sp, sp, #24
 1435              	.LCFI36:
 1436              		.cfi_def_cfa_offset 40
 1437 0004 00AF     		add	r7, sp, #0
 1438              	.LCFI37:
 1439              		.cfi_def_cfa_register 7
 736:Src/main.c    ****     uint8 ts_tab[5];
 737:Src/main.c    ****     uint64 ts = 0;
 1440              		.loc 1 737 12
 1441 0006 4FF00002 		mov	r2, #0
 1442 000a 4FF00003 		mov	r3, #0
 1443 000e C7E90423 		strd	r2, [r7, #16]
ARM GAS  /tmp/ccaFhF6z.s 			page 39


 738:Src/main.c    ****     int i;
 739:Src/main.c    ****     dwt_readrxtimestamp(ts_tab);
 1444              		.loc 1 739 5
 1445 0012 3B1D     		adds	r3, r7, #4
 1446 0014 1846     		mov	r0, r3
 1447 0016 FFF7FEFF 		bl	dwt_readrxtimestamp
 740:Src/main.c    ****     for (i = 4; i >= 0; i--)
 1448              		.loc 1 740 12
 1449 001a 0423     		movs	r3, #4
 1450 001c FB60     		str	r3, [r7, #12]
 1451              		.loc 1 740 5
 1452 001e 1DE0     		b	.L51
 1453              	.L52:
 741:Src/main.c    ****     {
 742:Src/main.c    ****         ts <<= 8;
 1454              		.loc 1 742 12 discriminator 3
 1455 0020 D7E90401 		ldrd	r0, [r7, #16]
 1456 0024 4FF00002 		mov	r2, #0
 1457 0028 4FF00003 		mov	r3, #0
 1458 002c 0B02     		lsls	r3, r1, #8
 1459 002e 43EA1063 		orr	r3, r3, r0, lsr #24
 1460 0032 0202     		lsls	r2, r0, #8
 1461 0034 C7E90423 		strd	r2, [r7, #16]
 743:Src/main.c    ****         ts |= ts_tab[i];
 1462              		.loc 1 743 21 discriminator 3
 1463 0038 3A1D     		adds	r2, r7, #4
 1464 003a FB68     		ldr	r3, [r7, #12]
 1465 003c 1344     		add	r3, r3, r2
 1466 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1467 0040 DAB2     		uxtb	r2, r3
 1468 0042 4FF00003 		mov	r3, #0
 1469              		.loc 1 743 12 discriminator 3
 1470 0046 D7E90401 		ldrd	r0, [r7, #16]
 1471 004a 40EA0204 		orr	r4, r0, r2
 1472 004e 41EA0305 		orr	r5, r1, r3
 1473 0052 C7E90445 		strd	r4, [r7, #16]
 740:Src/main.c    ****     for (i = 4; i >= 0; i--)
 1474              		.loc 1 740 26 discriminator 3
 1475 0056 FB68     		ldr	r3, [r7, #12]
 1476 0058 013B     		subs	r3, r3, #1
 1477 005a FB60     		str	r3, [r7, #12]
 1478              	.L51:
 740:Src/main.c    ****     for (i = 4; i >= 0; i--)
 1479              		.loc 1 740 5 discriminator 1
 1480 005c FB68     		ldr	r3, [r7, #12]
 1481 005e 002B     		cmp	r3, #0
 1482 0060 DEDA     		bge	.L52
 744:Src/main.c    ****     }
 745:Src/main.c    ****     return ts;
 1483              		.loc 1 745 12
 1484 0062 D7E90423 		ldrd	r2, [r7, #16]
 746:Src/main.c    **** }
 1485              		.loc 1 746 1
 1486 0066 1046     		mov	r0, r2
 1487 0068 1946     		mov	r1, r3
 1488 006a 1837     		adds	r7, r7, #24
 1489              	.LCFI38:
ARM GAS  /tmp/ccaFhF6z.s 			page 40


 1490              		.cfi_def_cfa_offset 16
 1491 006c BD46     		mov	sp, r7
 1492              	.LCFI39:
 1493              		.cfi_def_cfa_register 13
 1494              		@ sp needed
 1495 006e B0BD     		pop	{r4, r5, r7, pc}
 1496              		.cfi_endproc
 1497              	.LFE141:
 1499              		.section	.text.final_msg_get_ts,"ax",%progbits
 1500              		.align	1
 1501              		.syntax unified
 1502              		.thumb
 1503              		.thumb_func
 1504              		.fpu fpv4-sp-d16
 1506              	final_msg_get_ts:
 1507              	.LFB142:
 747:Src/main.c    **** 
 748:Src/main.c    **** /*! -----------------------------------------------------------------------------------------------
 749:Src/main.c    ****  * @fn final_msg_get_ts()
 750:Src/main.c    ****  *
 751:Src/main.c    ****  * @brief Read a given timestamp value from the final message. In the timestamp fields of the final
 752:Src/main.c    ****  *        significant byte is at the lower address.
 753:Src/main.c    ****  *
 754:Src/main.c    ****  * @param  ts_field  pointer on the first byte of the timestamp field to read
 755:Src/main.c    ****  *         ts  timestamp value
 756:Src/main.c    ****  *
 757:Src/main.c    ****  * @return none
 758:Src/main.c    ****  */
 759:Src/main.c    **** static void final_msg_get_ts(const uint8 *ts_field, uint32 *ts)
 760:Src/main.c    **** {
 1508              		.loc 1 760 1
 1509              		.cfi_startproc
 1510              		@ args = 0, pretend = 0, frame = 16
 1511              		@ frame_needed = 1, uses_anonymous_args = 0
 1512              		@ link register save eliminated.
 1513 0000 80B4     		push	{r7}
 1514              	.LCFI40:
 1515              		.cfi_def_cfa_offset 4
 1516              		.cfi_offset 7, -4
 1517 0002 85B0     		sub	sp, sp, #20
 1518              	.LCFI41:
 1519              		.cfi_def_cfa_offset 24
 1520 0004 00AF     		add	r7, sp, #0
 1521              	.LCFI42:
 1522              		.cfi_def_cfa_register 7
 1523 0006 7860     		str	r0, [r7, #4]
 1524 0008 3960     		str	r1, [r7]
 761:Src/main.c    ****     int i;
 762:Src/main.c    ****     *ts = 0;
 1525              		.loc 1 762 9
 1526 000a 3B68     		ldr	r3, [r7]
 1527 000c 0022     		movs	r2, #0
 1528 000e 1A60     		str	r2, [r3]
 763:Src/main.c    ****     for (i = 0; i < FINAL_MSG_TS_LEN; i++)
 1529              		.loc 1 763 12
 1530 0010 0023     		movs	r3, #0
 1531 0012 FB60     		str	r3, [r7, #12]
ARM GAS  /tmp/ccaFhF6z.s 			page 41


 1532              		.loc 1 763 5
 1533 0014 10E0     		b	.L55
 1534              	.L56:
 764:Src/main.c    ****     {
 765:Src/main.c    ****         *ts += ts_field[i] << (i * 8);
 1535              		.loc 1 765 13 discriminator 3
 1536 0016 3B68     		ldr	r3, [r7]
 1537 0018 1B68     		ldr	r3, [r3]
 1538              		.loc 1 765 24 discriminator 3
 1539 001a FA68     		ldr	r2, [r7, #12]
 1540 001c 7968     		ldr	r1, [r7, #4]
 1541 001e 0A44     		add	r2, r2, r1
 1542 0020 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1543 0022 1146     		mov	r1, r2
 1544              		.loc 1 765 34 discriminator 3
 1545 0024 FA68     		ldr	r2, [r7, #12]
 1546 0026 D200     		lsls	r2, r2, #3
 1547              		.loc 1 765 28 discriminator 3
 1548 0028 01FA02F2 		lsl	r2, r1, r2
 1549              		.loc 1 765 13 discriminator 3
 1550 002c 1A44     		add	r2, r2, r3
 1551 002e 3B68     		ldr	r3, [r7]
 1552 0030 1A60     		str	r2, [r3]
 763:Src/main.c    ****     for (i = 0; i < FINAL_MSG_TS_LEN; i++)
 1553              		.loc 1 763 40 discriminator 3
 1554 0032 FB68     		ldr	r3, [r7, #12]
 1555 0034 0133     		adds	r3, r3, #1
 1556 0036 FB60     		str	r3, [r7, #12]
 1557              	.L55:
 763:Src/main.c    ****     for (i = 0; i < FINAL_MSG_TS_LEN; i++)
 1558              		.loc 1 763 5 discriminator 1
 1559 0038 FB68     		ldr	r3, [r7, #12]
 1560 003a 032B     		cmp	r3, #3
 1561 003c EBDD     		ble	.L56
 766:Src/main.c    ****     }
 767:Src/main.c    **** }
 1562              		.loc 1 767 1
 1563 003e 00BF     		nop
 1564 0040 00BF     		nop
 1565 0042 1437     		adds	r7, r7, #20
 1566              	.LCFI43:
 1567              		.cfi_def_cfa_offset 4
 1568 0044 BD46     		mov	sp, r7
 1569              	.LCFI44:
 1570              		.cfi_def_cfa_register 13
 1571              		@ sp needed
 1572 0046 5DF8047B 		ldr	r7, [sp], #4
 1573              	.LCFI45:
 1574              		.cfi_restore 7
 1575              		.cfi_def_cfa_offset 0
 1576 004a 7047     		bx	lr
 1577              		.cfi_endproc
 1578              	.LFE142:
 1580              		.section	.text.final_msg_set_ts,"ax",%progbits
 1581              		.align	1
 1582              		.syntax unified
 1583              		.thumb
ARM GAS  /tmp/ccaFhF6z.s 			page 42


 1584              		.thumb_func
 1585              		.fpu fpv4-sp-d16
 1587              	final_msg_set_ts:
 1588              	.LFB143:
 768:Src/main.c    **** 
 769:Src/main.c    **** /*! -----------------------------------------------------------------------------------------------
 770:Src/main.c    ****  * @fn final_msg_set_ts()
 771:Src/main.c    ****  *
 772:Src/main.c    ****  * @brief Set a timestamp value to the final message. In the timestamp fields of the final message,
 773:Src/main.c    ****  *        significant byte is at the lower address.
 774:Src/main.c    ****  *
 775:Src/main.c    ****  * @param  ts_field  pointer on the first byte of the timestamp field to set
 776:Src/main.c    ****  *         ts  timestamp value
 777:Src/main.c    ****  *
 778:Src/main.c    ****  * @return none
 779:Src/main.c    ****  */
 780:Src/main.c    **** static void final_msg_set_ts(uint8 *ts_field, uint64 ts)
 781:Src/main.c    **** {
 1589              		.loc 1 781 1
 1590              		.cfi_startproc
 1591              		@ args = 0, pretend = 0, frame = 24
 1592              		@ frame_needed = 1, uses_anonymous_args = 0
 1593              		@ link register save eliminated.
 1594 0000 80B4     		push	{r7}
 1595              	.LCFI46:
 1596              		.cfi_def_cfa_offset 4
 1597              		.cfi_offset 7, -4
 1598 0002 87B0     		sub	sp, sp, #28
 1599              	.LCFI47:
 1600              		.cfi_def_cfa_offset 32
 1601 0004 00AF     		add	r7, sp, #0
 1602              	.LCFI48:
 1603              		.cfi_def_cfa_register 7
 1604 0006 F860     		str	r0, [r7, #12]
 1605 0008 C7E90023 		strd	r2, [r7]
 782:Src/main.c    ****     int i;
 783:Src/main.c    ****     for (i = 0; i < FINAL_MSG_TS_LEN; i++)
 1606              		.loc 1 783 12
 1607 000c 0023     		movs	r3, #0
 1608 000e 7B61     		str	r3, [r7, #20]
 1609              		.loc 1 783 5
 1610 0010 13E0     		b	.L58
 1611              	.L59:
 784:Src/main.c    ****     {
 785:Src/main.c    ****         ts_field[i] = (uint8) ts;
 1612              		.loc 1 785 17 discriminator 3
 1613 0012 7B69     		ldr	r3, [r7, #20]
 1614 0014 FA68     		ldr	r2, [r7, #12]
 1615 0016 1344     		add	r3, r3, r2
 1616              		.loc 1 785 23 discriminator 3
 1617 0018 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 1618              		.loc 1 785 21 discriminator 3
 1619 001a 1A70     		strb	r2, [r3]
 786:Src/main.c    ****         ts >>= 8;
 1620              		.loc 1 786 12 discriminator 3
 1621 001c D7E90001 		ldrd	r0, [r7]
 1622 0020 4FF00002 		mov	r2, #0
ARM GAS  /tmp/ccaFhF6z.s 			page 43


 1623 0024 4FF00003 		mov	r3, #0
 1624 0028 020A     		lsrs	r2, r0, #8
 1625 002a 42EA0162 		orr	r2, r2, r1, lsl #24
 1626 002e 0B0A     		lsrs	r3, r1, #8
 1627 0030 C7E90023 		strd	r2, [r7]
 783:Src/main.c    ****     {
 1628              		.loc 1 783 40 discriminator 3
 1629 0034 7B69     		ldr	r3, [r7, #20]
 1630 0036 0133     		adds	r3, r3, #1
 1631 0038 7B61     		str	r3, [r7, #20]
 1632              	.L58:
 783:Src/main.c    ****     {
 1633              		.loc 1 783 5 discriminator 1
 1634 003a 7B69     		ldr	r3, [r7, #20]
 1635 003c 032B     		cmp	r3, #3
 1636 003e E8DD     		ble	.L59
 787:Src/main.c    ****     }
 788:Src/main.c    **** }
 1637              		.loc 1 788 1
 1638 0040 00BF     		nop
 1639 0042 00BF     		nop
 1640 0044 1C37     		adds	r7, r7, #28
 1641              	.LCFI49:
 1642              		.cfi_def_cfa_offset 4
 1643 0046 BD46     		mov	sp, r7
 1644              	.LCFI50:
 1645              		.cfi_def_cfa_register 13
 1646              		@ sp needed
 1647 0048 5DF8047B 		ldr	r7, [sp], #4
 1648              	.LCFI51:
 1649              		.cfi_restore 7
 1650              		.cfi_def_cfa_offset 0
 1651 004c 7047     		bx	lr
 1652              		.cfi_endproc
 1653              	.LFE143:
 1655              		.section	.text.tx_conf_cb,"ax",%progbits
 1656              		.align	1
 1657              		.syntax unified
 1658              		.thumb
 1659              		.thumb_func
 1660              		.fpu fpv4-sp-d16
 1662              	tx_conf_cb:
 1663              	.LFB144:
 789:Src/main.c    **** 
 790:Src/main.c    **** // @brief Callback to process TX confirmation events
 791:Src/main.c    **** static void tx_conf_cb(const dwt_cb_data_t *cb_data){
 1664              		.loc 1 791 53
 1665              		.cfi_startproc
 1666              		@ args = 0, pretend = 0, frame = 8
 1667              		@ frame_needed = 1, uses_anonymous_args = 0
 1668              		@ link register save eliminated.
 1669 0000 80B4     		push	{r7}
 1670              	.LCFI52:
 1671              		.cfi_def_cfa_offset 4
 1672              		.cfi_offset 7, -4
 1673 0002 83B0     		sub	sp, sp, #12
 1674              	.LCFI53:
ARM GAS  /tmp/ccaFhF6z.s 			page 44


 1675              		.cfi_def_cfa_offset 16
 1676 0004 00AF     		add	r7, sp, #0
 1677              	.LCFI54:
 1678              		.cfi_def_cfa_register 7
 1679 0006 7860     		str	r0, [r7, #4]
 792:Src/main.c    **** }
 1680              		.loc 1 792 1
 1681 0008 00BF     		nop
 1682 000a 0C37     		adds	r7, r7, #12
 1683              	.LCFI55:
 1684              		.cfi_def_cfa_offset 4
 1685 000c BD46     		mov	sp, r7
 1686              	.LCFI56:
 1687              		.cfi_def_cfa_register 13
 1688              		@ sp needed
 1689 000e 5DF8047B 		ldr	r7, [sp], #4
 1690              	.LCFI57:
 1691              		.cfi_restore 7
 1692              		.cfi_def_cfa_offset 0
 1693 0012 7047     		bx	lr
 1694              		.cfi_endproc
 1695              	.LFE144:
 1697              		.section	.rodata
 1698 008e 0000     		.align	2
 1699              	.LC6:
 1700 0090 53656E64 		.ascii	"Sending Error\000"
 1700      696E6720 
 1700      4572726F 
 1700      7200
 1701              		.global	__aeabi_ui2d
 1702              		.global	__aeabi_dmul
 1703              		.global	__aeabi_dsub
 1704              		.global	__aeabi_dadd
 1705              		.global	__aeabi_ddiv
 1706              		.global	__aeabi_d2lz
 1707              		.global	__aeabi_l2d
 1708              		.section	.text.rx_ok_cb,"ax",%progbits
 1709              		.align	1
 1710              		.syntax unified
 1711              		.thumb
 1712              		.thumb_func
 1713              		.fpu fpv4-sp-d16
 1715              	rx_ok_cb:
 1716              	.LFB145:
 793:Src/main.c    **** 
 794:Src/main.c    **** // @brief Callback to process RX OK events
 795:Src/main.c    **** static void rx_ok_cb(const dwt_cb_data_t *cb_data){
 1717              		.loc 1 795 51
 1718              		.cfi_startproc
 1719              		@ args = 0, pretend = 0, frame = 88
 1720              		@ frame_needed = 1, uses_anonymous_args = 0
 1721 0000 B0B5     		push	{r4, r5, r7, lr}
 1722              	.LCFI58:
 1723              		.cfi_def_cfa_offset 16
 1724              		.cfi_offset 4, -16
 1725              		.cfi_offset 5, -12
 1726              		.cfi_offset 7, -8
ARM GAS  /tmp/ccaFhF6z.s 			page 45


 1727              		.cfi_offset 14, -4
 1728 0002 96B0     		sub	sp, sp, #88
 1729              	.LCFI59:
 1730              		.cfi_def_cfa_offset 104
 1731 0004 00AF     		add	r7, sp, #0
 1732              	.LCFI60:
 1733              		.cfi_def_cfa_register 7
 1734 0006 7860     		str	r0, [r7, #4]
 796:Src/main.c    **** 		//printf("Received a frame\n");
 797:Src/main.c    **** 
 798:Src/main.c    **** 		/* Clear good RX frame event in the DW1000 status register. */
 799:Src/main.c    **** 		dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_RXFCG);
 1735              		.loc 1 799 3
 1736 0008 4FF48042 		mov	r2, #16384
 1737 000c 0021     		movs	r1, #0
 1738 000e 0F20     		movs	r0, #15
 1739 0010 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 1740              	.LBB5:
 800:Src/main.c    **** 
 801:Src/main.c    **** 		/* Clear local RX buffer to avoid having leftovers from previous receptions. This is not necessar
 802:Src/main.c    **** 			 * buffer. */
 803:Src/main.c    **** 		for (int i = 0 ; i < RX_BUF_LEN; i++ )
 1741              		.loc 1 803 12
 1742 0014 0023     		movs	r3, #0
 1743 0016 7B65     		str	r3, [r7, #84]
 1744              		.loc 1 803 3
 1745 0018 07E0     		b	.L62
 1746              	.L63:
 804:Src/main.c    **** 		{
 805:Src/main.c    **** 			rx_buffer[i] = 0;
 1747              		.loc 1 805 17 discriminator 3
 1748 001a 9F4A     		ldr	r2, .L69+16
 1749 001c 7B6D     		ldr	r3, [r7, #84]
 1750 001e 1344     		add	r3, r3, r2
 1751 0020 0022     		movs	r2, #0
 1752 0022 1A70     		strb	r2, [r3]
 803:Src/main.c    **** 		{
 1753              		.loc 1 803 37 discriminator 3
 1754 0024 7B6D     		ldr	r3, [r7, #84]
 1755 0026 0133     		adds	r3, r3, #1
 1756 0028 7B65     		str	r3, [r7, #84]
 1757              	.L62:
 803:Src/main.c    **** 		{
 1758              		.loc 1 803 3 discriminator 1
 1759 002a 7B6D     		ldr	r3, [r7, #84]
 1760 002c 172B     		cmp	r3, #23
 1761 002e F4DD     		ble	.L63
 1762              	.LBE5:
 806:Src/main.c    **** 
 807:Src/main.c    **** 		}
 808:Src/main.c    **** 		
 809:Src/main.c    **** 		/* A frame has been received, read it into the local buffer. */
 810:Src/main.c    **** 		if (cb_data->datalength <= RX_BUF_LEN)
 1763              		.loc 1 810 14
 1764 0030 7B68     		ldr	r3, [r7, #4]
 1765 0032 9B88     		ldrh	r3, [r3, #4]
 1766              		.loc 1 810 6
ARM GAS  /tmp/ccaFhF6z.s 			page 46


 1767 0034 182B     		cmp	r3, #24
 1768 0036 06D8     		bhi	.L64
 811:Src/main.c    **** 		{
 812:Src/main.c    **** 				dwt_readrxdata(rx_buffer, cb_data->datalength, 0);
 1769              		.loc 1 812 5
 1770 0038 7B68     		ldr	r3, [r7, #4]
 1771 003a 9B88     		ldrh	r3, [r3, #4]
 1772 003c 0022     		movs	r2, #0
 1773 003e 1946     		mov	r1, r3
 1774 0040 9548     		ldr	r0, .L69+16
 1775 0042 FFF7FEFF 		bl	dwt_readrxdata
 1776              	.L64:
 813:Src/main.c    **** 		}
 814:Src/main.c    **** 
 815:Src/main.c    **** 		/* Check that the frame is a first poll sent by "DS TWR initiator" example or the final message.
 816:Src/main.c    **** 		 * As the sequence number field of the frame is not relevant, it is cleared to simplify the valid
 817:Src/main.c    **** 		rx_buffer[ALL_MSG_SN_IDX] = 0;
 1777              		.loc 1 817 29
 1778 0046 944B     		ldr	r3, .L69+16
 1779 0048 0022     		movs	r2, #0
 1780 004a 9A70     		strb	r2, [r3, #2]
 818:Src/main.c    **** 		if (memcmp(rx_buffer, rx_poll_msg, ALL_MSG_COMMON_LEN) == 0)
 1781              		.loc 1 818 7
 1782 004c 0A22     		movs	r2, #10
 1783 004e 9349     		ldr	r1, .L69+20
 1784 0050 9148     		ldr	r0, .L69+16
 1785 0052 FFF7FEFF 		bl	memcmp
 1786 0056 0346     		mov	r3, r0
 1787              		.loc 1 818 6
 1788 0058 002B     		cmp	r3, #0
 1789 005a 50D1     		bne	.L65
 1790              	.LBB6:
 819:Src/main.c    **** 		{
 820:Src/main.c    **** 			  t1 = HAL_GetTick();
 1791              		.loc 1 820 11
 1792 005c FFF7FEFF 		bl	HAL_GetTick
 1793 0060 0346     		mov	r3, r0
 1794 0062 1A46     		mov	r2, r3
 1795 0064 4FF00003 		mov	r3, #0
 1796              		.loc 1 820 9
 1797 0068 8D49     		ldr	r1, .L69+24
 1798 006a C1E90023 		strd	r2, [r1]
 821:Src/main.c    **** 				//printf("Received the expected frame\n");
 822:Src/main.c    **** 				uint32 resp_tx_time;
 823:Src/main.c    **** 				int ret;
 824:Src/main.c    **** 
 825:Src/main.c    **** 				/* Retrieve poll reception timestamp. */
 826:Src/main.c    **** 				poll_rx_ts = get_rx_timestamp_u64();
 1799              		.loc 1 826 18
 1800 006e FFF7FEFF 		bl	get_rx_timestamp_u64
 1801 0072 0246     		mov	r2, r0
 1802 0074 0B46     		mov	r3, r1
 1803              		.loc 1 826 16
 1804 0076 8B49     		ldr	r1, .L69+28
 1805 0078 C1E90023 		strd	r2, [r1]
 827:Src/main.c    **** 
 828:Src/main.c    **** 				/* Set send time for response. See NOTE 9 below. */
ARM GAS  /tmp/ccaFhF6z.s 			page 47


 829:Src/main.c    **** 				resp_tx_time = (poll_rx_ts + (POLL_RX_TO_RESP_TX_DLY_UUS * UUS_TO_DWT_TIME)) >> 8;
 1806              		.loc 1 829 32
 1807 007c 894B     		ldr	r3, .L69+28
 1808 007e D3E90023 		ldrd	r2, [r3]
 1809 0082 8948     		ldr	r0, .L69+32
 1810 0084 4FF00001 		mov	r1, #0
 1811 0088 1418     		adds	r4, r2, r0
 1812 008a 43EB0105 		adc	r5, r3, r1
 1813              		.loc 1 829 82
 1814 008e 4FF00002 		mov	r2, #0
 1815 0092 4FF00003 		mov	r3, #0
 1816 0096 220A     		lsrs	r2, r4, #8
 1817 0098 42EA0562 		orr	r2, r2, r5, lsl #24
 1818 009c 2B0A     		lsrs	r3, r5, #8
 1819              		.loc 1 829 18
 1820 009e 1346     		mov	r3, r2
 1821 00a0 FB61     		str	r3, [r7, #28]
 830:Src/main.c    **** 				dwt_setdelayedtrxtime(resp_tx_time);
 1822              		.loc 1 830 5
 1823 00a2 F869     		ldr	r0, [r7, #28]
 1824 00a4 FFF7FEFF 		bl	dwt_setdelayedtrxtime
 831:Src/main.c    **** 
 832:Src/main.c    **** 				/* Set expected delay and timeout for final message reception. See NOTE 4 and 5 below. */
 833:Src/main.c    **** 				dwt_setrxaftertxdelay(RESP_TX_TO_FINAL_RX_DLY_UUS);
 1825              		.loc 1 833 5
 1826 00a8 4FF49670 		mov	r0, #300
 1827 00ac FFF7FEFF 		bl	dwt_setrxaftertxdelay
 834:Src/main.c    **** 				dwt_setrxtimeout(FINAL_RX_TIMEOUT_UUS);
 1828              		.loc 1 834 5
 1829 00b0 44F62060 		movw	r0, #20000
 1830 00b4 FFF7FEFF 		bl	dwt_setrxtimeout
 835:Src/main.c    **** 
 836:Src/main.c    **** 				/* Write and send the response message. See NOTE 10 below.*/
 837:Src/main.c    **** 				tx_resp_msg[ALL_MSG_SN_IDX] = frame_seq_nb_responder;
 1831              		.loc 1 837 33
 1832 00b8 7C4B     		ldr	r3, .L69+36
 1833 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1834 00bc 7C4B     		ldr	r3, .L69+40
 1835 00be 9A70     		strb	r2, [r3, #2]
 838:Src/main.c    **** 				dwt_writetxdata(sizeof(tx_resp_msg), tx_resp_msg, 0); /* Zero offset in TX buffer. */
 1836              		.loc 1 838 5
 1837 00c0 0022     		movs	r2, #0
 1838 00c2 7B49     		ldr	r1, .L69+40
 1839 00c4 0F20     		movs	r0, #15
 1840 00c6 FFF7FEFF 		bl	dwt_writetxdata
 839:Src/main.c    **** 				dwt_writetxfctrl(sizeof(tx_resp_msg), 0, 1); /* Zero offset in TX buffer, ranging. */
 1841              		.loc 1 839 5
 1842 00ca 0122     		movs	r2, #1
 1843 00cc 0021     		movs	r1, #0
 1844 00ce 0F20     		movs	r0, #15
 1845 00d0 FFF7FEFF 		bl	dwt_writetxfctrl
 840:Src/main.c    **** 				ret = dwt_starttx(DWT_START_TX_DELAYED | DWT_RESPONSE_EXPECTED);
 1846              		.loc 1 840 11
 1847 00d4 0320     		movs	r0, #3
 1848 00d6 FFF7FEFF 		bl	dwt_starttx
 1849 00da B861     		str	r0, [r7, #24]
 841:Src/main.c    **** 
ARM GAS  /tmp/ccaFhF6z.s 			page 48


 842:Src/main.c    **** 				/* If dwt_starttx() returns an error, abandon this ranging exchange and proceed to the next one
 843:Src/main.c    **** 				if (ret == DWT_ERROR)
 1850              		.loc 1 843 8
 1851 00dc BB69     		ldr	r3, [r7, #24]
 1852 00de B3F1FF3F 		cmp	r3, #-1
 1853 00e2 02D1     		bne	.L66
 844:Src/main.c    **** 				{
 845:Src/main.c    **** 						printf("Sending Error\n");
 1854              		.loc 1 845 7
 1855 00e4 7348     		ldr	r0, .L69+44
 1856 00e6 FFF7FEFF 		bl	puts
 1857              	.L66:
 846:Src/main.c    **** 				}
 847:Src/main.c    **** 				//printf("Response sent, waiting for final reception\n");
 848:Src/main.c    **** 
 849:Src/main.c    **** 				
 850:Src/main.c    **** 				/* Increment frame sequence number after transmission of the response message (modulo 256). */
 851:Src/main.c    **** 				frame_seq_nb_responder++;
 1858              		.loc 1 851 27
 1859 00ea 704B     		ldr	r3, .L69+36
 1860 00ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1861 00ee 0133     		adds	r3, r3, #1
 1862 00f0 DAB2     		uxtb	r2, r3
 1863 00f2 6E4B     		ldr	r3, .L69+36
 1864 00f4 1A70     		strb	r2, [r3]
 852:Src/main.c    **** 
 853:Src/main.c    **** 				state = WAIT;
 1865              		.loc 1 853 11
 1866 00f6 704B     		ldr	r3, .L69+48
 1867 00f8 0222     		movs	r2, #2
 1868 00fa 1A70     		strb	r2, [r3]
 1869              	.LBE6:
 854:Src/main.c    **** 		}
 855:Src/main.c    **** 		else if (memcmp(rx_buffer, rx_final_msg, ALL_MSG_COMMON_LEN) == 0)
 856:Src/main.c    **** 		{
 857:Src/main.c    **** 				dwt_setleds(DWT_LEDS_ENABLE);
 858:Src/main.c    **** 				uint32 poll_tx_ts, resp_rx_ts, final_tx_ts;
 859:Src/main.c    **** 				uint32 poll_rx_ts_32, resp_tx_ts_32, final_rx_ts_32;
 860:Src/main.c    **** 				double Ra, Rb, Da, Db;
 861:Src/main.c    **** 				int64 tof_dtu;
 862:Src/main.c    **** 
 863:Src/main.c    **** 				/* Retrieve response transmission and final reception timestamps. */
 864:Src/main.c    **** 				resp_tx_ts = get_tx_timestamp_u64();
 865:Src/main.c    **** 				final_rx_ts = get_rx_timestamp_u64();
 866:Src/main.c    **** 
 867:Src/main.c    **** 				/* Get timestamps embedded in the final message. */
 868:Src/main.c    **** 				final_msg_get_ts(&rx_buffer[FINAL_MSG_POLL_TX_TS_IDX], &poll_tx_ts);
 869:Src/main.c    **** 				final_msg_get_ts(&rx_buffer[FINAL_MSG_RESP_RX_TS_IDX], &resp_rx_ts);
 870:Src/main.c    **** 				final_msg_get_ts(&rx_buffer[FINAL_MSG_FINAL_TX_TS_IDX], &final_tx_ts);
 871:Src/main.c    **** 
 872:Src/main.c    **** 				/* Compute time of flight. 32-bit subtractions give correct answers even if clock has wrapped. 
 873:Src/main.c    **** 				poll_rx_ts_32 = (uint32)poll_rx_ts;
 874:Src/main.c    **** 				resp_tx_ts_32 = (uint32)resp_tx_ts;
 875:Src/main.c    **** 				final_rx_ts_32 = (uint32)final_rx_ts;
 876:Src/main.c    **** 				Ra = (double)(resp_rx_ts - poll_tx_ts);
 877:Src/main.c    **** 				Rb = (double)(final_rx_ts_32 - resp_tx_ts_32);
 878:Src/main.c    **** 				Da = (double)(final_tx_ts - resp_rx_ts);
ARM GAS  /tmp/ccaFhF6z.s 			page 49


 879:Src/main.c    **** 				Db = (double)(resp_tx_ts_32 - poll_rx_ts_32);
 880:Src/main.c    **** 				tof_dtu = (int64)((Ra * Rb - Da * Db) / (Ra + Rb + Da + Db));
 881:Src/main.c    **** 
 882:Src/main.c    **** 				tof = tof_dtu * DWT_TIME_UNITS;
 883:Src/main.c    **** 				distance = tof * SPEED_OF_LIGHT;
 884:Src/main.c    **** 
 885:Src/main.c    **** 				/* Display computed distance on LCD. */
 886:Src/main.c    **** 				//printf("Dist: %1.2f\n",distance);
 887:Src/main.c    **** 				
 888:Src/main.c    **** 				state = PROCESS;
 889:Src/main.c    **** 		}
 890:Src/main.c    **** }
 1870              		.loc 1 890 1
 1871 00fc C0E0     		b	.L68
 1872              	.L65:
 855:Src/main.c    **** 		{
 1873              		.loc 1 855 12
 1874 00fe 0A22     		movs	r2, #10
 1875 0100 6E49     		ldr	r1, .L69+52
 1876 0102 6548     		ldr	r0, .L69+16
 1877 0104 FFF7FEFF 		bl	memcmp
 1878 0108 0346     		mov	r3, r0
 855:Src/main.c    **** 		{
 1879              		.loc 1 855 11
 1880 010a 002B     		cmp	r3, #0
 1881 010c 40F0B880 		bne	.L68
 1882              	.LBB7:
 857:Src/main.c    **** 				uint32 poll_tx_ts, resp_rx_ts, final_tx_ts;
 1883              		.loc 1 857 5
 1884 0110 0120     		movs	r0, #1
 1885 0112 FFF7FEFF 		bl	dwt_setleds
 864:Src/main.c    **** 				final_rx_ts = get_rx_timestamp_u64();
 1886              		.loc 1 864 18
 1887 0116 FFF7FEFF 		bl	get_tx_timestamp_u64
 1888 011a 0246     		mov	r2, r0
 1889 011c 0B46     		mov	r3, r1
 864:Src/main.c    **** 				final_rx_ts = get_rx_timestamp_u64();
 1890              		.loc 1 864 16
 1891 011e 6849     		ldr	r1, .L69+56
 1892 0120 C1E90023 		strd	r2, [r1]
 865:Src/main.c    **** 
 1893              		.loc 1 865 19
 1894 0124 FFF7FEFF 		bl	get_rx_timestamp_u64
 1895 0128 0246     		mov	r2, r0
 1896 012a 0B46     		mov	r3, r1
 865:Src/main.c    **** 
 1897              		.loc 1 865 17
 1898 012c 6549     		ldr	r1, .L69+60
 1899 012e C1E90023 		strd	r2, [r1]
 868:Src/main.c    **** 				final_msg_get_ts(&rx_buffer[FINAL_MSG_RESP_RX_TS_IDX], &resp_rx_ts);
 1900              		.loc 1 868 5
 1901 0132 07F11403 		add	r3, r7, #20
 1902 0136 1946     		mov	r1, r3
 1903 0138 6348     		ldr	r0, .L69+64
 1904 013a FFF7FEFF 		bl	final_msg_get_ts
 869:Src/main.c    **** 				final_msg_get_ts(&rx_buffer[FINAL_MSG_FINAL_TX_TS_IDX], &final_tx_ts);
 1905              		.loc 1 869 5
ARM GAS  /tmp/ccaFhF6z.s 			page 50


 1906 013e 07F11003 		add	r3, r7, #16
 1907 0142 1946     		mov	r1, r3
 1908 0144 6148     		ldr	r0, .L69+68
 1909 0146 FFF7FEFF 		bl	final_msg_get_ts
 870:Src/main.c    **** 
 1910              		.loc 1 870 5
 1911 014a 07F10C03 		add	r3, r7, #12
 1912 014e 1946     		mov	r1, r3
 1913 0150 5F48     		ldr	r0, .L69+72
 1914 0152 FFF7FEFF 		bl	final_msg_get_ts
 873:Src/main.c    **** 				resp_tx_ts_32 = (uint32)resp_tx_ts;
 1915              		.loc 1 873 21
 1916 0156 534B     		ldr	r3, .L69+28
 1917 0158 D3E90023 		ldrd	r2, [r3]
 873:Src/main.c    **** 				resp_tx_ts_32 = (uint32)resp_tx_ts;
 1918              		.loc 1 873 19
 1919 015c 1346     		mov	r3, r2
 1920 015e 3B65     		str	r3, [r7, #80]
 874:Src/main.c    **** 				final_rx_ts_32 = (uint32)final_rx_ts;
 1921              		.loc 1 874 21
 1922 0160 574B     		ldr	r3, .L69+56
 1923 0162 D3E90023 		ldrd	r2, [r3]
 874:Src/main.c    **** 				final_rx_ts_32 = (uint32)final_rx_ts;
 1924              		.loc 1 874 19
 1925 0166 1346     		mov	r3, r2
 1926 0168 FB64     		str	r3, [r7, #76]
 875:Src/main.c    **** 				Ra = (double)(resp_rx_ts - poll_tx_ts);
 1927              		.loc 1 875 22
 1928 016a 564B     		ldr	r3, .L69+60
 1929 016c D3E90023 		ldrd	r2, [r3]
 875:Src/main.c    **** 				Ra = (double)(resp_rx_ts - poll_tx_ts);
 1930              		.loc 1 875 20
 1931 0170 1346     		mov	r3, r2
 1932 0172 BB64     		str	r3, [r7, #72]
 876:Src/main.c    **** 				Rb = (double)(final_rx_ts_32 - resp_tx_ts_32);
 1933              		.loc 1 876 30
 1934 0174 3A69     		ldr	r2, [r7, #16]
 1935 0176 7B69     		ldr	r3, [r7, #20]
 1936 0178 D31A     		subs	r3, r2, r3
 876:Src/main.c    **** 				Rb = (double)(final_rx_ts_32 - resp_tx_ts_32);
 1937              		.loc 1 876 8
 1938 017a 1846     		mov	r0, r3
 1939 017c FFF7FEFF 		bl	__aeabi_ui2d
 1940              	.LVL0:
 1941 0180 0246     		mov	r2, r0
 1942 0182 0B46     		mov	r3, r1
 1943 0184 C7E91023 		strd	r2, [r7, #64]
 877:Src/main.c    **** 				Da = (double)(final_tx_ts - resp_rx_ts);
 1944              		.loc 1 877 34
 1945 0188 BA6C     		ldr	r2, [r7, #72]
 1946 018a FB6C     		ldr	r3, [r7, #76]
 1947 018c D31A     		subs	r3, r2, r3
 877:Src/main.c    **** 				Da = (double)(final_tx_ts - resp_rx_ts);
 1948              		.loc 1 877 8
 1949 018e 1846     		mov	r0, r3
 1950 0190 FFF7FEFF 		bl	__aeabi_ui2d
 1951              	.LVL1:
ARM GAS  /tmp/ccaFhF6z.s 			page 51


 1952 0194 0246     		mov	r2, r0
 1953 0196 0B46     		mov	r3, r1
 1954 0198 C7E90E23 		strd	r2, [r7, #56]
 878:Src/main.c    **** 				Db = (double)(resp_tx_ts_32 - poll_rx_ts_32);
 1955              		.loc 1 878 31
 1956 019c FA68     		ldr	r2, [r7, #12]
 1957 019e 3B69     		ldr	r3, [r7, #16]
 1958 01a0 D31A     		subs	r3, r2, r3
 878:Src/main.c    **** 				Db = (double)(resp_tx_ts_32 - poll_rx_ts_32);
 1959              		.loc 1 878 8
 1960 01a2 1846     		mov	r0, r3
 1961 01a4 FFF7FEFF 		bl	__aeabi_ui2d
 1962              	.LVL2:
 1963 01a8 0246     		mov	r2, r0
 1964 01aa 0B46     		mov	r3, r1
 1965 01ac C7E90C23 		strd	r2, [r7, #48]
 879:Src/main.c    **** 				tof_dtu = (int64)((Ra * Rb - Da * Db) / (Ra + Rb + Da + Db));
 1966              		.loc 1 879 33
 1967 01b0 FA6C     		ldr	r2, [r7, #76]
 1968 01b2 3B6D     		ldr	r3, [r7, #80]
 1969 01b4 D31A     		subs	r3, r2, r3
 879:Src/main.c    **** 				tof_dtu = (int64)((Ra * Rb - Da * Db) / (Ra + Rb + Da + Db));
 1970              		.loc 1 879 8
 1971 01b6 1846     		mov	r0, r3
 1972 01b8 FFF7FEFF 		bl	__aeabi_ui2d
 1973              	.LVL3:
 1974 01bc 0246     		mov	r2, r0
 1975 01be 0B46     		mov	r3, r1
 1976 01c0 C7E90A23 		strd	r2, [r7, #40]
 880:Src/main.c    **** 
 1977              		.loc 1 880 27
 1978 01c4 D7E90E23 		ldrd	r2, [r7, #56]
 1979 01c8 D7E91001 		ldrd	r0, [r7, #64]
 1980 01cc FFF7FEFF 		bl	__aeabi_dmul
 1981              	.LVL4:
 1982 01d0 0246     		mov	r2, r0
 1983 01d2 0B46     		mov	r3, r1
 1984 01d4 1446     		mov	r4, r2
 1985 01d6 1D46     		mov	r5, r3
 880:Src/main.c    **** 
 1986              		.loc 1 880 37
 1987 01d8 D7E90A23 		ldrd	r2, [r7, #40]
 1988 01dc D7E90C01 		ldrd	r0, [r7, #48]
 1989 01e0 FFF7FEFF 		bl	__aeabi_dmul
 1990              	.LVL5:
 1991 01e4 0246     		mov	r2, r0
 1992 01e6 0B46     		mov	r3, r1
 880:Src/main.c    **** 
 1993              		.loc 1 880 32
 1994 01e8 2046     		mov	r0, r4
 1995 01ea 2946     		mov	r1, r5
 1996 01ec FFF7FEFF 		bl	__aeabi_dsub
 1997              	.LVL6:
 1998 01f0 0246     		mov	r2, r0
 1999 01f2 0B46     		mov	r3, r1
 2000 01f4 1446     		mov	r4, r2
 2001 01f6 1D46     		mov	r5, r3
ARM GAS  /tmp/ccaFhF6z.s 			page 52


 880:Src/main.c    **** 
 2002              		.loc 1 880 49
 2003 01f8 D7E90E23 		ldrd	r2, [r7, #56]
 2004 01fc D7E91001 		ldrd	r0, [r7, #64]
 2005 0200 FFF7FEFF 		bl	__aeabi_dadd
 2006              	.LVL7:
 2007 0204 0246     		mov	r2, r0
 2008 0206 0B46     		mov	r3, r1
 2009 0208 1046     		mov	r0, r2
 2010 020a 1946     		mov	r1, r3
 880:Src/main.c    **** 
 2011              		.loc 1 880 54
 2012 020c D7E90C23 		ldrd	r2, [r7, #48]
 2013 0210 FFF7FEFF 		bl	__aeabi_dadd
 2014              	.LVL8:
 2015 0214 0246     		mov	r2, r0
 2016 0216 0B46     		mov	r3, r1
 2017 0218 1046     		mov	r0, r2
 2018 021a 1946     		mov	r1, r3
 880:Src/main.c    **** 
 2019              		.loc 1 880 59
 2020 021c D7E90A23 		ldrd	r2, [r7, #40]
 2021 0220 FFF7FEFF 		bl	__aeabi_dadd
 2022              	.LVL9:
 2023 0224 0246     		mov	r2, r0
 2024 0226 0B46     		mov	r3, r1
 880:Src/main.c    **** 
 2025              		.loc 1 880 43
 2026 0228 2046     		mov	r0, r4
 2027 022a 2946     		mov	r1, r5
 2028 022c FFF7FEFF 		bl	__aeabi_ddiv
 2029              	.LVL10:
 2030 0230 0246     		mov	r2, r0
 2031 0232 0B46     		mov	r3, r1
 880:Src/main.c    **** 
 2032              		.loc 1 880 13
 2033 0234 1046     		mov	r0, r2
 2034 0236 1946     		mov	r1, r3
 2035 0238 FFF7FEFF 		bl	__aeabi_d2lz
 2036              	.LVL11:
 2037 023c 0246     		mov	r2, r0
 2038 023e 0B46     		mov	r3, r1
 2039 0240 C7E90823 		strd	r2, [r7, #32]
 882:Src/main.c    **** 				distance = tof * SPEED_OF_LIGHT;
 2040              		.loc 1 882 19
 2041 0244 D7E90801 		ldrd	r0, [r7, #32]
 2042 0248 FFF7FEFF 		bl	__aeabi_l2d
 2043              	.LVL12:
 2044 024c 0EA3     		adr	r3, .L69
 2045 024e D3E90023 		ldrd	r2, [r3]
 2046 0252 FFF7FEFF 		bl	__aeabi_dmul
 2047              	.LVL13:
 2048 0256 0246     		mov	r2, r0
 2049 0258 0B46     		mov	r3, r1
 882:Src/main.c    **** 				distance = tof * SPEED_OF_LIGHT;
 2050              		.loc 1 882 9
 2051 025a 1E49     		ldr	r1, .L69+76
ARM GAS  /tmp/ccaFhF6z.s 			page 53


 2052 025c C1E90023 		strd	r2, [r1]
 883:Src/main.c    **** 
 2053              		.loc 1 883 20
 2054 0260 1C4B     		ldr	r3, .L69+76
 2055 0262 D3E90001 		ldrd	r0, [r3]
 2056 0266 0AA3     		adr	r3, .L69+8
 2057 0268 D3E90023 		ldrd	r2, [r3]
 2058 026c FFF7FEFF 		bl	__aeabi_dmul
 2059              	.LVL14:
 2060 0270 0246     		mov	r2, r0
 2061 0272 0B46     		mov	r3, r1
 883:Src/main.c    **** 
 2062              		.loc 1 883 14
 2063 0274 1849     		ldr	r1, .L69+80
 2064 0276 C1E90023 		strd	r2, [r1]
 888:Src/main.c    **** 		}
 2065              		.loc 1 888 11
 2066 027a 0F4B     		ldr	r3, .L69+48
 2067 027c 0322     		movs	r2, #3
 2068 027e 1A70     		strb	r2, [r3]
 2069              	.L68:
 2070              	.LBE7:
 2071              		.loc 1 890 1
 2072 0280 00BF     		nop
 2073 0282 5837     		adds	r7, r7, #88
 2074              	.LCFI61:
 2075              		.cfi_def_cfa_offset 16
 2076 0284 BD46     		mov	sp, r7
 2077              	.LCFI62:
 2078              		.cfi_def_cfa_register 13
 2079              		@ sp needed
 2080 0286 B0BD     		pop	{r4, r5, r7, pc}
 2081              	.L70:
 2082              		.align	3
 2083              	.L69:
 2084 0288 FA48CE3B 		.word	1003374842
 2085 028c 1835B13D 		.word	1035023640
 2086 0290 00000013 		.word	318767104
 2087 0294 19DDB141 		.word	1102175513
 2088 0298 00000000 		.word	rx_buffer
 2089 029c 00000000 		.word	rx_poll_msg
 2090 02a0 00000000 		.word	t1
 2091 02a4 00000000 		.word	poll_rx_ts
 2092 02a8 0000AC0D 		.word	229376000
 2093 02ac 00000000 		.word	frame_seq_nb_responder
 2094 02b0 00000000 		.word	tx_resp_msg
 2095 02b4 90000000 		.word	.LC6
 2096 02b8 00000000 		.word	state
 2097 02bc 00000000 		.word	rx_final_msg
 2098 02c0 00000000 		.word	resp_tx_ts
 2099 02c4 00000000 		.word	final_rx_ts
 2100 02c8 0A000000 		.word	rx_buffer+10
 2101 02cc 0E000000 		.word	rx_buffer+14
 2102 02d0 12000000 		.word	rx_buffer+18
 2103 02d4 00000000 		.word	tof
 2104 02d8 00000000 		.word	distance
 2105              		.cfi_endproc
ARM GAS  /tmp/ccaFhF6z.s 			page 54


 2106              	.LFE145:
 2108              		.section	.text.rx_to_cb,"ax",%progbits
 2109              		.align	1
 2110              		.syntax unified
 2111              		.thumb
 2112              		.thumb_func
 2113              		.fpu fpv4-sp-d16
 2115              	rx_to_cb:
 2116              	.LFB146:
 891:Src/main.c    ****  
 892:Src/main.c    **** // @brief Callback to process RX timeout events
 893:Src/main.c    **** static void rx_to_cb(const dwt_cb_data_t *cb_data){
 2117              		.loc 1 893 51
 2118              		.cfi_startproc
 2119              		@ args = 0, pretend = 0, frame = 8
 2120              		@ frame_needed = 1, uses_anonymous_args = 0
 2121 0000 80B5     		push	{r7, lr}
 2122              	.LCFI63:
 2123              		.cfi_def_cfa_offset 8
 2124              		.cfi_offset 7, -8
 2125              		.cfi_offset 14, -4
 2126 0002 82B0     		sub	sp, sp, #8
 2127              	.LCFI64:
 2128              		.cfi_def_cfa_offset 16
 2129 0004 00AF     		add	r7, sp, #0
 2130              	.LCFI65:
 2131              		.cfi_def_cfa_register 7
 2132 0006 7860     		str	r0, [r7, #4]
 894:Src/main.c    **** 		//printf ("Not receiving a frame and timeout. Cause:%lx\n",cb_data->status);
 895:Src/main.c    **** 		/* Clear RX error/timeout events in the DW1000 status register. */
 896:Src/main.c    **** 		dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_TO | SYS_STATUS_ALL_RX_ERR);
 2133              		.loc 1 896 3
 2134 0008 064A     		ldr	r2, .L72
 2135 000a 0021     		movs	r1, #0
 2136 000c 0F20     		movs	r0, #15
 2137 000e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 897:Src/main.c    **** 
 898:Src/main.c    **** 		/* Reset RX to properly reinitialise LDE operation. */
 899:Src/main.c    **** 		dwt_rxreset();
 2138              		.loc 1 899 3
 2139 0012 FFF7FEFF 		bl	dwt_rxreset
 900:Src/main.c    **** 	
 901:Src/main.c    **** 		state = RECEIVE_I;
 2140              		.loc 1 901 9
 2141 0016 044B     		ldr	r3, .L72+4
 2142 0018 0122     		movs	r2, #1
 2143 001a 1A70     		strb	r2, [r3]
 902:Src/main.c    **** }
 2144              		.loc 1 902 1
 2145 001c 00BF     		nop
 2146 001e 0837     		adds	r7, r7, #8
 2147              	.LCFI66:
 2148              		.cfi_def_cfa_offset 8
 2149 0020 BD46     		mov	sp, r7
 2150              	.LCFI67:
 2151              		.cfi_def_cfa_register 13
 2152              		@ sp needed
ARM GAS  /tmp/ccaFhF6z.s 			page 55


 2153 0022 80BD     		pop	{r7, pc}
 2154              	.L73:
 2155              		.align	2
 2156              	.L72:
 2157 0024 00902724 		.word	606572544
 2158 0028 00000000 		.word	state
 2159              		.cfi_endproc
 2160              	.LFE146:
 2162              		.section	.text.rx_err_cb,"ax",%progbits
 2163              		.align	1
 2164              		.syntax unified
 2165              		.thumb
 2166              		.thumb_func
 2167              		.fpu fpv4-sp-d16
 2169              	rx_err_cb:
 2170              	.LFB147:
 903:Src/main.c    **** 
 904:Src/main.c    **** // @brief Callback to process RX error events
 905:Src/main.c    **** static void rx_err_cb(const dwt_cb_data_t *cb_data){
 2171              		.loc 1 905 52
 2172              		.cfi_startproc
 2173              		@ args = 0, pretend = 0, frame = 8
 2174              		@ frame_needed = 1, uses_anonymous_args = 0
 2175 0000 80B5     		push	{r7, lr}
 2176              	.LCFI68:
 2177              		.cfi_def_cfa_offset 8
 2178              		.cfi_offset 7, -8
 2179              		.cfi_offset 14, -4
 2180 0002 82B0     		sub	sp, sp, #8
 2181              	.LCFI69:
 2182              		.cfi_def_cfa_offset 16
 2183 0004 00AF     		add	r7, sp, #0
 2184              	.LCFI70:
 2185              		.cfi_def_cfa_register 7
 2186 0006 7860     		str	r0, [r7, #4]
 906:Src/main.c    **** 		//printf ("Not receiving a frame and error. Cause:%lx\n",cb_data->status);
 907:Src/main.c    **** 		/* Clear RX error/timeout events in the DW1000 status register. */
 908:Src/main.c    **** 		dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_TO | SYS_STATUS_ALL_RX_ERR);
 2187              		.loc 1 908 3
 2188 0008 064A     		ldr	r2, .L75
 2189 000a 0021     		movs	r1, #0
 2190 000c 0F20     		movs	r0, #15
 2191 000e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 909:Src/main.c    **** 
 910:Src/main.c    **** 		/* Reset RX to properly reinitialise LDE operation. */
 911:Src/main.c    **** 		dwt_rxreset();
 2192              		.loc 1 911 3
 2193 0012 FFF7FEFF 		bl	dwt_rxreset
 912:Src/main.c    **** 	
 913:Src/main.c    **** 		state = RECEIVE_I;
 2194              		.loc 1 913 9
 2195 0016 044B     		ldr	r3, .L75+4
 2196 0018 0122     		movs	r2, #1
 2197 001a 1A70     		strb	r2, [r3]
 914:Src/main.c    **** }
 2198              		.loc 1 914 1
 2199 001c 00BF     		nop
ARM GAS  /tmp/ccaFhF6z.s 			page 56


 2200 001e 0837     		adds	r7, r7, #8
 2201              	.LCFI71:
 2202              		.cfi_def_cfa_offset 8
 2203 0020 BD46     		mov	sp, r7
 2204              	.LCFI72:
 2205              		.cfi_def_cfa_register 13
 2206              		@ sp needed
 2207 0022 80BD     		pop	{r7, pc}
 2208              	.L76:
 2209              		.align	2
 2210              	.L75:
 2211 0024 00902724 		.word	606572544
 2212 0028 00000000 		.word	state
 2213              		.cfi_endproc
 2214              	.LFE147:
 2216              		.section	.rodata
 2217 009e 0000     		.align	2
 2218              	.LC7:
 2219 00a0 46696E61 		.ascii	"Final msg sent correct # %d\012\000"
 2219      6C206D73 
 2219      67207365 
 2219      6E742063 
 2219      6F727265 
 2220 00bd 000000   		.align	2
 2221              	.LC8:
 2222 00c0 25640A00 		.ascii	"%d\012\000"
 2223              		.align	2
 2224              	.LC9:
 2225 00c4 4E6F7420 		.ascii	"Not receiving a frame and timeout. Cause:%lx\012\000"
 2225      72656365 
 2225      6976696E 
 2225      67206120 
 2225      6672616D 
 2226              		.section	.text.initiator_go,"ax",%progbits
 2227              		.align	1
 2228              		.syntax unified
 2229              		.thumb
 2230              		.thumb_func
 2231              		.fpu fpv4-sp-d16
 2233              	initiator_go:
 2234              	.LFB148:
 915:Src/main.c    **** 
 916:Src/main.c    **** /*! ---------------------------------------------------
 917:Src/main.c    ****  * @fn initiator_go()
 918:Src/main.c    ****  *
 919:Src/main.c    ****  * @brief initiator application
 920:Src/main.c    ****  *
 921:Src/main.c    ****  * @param  numMeasure number of measurements try to be done between the responder
 922:Src/main.c    ****  *
 923:Src/main.c    ****  * @return none
 924:Src/main.c    ****  */
 925:Src/main.c    **** static void initiator_go (uint16_t numMeasure)
 926:Src/main.c    **** {
 2235              		.loc 1 926 1
 2236              		.cfi_startproc
 2237              		@ args = 0, pretend = 0, frame = 40
 2238              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccaFhF6z.s 			page 57


 2239 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2240              	.LCFI73:
 2241              		.cfi_def_cfa_offset 36
 2242              		.cfi_offset 4, -36
 2243              		.cfi_offset 5, -32
 2244              		.cfi_offset 6, -28
 2245              		.cfi_offset 7, -24
 2246              		.cfi_offset 8, -20
 2247              		.cfi_offset 9, -16
 2248              		.cfi_offset 10, -12
 2249              		.cfi_offset 11, -8
 2250              		.cfi_offset 14, -4
 2251 0004 8BB0     		sub	sp, sp, #44
 2252              	.LCFI74:
 2253              		.cfi_def_cfa_offset 80
 2254 0006 00AF     		add	r7, sp, #0
 2255              	.LCFI75:
 2256              		.cfi_def_cfa_register 7
 2257 0008 0346     		mov	r3, r0
 2258 000a FB82     		strh	r3, [r7, #22]	@ movhi
 2259              	.LBB8:
 927:Src/main.c    **** 	for(uint16_t numDone=0; numDone<numMeasure;numDone++){
 2260              		.loc 1 927 15
 2261 000c 0023     		movs	r3, #0
 2262 000e FB84     		strh	r3, [r7, #38]	@ movhi
 2263              		.loc 1 927 2
 2264 0010 1CE1     		b	.L78
 2265              	.L85:
 928:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);
 2266              		.loc 1 928 3
 2267 0012 0122     		movs	r2, #1
 2268 0014 2021     		movs	r1, #32
 2269 0016 9348     		ldr	r0, .L86
 2270 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 929:Src/main.c    **** 		t1 = TIM2->CNT;
 2271              		.loc 1 929 12
 2272 001c 4FF08043 		mov	r3, #1073741824
 2273 0020 5B6A     		ldr	r3, [r3, #36]
 2274 0022 1A46     		mov	r2, r3
 2275 0024 4FF00003 		mov	r3, #0
 2276              		.loc 1 929 6
 2277 0028 8F49     		ldr	r1, .L86+4
 2278 002a C1E90023 		strd	r2, [r1]
 930:Src/main.c    **** 		/* Write frame data to DW1000 and prepare transmission. See NOTE 8 below. */
 931:Src/main.c    **** 		tx_poll_msg[ALL_MSG_SN_IDX] = frame_seq_nb_initiator;
 2279              		.loc 1 931 31
 2280 002e 8F4B     		ldr	r3, .L86+8
 2281 0030 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2282 0032 8F4B     		ldr	r3, .L86+12
 2283 0034 9A70     		strb	r2, [r3, #2]
 932:Src/main.c    **** 		dwt_writetxdata(sizeof(tx_poll_msg), tx_poll_msg, 0); /* Zero offset in TX buffer. */
 2284              		.loc 1 932 3
 2285 0036 0022     		movs	r2, #0
 2286 0038 8D49     		ldr	r1, .L86+12
 2287 003a 0C20     		movs	r0, #12
 2288 003c FFF7FEFF 		bl	dwt_writetxdata
 933:Src/main.c    **** 		dwt_writetxfctrl(sizeof(tx_poll_msg), 0, 1); /* Zero offset in TX buffer, ranging. */
ARM GAS  /tmp/ccaFhF6z.s 			page 58


 2289              		.loc 1 933 3
 2290 0040 0122     		movs	r2, #1
 2291 0042 0021     		movs	r1, #0
 2292 0044 0C20     		movs	r0, #12
 2293 0046 FFF7FEFF 		bl	dwt_writetxfctrl
 934:Src/main.c    **** 
 935:Src/main.c    **** 		/* Start transmission, indicating that a response is expected so that reception is enabled automa
 936:Src/main.c    **** 		 * set by dwt_setrxaftertxdelay() has elapsed. */
 937:Src/main.c    **** 		dwt_starttx(DWT_START_TX_IMMEDIATE | DWT_RESPONSE_EXPECTED);
 2294              		.loc 1 937 3
 2295 004a 0220     		movs	r0, #2
 2296 004c FFF7FEFF 		bl	dwt_starttx
 938:Src/main.c    **** 
 939:Src/main.c    **** 		/* We assume that the transmission is achieved correctly, poll for reception of a frame or error/
 940:Src/main.c    **** 		while (!((status_reg = dwt_read32bitreg(SYS_STATUS_ID)) & (SYS_STATUS_RXFCG | SYS_STATUS_ALL_RX_T
 2297              		.loc 1 940 9
 2298 0050 00BF     		nop
 2299              	.L79:
 2300              		.loc 1 940 26 discriminator 1
 2301 0052 0021     		movs	r1, #0
 2302 0054 0F20     		movs	r0, #15
 2303 0056 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2304 005a 0346     		mov	r3, r0
 2305              		.loc 1 940 24 discriminator 1
 2306 005c 854A     		ldr	r2, .L86+16
 2307 005e 1360     		str	r3, [r2]
 2308 0060 844B     		ldr	r3, .L86+16
 2309 0062 1A68     		ldr	r2, [r3]
 2310              		.loc 1 940 59 discriminator 1
 2311 0064 844B     		ldr	r3, .L86+20
 2312 0066 1340     		ands	r3, r3, r2
 2313              		.loc 1 940 9 discriminator 1
 2314 0068 002B     		cmp	r3, #0
 2315 006a F2D0     		beq	.L79
 941:Src/main.c    **** 		{ };
 942:Src/main.c    **** 		
 943:Src/main.c    **** 		/* Increment frame sequence number after transmission of the poll message (modulo 256). */
 944:Src/main.c    **** 		frame_seq_nb_initiator++;
 2316              		.loc 1 944 25
 2317 006c 7F4B     		ldr	r3, .L86+8
 2318 006e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2319 0070 0133     		adds	r3, r3, #1
 2320 0072 DAB2     		uxtb	r2, r3
 2321 0074 7D4B     		ldr	r3, .L86+8
 2322 0076 1A70     		strb	r2, [r3]
 945:Src/main.c    **** 		
 946:Src/main.c    **** 		//printf ("Transmition started and waited for a reception or timeout\n");
 947:Src/main.c    **** 		if (status_reg & SYS_STATUS_RXFCG)
 2323              		.loc 1 947 18
 2324 0078 7E4B     		ldr	r3, .L86+16
 2325 007a 1B68     		ldr	r3, [r3]
 2326 007c 03F48043 		and	r3, r3, #16384
 2327              		.loc 1 947 6
 2328 0080 002B     		cmp	r3, #0
 2329 0082 00F0B580 		beq	.L80
 2330              	.LBB9:
 948:Src/main.c    **** 		{
ARM GAS  /tmp/ccaFhF6z.s 			page 59


 949:Src/main.c    **** 				//printf ("Reception of a frame\n");
 950:Src/main.c    **** 				uint32 frame_len;
 951:Src/main.c    **** 
 952:Src/main.c    **** 				/* Clear good RX frame event and TX frame sent in the DW1000 status register. */
 953:Src/main.c    **** 				dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_RXFCG | SYS_STATUS_TXFRS);
 2331              		.loc 1 953 5
 2332 0086 4FF48142 		mov	r2, #16512
 2333 008a 0021     		movs	r1, #0
 2334 008c 0F20     		movs	r0, #15
 2335 008e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 954:Src/main.c    **** 
 955:Src/main.c    **** 				/* A frame has been received, read it into the local buffer. */
 956:Src/main.c    **** 				frame_len = dwt_read32bitreg(RX_FINFO_ID) & RX_FINFO_RXFLEN_MASK;
 2336              		.loc 1 956 17
 2337 0092 0021     		movs	r1, #0
 2338 0094 1020     		movs	r0, #16
 2339 0096 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2340 009a 0346     		mov	r3, r0
 2341              		.loc 1 956 15
 2342 009c 03F07F03 		and	r3, r3, #127
 2343 00a0 3B62     		str	r3, [r7, #32]
 957:Src/main.c    **** 				if (frame_len <= RX_BUF_LEN)
 2344              		.loc 1 957 8
 2345 00a2 3B6A     		ldr	r3, [r7, #32]
 2346 00a4 182B     		cmp	r3, #24
 2347 00a6 06D8     		bhi	.L81
 958:Src/main.c    **** 				{
 959:Src/main.c    **** 						dwt_readrxdata(rx_buffer, frame_len, 0);
 2348              		.loc 1 959 7
 2349 00a8 3B6A     		ldr	r3, [r7, #32]
 2350 00aa 9BB2     		uxth	r3, r3
 2351 00ac 0022     		movs	r2, #0
 2352 00ae 1946     		mov	r1, r3
 2353 00b0 7248     		ldr	r0, .L86+24
 2354 00b2 FFF7FEFF 		bl	dwt_readrxdata
 2355              	.L81:
 960:Src/main.c    **** 				}
 961:Src/main.c    **** 				/* Check that the frame is the expected response from the companion "DS TWR responder" example.
 962:Src/main.c    **** 				 * As the sequence number field of the frame is not relevant, it is cleared to simplify the val
 963:Src/main.c    **** 				rx_buffer[ALL_MSG_SN_IDX] = 0;
 2356              		.loc 1 963 31
 2357 00b6 714B     		ldr	r3, .L86+24
 2358 00b8 0022     		movs	r2, #0
 2359 00ba 9A70     		strb	r2, [r3, #2]
 964:Src/main.c    **** 
 965:Src/main.c    **** 				// if (memcmp(rx_buffer, rx_resp_msg, ALL_MSG_COMMON_LEN) == 0)
 966:Src/main.c    **** 				if (memcmp(rx_buffer, rx_resp_msg, 5) == 0)
 2360              		.loc 1 966 9
 2361 00bc 0522     		movs	r2, #5
 2362 00be 7049     		ldr	r1, .L86+28
 2363 00c0 6E48     		ldr	r0, .L86+24
 2364 00c2 FFF7FEFF 		bl	memcmp
 2365 00c6 0346     		mov	r3, r0
 2366              		.loc 1 966 8
 2367 00c8 002B     		cmp	r3, #0
 2368 00ca 40F09E80 		bne	.L82
 2369              	.LBB10:
ARM GAS  /tmp/ccaFhF6z.s 			page 60


 967:Src/main.c    **** 				{
 968:Src/main.c    **** 						//printf ("Reception of the expected frame, sending final msg\n");
 969:Src/main.c    **** 						uint32 final_tx_time;
 970:Src/main.c    **** 						int ret;
 971:Src/main.c    **** 
 972:Src/main.c    **** 						/* Retrieve poll transmission and response reception timestamp. */
 973:Src/main.c    **** 						poll_tx_ts = get_tx_timestamp_u64();
 2370              		.loc 1 973 20
 2371 00ce FFF7FEFF 		bl	get_tx_timestamp_u64
 2372 00d2 0246     		mov	r2, r0
 2373 00d4 0B46     		mov	r3, r1
 2374              		.loc 1 973 18
 2375 00d6 6B49     		ldr	r1, .L86+32
 2376 00d8 C1E90023 		strd	r2, [r1]
 974:Src/main.c    **** 						resp_rx_ts = get_rx_timestamp_u64();
 2377              		.loc 1 974 20
 2378 00dc FFF7FEFF 		bl	get_rx_timestamp_u64
 2379 00e0 0246     		mov	r2, r0
 2380 00e2 0B46     		mov	r3, r1
 2381              		.loc 1 974 18
 2382 00e4 6849     		ldr	r1, .L86+36
 2383 00e6 C1E90023 		strd	r2, [r1]
 975:Src/main.c    **** 
 976:Src/main.c    **** 						/* Compute final message transmission time. See NOTE 10 below. */
 977:Src/main.c    **** 						final_tx_time = (resp_rx_ts + (RESP_RX_TO_FINAL_TX_DLY_UUS * UUS_TO_DWT_TIME)) >> 8;
 2384              		.loc 1 977 35
 2385 00ea 674B     		ldr	r3, .L86+36
 2386 00ec D3E90023 		ldrd	r2, [r3]
 2387 00f0 6648     		ldr	r0, .L86+40
 2388 00f2 4FF00001 		mov	r1, #0
 2389 00f6 1418     		adds	r4, r2, r0
 2390 00f8 43EB0105 		adc	r5, r3, r1
 2391              		.loc 1 977 86
 2392 00fc 4FF00002 		mov	r2, #0
 2393 0100 4FF00003 		mov	r3, #0
 2394 0104 220A     		lsrs	r2, r4, #8
 2395 0106 42EA0562 		orr	r2, r2, r5, lsl #24
 2396 010a 2B0A     		lsrs	r3, r5, #8
 2397              		.loc 1 977 21
 2398 010c 1346     		mov	r3, r2
 2399 010e FB61     		str	r3, [r7, #28]
 978:Src/main.c    **** 						dwt_setdelayedtrxtime(final_tx_time);
 2400              		.loc 1 978 7
 2401 0110 F869     		ldr	r0, [r7, #28]
 2402 0112 FFF7FEFF 		bl	dwt_setdelayedtrxtime
 979:Src/main.c    **** 
 980:Src/main.c    **** 						/* Final TX timestamp is the transmission time we programmed plus the TX antenna delay. */
 981:Src/main.c    **** 						final_tx_ts = (((uint64)(final_tx_time & 0xFFFFFFFEUL)) << 8) + TX_ANT_DLY;
 2403              		.loc 1 981 46
 2404 0116 FB69     		ldr	r3, [r7, #28]
 2405 0118 1A46     		mov	r2, r3
 2406 011a 4FF00003 		mov	r3, #0
 2407              		.loc 1 981 63
 2408 011e 4FEA1269 		lsr	r9, r2, #24
 2409 0122 4FEA0228 		lsl	r8, r2, #8
 2410 0126 5A4A     		ldr	r2, .L86+44
 2411 0128 4FF0FF03 		mov	r3, #255
ARM GAS  /tmp/ccaFhF6z.s 			page 61


 2412 012c 08EA020A 		and	r10, r8, r2
 2413 0130 09EA030B 		and	fp, r9, r3
 2414              		.loc 1 981 69
 2415 0134 44F23402 		movw	r2, #16436
 2416 0138 4FF00003 		mov	r3, #0
 2417 013c 1AEB0201 		adds	r1, r10, r2
 2418 0140 B960     		str	r1, [r7, #8]
 2419 0142 4BEB0303 		adc	r3, fp, r3
 2420 0146 FB60     		str	r3, [r7, #12]
 2421              		.loc 1 981 19
 2422 0148 524B     		ldr	r3, .L86+48
 2423 014a D7E90212 		ldrd	r1, [r7, #8]
 2424 014e C3E90012 		strd	r1, [r3]
 982:Src/main.c    **** 
 983:Src/main.c    **** 						/* Write all timestamps in the final message. See NOTE 11 below. */
 984:Src/main.c    **** 						final_msg_set_ts(&tx_final_msg[FINAL_MSG_POLL_TX_TS_IDX], poll_tx_ts);
 2425              		.loc 1 984 7
 2426 0152 4C4B     		ldr	r3, .L86+32
 2427 0154 D3E90023 		ldrd	r2, [r3]
 2428 0158 4F48     		ldr	r0, .L86+52
 2429 015a FFF7FEFF 		bl	final_msg_set_ts
 985:Src/main.c    **** 						final_msg_set_ts(&tx_final_msg[FINAL_MSG_RESP_RX_TS_IDX], resp_rx_ts);
 2430              		.loc 1 985 7
 2431 015e 4A4B     		ldr	r3, .L86+36
 2432 0160 D3E90023 		ldrd	r2, [r3]
 2433 0164 4D48     		ldr	r0, .L86+56
 2434 0166 FFF7FEFF 		bl	final_msg_set_ts
 986:Src/main.c    **** 						final_msg_set_ts(&tx_final_msg[FINAL_MSG_FINAL_TX_TS_IDX], final_tx_ts);
 2435              		.loc 1 986 7
 2436 016a 4A4B     		ldr	r3, .L86+48
 2437 016c D3E90023 		ldrd	r2, [r3]
 2438 0170 4B48     		ldr	r0, .L86+60
 2439 0172 FFF7FEFF 		bl	final_msg_set_ts
 987:Src/main.c    **** 
 988:Src/main.c    **** 						/* Write and send final message. See NOTE 8 below. */
 989:Src/main.c    **** 						tx_final_msg[ALL_MSG_SN_IDX] = frame_seq_nb_initiator;
 2440              		.loc 1 989 36
 2441 0176 3D4B     		ldr	r3, .L86+8
 2442 0178 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2443 017a 4A4B     		ldr	r3, .L86+64
 2444 017c 9A70     		strb	r2, [r3, #2]
 990:Src/main.c    **** 						dwt_writetxdata(sizeof(tx_final_msg), tx_final_msg, 0); /* Zero offset in TX buffer. */
 2445              		.loc 1 990 7
 2446 017e 0022     		movs	r2, #0
 2447 0180 4849     		ldr	r1, .L86+64
 2448 0182 1820     		movs	r0, #24
 2449 0184 FFF7FEFF 		bl	dwt_writetxdata
 991:Src/main.c    **** 						dwt_writetxfctrl(sizeof(tx_final_msg), 0, 1); /* Zero offset in TX buffer, ranging. */
 2450              		.loc 1 991 7
 2451 0188 0122     		movs	r2, #1
 2452 018a 0021     		movs	r1, #0
 2453 018c 1820     		movs	r0, #24
 2454 018e FFF7FEFF 		bl	dwt_writetxfctrl
 992:Src/main.c    **** 						ret = dwt_starttx(DWT_START_TX_DELAYED);
 2455              		.loc 1 992 13
 2456 0192 0120     		movs	r0, #1
 2457 0194 FFF7FEFF 		bl	dwt_starttx
ARM GAS  /tmp/ccaFhF6z.s 			page 62


 2458 0198 B861     		str	r0, [r7, #24]
 993:Src/main.c    **** 
 994:Src/main.c    **** 						/* If dwt_starttx() returns an error, abandon this ranging exchange and proceed to the next o
 995:Src/main.c    **** 						if (ret == DWT_SUCCESS)
 2459              		.loc 1 995 10
 2460 019a BB69     		ldr	r3, [r7, #24]
 2461 019c 002B     		cmp	r3, #0
 2462 019e 34D1     		bne	.L82
 996:Src/main.c    **** 						{
 997:Src/main.c    **** 								printf ("Final msg sent correct # %d\n",numDone);
 2463              		.loc 1 997 9
 2464 01a0 FB8C     		ldrh	r3, [r7, #38]
 2465 01a2 1946     		mov	r1, r3
 2466 01a4 4048     		ldr	r0, .L86+68
 2467 01a6 FFF7FEFF 		bl	printf
 998:Src/main.c    ****                 printf("%d\n", (int)final_tx_ts);
 2468              		.loc 1 998 17
 2469 01aa 3A4B     		ldr	r3, .L86+48
 2470 01ac D3E90023 		ldrd	r2, [r3]
 2471 01b0 1346     		mov	r3, r2
 2472 01b2 1946     		mov	r1, r3
 2473 01b4 3D48     		ldr	r0, .L86+72
 2474 01b6 FFF7FEFF 		bl	printf
 999:Src/main.c    ****                 printf("%d\n", (int)final_tx_time);
 2475              		.loc 1 999 17
 2476 01ba FB69     		ldr	r3, [r7, #28]
 2477 01bc 1946     		mov	r1, r3
 2478 01be 3B48     		ldr	r0, .L86+72
 2479 01c0 FFF7FEFF 		bl	printf
1000:Src/main.c    **** 								/* Poll DW1000 until TX frame sent event set. See NOTE 9 below. */
1001:Src/main.c    **** 								while (!(dwt_read32bitreg(SYS_STATUS_ID) & SYS_STATUS_TXFRS))
 2480              		.loc 1 1001 15
 2481 01c4 00BF     		nop
 2482              	.L83:
 2483              		.loc 1 1001 18 discriminator 1
 2484 01c6 0021     		movs	r1, #0
 2485 01c8 0F20     		movs	r0, #15
 2486 01ca FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2487 01ce 0346     		mov	r3, r0
 2488              		.loc 1 1001 50 discriminator 1
 2489 01d0 03F08003 		and	r3, r3, #128
 2490              		.loc 1 1001 15 discriminator 1
 2491 01d4 002B     		cmp	r3, #0
 2492 01d6 F6D0     		beq	.L83
1002:Src/main.c    **** 								{ };
1003:Src/main.c    **** 
1004:Src/main.c    **** 								/* Clear TXFRS event. */
1005:Src/main.c    **** 								dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_TXFRS);
 2493              		.loc 1 1005 9
 2494 01d8 8022     		movs	r2, #128
 2495 01da 0021     		movs	r1, #0
 2496 01dc 0F20     		movs	r0, #15
 2497 01de FFF7FEFF 		bl	dwt_write32bitoffsetreg
1006:Src/main.c    **** 
1007:Src/main.c    **** 								/* Increment frame sequence number after transmission of the final message (modulo 256). */
1008:Src/main.c    **** 								frame_seq_nb_initiator++;
 2498              		.loc 1 1008 31
ARM GAS  /tmp/ccaFhF6z.s 			page 63


 2499 01e2 224B     		ldr	r3, .L86+8
 2500 01e4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2501 01e6 0133     		adds	r3, r3, #1
 2502 01e8 DAB2     		uxtb	r2, r3
 2503 01ea 204B     		ldr	r3, .L86+8
 2504 01ec 1A70     		strb	r2, [r3]
 2505 01ee 0CE0     		b	.L82
 2506              	.L80:
 2507              	.LBE10:
 2508              	.LBE9:
1009:Src/main.c    **** 						}
1010:Src/main.c    **** 				}
1011:Src/main.c    **** 		}
1012:Src/main.c    **** 		else
1013:Src/main.c    **** 		{
1014:Src/main.c    **** 				printf ("Not receiving a frame and timeout. Cause:%lx\n",status_reg);
 2509              		.loc 1 1014 5
 2510 01f0 204B     		ldr	r3, .L86+16
 2511 01f2 1B68     		ldr	r3, [r3]
 2512 01f4 1946     		mov	r1, r3
 2513 01f6 2E48     		ldr	r0, .L86+76
 2514 01f8 FFF7FEFF 		bl	printf
1015:Src/main.c    **** 				/* Clear RX error/timeout events in the DW1000 status register. */
1016:Src/main.c    **** 				dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_TO | SYS_STATUS_ALL_RX_ERR);
 2515              		.loc 1 1016 5
 2516 01fc 2D4A     		ldr	r2, .L86+80
 2517 01fe 0021     		movs	r1, #0
 2518 0200 0F20     		movs	r0, #15
 2519 0202 FFF7FEFF 		bl	dwt_write32bitoffsetreg
1017:Src/main.c    **** 
1018:Src/main.c    **** 				/* Reset RX to properly reinitialise LDE operation. */
1019:Src/main.c    **** 				dwt_rxreset();
 2520              		.loc 1 1019 5
 2521 0206 FFF7FEFF 		bl	dwt_rxreset
 2522              	.L82:
1020:Src/main.c    **** 		}
1021:Src/main.c    **** 
1022:Src/main.c    **** 		/* Execute a delay between ranging exchanges. */
1023:Src/main.c    **** 		// Sleep(RNG_DELAY_MS);
1024:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_RESET);
 2523              		.loc 1 1024 3
 2524 020a 0022     		movs	r2, #0
 2525 020c 2021     		movs	r1, #32
 2526 020e 1548     		ldr	r0, .L86
 2527 0210 FFF7FEFF 		bl	HAL_GPIO_WritePin
1025:Src/main.c    **** 		while(TIM2->CNT - t1 < RNG_DELAY_MS*100);
 2528              		.loc 1 1025 8
 2529 0214 00BF     		nop
 2530              	.L84:
 2531              		.loc 1 1025 13 discriminator 1
 2532 0216 4FF08043 		mov	r3, #1073741824
 2533 021a 5B6A     		ldr	r3, [r3, #36]
 2534 021c 1846     		mov	r0, r3
 2535 021e 4FF00001 		mov	r1, #0
 2536              		.loc 1 1025 19 discriminator 1
 2537 0222 114B     		ldr	r3, .L86+4
 2538 0224 D3E90023 		ldrd	r2, [r3]
ARM GAS  /tmp/ccaFhF6z.s 			page 64


 2539 0228 861A     		subs	r6, r0, r2
 2540 022a 3E60     		str	r6, [r7]
 2541 022c 61EB0303 		sbc	r3, r1, r3
 2542 0230 7B60     		str	r3, [r7, #4]
 2543              		.loc 1 1025 8 discriminator 1
 2544 0232 4CF24F32 		movw	r2, #49999
 2545 0236 4FF00003 		mov	r3, #0
 2546 023a D7E90001 		ldrd	r0, [r7]
 2547 023e 8B42     		cmp	r3, r1
 2548 0240 08BF     		it	eq
 2549 0242 8242     		cmpeq	r2, r0
 2550 0244 E7D2     		bcs	.L84
 927:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);
 2551              		.loc 1 927 52 discriminator 2
 2552 0246 FB8C     		ldrh	r3, [r7, #38]
 2553 0248 0133     		adds	r3, r3, #1
 2554 024a FB84     		strh	r3, [r7, #38]	@ movhi
 2555              	.L78:
 927:Src/main.c    **** 		HAL_GPIO_WritePin (LED_GPIO_Port,LED_Pin,GPIO_PIN_SET);
 2556              		.loc 1 927 2 discriminator 1
 2557 024c FA8C     		ldrh	r2, [r7, #38]
 2558 024e FB8A     		ldrh	r3, [r7, #22]
 2559 0250 9A42     		cmp	r2, r3
 2560 0252 FFF4DEAE 		bcc	.L85
 2561              	.LBE8:
1026:Src/main.c    **** 	}
1027:Src/main.c    **** }
 2562              		.loc 1 1027 1
 2563 0256 00BF     		nop
 2564 0258 00BF     		nop
 2565 025a 2C37     		adds	r7, r7, #44
 2566              	.LCFI76:
 2567              		.cfi_def_cfa_offset 36
 2568 025c BD46     		mov	sp, r7
 2569              	.LCFI77:
 2570              		.cfi_def_cfa_register 13
 2571              		@ sp needed
 2572 025e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2573              	.L87:
 2574 0262 00BF     		.align	2
 2575              	.L86:
 2576 0264 00040048 		.word	1207960576
 2577 0268 00000000 		.word	t1
 2578 026c 00000000 		.word	frame_seq_nb_initiator
 2579 0270 00000000 		.word	tx_poll_msg
 2580 0274 00000000 		.word	status_reg
 2581 0278 00D02724 		.word	606588928
 2582 027c 00000000 		.word	rx_buffer
 2583 0280 00000000 		.word	rx_resp_msg
 2584 0284 00000000 		.word	poll_tx_ts
 2585 0288 00000000 		.word	resp_rx_ts
 2586 028c 0000AC0D 		.word	229376000
 2587 0290 00FEFFFF 		.word	-512
 2588 0294 00000000 		.word	final_tx_ts
 2589 0298 0A000000 		.word	tx_final_msg+10
 2590 029c 0E000000 		.word	tx_final_msg+14
 2591 02a0 12000000 		.word	tx_final_msg+18
ARM GAS  /tmp/ccaFhF6z.s 			page 65


 2592 02a4 00000000 		.word	tx_final_msg
 2593 02a8 A0000000 		.word	.LC7
 2594 02ac C0000000 		.word	.LC8
 2595 02b0 C4000000 		.word	.LC9
 2596 02b4 00902724 		.word	606572544
 2597              		.cfi_endproc
 2598              	.LFE148:
 2600              		.section	.text.HAL_GPIO_EXTI_Callback,"ax",%progbits
 2601              		.align	1
 2602              		.global	HAL_GPIO_EXTI_Callback
 2603              		.syntax unified
 2604              		.thumb
 2605              		.thumb_func
 2606              		.fpu fpv4-sp-d16
 2608              	HAL_GPIO_EXTI_Callback:
 2609              	.LFB149:
1028:Src/main.c    **** 
1029:Src/main.c    **** /* @fn      HAL_GPIO_EXTI_Callback
1030:Src/main.c    ****  * @brief   IRQ HAL call-back for all EXTI configured lines
1031:Src/main.c    ****  *          i.e. DW_RESET_Pin, DW_IRQn_Pin and Button_Pin
1032:Src/main.c    ****  * */
1033:Src/main.c    **** void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)
1034:Src/main.c    **** {
 2610              		.loc 1 1034 1
 2611              		.cfi_startproc
 2612              		@ args = 0, pretend = 0, frame = 8
 2613              		@ frame_needed = 1, uses_anonymous_args = 0
 2614 0000 80B5     		push	{r7, lr}
 2615              	.LCFI78:
 2616              		.cfi_def_cfa_offset 8
 2617              		.cfi_offset 7, -8
 2618              		.cfi_offset 14, -4
 2619 0002 82B0     		sub	sp, sp, #8
 2620              	.LCFI79:
 2621              		.cfi_def_cfa_offset 16
 2622 0004 00AF     		add	r7, sp, #0
 2623              	.LCFI80:
 2624              		.cfi_def_cfa_register 7
 2625 0006 0346     		mov	r3, r0
 2626 0008 FB80     		strh	r3, [r7, #6]	@ movhi
1035:Src/main.c    ****     if (GPIO_Pin == DW_RESET_Pin)
 2627              		.loc 1 1035 8
 2628 000a FB88     		ldrh	r3, [r7, #6]
 2629 000c 082B     		cmp	r3, #8
 2630 000e 02D1     		bne	.L89
1036:Src/main.c    ****     {
1037:Src/main.c    ****         set_signalResetDone();
 2631              		.loc 1 1037 9
 2632 0010 FFF7FEFF 		bl	set_signalResetDone
1038:Src/main.c    ****     }
1039:Src/main.c    ****     else if (GPIO_Pin == DW_IRQn_Pin)
1040:Src/main.c    ****     {
1041:Src/main.c    ****         process_deca_irq();
1042:Src/main.c    ****     }
1043:Src/main.c    ****     else if (GPIO_Pin == Button_Pin)
1044:Src/main.c    ****     {
1045:Src/main.c    **** 			if (state != INITIATOR)
ARM GAS  /tmp/ccaFhF6z.s 			page 66


1046:Src/main.c    **** 				state = INITIATOR;
1047:Src/main.c    ****     }
1048:Src/main.c    **** }
 2633              		.loc 1 1048 1
 2634 0014 0FE0     		b	.L92
 2635              	.L89:
1039:Src/main.c    ****     {
 2636              		.loc 1 1039 13
 2637 0016 FB88     		ldrh	r3, [r7, #6]
 2638 0018 042B     		cmp	r3, #4
 2639 001a 02D1     		bne	.L91
1041:Src/main.c    ****     }
 2640              		.loc 1 1041 9
 2641 001c FFF7FEFF 		bl	process_deca_irq
 2642              		.loc 1 1048 1
 2643 0020 09E0     		b	.L92
 2644              	.L91:
1043:Src/main.c    ****     {
 2645              		.loc 1 1043 13
 2646 0022 FB88     		ldrh	r3, [r7, #6]
 2647 0024 102B     		cmp	r3, #16
 2648 0026 06D1     		bne	.L92
1045:Src/main.c    **** 				state = INITIATOR;
 2649              		.loc 1 1045 14
 2650 0028 054B     		ldr	r3, .L93
 2651 002a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1045:Src/main.c    **** 				state = INITIATOR;
 2652              		.loc 1 1045 7
 2653 002c 042B     		cmp	r3, #4
 2654 002e 02D0     		beq	.L92
1046:Src/main.c    ****     }
 2655              		.loc 1 1046 11
 2656 0030 034B     		ldr	r3, .L93
 2657 0032 0422     		movs	r2, #4
 2658 0034 1A70     		strb	r2, [r3]
 2659              	.L92:
 2660              		.loc 1 1048 1
 2661 0036 00BF     		nop
 2662 0038 0837     		adds	r7, r7, #8
 2663              	.LCFI81:
 2664              		.cfi_def_cfa_offset 8
 2665 003a BD46     		mov	sp, r7
 2666              	.LCFI82:
 2667              		.cfi_def_cfa_register 13
 2668              		@ sp needed
 2669 003c 80BD     		pop	{r7, pc}
 2670              	.L94:
 2671 003e 00BF     		.align	2
 2672              	.L93:
 2673 0040 00000000 		.word	state
 2674              		.cfi_endproc
 2675              	.LFE149:
 2677              		.section	.text.Error_Handler,"ax",%progbits
 2678              		.align	1
 2679              		.global	Error_Handler
 2680              		.syntax unified
 2681              		.thumb
ARM GAS  /tmp/ccaFhF6z.s 			page 67


 2682              		.thumb_func
 2683              		.fpu fpv4-sp-d16
 2685              	Error_Handler:
 2686              	.LFB150:
1049:Src/main.c    **** 
1050:Src/main.c    **** 
1051:Src/main.c    **** /* USER CODE END 4 */
1052:Src/main.c    **** 
1053:Src/main.c    **** /**
1054:Src/main.c    ****   * @brief  This function is executed in case of error occurrence.
1055:Src/main.c    ****   * @retval None
1056:Src/main.c    ****   */
1057:Src/main.c    **** void Error_Handler(void)
1058:Src/main.c    **** {
 2687              		.loc 1 1058 1
 2688              		.cfi_startproc
 2689              		@ args = 0, pretend = 0, frame = 0
 2690              		@ frame_needed = 1, uses_anonymous_args = 0
 2691              		@ link register save eliminated.
 2692 0000 80B4     		push	{r7}
 2693              	.LCFI83:
 2694              		.cfi_def_cfa_offset 4
 2695              		.cfi_offset 7, -4
 2696 0002 00AF     		add	r7, sp, #0
 2697              	.LCFI84:
 2698              		.cfi_def_cfa_register 7
1059:Src/main.c    ****   /* USER CODE BEGIN Error_Handler_Debug */
1060:Src/main.c    ****   /* User can add his own implementation to report the HAL error return state */
1061:Src/main.c    **** 
1062:Src/main.c    ****   /* USER CODE END Error_Handler_Debug */
1063:Src/main.c    **** }
 2699              		.loc 1 1063 1
 2700 0004 00BF     		nop
 2701 0006 BD46     		mov	sp, r7
 2702              	.LCFI85:
 2703              		.cfi_def_cfa_register 13
 2704              		@ sp needed
 2705 0008 5DF8047B 		ldr	r7, [sp], #4
 2706              	.LCFI86:
 2707              		.cfi_restore 7
 2708              		.cfi_def_cfa_offset 0
 2709 000c 7047     		bx	lr
 2710              		.cfi_endproc
 2711              	.LFE150:
 2713              		.text
 2714              	.Letext0:
 2715              		.file 2 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/machine/_default
 2716              		.file 3 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/_stdint.h"
 2717              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 2718              		.file 5 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/system_stm32l4xx.h"
 2719              		.file 6 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l433xx.h"
 2720              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 2721              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_rcc.h"
 2722              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_rcc_ex.h"
 2723              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_gpio.h"
 2724              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 2725              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash.h"
ARM GAS  /tmp/ccaFhF6z.s 			page 68


 2726              		.file 13 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_spi.h"
 2727              		.file 14 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_tim.h"
 2728              		.file 15 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 2729              		.file 16 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/lib/gcc/arm-none-eabi/9.3.1/include/s
 2730              		.file 17 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/_types.h"
 2731              		.file 18 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/reent.h"
 2732              		.file 19 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/lock.h"
 2733              		.file 20 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/stdlib.h"
 2734              		.file 21 "Middlewares/ST/STM32_USB_Device_Library/Core/Inc/usbd_def.h"
 2735              		.file 22 "Middlewares/ST/STM32_USB_Device_Library/Class/CDC/Inc/usbd_cdc.h"
 2736              		.file 23 "Inc/usbd_cdc_if.h"
 2737              		.file 24 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/math.h"
 2738              		.file 25 "Middlewares/Decawave/platform/port.h"
 2739              		.file 26 "Middlewares/Decawave/decadriver/deca_device_api.h"
ARM GAS  /tmp/ccaFhF6z.s 			page 69


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
                            *COM*:0000000000000064 hspi1
                            *COM*:0000000000000040 htim2
     /tmp/ccaFhF6z.s:20     .data.config_ShortData_Fast:0000000000000000 $d
     /tmp/ccaFhF6z.s:23     .data.config_ShortData_Fast:0000000000000000 config_ShortData_Fast
     /tmp/ccaFhF6z.s:36     .data.config_LongData_Range:0000000000000000 $d
     /tmp/ccaFhF6z.s:39     .data.config_LongData_Range:0000000000000000 config_LongData_Range
     /tmp/ccaFhF6z.s:52     .data.config_LongData_Fast:0000000000000000 $d
     /tmp/ccaFhF6z.s:55     .data.config_LongData_Fast:0000000000000000 config_LongData_Fast
     /tmp/ccaFhF6z.s:68     .data.rx_poll_msg:0000000000000000 $d
     /tmp/ccaFhF6z.s:71     .data.rx_poll_msg:0000000000000000 rx_poll_msg
     /tmp/ccaFhF6z.s:74     .data.tx_resp_msg:0000000000000000 $d
     /tmp/ccaFhF6z.s:77     .data.tx_resp_msg:0000000000000000 tx_resp_msg
     /tmp/ccaFhF6z.s:80     .data.rx_final_msg:0000000000000000 $d
     /tmp/ccaFhF6z.s:83     .data.rx_final_msg:0000000000000000 rx_final_msg
     /tmp/ccaFhF6z.s:87     .data.tx_poll_msg:0000000000000000 $d
     /tmp/ccaFhF6z.s:90     .data.tx_poll_msg:0000000000000000 tx_poll_msg
     /tmp/ccaFhF6z.s:93     .data.rx_resp_msg:0000000000000000 $d
     /tmp/ccaFhF6z.s:96     .data.rx_resp_msg:0000000000000000 rx_resp_msg
     /tmp/ccaFhF6z.s:99     .data.tx_final_msg:0000000000000000 $d
     /tmp/ccaFhF6z.s:102    .data.tx_final_msg:0000000000000000 tx_final_msg
     /tmp/ccaFhF6z.s:108    .bss.frame_seq_nb_initiator:0000000000000000 frame_seq_nb_initiator
     /tmp/ccaFhF6z.s:109    .bss.frame_seq_nb_initiator:0000000000000000 $d
     /tmp/ccaFhF6z.s:113    .bss.frame_seq_nb_responder:0000000000000000 frame_seq_nb_responder
     /tmp/ccaFhF6z.s:114    .bss.frame_seq_nb_responder:0000000000000000 $d
     /tmp/ccaFhF6z.s:116    .bss.rx_buffer:0000000000000000 $d
     /tmp/ccaFhF6z.s:119    .bss.rx_buffer:0000000000000000 rx_buffer
     /tmp/ccaFhF6z.s:122    .bss.status_reg:0000000000000000 $d
     /tmp/ccaFhF6z.s:125    .bss.status_reg:0000000000000000 status_reg
     /tmp/ccaFhF6z.s:128    .bss.poll_rx_ts:0000000000000000 $d
     /tmp/ccaFhF6z.s:131    .bss.poll_rx_ts:0000000000000000 poll_rx_ts
     /tmp/ccaFhF6z.s:134    .bss.resp_tx_ts:0000000000000000 $d
     /tmp/ccaFhF6z.s:137    .bss.resp_tx_ts:0000000000000000 resp_tx_ts
     /tmp/ccaFhF6z.s:140    .bss.final_rx_ts:0000000000000000 $d
     /tmp/ccaFhF6z.s:143    .bss.final_rx_ts:0000000000000000 final_rx_ts
     /tmp/ccaFhF6z.s:146    .bss.poll_tx_ts:0000000000000000 $d
     /tmp/ccaFhF6z.s:149    .bss.poll_tx_ts:0000000000000000 poll_tx_ts
     /tmp/ccaFhF6z.s:152    .bss.resp_rx_ts:0000000000000000 $d
     /tmp/ccaFhF6z.s:155    .bss.resp_rx_ts:0000000000000000 resp_rx_ts
     /tmp/ccaFhF6z.s:158    .bss.final_tx_ts:0000000000000000 $d
     /tmp/ccaFhF6z.s:161    .bss.final_tx_ts:0000000000000000 final_tx_ts
     /tmp/ccaFhF6z.s:164    .bss.tof:0000000000000000 $d
     /tmp/ccaFhF6z.s:167    .bss.tof:0000000000000000 tof
     /tmp/ccaFhF6z.s:170    .bss.distance:0000000000000000 $d
     /tmp/ccaFhF6z.s:173    .bss.distance:0000000000000000 distance
     /tmp/ccaFhF6z.s:180    .bss.t1:0000000000000000 t1
     /tmp/ccaFhF6z.s:177    .bss.t1:0000000000000000 $d
     /tmp/ccaFhF6z.s:187    .bss.t2:0000000000000000 t2
     /tmp/ccaFhF6z.s:184    .bss.t2:0000000000000000 $d
                            *COM*:0000000000000008 configTX
     /tmp/ccaFhF6z.s:194    .bss.state:0000000000000000 state
     /tmp/ccaFhF6z.s:195    .bss.state:0000000000000000 $d
     /tmp/ccaFhF6z.s:200    .data.ConfigSel:0000000000000000 ConfigSel
     /tmp/ccaFhF6z.s:207    .bss.numRanged:0000000000000000 numRanged
     /tmp/ccaFhF6z.s:204    .bss.numRanged:0000000000000000 $d
                            *COM*:0000000000003e80 ranges
ARM GAS  /tmp/ccaFhF6z.s 			page 70


     /tmp/ccaFhF6z.s:215    .data.numMeasure:0000000000000000 numMeasure
     /tmp/ccaFhF6z.s:212    .data.numMeasure:0000000000000000 $d
     /tmp/ccaFhF6z.s:218    .text.__io_putchar:0000000000000000 $t
     /tmp/ccaFhF6z.s:226    .text.__io_putchar:0000000000000000 __io_putchar
     /tmp/ccaFhF6z.s:273    .rodata:0000000000000000 $d
     /tmp/ccaFhF6z.s:286    .text.main:0000000000000000 $t
     /tmp/ccaFhF6z.s:293    .text.main:0000000000000000 main
     /tmp/ccaFhF6z.s:483    .text.SystemClock_Config:0000000000000000 SystemClock_Config
     /tmp/ccaFhF6z.s:876    .text.MX_GPIO_Init:0000000000000000 MX_GPIO_Init
     /tmp/ccaFhF6z.s:653    .text.MX_SPI1_Init:0000000000000000 MX_SPI1_Init
     /tmp/ccaFhF6z.s:751    .text.MX_TIM2_Init:0000000000000000 MX_TIM2_Init
     /tmp/ccaFhF6z.s:341    .text.main:000000000000003c $d
     /tmp/ccaFhF6z.s:346    .text.main:0000000000000050 $t
     /tmp/ccaFhF6z.s:1080   .text.MX_DWM_Init:0000000000000000 MX_DWM_Init
     /tmp/ccaFhF6z.s:2233   .text.initiator_go:0000000000000000 initiator_go
     /tmp/ccaFhF6z.s:460    .text.main:0000000000000118 $d
     /tmp/ccaFhF6z.s:476    .text.SystemClock_Config:0000000000000000 $t
     /tmp/ccaFhF6z.s:2685   .text.Error_Handler:0000000000000000 Error_Handler
     /tmp/ccaFhF6z.s:647    .text.MX_SPI1_Init:0000000000000000 $t
     /tmp/ccaFhF6z.s:739    .text.MX_SPI1_Init:0000000000000074 $d
     /tmp/ccaFhF6z.s:745    .text.MX_TIM2_Init:0000000000000000 $t
     /tmp/ccaFhF6z.s:864    .text.MX_TIM2_Init:000000000000009c $d
     /tmp/ccaFhF6z.s:870    .text.MX_GPIO_Init:0000000000000000 $t
     /tmp/ccaFhF6z.s:1060   .text.MX_GPIO_Init:0000000000000128 $d
     /tmp/ccaFhF6z.s:1074   .text.MX_DWM_Init:0000000000000000 $t
     /tmp/ccaFhF6z.s:1311   .text.MX_DWM_Init:0000000000000190 $d
     /tmp/ccaFhF6z.s:2169   .text.rx_err_cb:0000000000000000 rx_err_cb
     /tmp/ccaFhF6z.s:2115   .text.rx_to_cb:0000000000000000 rx_to_cb
     /tmp/ccaFhF6z.s:1715   .text.rx_ok_cb:0000000000000000 rx_ok_cb
     /tmp/ccaFhF6z.s:1662   .text.tx_conf_cb:0000000000000000 tx_conf_cb
     /tmp/ccaFhF6z.s:1330   .text.get_tx_timestamp_u64:0000000000000000 $t
     /tmp/ccaFhF6z.s:1336   .text.get_tx_timestamp_u64:0000000000000000 get_tx_timestamp_u64
     /tmp/ccaFhF6z.s:1415   .text.get_rx_timestamp_u64:0000000000000000 $t
     /tmp/ccaFhF6z.s:1421   .text.get_rx_timestamp_u64:0000000000000000 get_rx_timestamp_u64
     /tmp/ccaFhF6z.s:1500   .text.final_msg_get_ts:0000000000000000 $t
     /tmp/ccaFhF6z.s:1506   .text.final_msg_get_ts:0000000000000000 final_msg_get_ts
     /tmp/ccaFhF6z.s:1581   .text.final_msg_set_ts:0000000000000000 $t
     /tmp/ccaFhF6z.s:1587   .text.final_msg_set_ts:0000000000000000 final_msg_set_ts
     /tmp/ccaFhF6z.s:1656   .text.tx_conf_cb:0000000000000000 $t
     /tmp/ccaFhF6z.s:1709   .text.rx_ok_cb:0000000000000000 $t
     /tmp/ccaFhF6z.s:2084   .text.rx_ok_cb:0000000000000288 $d
     /tmp/ccaFhF6z.s:2109   .text.rx_to_cb:0000000000000000 $t
     /tmp/ccaFhF6z.s:2157   .text.rx_to_cb:0000000000000024 $d
     /tmp/ccaFhF6z.s:2163   .text.rx_err_cb:0000000000000000 $t
     /tmp/ccaFhF6z.s:2211   .text.rx_err_cb:0000000000000024 $d
     /tmp/ccaFhF6z.s:2227   .text.initiator_go:0000000000000000 $t
     /tmp/ccaFhF6z.s:2576   .text.initiator_go:0000000000000264 $d
     /tmp/ccaFhF6z.s:2601   .text.HAL_GPIO_EXTI_Callback:0000000000000000 $t
     /tmp/ccaFhF6z.s:2608   .text.HAL_GPIO_EXTI_Callback:0000000000000000 HAL_GPIO_EXTI_Callback
     /tmp/ccaFhF6z.s:2673   .text.HAL_GPIO_EXTI_Callback:0000000000000040 $d
     /tmp/ccaFhF6z.s:2678   .text.Error_Handler:0000000000000000 $t

UNDEFINED SYMBOLS
CDC_Transmit_FS
HAL_Init
MX_USB_DEVICE_Init
HAL_Delay
ARM GAS  /tmp/ccaFhF6z.s 			page 71


puts
HAL_NVIC_EnableIRQ
HAL_GPIO_WritePin
dwt_setrxtimeout
dwt_rxenable
HAL_GetTick
printf
HAL_NVIC_DisableIRQ
memset
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_RCCEx_PeriphCLKConfig
HAL_PWREx_ControlVoltageScaling
HAL_SPI_Init
HAL_TIM_Base_Init
HAL_TIM_ConfigClockSource
HAL_TIMEx_MasterConfigSynchronization
HAL_TIM_Base_Start
HAL_GPIO_Init
HAL_NVIC_SetPriority
HAL_SPI_DeInit
setup_DW1000RSTnIRQ
reset_DW1000
port_set_deca_isr
dwt_initialise
dwt_configure
dwt_setcallbacks
dwt_setinterrupt
dwt_setrxantennadelay
dwt_settxantennadelay
dwt_setleds
dwt_setrxaftertxdelay
dwt_setsmarttxpower
dwt_configuretxrf
dwt_isr
dwt_readtxtimestamp
dwt_readrxtimestamp
__aeabi_ui2d
__aeabi_dmul
__aeabi_dsub
__aeabi_dadd
__aeabi_ddiv
__aeabi_d2lz
__aeabi_l2d
dwt_write32bitoffsetreg
dwt_readrxdata
memcmp
dwt_setdelayedtrxtime
dwt_writetxdata
dwt_writetxfctrl
dwt_starttx
dwt_rxreset
dwt_read32bitoffsetreg
set_signalResetDone
process_deca_irq
