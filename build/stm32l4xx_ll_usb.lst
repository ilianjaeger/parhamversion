ARM GAS  /tmp/ccPzcOpE.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"stm32l4xx_ll_usb.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.USB_CoreInit,"ax",%progbits
  18              		.align	1
  19              		.global	USB_CoreInit
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	USB_CoreInit:
  27              	.LFB130:
  28              		.file 1 "Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c"
   1:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
   2:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   ******************************************************************************
   3:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @file    stm32l4xx_ll_usb.c
   4:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @author  MCD Application Team
   5:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief   USB Low Layer HAL module driver.
   6:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *
   7:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This file provides firmware functions to manage the following
   8:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          functionalities of the USB Peripheral Controller:
   9:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           + Initialization/de-initialization functions
  10:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           + I/O operation functions
  11:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           + Peripheral Control functions
  12:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           + Peripheral State functions
  13:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *
  14:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   @verbatim
  15:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   ==============================================================================
  16:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                     ##### How to use this driver #####
  17:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   ==============================================================================
  18:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     [..]
  19:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       (#) Fill parameters of Init structure in USB_OTG_CfgTypeDef structure.
  20:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  21:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       (#) Call USB_CoreInit() API to initialize the USB Core peripheral.
  22:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  23:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       (#) The upper HAL HCD/PCD driver will call the right routines for its internal processes.
  24:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  25:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   @endverbatim
  26:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   ******************************************************************************
  27:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @attention
  28:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *
  29:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * <h2><center>&copy; Copyright (c) 2017 STMicroelectronics.
  30:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * All rights reserved.</center></h2>
ARM GAS  /tmp/ccPzcOpE.s 			page 2


  31:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *
  32:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * This software component is licensed by ST under BSD 3-Clause license,
  33:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * the "License"; You may not use this file except in compliance with the
  34:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * License. You may obtain a copy of the License at:
  35:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *                        opensource.org/licenses/BSD-3-Clause
  36:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *
  37:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   ******************************************************************************
  38:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
  39:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  40:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /* Includes ------------------------------------------------------------------*/
  41:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #include "stm32l4xx_hal.h"
  42:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  43:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /** @addtogroup STM32L4xx_LL_USB_DRIVER
  44:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @{
  45:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
  46:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  47:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #if defined (HAL_PCD_MODULE_ENABLED) || defined (HAL_HCD_MODULE_ENABLED)
  48:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #if defined (USB) || defined (USB_OTG_FS)
  49:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /* Private typedef -----------------------------------------------------------*/
  50:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /* Private define ------------------------------------------------------------*/
  51:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /* Private macro -------------------------------------------------------------*/
  52:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /* Private variables ---------------------------------------------------------*/
  53:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /* Private function prototypes -----------------------------------------------*/
  54:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /* Private functions ---------------------------------------------------------*/
  55:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #if defined (USB_OTG_FS)
  56:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** static HAL_StatusTypeDef USB_CoreReset(USB_OTG_GlobalTypeDef *USBx);
  57:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  58:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /* Exported functions --------------------------------------------------------*/
  59:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /** @defgroup USB_LL_Exported_Functions USB Low Layer Exported Functions
  60:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @{
  61:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
  62:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  63:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /** @defgroup USB_LL_Exported_Functions_Group1 Initialization/de-initialization functions
  64:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****  *  @brief    Initialization and Configuration functions
  65:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****  *
  66:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** @verbatim
  67:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****  ===============================================================================
  68:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                       ##### Initialization/de-initialization functions #####
  69:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****  ===============================================================================
  70:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  71:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** @endverbatim
  72:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @{
  73:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
  74:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  75:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
  76:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Initializes the USB Core
  77:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx USB Instance
  78:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  cfg pointer to a USB_OTG_CfgTypeDef structure that contains
  79:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
  80:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
  81:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
  82:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_CoreInit(USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
  83:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
  84:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_StatusTypeDef ret;
  85:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  86:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (cfg.phy_itface == USB_OTG_ULPI_PHY)
  87:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
ARM GAS  /tmp/ccPzcOpE.s 			page 3


  88:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GCCFG &= ~(USB_OTG_GCCFG_PWRDWN);
  89:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  90:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Init The ULPI Interface */
  91:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GUSBCFG &= ~(USB_OTG_GUSBCFG_TSDPS | USB_OTG_GUSBCFG_ULPIFSLS | USB_OTG_GUSBCFG_PHYSEL);
  92:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
  93:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Select vbus source */
  94:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GUSBCFG &= ~(USB_OTG_GUSBCFG_ULPIEVBUSD | USB_OTG_GUSBCFG_ULPIEVBUSI);
  95:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (cfg.use_external_vbus == 1U)
  96:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
  97:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx->GUSBCFG |= USB_OTG_GUSBCFG_ULPIEVBUSD;
  98:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
  99:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Reset after a PHY select  */
 100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     ret = USB_CoreReset(USBx);
 101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else /* FS interface (embedded Phy) */
 103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Select FS Embedded PHY */
 105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GUSBCFG |= USB_OTG_GUSBCFG_PHYSEL;
 106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Reset after a PHY select and set Host mode */
 108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     ret = USB_CoreReset(USBx);
 109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (cfg.battery_charging_enable == 0U)
 111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Activate the USB Transceiver */
 113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx->GCCFG |= USB_OTG_GCCFG_PWRDWN;
 114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
 116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Deactivate the USB Transceiver */
 118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx->GCCFG &= ~(USB_OTG_GCCFG_PWRDWN);
 119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ret;
 123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Set the USB turnaround time
 128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx USB Instance
 129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  hclk: AHB clock frequency
 130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval USB turnaround time In PHY Clocks number
 131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_SetTurnaroundTime(USB_OTG_GlobalTypeDef *USBx,
 133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                         uint32_t hclk, uint8_t speed)
 134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t UsbTrd;
 136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* The USBTRD is configured according to the tables below, depending on AHB frequency
 138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   used by application. In the low AHB frequency range it is used to stretch enough the USB response
 139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   time to IN tokens, the USB turnaround time, so to compensate for the longer AHB read access
 140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   latency to the Data FIFO */
 141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (speed == USBD_FS_SPEED)
 142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((hclk >= 14200000U) && (hclk < 15000000U))
 144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
ARM GAS  /tmp/ccPzcOpE.s 			page 4


 145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 14.2-15 MHz */
 146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0xFU;
 147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else if ((hclk >= 15000000U) && (hclk < 16000000U))
 149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 15-16 MHz */
 151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0xEU;
 152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else if ((hclk >= 16000000U) && (hclk < 17200000U))
 154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 16-17.2 MHz */
 156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0xDU;
 157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else if ((hclk >= 17200000U) && (hclk < 18500000U))
 159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 17.2-18.5 MHz */
 161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0xCU;
 162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else if ((hclk >= 18500000U) && (hclk < 20000000U))
 164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 18.5-20 MHz */
 166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0xBU;
 167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else if ((hclk >= 20000000U) && (hclk < 21800000U))
 169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 20-21.8 MHz */
 171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0xAU;
 172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else if ((hclk >= 21800000U) && (hclk < 24000000U))
 174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 21.8-24 MHz */
 176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0x9U;
 177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else if ((hclk >= 24000000U) && (hclk < 27700000U))
 179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 24-27.7 MHz */
 181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0x8U;
 182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else if ((hclk >= 27700000U) && (hclk < 32000000U))
 184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 27.7-32 MHz */
 186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0x7U;
 187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else /* if(hclk >= 32000000) */
 189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* hclk Clock Range between 32-200 MHz */
 191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       UsbTrd = 0x6U;
 192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     UsbTrd = USBD_DEFAULT_TRDT_VALUE;
 197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GUSBCFG &= ~USB_OTG_GUSBCFG_TRDT;
 200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GUSBCFG |= (uint32_t)((UsbTrd << 10) & USB_OTG_GUSBCFG_TRDT);
 201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
ARM GAS  /tmp/ccPzcOpE.s 			page 5


 202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EnableGlobalInt
 207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         Enables the controller's Global Int in the AHB Config reg
 208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EnableGlobalInt(USB_OTG_GlobalTypeDef *USBx)
 212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GAHBCFG |= USB_OTG_GAHBCFG_GINT;
 214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DisableGlobalInt
 219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         Disable the controller's Global Int in the AHB Config reg
 220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** */
 223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DisableGlobalInt(USB_OTG_GlobalTypeDef *USBx)
 224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GAHBCFG &= ~USB_OTG_GAHBCFG_GINT;
 226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_SetCurrentMode : Set functional mode
 231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  mode   current core mode
 233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
 234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg USB_DEVICE_MODE: Peripheral mode
 235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg USB_HOST_MODE: Host mode
 236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg USB_DRD_MODE: Dual Role Device mode
 237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_SetCurrentMode(USB_OTG_GlobalTypeDef *USBx, USB_ModeTypeDef mode)
 240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GUSBCFG &= ~(USB_OTG_GUSBCFG_FHMOD | USB_OTG_GUSBCFG_FDMOD);
 242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (mode == USB_HOST_MODE)
 244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GUSBCFG |= USB_OTG_GUSBCFG_FHMOD;
 246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else if (mode == USB_DEVICE_MODE)
 248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GUSBCFG |= USB_OTG_GUSBCFG_FDMOD;
 250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     return HAL_ERROR;
 254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_Delay(50U);
 256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
ARM GAS  /tmp/ccPzcOpE.s 			page 6


 259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DevInit : Initializes the USB_OTG controller registers
 262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         for device mode
 263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  cfg   pointer to a USB_OTG_CfgTypeDef structure that contains
 265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
 266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DevInit(USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
 269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_StatusTypeDef ret = HAL_OK;
 271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t i;
 273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i < 15U; i++)
 275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->DIEPTXF[i] = 0U;
 277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* VBUS Sensing setup */
 280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (cfg.vbus_sensing_enable == 0U)
 281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DCTL |= USB_OTG_DCTL_SDIS;
 283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Deactivate VBUS Sensing B */
 285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GCCFG &= ~USB_OTG_GCCFG_VBDEN;
 286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* B-peripheral session valid override enable */
 288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GOTGCTL |= USB_OTG_GOTGCTL_BVALOEN;
 289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GOTGCTL |= USB_OTG_GOTGCTL_BVALOVAL;
 290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Enable HW VBUS sensing */
 294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GCCFG |= USB_OTG_GCCFG_VBDEN;
 295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Restart the Phy Clock */
 298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_PCGCCTL = 0U;
 299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Device mode configuration */
 301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DCFG |= DCFG_FRAME_INTERVAL_80;
 302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Set Core speed to Full speed mode */
 304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_SetDevSpeed(USBx, USB_OTG_SPEED_FULL);
 305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Flush the FIFOs */
 307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (USB_FlushTxFifo(USBx, 0x10U) != HAL_OK) /* all Tx FIFOs */
 308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     ret = HAL_ERROR;
 310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (USB_FlushRxFifo(USBx) != HAL_OK)
 313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     ret = HAL_ERROR;
 315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
ARM GAS  /tmp/ccPzcOpE.s 			page 7


 316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear all pending Device Interrupts */
 318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK = 0U;
 319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DOEPMSK = 0U;
 320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DAINTMSK = 0U;
 321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i < cfg.dev_endpoints; i++)
 323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_INEP(i)->DIEPCTL & USB_OTG_DIEPCTL_EPENA) == USB_OTG_DIEPCTL_EPENA)
 325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (i == 0U)
 327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_INEP(i)->DIEPCTL = USB_OTG_DIEPCTL_SNAK;
 329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       else
 331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_INEP(i)->DIEPCTL = USB_OTG_DIEPCTL_EPDIS | USB_OTG_DIEPCTL_SNAK;
 333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
 336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(i)->DIEPCTL = 0U;
 338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(i)->DIEPTSIZ = 0U;
 341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(i)->DIEPINT  = 0xFB7FU;
 342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i < cfg.dev_endpoints; i++)
 345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_OUTEP(i)->DOEPCTL & USB_OTG_DOEPCTL_EPENA) == USB_OTG_DOEPCTL_EPENA)
 347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (i == 0U)
 349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_OUTEP(i)->DOEPCTL = USB_OTG_DOEPCTL_SNAK;
 351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       else
 353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_OUTEP(i)->DOEPCTL = USB_OTG_DOEPCTL_EPDIS | USB_OTG_DOEPCTL_SNAK;
 355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
 358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(i)->DOEPCTL = 0U;
 360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(i)->DOEPTSIZ = 0U;
 363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(i)->DOEPINT  = 0xFB7FU;
 364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK &= ~(USB_OTG_DIEPMSK_TXFURM);
 367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Disable all interrupts. */
 369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTMSK = 0U;
 370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear any pending interrupts */
 372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTSTS = 0xBFFFFFFFU;
ARM GAS  /tmp/ccPzcOpE.s 			page 8


 373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enable the common interrupts */
 375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_RXFLVLM;
 376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enable interrupts matching to the Device mode ONLY */
 378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_USBSUSPM | USB_OTG_GINTMSK_USBRST |
 379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_OTG_GINTMSK_ENUMDNEM | USB_OTG_GINTMSK_IEPINT |
 380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_OTG_GINTMSK_OEPINT   | USB_OTG_GINTMSK_IISOIXFRM |
 381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_OTG_GINTMSK_PXFRM_IISOOXFRM | USB_OTG_GINTMSK_WUIM;
 382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (cfg.Sof_enable != 0U)
 384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GINTMSK |= USB_OTG_GINTMSK_SOFM;
 386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (cfg.vbus_sensing_enable == 1U)
 389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->GINTMSK |= (USB_OTG_GINTMSK_SRQIM | USB_OTG_GINTMSK_OTGINT);
 391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ret;
 394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_OTG_FlushTxFifo : Flush a Tx FIFO
 398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  num  FIFO number
 400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
 401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             15 means Flush all Tx FIFOs
 402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushTxFifo(USB_OTG_GlobalTypeDef *USBx, uint32_t num)
 405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t count = 0U;
 407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GRSTCTL = (USB_OTG_GRSTCTL_TXFFLSH | (num << 6));
 409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   do
 411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (++count > 200000U)
 413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       return HAL_TIMEOUT;
 415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   while ((USBx->GRSTCTL & USB_OTG_GRSTCTL_TXFFLSH) == USB_OTG_GRSTCTL_TXFFLSH);
 418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_FlushRxFifo : Flush Rx FIFO
 424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushRxFifo(USB_OTG_GlobalTypeDef *USBx)
 428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t count = 0;
ARM GAS  /tmp/ccPzcOpE.s 			page 9


 430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GRSTCTL = USB_OTG_GRSTCTL_RXFFLSH;
 432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   do
 434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (++count > 200000U)
 436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       return HAL_TIMEOUT;
 438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   while ((USBx->GRSTCTL & USB_OTG_GRSTCTL_RXFFLSH) == USB_OTG_GRSTCTL_RXFFLSH);
 441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_SetDevSpeed  Initializes the DevSpd field of DCFG register
 447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         depending the PHY type and the enumeration speed of the device.
 448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  speed  device speed
 450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
 451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
 452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval  Hal status
 453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_SetDevSpeed(USB_OTG_GlobalTypeDef *USBx, uint8_t speed)
 455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DCFG |= speed;
 459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_GetDevSpeed  Return the Dev Speed
 464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval speed  device speed
 466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
 467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg PCD_SPEED_FULL: Full speed mode
 468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint8_t USB_GetDevSpeed(USB_OTG_GlobalTypeDef *USBx)
 470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint8_t speed;
 473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t DevEnumSpeed = USBx_DEVICE->DSTS & USB_OTG_DSTS_ENUMSPD;
 474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if ((DevEnumSpeed == DSTS_ENUMSPD_FS_PHY_30MHZ_OR_60MHZ) ||
 476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       (DevEnumSpeed == DSTS_ENUMSPD_FS_PHY_48MHZ))
 477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     speed = USBD_FS_SPEED;
 479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     speed = 0xFU;
 483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return speed;
 486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
ARM GAS  /tmp/ccPzcOpE.s 			page 10


 487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Activate and configure an endpoint
 490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep pointer to endpoint structure
 492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateEndpoint(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t epnum = (uint32_t)ep->num;
 498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
 500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK |= USB_OTG_DAINTMSK_IEPM & (uint32_t)(1UL << (ep->num & EP_ADDR_MSK));
 502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_INEP(epnum)->DIEPCTL & USB_OTG_DIEPCTL_USBAEP) == 0U)
 504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPCTL |= (ep->maxpacket & USB_OTG_DIEPCTL_MPSIZ) |
 506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    ((uint32_t)ep->type << 18) | (epnum << 22) |
 507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    USB_OTG_DIEPCTL_SD0PID_SEVNFRM |
 508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    USB_OTG_DIEPCTL_USBAEP;
 509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK |= USB_OTG_DAINTMSK_OEPM & ((uint32_t)(1UL << (ep->num & EP_ADDR_MSK)) <<
 514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (((USBx_OUTEP(epnum)->DOEPCTL) & USB_OTG_DOEPCTL_USBAEP) == 0U)
 516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPCTL |= (ep->maxpacket & USB_OTG_DOEPCTL_MPSIZ) |
 518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                     ((uint32_t)ep->type << 18) |
 519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                     USB_OTG_DIEPCTL_SD0PID_SEVNFRM |
 520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                     USB_OTG_DOEPCTL_USBAEP;
 521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Activate and configure a dedicated endpoint
 528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep pointer to endpoint structure
 530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateDedicatedEndpoint(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t epnum = (uint32_t)ep->num;
 536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Read DEPCTLn register */
 538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
 539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (((USBx_INEP(epnum)->DIEPCTL) & USB_OTG_DIEPCTL_USBAEP) == 0U)
 541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPCTL |= (ep->maxpacket & USB_OTG_DIEPCTL_MPSIZ) |
 543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    ((uint32_t)ep->type << 18) | (epnum << 22) |
ARM GAS  /tmp/ccPzcOpE.s 			page 11


 544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    USB_OTG_DIEPCTL_SD0PID_SEVNFRM |
 545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    USB_OTG_DIEPCTL_USBAEP;
 546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DEACHMSK |= USB_OTG_DAINTMSK_IEPM & (uint32_t)(1UL << (ep->num & EP_ADDR_MSK));
 549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (((USBx_OUTEP(epnum)->DOEPCTL) & USB_OTG_DOEPCTL_USBAEP) == 0U)
 553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPCTL |= (ep->maxpacket & USB_OTG_DOEPCTL_MPSIZ) |
 555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                     ((uint32_t)ep->type << 18) | (epnum << 22) |
 556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                     USB_OTG_DOEPCTL_USBAEP;
 557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DEACHMSK |= USB_OTG_DAINTMSK_OEPM & ((uint32_t)(1UL << (ep->num & EP_ADDR_MSK)) <<
 560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  De-activate and de-initialize an endpoint
 567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep pointer to endpoint structure
 569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DeactivateEndpoint(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t epnum = (uint32_t)ep->num;
 575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Read DEPCTLn register */
 577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
 578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_INEP(epnum)->DIEPCTL & USB_OTG_DIEPCTL_EPENA) == USB_OTG_DIEPCTL_EPENA)
 580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPCTL |= USB_OTG_DIEPCTL_SNAK;
 582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPCTL |= USB_OTG_DIEPCTL_EPDIS;
 583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DEACHMSK &= ~(USB_OTG_DAINTMSK_IEPM & (uint32_t)(1UL << (ep->num & EP_ADDR_MSK)));
 586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK &= ~(USB_OTG_DAINTMSK_IEPM & (uint32_t)(1UL << (ep->num & EP_ADDR_MSK)));
 587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(epnum)->DIEPCTL &= ~(USB_OTG_DIEPCTL_USBAEP |
 588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    USB_OTG_DIEPCTL_MPSIZ |
 589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    USB_OTG_DIEPCTL_TXFNUM |
 590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    USB_OTG_DIEPCTL_SD0PID_SEVNFRM |
 591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                    USB_OTG_DIEPCTL_EPTYP);
 592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_OUTEP(epnum)->DOEPCTL & USB_OTG_DOEPCTL_EPENA) == USB_OTG_DOEPCTL_EPENA)
 596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPCTL |= USB_OTG_DOEPCTL_SNAK;
 598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPCTL |= USB_OTG_DOEPCTL_EPDIS;
 599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
ARM GAS  /tmp/ccPzcOpE.s 			page 12


 601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DEACHMSK &= ~(USB_OTG_DAINTMSK_OEPM & ((uint32_t)(1UL << (ep->num & EP_ADDR_MSK)) 
 602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK &= ~(USB_OTG_DAINTMSK_OEPM & ((uint32_t)(1UL << (ep->num & EP_ADDR_MSK)) 
 603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPCTL &= ~(USB_OTG_DOEPCTL_USBAEP |
 604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                     USB_OTG_DOEPCTL_MPSIZ |
 605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                     USB_OTG_DOEPCTL_SD0PID_SEVNFRM |
 606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                     USB_OTG_DOEPCTL_EPTYP);
 607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  De-activate and de-initialize a dedicated endpoint
 614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep pointer to endpoint structure
 616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DeactivateDedicatedEndpoint(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *e
 619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t epnum = (uint32_t)ep->num;
 622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Read DEPCTLn register */
 624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
 625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_INEP(epnum)->DIEPCTL & USB_OTG_DIEPCTL_EPENA) == USB_OTG_DIEPCTL_EPENA)
 627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPCTL  |= USB_OTG_DIEPCTL_SNAK;
 629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPCTL  |= USB_OTG_DIEPCTL_EPDIS;
 630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(epnum)->DIEPCTL &= ~ USB_OTG_DIEPCTL_USBAEP;
 633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK &= ~(USB_OTG_DAINTMSK_IEPM & (uint32_t)(1UL << (ep->num & EP_ADDR_MSK)));
 634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_OUTEP(epnum)->DOEPCTL & USB_OTG_DOEPCTL_EPENA) == USB_OTG_DOEPCTL_EPENA)
 638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPCTL  |= USB_OTG_DOEPCTL_SNAK;
 640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPCTL  |= USB_OTG_DOEPCTL_EPDIS;
 641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPCTL &= ~USB_OTG_DOEPCTL_USBAEP;
 644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DAINTMSK &= ~(USB_OTG_DAINTMSK_OEPM & ((uint32_t)(1UL << (ep->num & EP_ADDR_MSK)) 
 645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EPStartXfer : setup and starts a transfer over an EP
 652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep pointer to endpoint structure
 654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EPStartXfer(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
ARM GAS  /tmp/ccPzcOpE.s 			page 13


 658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t epnum = (uint32_t)ep->num;
 660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint16_t pktcnt;
 661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* IN endpoint */
 663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
 664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Zero Length Packet? */
 666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->xfer_len == 0U)
 667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT);
 669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1U << 19));
 670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
 673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Program the transfer size and packet count
 675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       * as follows: xfersize = N * maxpacket +
 676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       * short_packet pktcnt = N + (short_packet
 677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       * exist ? 1 : 0)
 678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       */
 679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT);
 681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (((ep->xfer_len + ep->maxpacket - 1U
 682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_XFRSIZ & ep->xfer_len);
 683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (ep->type == EP_TYPE_ISOC)
 685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_MULCNT);
 687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_INEP(epnum)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_MULCNT & (1U << 29));
 688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* EP enable, IN data in FIFO */
 691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(epnum)->DIEPCTL |= (USB_OTG_DIEPCTL_CNAK | USB_OTG_DIEPCTL_EPENA);
 692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->type != EP_TYPE_ISOC)
 694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Enable the Tx FIFO Empty Interrupt for this EP */
 696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (ep->xfer_len > 0U)
 697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_DEVICE->DIEPEMPMSK |= 1UL << (ep->num & EP_ADDR_MSK);
 699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
 702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if ((USBx_DEVICE->DSTS & (1U << 8)) == 0U)
 704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_INEP(epnum)->DIEPCTL |= USB_OTG_DIEPCTL_SODDFRM;
 706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       else
 708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_INEP(epnum)->DIEPCTL |= USB_OTG_DIEPCTL_SD0PID_SEVNFRM;
 710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       (void)USB_WritePacket(USBx, ep->xfer_buff, ep->num, (uint16_t)ep->xfer_len);
 713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
ARM GAS  /tmp/ccPzcOpE.s 			page 14


 715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else /* OUT endpoint */
 716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Program the transfer size and packet count as follows:
 718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     * pktcnt = N
 719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     * xfersize = N * maxpacket
 720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     */
 721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_XFRSIZ);
 722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_PKTCNT);
 723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->xfer_len == 0U)
 725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_XFRSIZ & ep->maxpacket);
 727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1U << 19));
 728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
 730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       pktcnt = (uint16_t)((ep->xfer_len + ep->maxpacket - 1U) / ep->maxpacket);
 732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPTSIZ |= USB_OTG_DOEPTSIZ_PKTCNT & ((uint32_t)pktcnt << 19);
 733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPTSIZ |= USB_OTG_DOEPTSIZ_XFRSIZ & (ep->maxpacket * pktcnt);
 734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->type == EP_TYPE_ISOC)
 737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if ((USBx_DEVICE->DSTS & (1U << 8)) == 0U)
 739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_OUTEP(epnum)->DOEPCTL |= USB_OTG_DOEPCTL_SODDFRM;
 741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       else
 743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_OUTEP(epnum)->DOEPCTL |= USB_OTG_DOEPCTL_SD0PID_SEVNFRM;
 745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* EP enable */
 748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPCTL |= (USB_OTG_DOEPCTL_CNAK | USB_OTG_DOEPCTL_EPENA);
 749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EP0StartXfer : setup and starts a transfer over the EP  0
 756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep pointer to endpoint structure
 758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0StartXfer(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t epnum = (uint32_t)ep->num;
 764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* IN endpoint */
 766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
 767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Zero Length Packet? */
 769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->xfer_len == 0U)
 770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT);
ARM GAS  /tmp/ccPzcOpE.s 			page 15


 772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1U << 19));
 773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
 776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Program the transfer size and packet count
 778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       * as follows: xfersize = N * maxpacket +
 779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       * short_packet pktcnt = N + (short_packet
 780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       * exist ? 1 : 0)
 781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       */
 782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_XFRSIZ);
 783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ &= ~(USB_OTG_DIEPTSIZ_PKTCNT);
 784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (ep->xfer_len > ep->maxpacket)
 786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
 787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         ep->xfer_len = ep->maxpacket;
 788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
 789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_PKTCNT & (1U << 19));
 790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPTSIZ |= (USB_OTG_DIEPTSIZ_XFRSIZ & ep->xfer_len);
 791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* EP enable, IN data in FIFO */
 794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(epnum)->DIEPCTL |= (USB_OTG_DIEPCTL_CNAK | USB_OTG_DIEPCTL_EPENA);
 795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Enable the Tx FIFO Empty Interrupt for this EP */
 797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->xfer_len > 0U)
 798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_DEVICE->DIEPEMPMSK |= 1UL << (ep->num & EP_ADDR_MSK);
 800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else /* OUT endpoint */
 803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Program the transfer size and packet count as follows:
 805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     * pktcnt = N
 806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     * xfersize = N * maxpacket
 807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     */
 808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_XFRSIZ);
 809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPTSIZ &= ~(USB_OTG_DOEPTSIZ_PKTCNT);
 810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->xfer_len > 0U)
 812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       ep->xfer_len = ep->maxpacket;
 814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1U << 19));
 817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_XFRSIZ & (ep->maxpacket));
 818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* EP enable */
 820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPCTL |= (USB_OTG_DOEPCTL_CNAK | USB_OTG_DOEPCTL_EPENA);
 821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_WritePacket : Writes a packet into the Tx FIFO associated
 828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         with the EP/channel
ARM GAS  /tmp/ccPzcOpE.s 			page 16


 829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  src   pointer to source buffer
 831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ch_ep_num  endpoint or host channel number
 832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  len  Number of bytes to write
 833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_WritePacket(USB_OTG_GlobalTypeDef *USBx, uint8_t *src, uint8_t ch_ep_num, uin
 836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t *pSrc = (uint32_t *)src;
 839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t count32b, i;
 840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   count32b = ((uint32_t)len + 3U) / 4U;
 842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i < count32b; i++)
 843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DFIFO((uint32_t)ch_ep_num) = __UNALIGNED_UINT32_READ(pSrc);
 845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pSrc++;
 846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ReadPacket : read a packet from the RX FIFO
 853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  dest  source pointer
 855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  len  Number of bytes to read
 856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval pointer to destination buffer
 857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** void *USB_ReadPacket(USB_OTG_GlobalTypeDef *USBx, uint8_t *dest, uint16_t len)
 859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t *pDest = (uint32_t *)dest;
 862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t i;
 863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t count32b = ((uint32_t)len + 3U) / 4U;
 864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i < count32b; i++)
 866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     __UNALIGNED_UINT32_WRITE(pDest, USBx_DFIFO(0U));
 868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pDest++;
 869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ((void *)pDest);
 872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EPSetStall : set a stall condition over an EP
 876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep pointer to endpoint structure
 878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EPSetStall(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t epnum = (uint32_t)ep->num;
 884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
ARM GAS  /tmp/ccPzcOpE.s 			page 17


 886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (((USBx_INEP(epnum)->DIEPCTL & USB_OTG_DIEPCTL_EPENA) == 0U) && (epnum != 0U))
 888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPCTL &= ~(USB_OTG_DIEPCTL_EPDIS);
 890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(epnum)->DIEPCTL |= USB_OTG_DIEPCTL_STALL;
 892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (((USBx_OUTEP(epnum)->DOEPCTL & USB_OTG_DOEPCTL_EPENA) == 0U) && (epnum != 0U))
 896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPCTL &= ~(USB_OTG_DOEPCTL_EPDIS);
 898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPCTL |= USB_OTG_DOEPCTL_STALL;
 900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EPClearStall : Clear a stall condition over an EP
 907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep pointer to endpoint structure
 909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EPClearStall(USB_OTG_GlobalTypeDef *USBx, USB_OTG_EPTypeDef *ep)
 912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t epnum = (uint32_t)ep->num;
 915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
 917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(epnum)->DIEPCTL &= ~USB_OTG_DIEPCTL_STALL;
 919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((ep->type == EP_TYPE_INTR) || (ep->type == EP_TYPE_BULK))
 920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_INEP(epnum)->DIEPCTL |= USB_OTG_DIEPCTL_SD0PID_SEVNFRM; /* DATA0 */
 922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
 925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(epnum)->DOEPCTL &= ~USB_OTG_DOEPCTL_STALL;
 927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((ep->type == EP_TYPE_INTR) || (ep->type == EP_TYPE_BULK))
 928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
 929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_OUTEP(epnum)->DOEPCTL |= USB_OTG_DOEPCTL_SD0PID_SEVNFRM; /* DATA0 */
 930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
 931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_StopDevice : Stop the usb device mode
 937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_StopDevice(USB_OTG_GlobalTypeDef *USBx)
 941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_StatusTypeDef ret;
ARM GAS  /tmp/ccPzcOpE.s 			page 18


 943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t i;
 945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear Pending interrupt */
 947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i < 15U; i++)
 948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_INEP(i)->DIEPINT = 0xFB7FU;
 950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_OUTEP(i)->DOEPINT = 0xFB7FU;
 951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear interrupt masks */
 954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DIEPMSK  = 0U;
 955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DOEPMSK  = 0U;
 956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DAINTMSK = 0U;
 957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Flush the FIFO */
 959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   ret = USB_FlushRxFifo(USBx);
 960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ret != HAL_OK)
 961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     return ret;
 963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   ret = USB_FlushTxFifo(USBx,  0x10U);
 966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ret != HAL_OK)
 967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     return ret;
 969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
 970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ret;
 972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_SetDevAddress : Stop the usb device mode
 976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  address  new device address to be assigned
 978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
 979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef  USB_SetDevAddress(USB_OTG_GlobalTypeDef *USBx, uint8_t address)
 982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DCFG &= ~(USB_OTG_DCFG_DAD);
 986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DCFG |= ((uint32_t)address << 4) & USB_OTG_DCFG_DAD;
 987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
 992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DevConnect : Connect the USB device by enabling the pull-up/pull-down
 993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
 994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
 995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
 996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevConnect(USB_OTG_GlobalTypeDef *USBx)
 997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
 999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
ARM GAS  /tmp/ccPzcOpE.s 			page 19


1000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DCTL &= ~USB_OTG_DCTL_SDIS;
1001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_Delay(3U);
1002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DevDisconnect : Disconnect the USB device by disabling the pull-up/pull-down
1008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevDisconnect(USB_OTG_GlobalTypeDef *USBx)
1012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DCTL |= USB_OTG_DCTL_SDIS;
1016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_Delay(3U);
1017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ReadInterrupts: return the global USB interrupt status
1023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t  USB_ReadInterrupts(USB_OTG_GlobalTypeDef *USBx)
1027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t tmpreg;
1029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg = USBx->GINTSTS;
1031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg &= USBx->GINTMSK;
1032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return tmpreg;
1034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ReadDevAllOutEpInterrupt: return the USB device OUT endpoints interrupt status
1038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_ReadDevAllOutEpInterrupt(USB_OTG_GlobalTypeDef *USBx)
1042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t tmpreg;
1045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg  = USBx_DEVICE->DAINT;
1047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DAINTMSK;
1048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ((tmpreg & 0xffff0000U) >> 16);
1050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ReadDevAllInEpInterrupt: return the USB device IN endpoints interrupt status
1054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
ARM GAS  /tmp/ccPzcOpE.s 			page 20


1057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_ReadDevAllInEpInterrupt(USB_OTG_GlobalTypeDef *USBx)
1058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t tmpreg;
1061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg  = USBx_DEVICE->DAINT;
1063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DAINTMSK;
1064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ((tmpreg & 0xFFFFU));
1066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Returns Device OUT EP Interrupt register
1070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  epnum  endpoint number
1072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
1073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval Device OUT EP Interrupt register
1074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_ReadDevOutEPInterrupt(USB_OTG_GlobalTypeDef *USBx, uint8_t epnum)
1076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t tmpreg;
1079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg  = USBx_OUTEP((uint32_t)epnum)->DOEPINT;
1081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg &= USBx_DEVICE->DOEPMSK;
1082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return tmpreg;
1084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Returns Device IN EP Interrupt register
1088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  epnum  endpoint number
1090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
1091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval Device IN EP Interrupt register
1092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_ReadDevInEPInterrupt(USB_OTG_GlobalTypeDef *USBx, uint8_t epnum)
1094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t tmpreg, msk, emp;
1097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   msk = USBx_DEVICE->DIEPMSK;
1099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   emp = USBx_DEVICE->DIEPEMPMSK;
1100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   msk |= ((emp >> (epnum & EP_ADDR_MSK)) & 0x1U) << 7;
1101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg = USBx_INEP((uint32_t)epnum)->DIEPINT & msk;
1102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return tmpreg;
1104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ClearInterrupts: clear a USB interrupt
1108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  interrupt  interrupt flag
1110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval None
1111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** void  USB_ClearInterrupts(USB_OTG_GlobalTypeDef *USBx, uint32_t interrupt)
1113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
ARM GAS  /tmp/ccPzcOpE.s 			page 21


1114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTSTS |= interrupt;
1115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Returns USB core mode
1119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval return core mode : Host or Device
1121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
1122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           0 : Host
1123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           1 : Device
1124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_GetMode(USB_OTG_GlobalTypeDef *USBx)
1126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ((USBx->GINTSTS) & 0x1U);
1128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Activate EP0 for Setup transactions
1132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef  USB_ActivateSetup(USB_OTG_GlobalTypeDef *USBx)
1136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Set the MPS of the IN EP0 to 64 bytes */
1140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_INEP(0U)->DIEPCTL &= ~USB_OTG_DIEPCTL_MPSIZ;
1141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DCTL |= USB_OTG_DCTL_CGINAK;
1143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Prepare the EP0 to start the first control setup
1149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  psetup  pointer to setup packet
1151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0_OutStart(USB_OTG_GlobalTypeDef *USBx, uint8_t *psetup)
1154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(psetup);
1156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t gSNPSiD = *(__IO uint32_t *)(&USBx->CID + 0x1U);
1158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (gSNPSiD > USB_OTG_CORE_ID_300A)
1160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_OUTEP(0U)->DOEPCTL & USB_OTG_DOEPCTL_EPENA) == USB_OTG_DOEPCTL_EPENA)
1162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       return HAL_OK;
1164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_OUTEP(0U)->DOEPTSIZ = 0U;
1168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_OUTEP(0U)->DOEPTSIZ |= (USB_OTG_DOEPTSIZ_PKTCNT & (1U << 19));
1169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_OUTEP(0U)->DOEPTSIZ |= (3U * 8U);
1170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_OUTEP(0U)->DOEPTSIZ |=  USB_OTG_DOEPTSIZ_STUPCNT;
ARM GAS  /tmp/ccPzcOpE.s 			page 22


1171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Reset the USB Core (needed after USB clock settings change)
1177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** static HAL_StatusTypeDef USB_CoreReset(USB_OTG_GlobalTypeDef *USBx)
1181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t count = 0U;
1183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Wait for AHB master IDLE state. */
1185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   do
1186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (++count > 200000U)
1188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       return HAL_TIMEOUT;
1190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   while ((USBx->GRSTCTL & USB_OTG_GRSTCTL_AHBIDL) == 0U);
1193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Core Soft Reset */
1195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   count = 0U;
1196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GRSTCTL |= USB_OTG_GRSTCTL_CSRST;
1197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   do
1199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (++count > 200000U)
1201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       return HAL_TIMEOUT;
1203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   while ((USBx->GRSTCTL & USB_OTG_GRSTCTL_CSRST) == USB_OTG_GRSTCTL_CSRST);
1206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_HostInit : Initializes the USB OTG controller registers
1212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         for Host mode
1213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  cfg   pointer to a USB_OTG_CfgTypeDef structure that contains
1215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
1216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_HostInit(USB_OTG_GlobalTypeDef *USBx, USB_OTG_CfgTypeDef cfg)
1219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t i;
1222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Restart the Phy Clock */
1224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_PCGCCTL = 0U;
1225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Disable VBUS sensing */
1227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GCCFG &= ~(USB_OTG_GCCFG_VBDEN);
ARM GAS  /tmp/ccPzcOpE.s 			page 23


1228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Disable Battery chargin detector */
1230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GCCFG &= ~(USB_OTG_GCCFG_BCDEN);
1231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Set default Max speed support */
1233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HOST->HCFG &= ~(USB_OTG_HCFG_FSLSS);
1234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Make sure the FIFOs are flushed. */
1236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_FlushTxFifo(USBx, 0x10U); /* all Tx FIFOs */
1237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_FlushRxFifo(USBx);
1238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear all pending HC Interrupts */
1240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i < cfg.Host_channels; i++)
1241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HC(i)->HCINT = 0xFFFFFFFFU;
1243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HC(i)->HCINTMSK = 0U;
1244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enable VBUS driving */
1247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_DriveVbus(USBx, 1U);
1248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_Delay(200U);
1250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Disable all interrupts. */
1252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTMSK = 0U;
1253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear any pending interrupts */
1255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTSTS = 0xFFFFFFFFU;
1256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* set Rx FIFO size */
1258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GRXFSIZ  = 0x80U;
1259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->DIEPTXF0_HNPTXFSIZ = (uint32_t)(((0x60U << 16) & USB_OTG_NPTXFD) | 0x80U);
1260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->HPTXFSIZ = (uint32_t)(((0x40U << 16)& USB_OTG_HPTXFSIZ_PTXFD) | 0xE0U);
1261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enable the common interrupts */
1262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_RXFLVLM;
1263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enable interrupts matching to the Host mode ONLY */
1265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTMSK |= (USB_OTG_GINTMSK_PRTIM            | USB_OTG_GINTMSK_HCIM | \
1266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                     USB_OTG_GINTMSK_SOFM             | USB_OTG_GINTSTS_DISCINT | \
1267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                     USB_OTG_GINTMSK_PXFRM_IISOOXFRM  | USB_OTG_GINTMSK_WUIM);
1268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_InitFSLSPClkSel : Initializes the FSLSPClkSel field of the
1274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         HCFG register on the PHY type and set the right frame interval
1275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  freq  clock frequency
1277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
1278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           HCFG_48_MHZ : Full Speed 48 MHz Clock
1279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           HCFG_6_MHZ : Low Speed 6 MHz Clock
1280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_InitFSLSPClkSel(USB_OTG_GlobalTypeDef *USBx, uint8_t freq)
1283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
ARM GAS  /tmp/ccPzcOpE.s 			page 24


1285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HOST->HCFG &= ~(USB_OTG_HCFG_FSLSPCS);
1287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HOST->HCFG |= (uint32_t)freq & USB_OTG_HCFG_FSLSPCS;
1288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (freq == HCFG_48_MHZ)
1290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HOST->HFIR = 48000U;
1292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else if (freq == HCFG_6_MHZ)
1294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HOST->HFIR = 6000U;
1296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
1298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* ... */
1300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** * @brief  USB_OTG_ResetPort : Reset Host Port
1307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @note (1)The application must wait at least 10 ms
1310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *   before clearing the reset bit.
1311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_ResetPort(USB_OTG_GlobalTypeDef *USBx)
1313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   __IO uint32_t hprt0 = 0U;
1317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   hprt0 &= ~(USB_OTG_HPRT_PENA | USB_OTG_HPRT_PCDET |
1321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****              USB_OTG_HPRT_PENCHNG | USB_OTG_HPRT_POCCHNG);
1322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HPRT0 = (USB_OTG_HPRT_PRST | hprt0);
1324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_Delay(100U);                                 /* See Note #1 */
1325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HPRT0 = ((~USB_OTG_HPRT_PRST) & hprt0);
1326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_Delay(10U);
1327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DriveVbus : activate or de-activate vbus
1333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  state  VBUS state
1334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
1335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           0 : VBUS Active
1336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *           1 : VBUS Inactive
1337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** */
1339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DriveVbus(USB_OTG_GlobalTypeDef *USBx, uint8_t state)
1340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
ARM GAS  /tmp/ccPzcOpE.s 			page 25


1342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   __IO uint32_t hprt0 = 0U;
1343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   hprt0 &= ~(USB_OTG_HPRT_PENA | USB_OTG_HPRT_PCDET |
1347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****              USB_OTG_HPRT_PENCHNG | USB_OTG_HPRT_POCCHNG);
1348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (((hprt0 & USB_OTG_HPRT_PPWR) == 0U) && (state == 1U))
1350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HPRT0 = (USB_OTG_HPRT_PPWR | hprt0);
1352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (((hprt0 & USB_OTG_HPRT_PPWR) == USB_OTG_HPRT_PPWR) && (state == 0U))
1354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HPRT0 = ((~USB_OTG_HPRT_PPWR) & hprt0);
1356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Return Host Core speed
1362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval speed : Host speed
1364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
1365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg HCD_SPEED_FULL: Full speed mode
1366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg HCD_SPEED_LOW: Low speed mode
1367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_GetHostSpeed(USB_OTG_GlobalTypeDef *USBx)
1369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   __IO uint32_t hprt0 = 0U;
1372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   hprt0 = USBx_HPRT0;
1374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ((hprt0 & USB_OTG_HPRT_PSPD) >> 17);
1375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Return Host Current Frame number
1379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval current frame number
1381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** */
1382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_GetCurrentFrame(USB_OTG_GlobalTypeDef *USBx)
1383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return (USBx_HOST->HFNUM & USB_OTG_HFNUM_FRNUM);
1387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Initialize a host channel
1391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ch_num  Channel number
1393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  epnum  Endpoint number
1395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 1 to 15
1396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  dev_address  Current device address
1397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
1398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  speed  Current device speed
ARM GAS  /tmp/ccPzcOpE.s 			page 26


1399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
1400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_FULL: Full speed mode
1401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg USB_OTG_SPEED_LOW: Low speed mode
1402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep_type  Endpoint Type
1403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of these values:
1404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg EP_TYPE_CTRL: Control type
1405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg EP_TYPE_ISOC: Isochronous type
1406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg EP_TYPE_BULK: Bulk type
1407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg EP_TYPE_INTR: Interrupt type
1408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  mps  Max Packet Size
1409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 0 to32K
1410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL state
1411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_Init(USB_OTG_GlobalTypeDef *USBx,
1413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                               uint8_t ch_num,
1414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                               uint8_t epnum,
1415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                               uint8_t dev_address,
1416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                               uint8_t speed,
1417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                               uint8_t ep_type,
1418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                               uint16_t mps)
1419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_StatusTypeDef ret = HAL_OK;
1421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t HCcharEpDir, HCcharLowSpeed;
1423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear old interrupt conditions for this host channel. */
1425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HC((uint32_t)ch_num)->HCINT = 0xFFFFFFFFU;
1426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enable channel interrupts required for this transfer. */
1428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   switch (ep_type)
1429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     case EP_TYPE_CTRL:
1431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     case EP_TYPE_BULK:
1432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC((uint32_t)ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |
1433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_STALLM |
1434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_TXERRM |
1435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_DTERRM |
1436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_AHBERR |
1437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_NAKM;
1438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if ((epnum & 0x80U) == 0x80U)
1440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
1441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_HC((uint32_t)ch_num)->HCINTMSK |= USB_OTG_HCINTMSK_BBERRM;
1442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
1443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
1444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     case EP_TYPE_INTR:
1446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC((uint32_t)ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |
1447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_STALLM |
1448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_TXERRM |
1449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_DTERRM |
1450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_NAKM   |
1451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_AHBERR |
1452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_FRMORM;
1453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if ((epnum & 0x80U) == 0x80U)
1455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
ARM GAS  /tmp/ccPzcOpE.s 			page 27


1456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_HC((uint32_t)ch_num)->HCINTMSK |= USB_OTG_HCINTMSK_BBERRM;
1457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
1458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
1460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     case EP_TYPE_ISOC:
1462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC((uint32_t)ch_num)->HCINTMSK = USB_OTG_HCINTMSK_XFRCM  |
1463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_ACKM   |
1464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_AHBERR |
1465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                             USB_OTG_HCINTMSK_FRMORM;
1466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if ((epnum & 0x80U) == 0x80U)
1468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
1469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         USBx_HC((uint32_t)ch_num)->HCINTMSK |= (USB_OTG_HCINTMSK_TXERRM | USB_OTG_HCINTMSK_BBERRM);
1470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
1471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
1472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     default:
1474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       ret = HAL_ERROR;
1475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
1476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enable the top level host channel interrupt. */
1479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HOST->HAINTMSK |= 1UL << (ch_num & 0xFU);
1480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Make sure host channel interrupts are enabled. */
1482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTMSK |= USB_OTG_GINTMSK_HCIM;
1483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Program the HCCHAR register */
1485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if ((epnum & 0x80U) == 0x80U)
1486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     HCcharEpDir = (0x1U << 15) & USB_OTG_HCCHAR_EPDIR;
1488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
1490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     HCcharEpDir = 0U;
1492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (speed == HPRT0_PRTSPD_LOW_SPEED)
1495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     HCcharLowSpeed = (0x1U << 17) & USB_OTG_HCCHAR_LSDEV;
1497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
1499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     HCcharLowSpeed = 0U;
1501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HC((uint32_t)ch_num)->HCCHAR = (((uint32_t)dev_address << 22) & USB_OTG_HCCHAR_DAD) |
1504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                       ((((uint32_t)epnum & 0x7FU) << 11) & USB_OTG_HCCHAR_EPNUM) |
1505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                       (((uint32_t)ep_type << 18) & USB_OTG_HCCHAR_EPTYP) |
1506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                                       ((uint32_t)mps & USB_OTG_HCCHAR_MPSIZ) | HCcharEpDir | HCchar
1507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep_type == EP_TYPE_INTR)
1509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HC((uint32_t)ch_num)->HCCHAR |= USB_OTG_HCCHAR_ODDFRM ;
1511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
ARM GAS  /tmp/ccPzcOpE.s 			page 28


1513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ret;
1514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Start a transfer over a host channel
1518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  hc  pointer to host channel structure
1520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL state
1521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_StartXfer(USB_OTG_GlobalTypeDef *USBx, USB_OTG_HCTypeDef *hc)
1523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t ch_num = (uint32_t)hc->ch_num;
1526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   static __IO uint32_t tmpreg = 0U;
1527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint8_t  is_oddframe;
1528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint16_t len_words;
1529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint16_t num_packets;
1530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint16_t max_hc_pkt_count = 256U;
1531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Compute the expected number of packets associated to the transfer */
1533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (hc->xfer_len > 0U)
1534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     num_packets = (uint16_t)((hc->xfer_len + hc->max_packet - 1U) / hc->max_packet);
1536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (num_packets > max_hc_pkt_count)
1538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       num_packets = max_hc_pkt_count;
1540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       hc->xfer_len = (uint32_t)num_packets * hc->max_packet;
1541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
1544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     num_packets = 1U;
1546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (hc->ep_is_in != 0U)
1548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     hc->xfer_len = (uint32_t)num_packets * hc->max_packet;
1550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Initialize the HCTSIZn register */
1553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HC(ch_num)->HCTSIZ = (hc->xfer_len & USB_OTG_HCTSIZ_XFRSIZ) |
1554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                             (((uint32_t)num_packets << 19) & USB_OTG_HCTSIZ_PKTCNT) |
1555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                             (((uint32_t)hc->data_pid << 29) & USB_OTG_HCTSIZ_DPID);
1556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   is_oddframe = (((uint32_t)USBx_HOST->HFNUM & 0x01U) != 0U) ? 0U : 1U;
1558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HC(ch_num)->HCCHAR &= ~USB_OTG_HCCHAR_ODDFRM;
1559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HC(ch_num)->HCCHAR |= (uint32_t)is_oddframe << 29;
1560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Set host channel enable */
1562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg = USBx_HC(ch_num)->HCCHAR;
1563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg &= ~USB_OTG_HCCHAR_CHDIS;
1564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* make sure to set the correct ep direction */
1566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (hc->ep_is_in != 0U)
1567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     tmpreg |= USB_OTG_HCCHAR_EPDIR;
1569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
ARM GAS  /tmp/ccPzcOpE.s 			page 29


1570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
1571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     tmpreg &= ~USB_OTG_HCCHAR_EPDIR;
1573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg |= USB_OTG_HCCHAR_CHENA;
1575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HC(ch_num)->HCCHAR = tmpreg;
1576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((hc->ep_is_in == 0U) && (hc->xfer_len > 0U))
1578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       switch (hc->ep_type)
1580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
1581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Non periodic transfer */
1582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         case EP_TYPE_CTRL:
1583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         case EP_TYPE_BULK:
1584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           len_words = (uint16_t)((hc->xfer_len + 3U) / 4U);
1586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           /* check if there is enough space in FIFO space */
1588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           if (len_words > (USBx->HNPTXSTS & 0xFFFFU))
1589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           {
1590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             /* need to process data in nptxfempty interrupt */
1591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             USBx->GINTMSK |= USB_OTG_GINTMSK_NPTXFEM;
1592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           }
1593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           break;
1594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Periodic transfer */
1596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         case EP_TYPE_INTR:
1597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         case EP_TYPE_ISOC:
1598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           len_words = (uint16_t)((hc->xfer_len + 3U) / 4U);
1599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           /* check if there is enough space in FIFO space */
1600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           if (len_words > (USBx_HOST->HPTXSTS & 0xFFFFU)) /* split the transfer */
1601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           {
1602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             /* need to process data in ptxfempty interrupt */
1603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             USBx->GINTMSK |= USB_OTG_GINTMSK_PTXFEM;
1604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           }
1605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           break;
1606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         default:
1608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           break;
1609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
1610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Write packet into the Tx FIFO. */
1612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       (void)USB_WritePacket(USBx, hc->xfer_buff, hc->ch_num, (uint16_t)hc->xfer_len);
1613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief Read all host channel interrupts status
1620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL state
1622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_HC_ReadInterrupt(USB_OTG_GlobalTypeDef *USBx)
1624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
ARM GAS  /tmp/ccPzcOpE.s 			page 30


1627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ((USBx_HOST->HAINT) & 0xFFFFU);
1628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Halt a host channel
1632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  hc_num  Host Channel number
1634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL state
1636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_HC_Halt(USB_OTG_GlobalTypeDef *USBx, uint8_t hc_num)
1638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t hcnum = (uint32_t)hc_num;
1641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t count = 0U;
1642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t HcEpType = (USBx_HC(hcnum)->HCCHAR & USB_OTG_HCCHAR_EPTYP) >> 18;
1643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Check for space in the request queue to issue the halt. */
1645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if ((HcEpType == HCCHAR_CTRL) || (HcEpType == HCCHAR_BULK))
1646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HC(hcnum)->HCCHAR |= USB_OTG_HCCHAR_CHDIS;
1648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx->HNPTXSTS & (0xFFU << 16)) == 0U)
1650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC(hcnum)->HCCHAR &= ~USB_OTG_HCCHAR_CHENA;
1652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC(hcnum)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC(hcnum)->HCCHAR &= ~USB_OTG_HCCHAR_EPDIR;
1654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       do
1655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
1656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         if (++count > 1000U)
1657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         {
1658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           break;
1659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         }
1660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
1661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       while ((USBx_HC(hcnum)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
1662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
1664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC(hcnum)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
1669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HC(hcnum)->HCCHAR |= USB_OTG_HCCHAR_CHDIS;
1671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if ((USBx_HOST->HPTXSTS & (0xFFU << 16)) == 0U)
1673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC(hcnum)->HCCHAR &= ~USB_OTG_HCCHAR_CHENA;
1675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC(hcnum)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC(hcnum)->HCCHAR &= ~USB_OTG_HCCHAR_EPDIR;
1677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       do
1678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
1679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         if (++count > 1000U)
1680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         {
1681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****           break;
1682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         }
1683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
ARM GAS  /tmp/ccPzcOpE.s 			page 31


1684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       while ((USBx_HC(hcnum)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
1685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
1687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USBx_HC(hcnum)->HCCHAR |= USB_OTG_HCCHAR_CHENA;
1689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Initiate Do Ping protocol
1697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  hc_num  Host Channel number
1699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL state
1701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DoPing(USB_OTG_GlobalTypeDef *USBx, uint8_t ch_num)
1703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t chnum = (uint32_t)ch_num;
1706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t num_packets = 1U;
1707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t tmpreg;
1708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HC(chnum)->HCTSIZ = ((num_packets << 19) & USB_OTG_HCTSIZ_PKTCNT) |
1710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                            USB_OTG_HCTSIZ_DOPING;
1711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Set host channel enable */
1713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg = USBx_HC(chnum)->HCCHAR;
1714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg &= ~USB_OTG_HCCHAR_CHDIS;
1715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg |= USB_OTG_HCCHAR_CHENA;
1716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HC(chnum)->HCCHAR = tmpreg;
1717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Stop Host Core
1723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL state
1725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_StopHost(USB_OTG_GlobalTypeDef *USBx)
1727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t count = 0U;
1730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t value;
1731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t i;
1732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_DisableGlobalInt(USBx);
1734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Flush FIFO */
1736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_FlushTxFifo(USBx, 0x10U);
1737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_FlushRxFifo(USBx);
1738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Flush out any leftover queued requests. */
1740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i <= 15U; i++)
ARM GAS  /tmp/ccPzcOpE.s 			page 32


1741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     value = USBx_HC(i)->HCCHAR;
1743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     value |=  USB_OTG_HCCHAR_CHDIS;
1744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_CHENA;
1745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_EPDIR;
1746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HC(i)->HCCHAR = value;
1747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Halt all channels to put them into a known state. */
1750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = 0U; i <= 15U; i++)
1751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     value = USBx_HC(i)->HCCHAR;
1753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     value |= USB_OTG_HCCHAR_CHDIS;
1754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     value |= USB_OTG_HCCHAR_CHENA;
1755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     value &= ~USB_OTG_HCCHAR_EPDIR;
1756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_HC(i)->HCCHAR = value;
1757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     do
1759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
1760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (++count > 1000U)
1761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
1762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         break;
1763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
1764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
1765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     while ((USBx_HC(i)->HCCHAR & USB_OTG_HCCHAR_CHENA) == USB_OTG_HCCHAR_CHENA);
1766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear any pending Host interrupts */
1769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_HOST->HAINT = 0xFFFFFFFFU;
1770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->GINTSTS = 0xFFFFFFFFU;
1771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_EnableGlobalInt(USBx);
1773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ActivateRemoteWakeup active remote wakeup signalling
1779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx Selected device
1780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateRemoteWakeup(USB_OTG_GlobalTypeDef *USBx)
1783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if ((USBx_DEVICE->DSTS & USB_OTG_DSTS_SUSPSTS) == USB_OTG_DSTS_SUSPSTS)
1787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
1788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* active Remote wakeup signalling */
1789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx_DEVICE->DCTL |= USB_OTG_DCTL_RWUSIG;
1790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
1791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DeActivateRemoteWakeup de-active remote wakeup signalling
1797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx Selected device
ARM GAS  /tmp/ccPzcOpE.s 			page 33


1798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DeActivateRemoteWakeup(USB_OTG_GlobalTypeDef *USBx)
1801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
1802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t USBx_BASE = (uint32_t)USBx;
1803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* active Remote wakeup signalling */
1805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx_DEVICE->DCTL &= ~(USB_OTG_DCTL_RWUSIG);
1806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
1808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
1809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #endif /* defined (USB_OTG_FS) */
1810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #if defined (USB)
1812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Initializes the USB Core
1814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx: USB Instance
1815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  cfg : pointer to a USB_CfgTypeDef structure that contains
1816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
1817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_CoreInit(USB_TypeDef *USBx, USB_CfgTypeDef cfg)
1820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
  29              		.loc 1 1820 1
  30              		.cfi_startproc
  31              		@ args = 36, pretend = 16, frame = 8
  32              		@ frame_needed = 1, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34 0000 84B0     		sub	sp, sp, #16
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 16
  37 0002 80B4     		push	{r7}
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 20
  40              		.cfi_offset 7, -20
  41 0004 83B0     		sub	sp, sp, #12
  42              	.LCFI2:
  43              		.cfi_def_cfa_offset 32
  44 0006 00AF     		add	r7, sp, #0
  45              	.LCFI3:
  46              		.cfi_def_cfa_register 7
  47 0008 7860     		str	r0, [r7, #4]
  48 000a 07F11400 		add	r0, r7, #20
  49 000e 80E80E00 		stm	r0, {r1, r2, r3}
1821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
1823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(cfg);
1824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
1826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
1827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
1829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
  50              		.loc 1 1830 10
  51 0012 0023     		movs	r3, #0
1831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
ARM GAS  /tmp/ccPzcOpE.s 			page 34


  52              		.loc 1 1831 1
  53 0014 1846     		mov	r0, r3
  54 0016 0C37     		adds	r7, r7, #12
  55              	.LCFI4:
  56              		.cfi_def_cfa_offset 20
  57 0018 BD46     		mov	sp, r7
  58              	.LCFI5:
  59              		.cfi_def_cfa_register 13
  60              		@ sp needed
  61 001a 5DF8047B 		ldr	r7, [sp], #4
  62              	.LCFI6:
  63              		.cfi_restore 7
  64              		.cfi_def_cfa_offset 16
  65 001e 04B0     		add	sp, sp, #16
  66              	.LCFI7:
  67              		.cfi_def_cfa_offset 0
  68 0020 7047     		bx	lr
  69              		.cfi_endproc
  70              	.LFE130:
  72              		.section	.text.USB_EnableGlobalInt,"ax",%progbits
  73              		.align	1
  74              		.global	USB_EnableGlobalInt
  75              		.syntax unified
  76              		.thumb
  77              		.thumb_func
  78              		.fpu fpv4-sp-d16
  80              	USB_EnableGlobalInt:
  81              	.LFB131:
1832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EnableGlobalInt
1835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         Enables the controller's Global Int in the AHB Config reg
1836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
1837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EnableGlobalInt(USB_TypeDef *USBx)
1840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
  82              		.loc 1 1840 1
  83              		.cfi_startproc
  84              		@ args = 0, pretend = 0, frame = 16
  85              		@ frame_needed = 1, uses_anonymous_args = 0
  86              		@ link register save eliminated.
  87 0000 80B4     		push	{r7}
  88              	.LCFI8:
  89              		.cfi_def_cfa_offset 4
  90              		.cfi_offset 7, -4
  91 0002 85B0     		sub	sp, sp, #20
  92              	.LCFI9:
  93              		.cfi_def_cfa_offset 24
  94 0004 00AF     		add	r7, sp, #0
  95              	.LCFI10:
  96              		.cfi_def_cfa_register 7
  97 0006 7860     		str	r0, [r7, #4]
1841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t winterruptmask;
1842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Set winterruptmask variable */
1844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   winterruptmask = USB_CNTR_CTRM  | USB_CNTR_WKUPM |
ARM GAS  /tmp/ccPzcOpE.s 			page 35


  98              		.loc 1 1844 18
  99 0008 4BF68073 		movw	r3, #49024
 100 000c FB60     		str	r3, [r7, #12]
1845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_CNTR_SUSPM | USB_CNTR_ERRM |
1846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_CNTR_SOFM | USB_CNTR_ESOFM |
1847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_CNTR_RESETM | USB_CNTR_L1REQM;
1848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Set interrupt mask */
1850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->CNTR |= (uint16_t)winterruptmask;
 101              		.loc 1 1850 14
 102 000e 7B68     		ldr	r3, [r7, #4]
 103 0010 B3F84030 		ldrh	r3, [r3, #64]	@ movhi
 104 0014 9AB2     		uxth	r2, r3
 105              		.loc 1 1850 17
 106 0016 FB68     		ldr	r3, [r7, #12]
 107 0018 9BB2     		uxth	r3, r3
 108              		.loc 1 1850 14
 109 001a 1343     		orrs	r3, r3, r2
 110 001c 9AB2     		uxth	r2, r3
 111 001e 7B68     		ldr	r3, [r7, #4]
 112 0020 A3F84020 		strh	r2, [r3, #64]	@ movhi
1851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 113              		.loc 1 1852 10
 114 0024 0023     		movs	r3, #0
1853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 115              		.loc 1 1853 1
 116 0026 1846     		mov	r0, r3
 117 0028 1437     		adds	r7, r7, #20
 118              	.LCFI11:
 119              		.cfi_def_cfa_offset 4
 120 002a BD46     		mov	sp, r7
 121              	.LCFI12:
 122              		.cfi_def_cfa_register 13
 123              		@ sp needed
 124 002c 5DF8047B 		ldr	r7, [sp], #4
 125              	.LCFI13:
 126              		.cfi_restore 7
 127              		.cfi_def_cfa_offset 0
 128 0030 7047     		bx	lr
 129              		.cfi_endproc
 130              	.LFE131:
 132              		.section	.text.USB_DisableGlobalInt,"ax",%progbits
 133              		.align	1
 134              		.global	USB_DisableGlobalInt
 135              		.syntax unified
 136              		.thumb
 137              		.thumb_func
 138              		.fpu fpv4-sp-d16
 140              	USB_DisableGlobalInt:
 141              	.LFB132:
1854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DisableGlobalInt
1857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         Disable the controller's Global Int in the AHB Config reg
1858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
1859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
ARM GAS  /tmp/ccPzcOpE.s 			page 36


1860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** */
1861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DisableGlobalInt(USB_TypeDef *USBx)
1862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 142              		.loc 1 1862 1
 143              		.cfi_startproc
 144              		@ args = 0, pretend = 0, frame = 16
 145              		@ frame_needed = 1, uses_anonymous_args = 0
 146              		@ link register save eliminated.
 147 0000 80B4     		push	{r7}
 148              	.LCFI14:
 149              		.cfi_def_cfa_offset 4
 150              		.cfi_offset 7, -4
 151 0002 85B0     		sub	sp, sp, #20
 152              	.LCFI15:
 153              		.cfi_def_cfa_offset 24
 154 0004 00AF     		add	r7, sp, #0
 155              	.LCFI16:
 156              		.cfi_def_cfa_register 7
 157 0006 7860     		str	r0, [r7, #4]
1863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t winterruptmask;
1864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Set winterruptmask variable */
1866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   winterruptmask = USB_CNTR_CTRM  | USB_CNTR_WKUPM |
 158              		.loc 1 1866 18
 159 0008 4BF68073 		movw	r3, #49024
 160 000c FB60     		str	r3, [r7, #12]
1867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_CNTR_SUSPM | USB_CNTR_ERRM |
1868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_CNTR_SOFM | USB_CNTR_ESOFM |
1869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****                    USB_CNTR_RESETM | USB_CNTR_L1REQM;
1870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Clear interrupt mask */
1872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->CNTR &= (uint16_t)(~winterruptmask);
 161              		.loc 1 1872 14
 162 000e 7B68     		ldr	r3, [r7, #4]
 163 0010 B3F84030 		ldrh	r3, [r3, #64]	@ movhi
 164 0014 9AB2     		uxth	r2, r3
 165              		.loc 1 1872 17
 166 0016 FB68     		ldr	r3, [r7, #12]
 167 0018 9BB2     		uxth	r3, r3
 168 001a DB43     		mvns	r3, r3
 169 001c 9BB2     		uxth	r3, r3
 170              		.loc 1 1872 14
 171 001e 1340     		ands	r3, r3, r2
 172 0020 9AB2     		uxth	r2, r3
 173 0022 7B68     		ldr	r3, [r7, #4]
 174 0024 A3F84020 		strh	r2, [r3, #64]	@ movhi
1873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 175              		.loc 1 1874 10
 176 0028 0023     		movs	r3, #0
1875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 177              		.loc 1 1875 1
 178 002a 1846     		mov	r0, r3
 179 002c 1437     		adds	r7, r7, #20
 180              	.LCFI17:
 181              		.cfi_def_cfa_offset 4
 182 002e BD46     		mov	sp, r7
ARM GAS  /tmp/ccPzcOpE.s 			page 37


 183              	.LCFI18:
 184              		.cfi_def_cfa_register 13
 185              		@ sp needed
 186 0030 5DF8047B 		ldr	r7, [sp], #4
 187              	.LCFI19:
 188              		.cfi_restore 7
 189              		.cfi_def_cfa_offset 0
 190 0034 7047     		bx	lr
 191              		.cfi_endproc
 192              	.LFE132:
 194              		.section	.text.USB_SetCurrentMode,"ax",%progbits
 195              		.align	1
 196              		.global	USB_SetCurrentMode
 197              		.syntax unified
 198              		.thumb
 199              		.thumb_func
 200              		.fpu fpv4-sp-d16
 202              	USB_SetCurrentMode:
 203              	.LFB133:
1876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_SetCurrentMode : Set functional mode
1879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
1880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  mode :  current core mode
1881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be one of the these values:
1882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *            @arg USB_DEVICE_MODE: Peripheral mode mode
1883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_SetCurrentMode(USB_TypeDef *USBx, USB_ModeTypeDef mode)
1886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 204              		.loc 1 1886 1
 205              		.cfi_startproc
 206              		@ args = 0, pretend = 0, frame = 8
 207              		@ frame_needed = 1, uses_anonymous_args = 0
 208              		@ link register save eliminated.
 209 0000 80B4     		push	{r7}
 210              	.LCFI20:
 211              		.cfi_def_cfa_offset 4
 212              		.cfi_offset 7, -4
 213 0002 83B0     		sub	sp, sp, #12
 214              	.LCFI21:
 215              		.cfi_def_cfa_offset 16
 216 0004 00AF     		add	r7, sp, #0
 217              	.LCFI22:
 218              		.cfi_def_cfa_register 7
 219 0006 7860     		str	r0, [r7, #4]
 220 0008 0B46     		mov	r3, r1
 221 000a FB70     		strb	r3, [r7, #3]
1887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
1889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(mode);
1890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
1892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
1893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
1895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
ARM GAS  /tmp/ccPzcOpE.s 			page 38


 222              		.loc 1 1895 10
 223 000c 0023     		movs	r3, #0
1896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 224              		.loc 1 1896 1
 225 000e 1846     		mov	r0, r3
 226 0010 0C37     		adds	r7, r7, #12
 227              	.LCFI23:
 228              		.cfi_def_cfa_offset 4
 229 0012 BD46     		mov	sp, r7
 230              	.LCFI24:
 231              		.cfi_def_cfa_register 13
 232              		@ sp needed
 233 0014 5DF8047B 		ldr	r7, [sp], #4
 234              	.LCFI25:
 235              		.cfi_restore 7
 236              		.cfi_def_cfa_offset 0
 237 0018 7047     		bx	lr
 238              		.cfi_endproc
 239              	.LFE133:
 241              		.section	.text.USB_DevInit,"ax",%progbits
 242              		.align	1
 243              		.global	USB_DevInit
 244              		.syntax unified
 245              		.thumb
 246              		.thumb_func
 247              		.fpu fpv4-sp-d16
 249              	USB_DevInit:
 250              	.LFB134:
1897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DevInit : Initializes the USB controller registers
1900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         for device mode
1901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
1902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  cfg  : pointer to a USB_CfgTypeDef structure that contains
1903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         the configuration information for the specified USBx peripheral.
1904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DevInit(USB_TypeDef *USBx, USB_CfgTypeDef cfg)
1907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 251              		.loc 1 1907 1
 252              		.cfi_startproc
 253              		@ args = 36, pretend = 16, frame = 8
 254              		@ frame_needed = 1, uses_anonymous_args = 0
 255 0000 84B0     		sub	sp, sp, #16
 256              	.LCFI26:
 257              		.cfi_def_cfa_offset 16
 258 0002 80B5     		push	{r7, lr}
 259              	.LCFI27:
 260              		.cfi_def_cfa_offset 24
 261              		.cfi_offset 7, -24
 262              		.cfi_offset 14, -20
 263 0004 82B0     		sub	sp, sp, #8
 264              	.LCFI28:
 265              		.cfi_def_cfa_offset 32
 266 0006 00AF     		add	r7, sp, #0
 267              	.LCFI29:
 268              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccPzcOpE.s 			page 39


 269 0008 7860     		str	r0, [r7, #4]
 270 000a 07F11400 		add	r0, r7, #20
 271 000e 80E80E00 		stm	r0, {r1, r2, r3}
1908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(cfg);
1910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Init Device */
1912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /*CNTR_FRES = 1*/
1913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->CNTR = (uint16_t)USB_CNTR_FRES;
 272              		.loc 1 1913 14
 273 0012 7B68     		ldr	r3, [r7, #4]
 274 0014 0122     		movs	r2, #1
 275 0016 A3F84020 		strh	r2, [r3, #64]	@ movhi
1914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /*CNTR_FRES = 0*/
1916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->CNTR = 0U;
 276              		.loc 1 1916 14
 277 001a 7B68     		ldr	r3, [r7, #4]
 278 001c 0022     		movs	r2, #0
 279 001e A3F84020 		strh	r2, [r3, #64]	@ movhi
1917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /*Clear pending interrupts*/
1919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->ISTR = 0U;
 280              		.loc 1 1919 14
 281 0022 7B68     		ldr	r3, [r7, #4]
 282 0024 0022     		movs	r2, #0
 283 0026 A3F84420 		strh	r2, [r3, #68]	@ movhi
1920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /*Set Btable Address*/
1922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->BTABLE = BTABLE_ADDRESS;
 284              		.loc 1 1922 16
 285 002a 7B68     		ldr	r3, [r7, #4]
 286 002c 0022     		movs	r2, #0
 287 002e A3F85020 		strh	r2, [r3, #80]	@ movhi
1923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enable USB Device Interrupt mask */
1925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   (void)USB_EnableGlobalInt(USBx);
 288              		.loc 1 1925 9
 289 0032 7868     		ldr	r0, [r7, #4]
 290 0034 FFF7FEFF 		bl	USB_EnableGlobalInt
1926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 291              		.loc 1 1927 10
 292 0038 0023     		movs	r3, #0
1928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 293              		.loc 1 1928 1
 294 003a 1846     		mov	r0, r3
 295 003c 0837     		adds	r7, r7, #8
 296              	.LCFI30:
 297              		.cfi_def_cfa_offset 24
 298 003e BD46     		mov	sp, r7
 299              	.LCFI31:
 300              		.cfi_def_cfa_register 13
 301              		@ sp needed
 302 0040 BDE88040 		pop	{r7, lr}
 303              	.LCFI32:
 304              		.cfi_restore 14
ARM GAS  /tmp/ccPzcOpE.s 			page 40


 305              		.cfi_restore 7
 306              		.cfi_def_cfa_offset 16
 307 0044 04B0     		add	sp, sp, #16
 308              	.LCFI33:
 309              		.cfi_def_cfa_offset 0
 310 0046 7047     		bx	lr
 311              		.cfi_endproc
 312              	.LFE134:
 314              		.section	.text.USB_SetDevSpeed,"ax",%progbits
 315              		.align	1
 316              		.global	USB_SetDevSpeed
 317              		.syntax unified
 318              		.thumb
 319              		.thumb_func
 320              		.fpu fpv4-sp-d16
 322              	USB_SetDevSpeed:
 323              	.LFB135:
1929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_SetDevSpeed :Initializes the device speed
1932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         depending on the PHY type and the enumeration speed of the device.
1933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
1934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  speed  device speed
1935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval  Hal status
1936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_SetDevSpeed(USB_TypeDef *USBx, uint8_t speed)
1938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 324              		.loc 1 1938 1
 325              		.cfi_startproc
 326              		@ args = 0, pretend = 0, frame = 8
 327              		@ frame_needed = 1, uses_anonymous_args = 0
 328              		@ link register save eliminated.
 329 0000 80B4     		push	{r7}
 330              	.LCFI34:
 331              		.cfi_def_cfa_offset 4
 332              		.cfi_offset 7, -4
 333 0002 83B0     		sub	sp, sp, #12
 334              	.LCFI35:
 335              		.cfi_def_cfa_offset 16
 336 0004 00AF     		add	r7, sp, #0
 337              	.LCFI36:
 338              		.cfi_def_cfa_register 7
 339 0006 7860     		str	r0, [r7, #4]
 340 0008 0B46     		mov	r3, r1
 341 000a FB70     		strb	r3, [r7, #3]
1939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
1941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(speed);
1942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
1944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
1945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
1947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 342              		.loc 1 1948 10
 343 000c 0023     		movs	r3, #0
ARM GAS  /tmp/ccPzcOpE.s 			page 41


1949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 344              		.loc 1 1949 1
 345 000e 1846     		mov	r0, r3
 346 0010 0C37     		adds	r7, r7, #12
 347              	.LCFI37:
 348              		.cfi_def_cfa_offset 4
 349 0012 BD46     		mov	sp, r7
 350              	.LCFI38:
 351              		.cfi_def_cfa_register 13
 352              		@ sp needed
 353 0014 5DF8047B 		ldr	r7, [sp], #4
 354              	.LCFI39:
 355              		.cfi_restore 7
 356              		.cfi_def_cfa_offset 0
 357 0018 7047     		bx	lr
 358              		.cfi_endproc
 359              	.LFE135:
 361              		.section	.text.USB_FlushTxFifo,"ax",%progbits
 362              		.align	1
 363              		.global	USB_FlushTxFifo
 364              		.syntax unified
 365              		.thumb
 366              		.thumb_func
 367              		.fpu fpv4-sp-d16
 369              	USB_FlushTxFifo:
 370              	.LFB136:
1950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_FlushTxFifo : Flush a Tx FIFO
1953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
1954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  num : FIFO number
1955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         This parameter can be a value from 1 to 15
1956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             15 means Flush all Tx FIFOs
1957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushTxFifo(USB_TypeDef *USBx, uint32_t num)
1960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 371              		.loc 1 1960 1
 372              		.cfi_startproc
 373              		@ args = 0, pretend = 0, frame = 8
 374              		@ frame_needed = 1, uses_anonymous_args = 0
 375              		@ link register save eliminated.
 376 0000 80B4     		push	{r7}
 377              	.LCFI40:
 378              		.cfi_def_cfa_offset 4
 379              		.cfi_offset 7, -4
 380 0002 83B0     		sub	sp, sp, #12
 381              	.LCFI41:
 382              		.cfi_def_cfa_offset 16
 383 0004 00AF     		add	r7, sp, #0
 384              	.LCFI42:
 385              		.cfi_def_cfa_register 7
 386 0006 7860     		str	r0, [r7, #4]
 387 0008 3960     		str	r1, [r7]
1961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
1963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(num);
ARM GAS  /tmp/ccPzcOpE.s 			page 42


1964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
1966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
1967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
1969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 388              		.loc 1 1970 10
 389 000a 0023     		movs	r3, #0
1971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 390              		.loc 1 1971 1
 391 000c 1846     		mov	r0, r3
 392 000e 0C37     		adds	r7, r7, #12
 393              	.LCFI43:
 394              		.cfi_def_cfa_offset 4
 395 0010 BD46     		mov	sp, r7
 396              	.LCFI44:
 397              		.cfi_def_cfa_register 13
 398              		@ sp needed
 399 0012 5DF8047B 		ldr	r7, [sp], #4
 400              	.LCFI45:
 401              		.cfi_restore 7
 402              		.cfi_def_cfa_offset 0
 403 0016 7047     		bx	lr
 404              		.cfi_endproc
 405              	.LFE136:
 407              		.section	.text.USB_FlushRxFifo,"ax",%progbits
 408              		.align	1
 409              		.global	USB_FlushRxFifo
 410              		.syntax unified
 411              		.thumb
 412              		.thumb_func
 413              		.fpu fpv4-sp-d16
 415              	USB_FlushRxFifo:
 416              	.LFB137:
1972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_FlushRxFifo : Flush Rx FIFO
1975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
1976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_FlushRxFifo(USB_TypeDef *USBx)
1979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 417              		.loc 1 1979 1
 418              		.cfi_startproc
 419              		@ args = 0, pretend = 0, frame = 8
 420              		@ frame_needed = 1, uses_anonymous_args = 0
 421              		@ link register save eliminated.
 422 0000 80B4     		push	{r7}
 423              	.LCFI46:
 424              		.cfi_def_cfa_offset 4
 425              		.cfi_offset 7, -4
 426 0002 83B0     		sub	sp, sp, #12
 427              	.LCFI47:
 428              		.cfi_def_cfa_offset 16
 429 0004 00AF     		add	r7, sp, #0
 430              	.LCFI48:
ARM GAS  /tmp/ccPzcOpE.s 			page 43


 431              		.cfi_def_cfa_register 7
 432 0006 7860     		str	r0, [r7, #4]
1980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
1981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
1982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
1984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
1985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
1986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
1987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 433              		.loc 1 1988 10
 434 0008 0023     		movs	r3, #0
1989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 435              		.loc 1 1989 1
 436 000a 1846     		mov	r0, r3
 437 000c 0C37     		adds	r7, r7, #12
 438              	.LCFI49:
 439              		.cfi_def_cfa_offset 4
 440 000e BD46     		mov	sp, r7
 441              	.LCFI50:
 442              		.cfi_def_cfa_register 13
 443              		@ sp needed
 444 0010 5DF8047B 		ldr	r7, [sp], #4
 445              	.LCFI51:
 446              		.cfi_restore 7
 447              		.cfi_def_cfa_offset 0
 448 0014 7047     		bx	lr
 449              		.cfi_endproc
 450              	.LFE137:
 452              		.section	.text.USB_ActivateEndpoint,"ax",%progbits
 453              		.align	1
 454              		.global	USB_ActivateEndpoint
 455              		.syntax unified
 456              		.thumb
 457              		.thumb_func
 458              		.fpu fpv4-sp-d16
 460              	USB_ActivateEndpoint:
 461              	.LFB138:
1990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
1991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
1992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Activate and configure an endpoint
1993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
1994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
1995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
1996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
1997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateEndpoint(USB_TypeDef *USBx, USB_EPTypeDef *ep)
1998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 462              		.loc 1 1998 1
 463              		.cfi_startproc
 464              		@ args = 0, pretend = 0, frame = 16
 465              		@ frame_needed = 1, uses_anonymous_args = 0
 466              		@ link register save eliminated.
 467 0000 90B4     		push	{r4, r7}
 468              	.LCFI52:
 469              		.cfi_def_cfa_offset 8
 470              		.cfi_offset 4, -8
ARM GAS  /tmp/ccPzcOpE.s 			page 44


 471              		.cfi_offset 7, -4
 472 0002 84B0     		sub	sp, sp, #16
 473              	.LCFI53:
 474              		.cfi_def_cfa_offset 24
 475 0004 00AF     		add	r7, sp, #0
 476              	.LCFI54:
 477              		.cfi_def_cfa_register 7
 478 0006 7860     		str	r0, [r7, #4]
 479 0008 3960     		str	r1, [r7]
1999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   HAL_StatusTypeDef ret = HAL_OK;
 480              		.loc 1 1999 21
 481 000a 0023     		movs	r3, #0
 482 000c FB73     		strb	r3, [r7, #15]
2000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint16_t wEpRegVal;
2001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   wEpRegVal = PCD_GET_ENDPOINT(USBx, ep->num) & USB_EP_T_MASK;
 483              		.loc 1 2002 15
 484 000e 7A68     		ldr	r2, [r7, #4]
 485 0010 3B68     		ldr	r3, [r7]
 486 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 487 0014 9B00     		lsls	r3, r3, #2
 488 0016 1344     		add	r3, r3, r2
 489              		.loc 1 2002 47
 490 0018 1B88     		ldrh	r3, [r3]	@ movhi
 491 001a 9BB2     		uxth	r3, r3
 492              		.loc 1 2002 13
 493 001c 23F4EC43 		bic	r3, r3, #30208
 494 0020 23F07003 		bic	r3, r3, #112
 495 0024 BB81     		strh	r3, [r7, #12]	@ movhi
2003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* initialize Endpoint */
2005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   switch (ep->type)
 496              		.loc 1 2005 13
 497 0026 3B68     		ldr	r3, [r7]
 498 0028 DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
 499 002a 032B     		cmp	r3, #3
 500 002c 19D8     		bhi	.L18
 501 002e 01A2     		adr	r2, .L20
 502 0030 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 503              		.p2align 2
 504              	.L20:
 505 0034 45000000 		.word	.L23+1
 506 0038 59000000 		.word	.L22+1
 507 003c 69000000 		.word	.L44+1
 508 0040 4F000000 		.word	.L19+1
 509              		.p2align 1
 510              	.L23:
2006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     case EP_TYPE_CTRL:
2008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       wEpRegVal |= USB_EP_CONTROL;
 511              		.loc 1 2008 17
 512 0044 BB89     		ldrh	r3, [r7, #12]	@ movhi
 513 0046 43F40073 		orr	r3, r3, #512
 514 004a BB81     		strh	r3, [r7, #12]	@ movhi
2009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
 515              		.loc 1 2009 7
 516 004c 0DE0     		b	.L24
ARM GAS  /tmp/ccPzcOpE.s 			page 45


 517              	.L19:
2010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     case EP_TYPE_BULK:
2012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       wEpRegVal |= USB_EP_BULK;
2013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
2014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     case EP_TYPE_INTR:
2016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       wEpRegVal |= USB_EP_INTERRUPT;
 518              		.loc 1 2016 17
 519 004e BB89     		ldrh	r3, [r7, #12]	@ movhi
 520 0050 43F4C063 		orr	r3, r3, #1536
 521 0054 BB81     		strh	r3, [r7, #12]	@ movhi
2017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
 522              		.loc 1 2017 7
 523 0056 08E0     		b	.L24
 524              	.L22:
2018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     case EP_TYPE_ISOC:
2020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       wEpRegVal |= USB_EP_ISOCHRONOUS;
 525              		.loc 1 2020 17
 526 0058 BB89     		ldrh	r3, [r7, #12]	@ movhi
 527 005a 43F48063 		orr	r3, r3, #1024
 528 005e BB81     		strh	r3, [r7, #12]	@ movhi
2021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
 529              		.loc 1 2021 7
 530 0060 03E0     		b	.L24
 531              	.L18:
2022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     default:
2024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       ret = HAL_ERROR;
 532              		.loc 1 2024 11
 533 0062 0123     		movs	r3, #1
 534 0064 FB73     		strb	r3, [r7, #15]
2025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       break;
 535              		.loc 1 2025 7
 536 0066 00E0     		b	.L24
 537              	.L44:
2013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
 538              		.loc 1 2013 7
 539 0068 00BF     		nop
 540              	.L24:
2026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   PCD_SET_ENDPOINT(USBx, ep->num, (wEpRegVal | USB_EP_CTR_RX | USB_EP_CTR_TX));
 541              		.loc 1 2028 3
 542 006a 7A68     		ldr	r2, [r7, #4]
 543 006c 3B68     		ldr	r3, [r7]
 544 006e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 545 0070 9B00     		lsls	r3, r3, #2
 546 0072 1A44     		add	r2, r2, r3
 547 0074 BB89     		ldrh	r3, [r7, #12]	@ movhi
 548 0076 43F07F43 		orr	r3, r3, #-16777216
 549 007a 43F47F03 		orr	r3, r3, #16711680
 550 007e 43F40043 		orr	r3, r3, #32768
 551 0082 43F08003 		orr	r3, r3, #128
 552 0086 9BB2     		uxth	r3, r3
 553 0088 1380     		strh	r3, [r2]	@ movhi
ARM GAS  /tmp/ccPzcOpE.s 			page 46


 554              	.LBB2:
2029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   PCD_SET_EP_ADDRESS(USBx, ep->num, ep->num);
 555              		.loc 1 2030 3
 556 008a 7A68     		ldr	r2, [r7, #4]
 557 008c 3B68     		ldr	r3, [r7]
 558 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 559 0090 9B00     		lsls	r3, r3, #2
 560 0092 1344     		add	r3, r3, r2
 561 0094 1B88     		ldrh	r3, [r3]	@ movhi
 562 0096 9BB2     		uxth	r3, r3
 563 0098 1BB2     		sxth	r3, r3
 564 009a 23F4E043 		bic	r3, r3, #28672
 565 009e 23F07003 		bic	r3, r3, #112
 566 00a2 1AB2     		sxth	r2, r3
 567 00a4 3B68     		ldr	r3, [r7]
 568 00a6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 569 00a8 1BB2     		sxth	r3, r3
 570 00aa 1343     		orrs	r3, r3, r2
 571 00ac 1BB2     		sxth	r3, r3
 572 00ae 9CB2     		uxth	r4, r3
 573 00b0 7A68     		ldr	r2, [r7, #4]
 574 00b2 3B68     		ldr	r3, [r7]
 575 00b4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 576 00b6 9B00     		lsls	r3, r3, #2
 577 00b8 1A44     		add	r2, r2, r3
 578 00ba 8A4B     		ldr	r3, .L45
 579 00bc 2343     		orrs	r3, r3, r4
 580 00be 9BB2     		uxth	r3, r3
 581 00c0 1380     		strh	r3, [r2]	@ movhi
 582              	.LBE2:
2031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->doublebuffer == 0U)
 583              		.loc 1 2032 9
 584 00c2 3B68     		ldr	r3, [r7]
 585 00c4 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 586              		.loc 1 2032 6
 587 00c6 002B     		cmp	r3, #0
 588 00c8 40F01281 		bne	.L25
2033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->is_in != 0U)
 589              		.loc 1 2034 11
 590 00cc 3B68     		ldr	r3, [r7]
 591 00ce 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 592              		.loc 1 2034 8
 593 00d0 002B     		cmp	r3, #0
 594 00d2 67D0     		beq	.L26
 595              	.LBB3:
2035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /*Set the endpoint Transmit buffer address */
2037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_TX_ADDRESS(USBx, ep->num, ep->pmaadress);
 596              		.loc 1 2037 7
 597 00d4 7C68     		ldr	r4, [r7, #4]
 598 00d6 7B68     		ldr	r3, [r7, #4]
 599 00d8 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 600 00dc 9BB2     		uxth	r3, r3
 601 00de 1C44     		add	r4, r4, r3
ARM GAS  /tmp/ccPzcOpE.s 			page 47


 602 00e0 3B68     		ldr	r3, [r7]
 603 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 604 00e4 DB00     		lsls	r3, r3, #3
 605 00e6 2344     		add	r3, r3, r4
 606 00e8 03F58063 		add	r3, r3, #1024
 607 00ec 1C46     		mov	r4, r3
 608 00ee 3B68     		ldr	r3, [r7]
 609 00f0 DB88     		ldrh	r3, [r3, #6]
 610 00f2 5B08     		lsrs	r3, r3, #1
 611 00f4 9BB2     		uxth	r3, r3
 612 00f6 5B00     		lsls	r3, r3, #1
 613 00f8 9BB2     		uxth	r3, r3
 614 00fa 2380     		strh	r3, [r4]	@ movhi
 615              	.LBE3:
 616              	.LBB4:
2038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 617              		.loc 1 2038 7
 618 00fc 7A68     		ldr	r2, [r7, #4]
 619 00fe 3B68     		ldr	r3, [r7]
 620 0100 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 621 0102 9B00     		lsls	r3, r3, #2
 622 0104 1344     		add	r3, r3, r2
 623 0106 1B88     		ldrh	r3, [r3]	@ movhi
 624 0108 9CB2     		uxth	r4, r3
 625 010a 2346     		mov	r3, r4
 626 010c 03F04003 		and	r3, r3, #64
 627 0110 002B     		cmp	r3, #0
 628 0112 14D0     		beq	.L27
 629              	.LBB5:
 630              		.loc 1 2038 7 is_stmt 0 discriminator 1
 631 0114 7A68     		ldr	r2, [r7, #4]
 632 0116 3B68     		ldr	r3, [r7]
 633 0118 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 634 011a 9B00     		lsls	r3, r3, #2
 635 011c 1344     		add	r3, r3, r2
 636 011e 1B88     		ldrh	r3, [r3]	@ movhi
 637 0120 9BB2     		uxth	r3, r3
 638 0122 23F4E043 		bic	r3, r3, #28672
 639 0126 23F07003 		bic	r3, r3, #112
 640 012a 9CB2     		uxth	r4, r3
 641 012c 7A68     		ldr	r2, [r7, #4]
 642 012e 3B68     		ldr	r3, [r7]
 643 0130 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 644 0132 9B00     		lsls	r3, r3, #2
 645 0134 1A44     		add	r2, r2, r3
 646 0136 6C4B     		ldr	r3, .L45+4
 647 0138 2343     		orrs	r3, r3, r4
 648 013a 9BB2     		uxth	r3, r3
 649 013c 1380     		strh	r3, [r2]	@ movhi
 650              	.L27:
 651              	.LBE5:
 652              	.LBE4:
2039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (ep->type != EP_TYPE_ISOC)
 653              		.loc 1 2040 13 is_stmt 1
 654 013e 3B68     		ldr	r3, [r7]
 655 0140 DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
ARM GAS  /tmp/ccPzcOpE.s 			page 48


 656              		.loc 1 2040 10
 657 0142 012B     		cmp	r3, #1
 658 0144 18D0     		beq	.L28
 659              	.LBB6:
2041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
2042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Configure NAK status for the Endpoint */
2043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_NAK);
 660              		.loc 1 2043 9
 661 0146 7A68     		ldr	r2, [r7, #4]
 662 0148 3B68     		ldr	r3, [r7]
 663 014a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 664 014c 9B00     		lsls	r3, r3, #2
 665 014e 1344     		add	r3, r3, r2
 666 0150 1B88     		ldrh	r3, [r3]	@ movhi
 667 0152 9BB2     		uxth	r3, r3
 668 0154 23F4E043 		bic	r3, r3, #28672
 669 0158 23F04003 		bic	r3, r3, #64
 670 015c 9CB2     		uxth	r4, r3
 671 015e 84F02003 		eor	r3, r4, #32
 672 0162 9CB2     		uxth	r4, r3
 673 0164 7A68     		ldr	r2, [r7, #4]
 674 0166 3B68     		ldr	r3, [r7]
 675 0168 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 676 016a 9B00     		lsls	r3, r3, #2
 677 016c 1A44     		add	r2, r2, r3
 678 016e 5D4B     		ldr	r3, .L45
 679 0170 2343     		orrs	r3, r3, r4
 680 0172 9BB2     		uxth	r3, r3
 681 0174 1380     		strh	r3, [r2]	@ movhi
 682              	.LBE6:
 683 0176 2BE2     		b	.L29
 684              	.L28:
 685              	.LBB7:
2044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
2045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       else
2046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
2047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Configure TX Endpoint to disabled state */
2048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 686              		.loc 1 2048 9
 687 0178 7A68     		ldr	r2, [r7, #4]
 688 017a 3B68     		ldr	r3, [r7]
 689 017c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 690 017e 9B00     		lsls	r3, r3, #2
 691 0180 1344     		add	r3, r3, r2
 692 0182 1B88     		ldrh	r3, [r3]	@ movhi
 693 0184 9BB2     		uxth	r3, r3
 694 0186 23F4E043 		bic	r3, r3, #28672
 695 018a 23F04003 		bic	r3, r3, #64
 696 018e 9CB2     		uxth	r4, r3
 697 0190 7A68     		ldr	r2, [r7, #4]
 698 0192 3B68     		ldr	r3, [r7]
 699 0194 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 700 0196 9B00     		lsls	r3, r3, #2
 701 0198 1A44     		add	r2, r2, r3
 702 019a 524B     		ldr	r3, .L45
 703 019c 2343     		orrs	r3, r3, r4
 704 019e 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccPzcOpE.s 			page 49


 705 01a0 1380     		strh	r3, [r2]	@ movhi
 706 01a2 15E2     		b	.L29
 707              	.L26:
 708              	.LBE7:
 709              	.LBB8:
2049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
2050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /*Set the endpoint Receive buffer address */
2054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_ADDRESS(USBx, ep->num, ep->pmaadress);
 710              		.loc 1 2054 7
 711 01a4 7C68     		ldr	r4, [r7, #4]
 712 01a6 7B68     		ldr	r3, [r7, #4]
 713 01a8 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 714 01ac 9BB2     		uxth	r3, r3
 715 01ae 1C44     		add	r4, r4, r3
 716 01b0 3B68     		ldr	r3, [r7]
 717 01b2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 718 01b4 DB00     		lsls	r3, r3, #3
 719 01b6 2344     		add	r3, r3, r4
 720 01b8 03F20443 		addw	r3, r3, #1028
 721 01bc 1C46     		mov	r4, r3
 722 01be 3B68     		ldr	r3, [r7]
 723 01c0 DB88     		ldrh	r3, [r3, #6]
 724 01c2 5B08     		lsrs	r3, r3, #1
 725 01c4 9BB2     		uxth	r3, r3
 726 01c6 5B00     		lsls	r3, r3, #1
 727 01c8 9BB2     		uxth	r3, r3
 728 01ca 2380     		strh	r3, [r4]	@ movhi
 729              	.LBE8:
 730              	.LBB9:
2055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /*Set the endpoint Receive buffer counter*/
2056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_CNT(USBx, ep->num, ep->maxpacket);
 731              		.loc 1 2056 7
 732 01cc 7C68     		ldr	r4, [r7, #4]
 733 01ce 7B68     		ldr	r3, [r7, #4]
 734 01d0 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 735 01d4 9BB2     		uxth	r3, r3
 736 01d6 1C44     		add	r4, r4, r3
 737 01d8 3B68     		ldr	r3, [r7]
 738 01da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 739 01dc DB00     		lsls	r3, r3, #3
 740 01de 2344     		add	r3, r3, r4
 741 01e0 03F20643 		addw	r3, r3, #1030
 742 01e4 1C46     		mov	r4, r3
 743              	.LBB10:
 744 01e6 3B68     		ldr	r3, [r7]
 745 01e8 1B69     		ldr	r3, [r3, #16]
 746 01ea 002B     		cmp	r3, #0
 747 01ec 0ED1     		bne	.L30
 748              		.loc 1 2056 7 is_stmt 0 discriminator 1
 749 01ee 2388     		ldrh	r3, [r4]	@ movhi
 750 01f0 9BB2     		uxth	r3, r3
 751 01f2 23F4F843 		bic	r3, r3, #31744
 752 01f6 9BB2     		uxth	r3, r3
 753 01f8 2380     		strh	r3, [r4]	@ movhi
ARM GAS  /tmp/ccPzcOpE.s 			page 50


 754 01fa 2388     		ldrh	r3, [r4]	@ movhi
 755 01fc 9BB2     		uxth	r3, r3
 756 01fe 6FEA4343 		mvn	r3, r3, lsl #17
 757 0202 6FEA5343 		mvn	r3, r3, lsr #17
 758 0206 9BB2     		uxth	r3, r3
 759 0208 2380     		strh	r3, [r4]	@ movhi
 760 020a 2DE0     		b	.L31
 761              	.L30:
 762              		.loc 1 2056 7 discriminator 2
 763 020c 3B68     		ldr	r3, [r7]
 764 020e 1B69     		ldr	r3, [r3, #16]
 765 0210 3E2B     		cmp	r3, #62
 766 0212 12D8     		bhi	.L32
 767              		.loc 1 2056 7 discriminator 3
 768 0214 3B68     		ldr	r3, [r7]
 769 0216 1B69     		ldr	r3, [r3, #16]
 770 0218 5B08     		lsrs	r3, r3, #1
 771 021a BB60     		str	r3, [r7, #8]
 772 021c 3B68     		ldr	r3, [r7]
 773 021e 1B69     		ldr	r3, [r3, #16]
 774 0220 03F00103 		and	r3, r3, #1
 775 0224 002B     		cmp	r3, #0
 776 0226 02D0     		beq	.L33
 777              		.loc 1 2056 7 discriminator 5
 778 0228 BB68     		ldr	r3, [r7, #8]
 779 022a 0133     		adds	r3, r3, #1
 780 022c BB60     		str	r3, [r7, #8]
 781              	.L33:
 782              		.loc 1 2056 7 discriminator 7
 783 022e BB68     		ldr	r3, [r7, #8]
 784 0230 9BB2     		uxth	r3, r3
 785 0232 9B02     		lsls	r3, r3, #10
 786 0234 9BB2     		uxth	r3, r3
 787 0236 2380     		strh	r3, [r4]	@ movhi
 788 0238 16E0     		b	.L31
 789              	.L32:
 790              		.loc 1 2056 7 discriminator 4
 791 023a 3B68     		ldr	r3, [r7]
 792 023c 1B69     		ldr	r3, [r3, #16]
 793 023e 5B09     		lsrs	r3, r3, #5
 794 0240 BB60     		str	r3, [r7, #8]
 795 0242 3B68     		ldr	r3, [r7]
 796 0244 1B69     		ldr	r3, [r3, #16]
 797 0246 03F01F03 		and	r3, r3, #31
 798 024a 002B     		cmp	r3, #0
 799 024c 02D1     		bne	.L34
 800              		.loc 1 2056 7 discriminator 8
 801 024e BB68     		ldr	r3, [r7, #8]
 802 0250 013B     		subs	r3, r3, #1
 803 0252 BB60     		str	r3, [r7, #8]
 804              	.L34:
 805              		.loc 1 2056 7 discriminator 10
 806 0254 BB68     		ldr	r3, [r7, #8]
 807 0256 9BB2     		uxth	r3, r3
 808 0258 9B02     		lsls	r3, r3, #10
 809 025a 9BB2     		uxth	r3, r3
 810 025c 6FEA4343 		mvn	r3, r3, lsl #17
ARM GAS  /tmp/ccPzcOpE.s 			page 51


 811 0260 6FEA5343 		mvn	r3, r3, lsr #17
 812 0264 9BB2     		uxth	r3, r3
 813 0266 2380     		strh	r3, [r4]	@ movhi
 814              	.L31:
 815              	.LBE10:
 816              	.LBE9:
 817              	.LBB11:
2057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 818              		.loc 1 2057 7 is_stmt 1
 819 0268 7A68     		ldr	r2, [r7, #4]
 820 026a 3B68     		ldr	r3, [r7]
 821 026c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 822 026e 9B00     		lsls	r3, r3, #2
 823 0270 1344     		add	r3, r3, r2
 824 0272 1B88     		ldrh	r3, [r3]	@ movhi
 825 0274 9CB2     		uxth	r4, r3
 826 0276 2346     		mov	r3, r4
 827 0278 03F48043 		and	r3, r3, #16384
 828 027c 002B     		cmp	r3, #0
 829 027e 14D0     		beq	.L35
 830              	.LBB12:
 831              		.loc 1 2057 7 is_stmt 0 discriminator 1
 832 0280 7A68     		ldr	r2, [r7, #4]
 833 0282 3B68     		ldr	r3, [r7]
 834 0284 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 835 0286 9B00     		lsls	r3, r3, #2
 836 0288 1344     		add	r3, r3, r2
 837 028a 1B88     		ldrh	r3, [r3]	@ movhi
 838 028c 9BB2     		uxth	r3, r3
 839 028e 23F4E043 		bic	r3, r3, #28672
 840 0292 23F07003 		bic	r3, r3, #112
 841 0296 9CB2     		uxth	r4, r3
 842 0298 7A68     		ldr	r2, [r7, #4]
 843 029a 3B68     		ldr	r3, [r7]
 844 029c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 845 029e 9B00     		lsls	r3, r3, #2
 846 02a0 1A44     		add	r2, r2, r3
 847 02a2 124B     		ldr	r3, .L45+8
 848 02a4 2343     		orrs	r3, r3, r4
 849 02a6 9BB2     		uxth	r3, r3
 850 02a8 1380     		strh	r3, [r2]	@ movhi
 851              	.L35:
 852              	.LBE12:
 853              	.LBE11:
 854              	.LBB13:
2058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Configure VALID status for the Endpoint*/
2059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 855              		.loc 1 2059 7 is_stmt 1
 856 02aa 7A68     		ldr	r2, [r7, #4]
 857 02ac 3B68     		ldr	r3, [r7]
 858 02ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 859 02b0 9B00     		lsls	r3, r3, #2
 860 02b2 1344     		add	r3, r3, r2
 861 02b4 1B88     		ldrh	r3, [r3]	@ movhi
 862 02b6 9BB2     		uxth	r3, r3
 863 02b8 23F48043 		bic	r3, r3, #16384
 864 02bc 23F07003 		bic	r3, r3, #112
ARM GAS  /tmp/ccPzcOpE.s 			page 52


 865 02c0 9CB2     		uxth	r4, r3
 866 02c2 84F48053 		eor	r3, r4, #4096
 867 02c6 9CB2     		uxth	r4, r3
 868 02c8 84F40053 		eor	r3, r4, #8192
 869 02cc 9CB2     		uxth	r4, r3
 870 02ce 7A68     		ldr	r2, [r7, #4]
 871 02d0 3B68     		ldr	r3, [r7]
 872 02d2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 873 02d4 9B00     		lsls	r3, r3, #2
 874 02d6 1A44     		add	r2, r2, r3
 875 02d8 024B     		ldr	r3, .L45
 876 02da 2343     		orrs	r3, r3, r4
 877 02dc 9BB2     		uxth	r3, r3
 878 02de 1380     		strh	r3, [r2]	@ movhi
 879 02e0 76E1     		b	.L29
 880              	.L46:
 881 02e2 00BF     		.align	2
 882              	.L45:
 883 02e4 8080FFFF 		.word	-32640
 884 02e8 C080FFFF 		.word	-32576
 885 02ec 80C0FFFF 		.word	-16256
 886              	.L25:
 887              	.LBE13:
 888              	.LBB14:
2060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /*Double Buffer*/
2063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
2064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Set the endpoint as double buffered */
2066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     PCD_SET_EP_DBUF(USBx, ep->num);
 889              		.loc 1 2066 5
 890 02f0 7A68     		ldr	r2, [r7, #4]
 891 02f2 3B68     		ldr	r3, [r7]
 892 02f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 893 02f6 9B00     		lsls	r3, r3, #2
 894 02f8 1344     		add	r3, r3, r2
 895 02fa 1B88     		ldrh	r3, [r3]	@ movhi
 896 02fc 9BB2     		uxth	r3, r3
 897 02fe 23F4E043 		bic	r3, r3, #28672
 898 0302 23F07003 		bic	r3, r3, #112
 899 0306 9CB2     		uxth	r4, r3
 900 0308 7A68     		ldr	r2, [r7, #4]
 901 030a 3B68     		ldr	r3, [r7]
 902 030c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 903 030e 9B00     		lsls	r3, r3, #2
 904 0310 1A44     		add	r2, r2, r3
 905 0312 964B     		ldr	r3, .L47
 906 0314 2343     		orrs	r3, r3, r4
 907 0316 9BB2     		uxth	r3, r3
 908 0318 1380     		strh	r3, [r2]	@ movhi
 909              	.LBE14:
 910              	.LBB15:
2067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Set buffer address for double buffered mode */
2068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     PCD_SET_EP_DBUF_ADDR(USBx, ep->num, ep->pmaaddr0, ep->pmaaddr1);
 911              		.loc 1 2068 5
 912 031a 7C68     		ldr	r4, [r7, #4]
ARM GAS  /tmp/ccPzcOpE.s 			page 53


 913 031c 7B68     		ldr	r3, [r7, #4]
 914 031e B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 915 0322 9BB2     		uxth	r3, r3
 916 0324 1C44     		add	r4, r4, r3
 917 0326 3B68     		ldr	r3, [r7]
 918 0328 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 919 032a DB00     		lsls	r3, r3, #3
 920 032c 2344     		add	r3, r3, r4
 921 032e 03F58063 		add	r3, r3, #1024
 922 0332 1C46     		mov	r4, r3
 923 0334 3B68     		ldr	r3, [r7]
 924 0336 1B89     		ldrh	r3, [r3, #8]
 925 0338 5B08     		lsrs	r3, r3, #1
 926 033a 9BB2     		uxth	r3, r3
 927 033c 5B00     		lsls	r3, r3, #1
 928 033e 9BB2     		uxth	r3, r3
 929 0340 2380     		strh	r3, [r4]	@ movhi
 930              	.LBE15:
 931              	.LBB16:
 932 0342 7C68     		ldr	r4, [r7, #4]
 933 0344 7B68     		ldr	r3, [r7, #4]
 934 0346 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 935 034a 9BB2     		uxth	r3, r3
 936 034c 1C44     		add	r4, r4, r3
 937 034e 3B68     		ldr	r3, [r7]
 938 0350 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 939 0352 DB00     		lsls	r3, r3, #3
 940 0354 2344     		add	r3, r3, r4
 941 0356 03F20443 		addw	r3, r3, #1028
 942 035a 1C46     		mov	r4, r3
 943 035c 3B68     		ldr	r3, [r7]
 944 035e 5B89     		ldrh	r3, [r3, #10]
 945 0360 5B08     		lsrs	r3, r3, #1
 946 0362 9BB2     		uxth	r3, r3
 947 0364 5B00     		lsls	r3, r3, #1
 948 0366 9BB2     		uxth	r3, r3
 949 0368 2380     		strh	r3, [r4]	@ movhi
 950              	.LBE16:
2069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->is_in == 0U)
 951              		.loc 1 2070 11
 952 036a 3B68     		ldr	r3, [r7]
 953 036c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 954              		.loc 1 2070 8
 955 036e 002B     		cmp	r3, #0
 956 0370 40F08880 		bne	.L36
 957              	.LBB17:
2071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT */
2073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 958              		.loc 1 2073 7
 959 0374 7A68     		ldr	r2, [r7, #4]
 960 0376 3B68     		ldr	r3, [r7]
 961 0378 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 962 037a 9B00     		lsls	r3, r3, #2
 963 037c 1344     		add	r3, r3, r2
 964 037e 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/ccPzcOpE.s 			page 54


 965 0380 9CB2     		uxth	r4, r3
 966 0382 2346     		mov	r3, r4
 967 0384 03F48043 		and	r3, r3, #16384
 968 0388 002B     		cmp	r3, #0
 969 038a 14D0     		beq	.L37
 970              	.LBB18:
 971              		.loc 1 2073 7 is_stmt 0 discriminator 1
 972 038c 7A68     		ldr	r2, [r7, #4]
 973 038e 3B68     		ldr	r3, [r7]
 974 0390 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 975 0392 9B00     		lsls	r3, r3, #2
 976 0394 1344     		add	r3, r3, r2
 977 0396 1B88     		ldrh	r3, [r3]	@ movhi
 978 0398 9BB2     		uxth	r3, r3
 979 039a 23F4E043 		bic	r3, r3, #28672
 980 039e 23F07003 		bic	r3, r3, #112
 981 03a2 9CB2     		uxth	r4, r3
 982 03a4 7A68     		ldr	r2, [r7, #4]
 983 03a6 3B68     		ldr	r3, [r7]
 984 03a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 985 03aa 9B00     		lsls	r3, r3, #2
 986 03ac 1A44     		add	r2, r2, r3
 987 03ae 704B     		ldr	r3, .L47+4
 988 03b0 2343     		orrs	r3, r3, r4
 989 03b2 9BB2     		uxth	r3, r3
 990 03b4 1380     		strh	r3, [r2]	@ movhi
 991              	.L37:
 992              	.LBE18:
 993              	.LBE17:
 994              	.LBB19:
2074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 995              		.loc 1 2074 7 is_stmt 1
 996 03b6 7A68     		ldr	r2, [r7, #4]
 997 03b8 3B68     		ldr	r3, [r7]
 998 03ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 999 03bc 9B00     		lsls	r3, r3, #2
 1000 03be 1344     		add	r3, r3, r2
 1001 03c0 1B88     		ldrh	r3, [r3]	@ movhi
 1002 03c2 9CB2     		uxth	r4, r3
 1003 03c4 2346     		mov	r3, r4
 1004 03c6 03F04003 		and	r3, r3, #64
 1005 03ca 002B     		cmp	r3, #0
 1006 03cc 14D0     		beq	.L38
 1007              	.LBB20:
 1008              		.loc 1 2074 7 is_stmt 0 discriminator 1
 1009 03ce 7A68     		ldr	r2, [r7, #4]
 1010 03d0 3B68     		ldr	r3, [r7]
 1011 03d2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1012 03d4 9B00     		lsls	r3, r3, #2
 1013 03d6 1344     		add	r3, r3, r2
 1014 03d8 1B88     		ldrh	r3, [r3]	@ movhi
 1015 03da 9BB2     		uxth	r3, r3
 1016 03dc 23F4E043 		bic	r3, r3, #28672
 1017 03e0 23F07003 		bic	r3, r3, #112
 1018 03e4 9CB2     		uxth	r4, r3
 1019 03e6 7A68     		ldr	r2, [r7, #4]
 1020 03e8 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccPzcOpE.s 			page 55


 1021 03ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1022 03ec 9B00     		lsls	r3, r3, #2
 1023 03ee 1A44     		add	r2, r2, r3
 1024 03f0 604B     		ldr	r3, .L47+8
 1025 03f2 2343     		orrs	r3, r3, r4
 1026 03f4 9BB2     		uxth	r3, r3
 1027 03f6 1380     		strh	r3, [r2]	@ movhi
 1028              	.L38:
 1029              	.LBE20:
 1030              	.LBE19:
 1031              	.LBB21:
2075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Reset value of the data toggle bits for the endpoint out */
2077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_TX_DTOG(USBx, ep->num);
 1032              		.loc 1 2077 7 is_stmt 1
 1033 03f8 7A68     		ldr	r2, [r7, #4]
 1034 03fa 3B68     		ldr	r3, [r7]
 1035 03fc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1036 03fe 9B00     		lsls	r3, r3, #2
 1037 0400 1344     		add	r3, r3, r2
 1038 0402 1B88     		ldrh	r3, [r3]	@ movhi
 1039 0404 9BB2     		uxth	r3, r3
 1040 0406 23F4E043 		bic	r3, r3, #28672
 1041 040a 23F07003 		bic	r3, r3, #112
 1042 040e 9CB2     		uxth	r4, r3
 1043 0410 7A68     		ldr	r2, [r7, #4]
 1044 0412 3B68     		ldr	r3, [r7]
 1045 0414 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1046 0416 9B00     		lsls	r3, r3, #2
 1047 0418 1A44     		add	r2, r2, r3
 1048 041a 564B     		ldr	r3, .L47+8
 1049 041c 2343     		orrs	r3, r3, r4
 1050 041e 9BB2     		uxth	r3, r3
 1051 0420 1380     		strh	r3, [r2]	@ movhi
 1052              	.LBE21:
 1053              	.LBB22:
2078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 1054              		.loc 1 2079 7
 1055 0422 7A68     		ldr	r2, [r7, #4]
 1056 0424 3B68     		ldr	r3, [r7]
 1057 0426 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1058 0428 9B00     		lsls	r3, r3, #2
 1059 042a 1344     		add	r3, r3, r2
 1060 042c 1B88     		ldrh	r3, [r3]	@ movhi
 1061 042e 9BB2     		uxth	r3, r3
 1062 0430 23F48043 		bic	r3, r3, #16384
 1063 0434 23F07003 		bic	r3, r3, #112
 1064 0438 9CB2     		uxth	r4, r3
 1065 043a 84F48053 		eor	r3, r4, #4096
 1066 043e 9CB2     		uxth	r4, r3
 1067 0440 84F40053 		eor	r3, r4, #8192
 1068 0444 9CB2     		uxth	r4, r3
 1069 0446 7A68     		ldr	r2, [r7, #4]
 1070 0448 3B68     		ldr	r3, [r7]
 1071 044a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1072 044c 9B00     		lsls	r3, r3, #2
ARM GAS  /tmp/ccPzcOpE.s 			page 56


 1073 044e 1A44     		add	r2, r2, r3
 1074 0450 494B     		ldr	r3, .L47+12
 1075 0452 2343     		orrs	r3, r3, r4
 1076 0454 9BB2     		uxth	r3, r3
 1077 0456 1380     		strh	r3, [r2]	@ movhi
 1078              	.LBE22:
 1079              	.LBB23:
2080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 1080              		.loc 1 2080 7
 1081 0458 7A68     		ldr	r2, [r7, #4]
 1082 045a 3B68     		ldr	r3, [r7]
 1083 045c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1084 045e 9B00     		lsls	r3, r3, #2
 1085 0460 1344     		add	r3, r3, r2
 1086 0462 1B88     		ldrh	r3, [r3]	@ movhi
 1087 0464 9BB2     		uxth	r3, r3
 1088 0466 23F4E043 		bic	r3, r3, #28672
 1089 046a 23F04003 		bic	r3, r3, #64
 1090 046e 9CB2     		uxth	r4, r3
 1091 0470 7A68     		ldr	r2, [r7, #4]
 1092 0472 3B68     		ldr	r3, [r7]
 1093 0474 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1094 0476 9B00     		lsls	r3, r3, #2
 1095 0478 1A44     		add	r2, r2, r3
 1096 047a 3F4B     		ldr	r3, .L47+12
 1097 047c 2343     		orrs	r3, r3, r4
 1098 047e 9BB2     		uxth	r3, r3
 1099 0480 1380     		strh	r3, [r2]	@ movhi
 1100              	.LBE23:
 1101 0482 A5E0     		b	.L29
 1102              	.L36:
 1103              	.LBB24:
2081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT */
2085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 1104              		.loc 1 2085 7
 1105 0484 7A68     		ldr	r2, [r7, #4]
 1106 0486 3B68     		ldr	r3, [r7]
 1107 0488 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1108 048a 9B00     		lsls	r3, r3, #2
 1109 048c 1344     		add	r3, r3, r2
 1110 048e 1B88     		ldrh	r3, [r3]	@ movhi
 1111 0490 9CB2     		uxth	r4, r3
 1112 0492 2346     		mov	r3, r4
 1113 0494 03F48043 		and	r3, r3, #16384
 1114 0498 002B     		cmp	r3, #0
 1115 049a 14D0     		beq	.L39
 1116              	.LBB25:
 1117              		.loc 1 2085 7 is_stmt 0 discriminator 1
 1118 049c 7A68     		ldr	r2, [r7, #4]
 1119 049e 3B68     		ldr	r3, [r7]
 1120 04a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1121 04a2 9B00     		lsls	r3, r3, #2
 1122 04a4 1344     		add	r3, r3, r2
 1123 04a6 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/ccPzcOpE.s 			page 57


 1124 04a8 9BB2     		uxth	r3, r3
 1125 04aa 23F4E043 		bic	r3, r3, #28672
 1126 04ae 23F07003 		bic	r3, r3, #112
 1127 04b2 9CB2     		uxth	r4, r3
 1128 04b4 7A68     		ldr	r2, [r7, #4]
 1129 04b6 3B68     		ldr	r3, [r7]
 1130 04b8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1131 04ba 9B00     		lsls	r3, r3, #2
 1132 04bc 1A44     		add	r2, r2, r3
 1133 04be 2C4B     		ldr	r3, .L47+4
 1134 04c0 2343     		orrs	r3, r3, r4
 1135 04c2 9BB2     		uxth	r3, r3
 1136 04c4 1380     		strh	r3, [r2]	@ movhi
 1137              	.L39:
 1138              	.LBE25:
 1139              	.LBE24:
 1140              	.LBB26:
2086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 1141              		.loc 1 2086 7 is_stmt 1
 1142 04c6 7A68     		ldr	r2, [r7, #4]
 1143 04c8 3B68     		ldr	r3, [r7]
 1144 04ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1145 04cc 9B00     		lsls	r3, r3, #2
 1146 04ce 1344     		add	r3, r3, r2
 1147 04d0 1B88     		ldrh	r3, [r3]	@ movhi
 1148 04d2 9CB2     		uxth	r4, r3
 1149 04d4 2346     		mov	r3, r4
 1150 04d6 03F04003 		and	r3, r3, #64
 1151 04da 002B     		cmp	r3, #0
 1152 04dc 14D0     		beq	.L40
 1153              	.LBB27:
 1154              		.loc 1 2086 7 is_stmt 0 discriminator 1
 1155 04de 7A68     		ldr	r2, [r7, #4]
 1156 04e0 3B68     		ldr	r3, [r7]
 1157 04e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1158 04e4 9B00     		lsls	r3, r3, #2
 1159 04e6 1344     		add	r3, r3, r2
 1160 04e8 1B88     		ldrh	r3, [r3]	@ movhi
 1161 04ea 9BB2     		uxth	r3, r3
 1162 04ec 23F4E043 		bic	r3, r3, #28672
 1163 04f0 23F07003 		bic	r3, r3, #112
 1164 04f4 9CB2     		uxth	r4, r3
 1165 04f6 7A68     		ldr	r2, [r7, #4]
 1166 04f8 3B68     		ldr	r3, [r7]
 1167 04fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1168 04fc 9B00     		lsls	r3, r3, #2
 1169 04fe 1A44     		add	r2, r2, r3
 1170 0500 1C4B     		ldr	r3, .L47+8
 1171 0502 2343     		orrs	r3, r3, r4
 1172 0504 9BB2     		uxth	r3, r3
 1173 0506 1380     		strh	r3, [r2]	@ movhi
 1174              	.L40:
 1175              	.LBE27:
 1176              	.LBE26:
 1177              	.LBB28:
2087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
 1178              		.loc 1 2087 7 is_stmt 1
ARM GAS  /tmp/ccPzcOpE.s 			page 58


 1179 0508 7A68     		ldr	r2, [r7, #4]
 1180 050a 3B68     		ldr	r3, [r7]
 1181 050c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1182 050e 9B00     		lsls	r3, r3, #2
 1183 0510 1344     		add	r3, r3, r2
 1184 0512 1B88     		ldrh	r3, [r3]	@ movhi
 1185 0514 9BB2     		uxth	r3, r3
 1186 0516 23F4E043 		bic	r3, r3, #28672
 1187 051a 23F07003 		bic	r3, r3, #112
 1188 051e 9CB2     		uxth	r4, r3
 1189 0520 7A68     		ldr	r2, [r7, #4]
 1190 0522 3B68     		ldr	r3, [r7]
 1191 0524 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1192 0526 9B00     		lsls	r3, r3, #2
 1193 0528 1A44     		add	r2, r2, r3
 1194 052a 114B     		ldr	r3, .L47+4
 1195 052c 2343     		orrs	r3, r3, r4
 1196 052e 9BB2     		uxth	r3, r3
 1197 0530 1380     		strh	r3, [r2]	@ movhi
 1198              	.LBE28:
2088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (ep->type != EP_TYPE_ISOC)
 1199              		.loc 1 2089 13
 1200 0532 3B68     		ldr	r3, [r7]
 1201 0534 DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
 1202              		.loc 1 2089 10
 1203 0536 012B     		cmp	r3, #1
 1204 0538 20D0     		beq	.L41
 1205              	.LBB29:
2090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
2091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Configure NAK status for the Endpoint */
2092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_NAK);
 1206              		.loc 1 2092 9
 1207 053a 7A68     		ldr	r2, [r7, #4]
 1208 053c 3B68     		ldr	r3, [r7]
 1209 053e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1210 0540 9B00     		lsls	r3, r3, #2
 1211 0542 1344     		add	r3, r3, r2
 1212 0544 1B88     		ldrh	r3, [r3]	@ movhi
 1213 0546 9BB2     		uxth	r3, r3
 1214 0548 23F4E043 		bic	r3, r3, #28672
 1215 054c 23F04003 		bic	r3, r3, #64
 1216 0550 9CB2     		uxth	r4, r3
 1217 0552 84F02003 		eor	r3, r4, #32
 1218 0556 9CB2     		uxth	r4, r3
 1219 0558 7A68     		ldr	r2, [r7, #4]
 1220 055a 3B68     		ldr	r3, [r7]
 1221 055c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1222 055e 9B00     		lsls	r3, r3, #2
 1223 0560 1A44     		add	r2, r2, r3
 1224 0562 054B     		ldr	r3, .L47+12
 1225 0564 2343     		orrs	r3, r3, r4
 1226 0566 9BB2     		uxth	r3, r3
 1227 0568 1380     		strh	r3, [r2]	@ movhi
 1228              	.LBE29:
 1229 056a 1CE0     		b	.L42
 1230              	.L48:
ARM GAS  /tmp/ccPzcOpE.s 			page 59


 1231              		.align	2
 1232              	.L47:
 1233 056c 8081FFFF 		.word	-32384
 1234 0570 80C0FFFF 		.word	-16256
 1235 0574 C080FFFF 		.word	-32576
 1236 0578 8080FFFF 		.word	-32640
 1237              	.L41:
 1238              	.LBB30:
2093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
2094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       else
2095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
2096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Configure TX Endpoint to disabled state */
2097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 1239              		.loc 1 2097 9
 1240 057c 7A68     		ldr	r2, [r7, #4]
 1241 057e 3B68     		ldr	r3, [r7]
 1242 0580 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1243 0582 9B00     		lsls	r3, r3, #2
 1244 0584 1344     		add	r3, r3, r2
 1245 0586 1B88     		ldrh	r3, [r3]	@ movhi
 1246 0588 9BB2     		uxth	r3, r3
 1247 058a 23F4E043 		bic	r3, r3, #28672
 1248 058e 23F04003 		bic	r3, r3, #64
 1249 0592 9CB2     		uxth	r4, r3
 1250 0594 7A68     		ldr	r2, [r7, #4]
 1251 0596 3B68     		ldr	r3, [r7]
 1252 0598 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1253 059a 9B00     		lsls	r3, r3, #2
 1254 059c 1A44     		add	r2, r2, r3
 1255 059e 0F4B     		ldr	r3, .L49
 1256 05a0 2343     		orrs	r3, r3, r4
 1257 05a2 9BB2     		uxth	r3, r3
 1258 05a4 1380     		strh	r3, [r2]	@ movhi
 1259              	.L42:
 1260              	.LBE30:
 1261              	.LBB31:
2098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
2099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 1262              		.loc 1 2100 7
 1263 05a6 7A68     		ldr	r2, [r7, #4]
 1264 05a8 3B68     		ldr	r3, [r7]
 1265 05aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1266 05ac 9B00     		lsls	r3, r3, #2
 1267 05ae 1344     		add	r3, r3, r2
 1268 05b0 1B88     		ldrh	r3, [r3]	@ movhi
 1269 05b2 9BB2     		uxth	r3, r3
 1270 05b4 23F48043 		bic	r3, r3, #16384
 1271 05b8 23F07003 		bic	r3, r3, #112
 1272 05bc 9CB2     		uxth	r4, r3
 1273 05be 7A68     		ldr	r2, [r7, #4]
 1274 05c0 3B68     		ldr	r3, [r7]
 1275 05c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1276 05c4 9B00     		lsls	r3, r3, #2
 1277 05c6 1A44     		add	r2, r2, r3
 1278 05c8 044B     		ldr	r3, .L49
 1279 05ca 2343     		orrs	r3, r3, r4
ARM GAS  /tmp/ccPzcOpE.s 			page 60


 1280 05cc 9BB2     		uxth	r3, r3
 1281 05ce 1380     		strh	r3, [r2]	@ movhi
 1282              	.L29:
 1283              	.LBE31:
2101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ret;
 1284              		.loc 1 2104 10
 1285 05d0 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
2105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 1286              		.loc 1 2105 1
 1287 05d2 1846     		mov	r0, r3
 1288 05d4 1037     		adds	r7, r7, #16
 1289              	.LCFI55:
 1290              		.cfi_def_cfa_offset 8
 1291 05d6 BD46     		mov	sp, r7
 1292              	.LCFI56:
 1293              		.cfi_def_cfa_register 13
 1294              		@ sp needed
 1295 05d8 90BC     		pop	{r4, r7}
 1296              	.LCFI57:
 1297              		.cfi_restore 7
 1298              		.cfi_restore 4
 1299              		.cfi_def_cfa_offset 0
 1300 05da 7047     		bx	lr
 1301              	.L50:
 1302              		.align	2
 1303              	.L49:
 1304 05dc 8080FFFF 		.word	-32640
 1305              		.cfi_endproc
 1306              	.LFE138:
 1308              		.section	.text.USB_DeactivateEndpoint,"ax",%progbits
 1309              		.align	1
 1310              		.global	USB_DeactivateEndpoint
 1311              		.syntax unified
 1312              		.thumb
 1313              		.thumb_func
 1314              		.fpu fpv4-sp-d16
 1316              	USB_DeactivateEndpoint:
 1317              	.LFB139:
2106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  De-activate and de-initialize an endpoint
2109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
2111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DeactivateEndpoint(USB_TypeDef *USBx, USB_EPTypeDef *ep)
2114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 1318              		.loc 1 2114 1
 1319              		.cfi_startproc
 1320              		@ args = 0, pretend = 0, frame = 8
 1321              		@ frame_needed = 1, uses_anonymous_args = 0
 1322              		@ link register save eliminated.
 1323 0000 90B4     		push	{r4, r7}
 1324              	.LCFI58:
ARM GAS  /tmp/ccPzcOpE.s 			page 61


 1325              		.cfi_def_cfa_offset 8
 1326              		.cfi_offset 4, -8
 1327              		.cfi_offset 7, -4
 1328 0002 82B0     		sub	sp, sp, #8
 1329              	.LCFI59:
 1330              		.cfi_def_cfa_offset 16
 1331 0004 00AF     		add	r7, sp, #0
 1332              	.LCFI60:
 1333              		.cfi_def_cfa_register 7
 1334 0006 7860     		str	r0, [r7, #4]
 1335 0008 3960     		str	r1, [r7]
2115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->doublebuffer == 0U)
 1336              		.loc 1 2115 9
 1337 000a 3B68     		ldr	r3, [r7]
 1338 000c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1339              		.loc 1 2115 6
 1340 000e 002B     		cmp	r3, #0
 1341 0010 71D1     		bne	.L52
2116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->is_in != 0U)
 1342              		.loc 1 2117 11
 1343 0012 3B68     		ldr	r3, [r7]
 1344 0014 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1345              		.loc 1 2117 8
 1346 0016 002B     		cmp	r3, #0
 1347 0018 36D0     		beq	.L53
 1348              	.LBB32:
2118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 1349              		.loc 1 2119 7
 1350 001a 7A68     		ldr	r2, [r7, #4]
 1351 001c 3B68     		ldr	r3, [r7]
 1352 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1353 0020 9B00     		lsls	r3, r3, #2
 1354 0022 1344     		add	r3, r3, r2
 1355 0024 1B88     		ldrh	r3, [r3]	@ movhi
 1356 0026 9CB2     		uxth	r4, r3
 1357 0028 2346     		mov	r3, r4
 1358 002a 03F04003 		and	r3, r3, #64
 1359 002e 002B     		cmp	r3, #0
 1360 0030 14D0     		beq	.L54
 1361              	.LBB33:
 1362              		.loc 1 2119 7 is_stmt 0 discriminator 1
 1363 0032 7A68     		ldr	r2, [r7, #4]
 1364 0034 3B68     		ldr	r3, [r7]
 1365 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1366 0038 9B00     		lsls	r3, r3, #2
 1367 003a 1344     		add	r3, r3, r2
 1368 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1369 003e 9BB2     		uxth	r3, r3
 1370 0040 23F4E043 		bic	r3, r3, #28672
 1371 0044 23F07003 		bic	r3, r3, #112
 1372 0048 9CB2     		uxth	r4, r3
 1373 004a 7A68     		ldr	r2, [r7, #4]
 1374 004c 3B68     		ldr	r3, [r7]
 1375 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1376 0050 9B00     		lsls	r3, r3, #2
ARM GAS  /tmp/ccPzcOpE.s 			page 62


 1377 0052 1A44     		add	r2, r2, r3
 1378 0054 6B4B     		ldr	r3, .L63
 1379 0056 2343     		orrs	r3, r3, r4
 1380 0058 9BB2     		uxth	r3, r3
 1381 005a 1380     		strh	r3, [r2]	@ movhi
 1382              	.L54:
 1383              	.LBE33:
 1384              	.LBE32:
 1385              	.LBB34:
2120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
2121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 1386              		.loc 1 2121 7 is_stmt 1
 1387 005c 7A68     		ldr	r2, [r7, #4]
 1388 005e 3B68     		ldr	r3, [r7]
 1389 0060 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1390 0062 9B00     		lsls	r3, r3, #2
 1391 0064 1344     		add	r3, r3, r2
 1392 0066 1B88     		ldrh	r3, [r3]	@ movhi
 1393 0068 9BB2     		uxth	r3, r3
 1394 006a 23F4E043 		bic	r3, r3, #28672
 1395 006e 23F04003 		bic	r3, r3, #64
 1396 0072 9CB2     		uxth	r4, r3
 1397 0074 7A68     		ldr	r2, [r7, #4]
 1398 0076 3B68     		ldr	r3, [r7]
 1399 0078 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1400 007a 9B00     		lsls	r3, r3, #2
 1401 007c 1A44     		add	r2, r2, r3
 1402 007e 624B     		ldr	r3, .L63+4
 1403 0080 2343     		orrs	r3, r3, r4
 1404 0082 9BB2     		uxth	r3, r3
 1405 0084 1380     		strh	r3, [r2]	@ movhi
 1406              	.LBE34:
 1407 0086 44E1     		b	.L55
 1408              	.L53:
 1409              	.LBB35:
2122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 1410              		.loc 1 2125 7
 1411 0088 7A68     		ldr	r2, [r7, #4]
 1412 008a 3B68     		ldr	r3, [r7]
 1413 008c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1414 008e 9B00     		lsls	r3, r3, #2
 1415 0090 1344     		add	r3, r3, r2
 1416 0092 1B88     		ldrh	r3, [r3]	@ movhi
 1417 0094 9CB2     		uxth	r4, r3
 1418 0096 2346     		mov	r3, r4
 1419 0098 03F48043 		and	r3, r3, #16384
 1420 009c 002B     		cmp	r3, #0
 1421 009e 14D0     		beq	.L56
 1422              	.LBB36:
 1423              		.loc 1 2125 7 is_stmt 0 discriminator 1
 1424 00a0 7A68     		ldr	r2, [r7, #4]
 1425 00a2 3B68     		ldr	r3, [r7]
 1426 00a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1427 00a6 9B00     		lsls	r3, r3, #2
ARM GAS  /tmp/ccPzcOpE.s 			page 63


 1428 00a8 1344     		add	r3, r3, r2
 1429 00aa 1B88     		ldrh	r3, [r3]	@ movhi
 1430 00ac 9BB2     		uxth	r3, r3
 1431 00ae 23F4E043 		bic	r3, r3, #28672
 1432 00b2 23F07003 		bic	r3, r3, #112
 1433 00b6 9CB2     		uxth	r4, r3
 1434 00b8 7A68     		ldr	r2, [r7, #4]
 1435 00ba 3B68     		ldr	r3, [r7]
 1436 00bc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1437 00be 9B00     		lsls	r3, r3, #2
 1438 00c0 1A44     		add	r2, r2, r3
 1439 00c2 524B     		ldr	r3, .L63+8
 1440 00c4 2343     		orrs	r3, r3, r4
 1441 00c6 9BB2     		uxth	r3, r3
 1442 00c8 1380     		strh	r3, [r2]	@ movhi
 1443              	.L56:
 1444              	.LBE36:
 1445              	.LBE35:
 1446              	.LBB37:
2126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
2127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 1447              		.loc 1 2127 7 is_stmt 1
 1448 00ca 7A68     		ldr	r2, [r7, #4]
 1449 00cc 3B68     		ldr	r3, [r7]
 1450 00ce 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1451 00d0 9B00     		lsls	r3, r3, #2
 1452 00d2 1344     		add	r3, r3, r2
 1453 00d4 1B88     		ldrh	r3, [r3]	@ movhi
 1454 00d6 9BB2     		uxth	r3, r3
 1455 00d8 23F48043 		bic	r3, r3, #16384
 1456 00dc 23F07003 		bic	r3, r3, #112
 1457 00e0 9CB2     		uxth	r4, r3
 1458 00e2 7A68     		ldr	r2, [r7, #4]
 1459 00e4 3B68     		ldr	r3, [r7]
 1460 00e6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1461 00e8 9B00     		lsls	r3, r3, #2
 1462 00ea 1A44     		add	r2, r2, r3
 1463 00ec 464B     		ldr	r3, .L63+4
 1464 00ee 2343     		orrs	r3, r3, r4
 1465 00f0 9BB2     		uxth	r3, r3
 1466 00f2 1380     		strh	r3, [r2]	@ movhi
 1467 00f4 0DE1     		b	.L55
 1468              	.L52:
 1469              	.LBE37:
2128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /*Double Buffer*/
2131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
2132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->is_in == 0U)
 1470              		.loc 1 2133 11
 1471 00f6 3B68     		ldr	r3, [r7]
 1472 00f8 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1473              		.loc 1 2133 8
 1474 00fa 002B     		cmp	r3, #0
 1475 00fc 40F08880 		bne	.L57
 1476              	.LBB38:
ARM GAS  /tmp/ccPzcOpE.s 			page 64


2134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
2136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 1477              		.loc 1 2136 7
 1478 0100 7A68     		ldr	r2, [r7, #4]
 1479 0102 3B68     		ldr	r3, [r7]
 1480 0104 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1481 0106 9B00     		lsls	r3, r3, #2
 1482 0108 1344     		add	r3, r3, r2
 1483 010a 1B88     		ldrh	r3, [r3]	@ movhi
 1484 010c 9CB2     		uxth	r4, r3
 1485 010e 2346     		mov	r3, r4
 1486 0110 03F48043 		and	r3, r3, #16384
 1487 0114 002B     		cmp	r3, #0
 1488 0116 14D0     		beq	.L58
 1489              	.LBB39:
 1490              		.loc 1 2136 7 is_stmt 0 discriminator 1
 1491 0118 7A68     		ldr	r2, [r7, #4]
 1492 011a 3B68     		ldr	r3, [r7]
 1493 011c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1494 011e 9B00     		lsls	r3, r3, #2
 1495 0120 1344     		add	r3, r3, r2
 1496 0122 1B88     		ldrh	r3, [r3]	@ movhi
 1497 0124 9BB2     		uxth	r3, r3
 1498 0126 23F4E043 		bic	r3, r3, #28672
 1499 012a 23F07003 		bic	r3, r3, #112
 1500 012e 9CB2     		uxth	r4, r3
 1501 0130 7A68     		ldr	r2, [r7, #4]
 1502 0132 3B68     		ldr	r3, [r7]
 1503 0134 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1504 0136 9B00     		lsls	r3, r3, #2
 1505 0138 1A44     		add	r2, r2, r3
 1506 013a 344B     		ldr	r3, .L63+8
 1507 013c 2343     		orrs	r3, r3, r4
 1508 013e 9BB2     		uxth	r3, r3
 1509 0140 1380     		strh	r3, [r2]	@ movhi
 1510              	.L58:
 1511              	.LBE39:
 1512              	.LBE38:
 1513              	.LBB40:
2137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 1514              		.loc 1 2137 7 is_stmt 1
 1515 0142 7A68     		ldr	r2, [r7, #4]
 1516 0144 3B68     		ldr	r3, [r7]
 1517 0146 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1518 0148 9B00     		lsls	r3, r3, #2
 1519 014a 1344     		add	r3, r3, r2
 1520 014c 1B88     		ldrh	r3, [r3]	@ movhi
 1521 014e 9CB2     		uxth	r4, r3
 1522 0150 2346     		mov	r3, r4
 1523 0152 03F04003 		and	r3, r3, #64
 1524 0156 002B     		cmp	r3, #0
 1525 0158 14D0     		beq	.L59
 1526              	.LBB41:
 1527              		.loc 1 2137 7 is_stmt 0 discriminator 1
 1528 015a 7A68     		ldr	r2, [r7, #4]
 1529 015c 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccPzcOpE.s 			page 65


 1530 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1531 0160 9B00     		lsls	r3, r3, #2
 1532 0162 1344     		add	r3, r3, r2
 1533 0164 1B88     		ldrh	r3, [r3]	@ movhi
 1534 0166 9BB2     		uxth	r3, r3
 1535 0168 23F4E043 		bic	r3, r3, #28672
 1536 016c 23F07003 		bic	r3, r3, #112
 1537 0170 9CB2     		uxth	r4, r3
 1538 0172 7A68     		ldr	r2, [r7, #4]
 1539 0174 3B68     		ldr	r3, [r7]
 1540 0176 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1541 0178 9B00     		lsls	r3, r3, #2
 1542 017a 1A44     		add	r2, r2, r3
 1543 017c 214B     		ldr	r3, .L63
 1544 017e 2343     		orrs	r3, r3, r4
 1545 0180 9BB2     		uxth	r3, r3
 1546 0182 1380     		strh	r3, [r2]	@ movhi
 1547              	.L59:
 1548              	.LBE41:
 1549              	.LBE40:
 1550              	.LBB42:
2138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Reset value of the data toggle bits for the endpoint out*/
2140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_TX_DTOG(USBx, ep->num);
 1551              		.loc 1 2140 7 is_stmt 1
 1552 0184 7A68     		ldr	r2, [r7, #4]
 1553 0186 3B68     		ldr	r3, [r7]
 1554 0188 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1555 018a 9B00     		lsls	r3, r3, #2
 1556 018c 1344     		add	r3, r3, r2
 1557 018e 1B88     		ldrh	r3, [r3]	@ movhi
 1558 0190 9BB2     		uxth	r3, r3
 1559 0192 23F4E043 		bic	r3, r3, #28672
 1560 0196 23F07003 		bic	r3, r3, #112
 1561 019a 9CB2     		uxth	r4, r3
 1562 019c 7A68     		ldr	r2, [r7, #4]
 1563 019e 3B68     		ldr	r3, [r7]
 1564 01a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1565 01a2 9B00     		lsls	r3, r3, #2
 1566 01a4 1A44     		add	r2, r2, r3
 1567 01a6 174B     		ldr	r3, .L63
 1568 01a8 2343     		orrs	r3, r3, r4
 1569 01aa 9BB2     		uxth	r3, r3
 1570 01ac 1380     		strh	r3, [r2]	@ movhi
 1571              	.LBE42:
 1572              	.LBB43:
2141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 1573              		.loc 1 2142 7
 1574 01ae 7A68     		ldr	r2, [r7, #4]
 1575 01b0 3B68     		ldr	r3, [r7]
 1576 01b2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1577 01b4 9B00     		lsls	r3, r3, #2
 1578 01b6 1344     		add	r3, r3, r2
 1579 01b8 1B88     		ldrh	r3, [r3]	@ movhi
 1580 01ba 9BB2     		uxth	r3, r3
 1581 01bc 23F48043 		bic	r3, r3, #16384
ARM GAS  /tmp/ccPzcOpE.s 			page 66


 1582 01c0 23F07003 		bic	r3, r3, #112
 1583 01c4 9CB2     		uxth	r4, r3
 1584 01c6 7A68     		ldr	r2, [r7, #4]
 1585 01c8 3B68     		ldr	r3, [r7]
 1586 01ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1587 01cc 9B00     		lsls	r3, r3, #2
 1588 01ce 1A44     		add	r2, r2, r3
 1589 01d0 0D4B     		ldr	r3, .L63+4
 1590 01d2 2343     		orrs	r3, r3, r4
 1591 01d4 9BB2     		uxth	r3, r3
 1592 01d6 1380     		strh	r3, [r2]	@ movhi
 1593              	.LBE43:
 1594              	.LBB44:
2143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 1595              		.loc 1 2143 7
 1596 01d8 7A68     		ldr	r2, [r7, #4]
 1597 01da 3B68     		ldr	r3, [r7]
 1598 01dc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1599 01de 9B00     		lsls	r3, r3, #2
 1600 01e0 1344     		add	r3, r3, r2
 1601 01e2 1B88     		ldrh	r3, [r3]	@ movhi
 1602 01e4 9BB2     		uxth	r3, r3
 1603 01e6 23F4E043 		bic	r3, r3, #28672
 1604 01ea 23F04003 		bic	r3, r3, #64
 1605 01ee 9CB2     		uxth	r4, r3
 1606 01f0 7A68     		ldr	r2, [r7, #4]
 1607 01f2 3B68     		ldr	r3, [r7]
 1608 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1609 01f6 9B00     		lsls	r3, r3, #2
 1610 01f8 1A44     		add	r2, r2, r3
 1611 01fa 034B     		ldr	r3, .L63+4
 1612 01fc 2343     		orrs	r3, r3, r4
 1613 01fe 9BB2     		uxth	r3, r3
 1614 0200 1380     		strh	r3, [r2]	@ movhi
 1615              	.LBE44:
 1616 0202 86E0     		b	.L55
 1617              	.L64:
 1618              		.align	2
 1619              	.L63:
 1620 0204 C080FFFF 		.word	-32576
 1621 0208 8080FFFF 		.word	-32640
 1622 020c 80C0FFFF 		.word	-16256
 1623              	.L57:
 1624              	.LBB45:
2144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Clear the data toggle bits for the endpoint IN/OUT*/
2148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 1625              		.loc 1 2148 7
 1626 0210 7A68     		ldr	r2, [r7, #4]
 1627 0212 3B68     		ldr	r3, [r7]
 1628 0214 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1629 0216 9B00     		lsls	r3, r3, #2
 1630 0218 1344     		add	r3, r3, r2
 1631 021a 1B88     		ldrh	r3, [r3]	@ movhi
 1632 021c 9CB2     		uxth	r4, r3
ARM GAS  /tmp/ccPzcOpE.s 			page 67


 1633 021e 2346     		mov	r3, r4
 1634 0220 03F48043 		and	r3, r3, #16384
 1635 0224 002B     		cmp	r3, #0
 1636 0226 14D0     		beq	.L60
 1637              	.LBB46:
 1638              		.loc 1 2148 7 is_stmt 0 discriminator 1
 1639 0228 7A68     		ldr	r2, [r7, #4]
 1640 022a 3B68     		ldr	r3, [r7]
 1641 022c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1642 022e 9B00     		lsls	r3, r3, #2
 1643 0230 1344     		add	r3, r3, r2
 1644 0232 1B88     		ldrh	r3, [r3]	@ movhi
 1645 0234 9BB2     		uxth	r3, r3
 1646 0236 23F4E043 		bic	r3, r3, #28672
 1647 023a 23F07003 		bic	r3, r3, #112
 1648 023e 9CB2     		uxth	r4, r3
 1649 0240 7A68     		ldr	r2, [r7, #4]
 1650 0242 3B68     		ldr	r3, [r7]
 1651 0244 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1652 0246 9B00     		lsls	r3, r3, #2
 1653 0248 1A44     		add	r2, r2, r3
 1654 024a 354B     		ldr	r3, .L65
 1655 024c 2343     		orrs	r3, r3, r4
 1656 024e 9BB2     		uxth	r3, r3
 1657 0250 1380     		strh	r3, [r2]	@ movhi
 1658              	.L60:
 1659              	.LBE46:
 1660              	.LBE45:
 1661              	.LBB47:
2149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 1662              		.loc 1 2149 7 is_stmt 1
 1663 0252 7A68     		ldr	r2, [r7, #4]
 1664 0254 3B68     		ldr	r3, [r7]
 1665 0256 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1666 0258 9B00     		lsls	r3, r3, #2
 1667 025a 1344     		add	r3, r3, r2
 1668 025c 1B88     		ldrh	r3, [r3]	@ movhi
 1669 025e 9CB2     		uxth	r4, r3
 1670 0260 2346     		mov	r3, r4
 1671 0262 03F04003 		and	r3, r3, #64
 1672 0266 002B     		cmp	r3, #0
 1673 0268 14D0     		beq	.L61
 1674              	.LBB48:
 1675              		.loc 1 2149 7 is_stmt 0 discriminator 1
 1676 026a 7A68     		ldr	r2, [r7, #4]
 1677 026c 3B68     		ldr	r3, [r7]
 1678 026e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1679 0270 9B00     		lsls	r3, r3, #2
 1680 0272 1344     		add	r3, r3, r2
 1681 0274 1B88     		ldrh	r3, [r3]	@ movhi
 1682 0276 9BB2     		uxth	r3, r3
 1683 0278 23F4E043 		bic	r3, r3, #28672
 1684 027c 23F07003 		bic	r3, r3, #112
 1685 0280 9CB2     		uxth	r4, r3
 1686 0282 7A68     		ldr	r2, [r7, #4]
 1687 0284 3B68     		ldr	r3, [r7]
 1688 0286 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccPzcOpE.s 			page 68


 1689 0288 9B00     		lsls	r3, r3, #2
 1690 028a 1A44     		add	r2, r2, r3
 1691 028c 254B     		ldr	r3, .L65+4
 1692 028e 2343     		orrs	r3, r3, r4
 1693 0290 9BB2     		uxth	r3, r3
 1694 0292 1380     		strh	r3, [r2]	@ movhi
 1695              	.L61:
 1696              	.LBE48:
 1697              	.LBE47:
 1698              	.LBB49:
2150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_RX_DTOG(USBx, ep->num);
 1699              		.loc 1 2150 7 is_stmt 1
 1700 0294 7A68     		ldr	r2, [r7, #4]
 1701 0296 3B68     		ldr	r3, [r7]
 1702 0298 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1703 029a 9B00     		lsls	r3, r3, #2
 1704 029c 1344     		add	r3, r3, r2
 1705 029e 1B88     		ldrh	r3, [r3]	@ movhi
 1706 02a0 9BB2     		uxth	r3, r3
 1707 02a2 23F4E043 		bic	r3, r3, #28672
 1708 02a6 23F07003 		bic	r3, r3, #112
 1709 02aa 9CB2     		uxth	r4, r3
 1710 02ac 7A68     		ldr	r2, [r7, #4]
 1711 02ae 3B68     		ldr	r3, [r7]
 1712 02b0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1713 02b2 9B00     		lsls	r3, r3, #2
 1714 02b4 1A44     		add	r2, r2, r3
 1715 02b6 1A4B     		ldr	r3, .L65
 1716 02b8 2343     		orrs	r3, r3, r4
 1717 02ba 9BB2     		uxth	r3, r3
 1718 02bc 1380     		strh	r3, [r2]	@ movhi
 1719              	.LBE49:
 1720              	.LBB50:
2151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Configure DISABLE status for the Endpoint*/
2152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_DIS);
 1721              		.loc 1 2152 7
 1722 02be 7A68     		ldr	r2, [r7, #4]
 1723 02c0 3B68     		ldr	r3, [r7]
 1724 02c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1725 02c4 9B00     		lsls	r3, r3, #2
 1726 02c6 1344     		add	r3, r3, r2
 1727 02c8 1B88     		ldrh	r3, [r3]	@ movhi
 1728 02ca 9BB2     		uxth	r3, r3
 1729 02cc 23F4E043 		bic	r3, r3, #28672
 1730 02d0 23F04003 		bic	r3, r3, #64
 1731 02d4 9CB2     		uxth	r4, r3
 1732 02d6 7A68     		ldr	r2, [r7, #4]
 1733 02d8 3B68     		ldr	r3, [r7]
 1734 02da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1735 02dc 9B00     		lsls	r3, r3, #2
 1736 02de 1A44     		add	r2, r2, r3
 1737 02e0 114B     		ldr	r3, .L65+8
 1738 02e2 2343     		orrs	r3, r3, r4
 1739 02e4 9BB2     		uxth	r3, r3
 1740 02e6 1380     		strh	r3, [r2]	@ movhi
 1741              	.LBE50:
 1742              	.LBB51:
ARM GAS  /tmp/ccPzcOpE.s 			page 69


2153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_DIS);
 1743              		.loc 1 2153 7
 1744 02e8 7A68     		ldr	r2, [r7, #4]
 1745 02ea 3B68     		ldr	r3, [r7]
 1746 02ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1747 02ee 9B00     		lsls	r3, r3, #2
 1748 02f0 1344     		add	r3, r3, r2
 1749 02f2 1B88     		ldrh	r3, [r3]	@ movhi
 1750 02f4 9BB2     		uxth	r3, r3
 1751 02f6 23F48043 		bic	r3, r3, #16384
 1752 02fa 23F07003 		bic	r3, r3, #112
 1753 02fe 9CB2     		uxth	r4, r3
 1754 0300 7A68     		ldr	r2, [r7, #4]
 1755 0302 3B68     		ldr	r3, [r7]
 1756 0304 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1757 0306 9B00     		lsls	r3, r3, #2
 1758 0308 1A44     		add	r2, r2, r3
 1759 030a 074B     		ldr	r3, .L65+8
 1760 030c 2343     		orrs	r3, r3, r4
 1761 030e 9BB2     		uxth	r3, r3
 1762 0310 1380     		strh	r3, [r2]	@ movhi
 1763              	.L55:
 1764              	.LBE51:
2154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 1765              		.loc 1 2157 10
 1766 0312 0023     		movs	r3, #0
2158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 1767              		.loc 1 2158 1
 1768 0314 1846     		mov	r0, r3
 1769 0316 0837     		adds	r7, r7, #8
 1770              	.LCFI61:
 1771              		.cfi_def_cfa_offset 8
 1772 0318 BD46     		mov	sp, r7
 1773              	.LCFI62:
 1774              		.cfi_def_cfa_register 13
 1775              		@ sp needed
 1776 031a 90BC     		pop	{r4, r7}
 1777              	.LCFI63:
 1778              		.cfi_restore 7
 1779              		.cfi_restore 4
 1780              		.cfi_def_cfa_offset 0
 1781 031c 7047     		bx	lr
 1782              	.L66:
 1783 031e 00BF     		.align	2
 1784              	.L65:
 1785 0320 80C0FFFF 		.word	-16256
 1786 0324 C080FFFF 		.word	-32576
 1787 0328 8080FFFF 		.word	-32640
 1788              		.cfi_endproc
 1789              	.LFE139:
 1791              		.section	.text.USB_EPStartXfer,"ax",%progbits
 1792              		.align	1
 1793              		.global	USB_EPStartXfer
 1794              		.syntax unified
ARM GAS  /tmp/ccPzcOpE.s 			page 70


 1795              		.thumb
 1796              		.thumb_func
 1797              		.fpu fpv4-sp-d16
 1799              	USB_EPStartXfer:
 1800              	.LFB140:
2159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EPStartXfer : setup and starts a transfer over an EP
2162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
2164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EPStartXfer(USB_TypeDef *USBx, USB_EPTypeDef *ep)
2167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 1801              		.loc 1 2167 1
 1802              		.cfi_startproc
 1803              		@ args = 0, pretend = 0, frame = 48
 1804              		@ frame_needed = 1, uses_anonymous_args = 0
 1805 0000 90B5     		push	{r4, r7, lr}
 1806              	.LCFI64:
 1807              		.cfi_def_cfa_offset 12
 1808              		.cfi_offset 4, -12
 1809              		.cfi_offset 7, -8
 1810              		.cfi_offset 14, -4
 1811 0002 8DB0     		sub	sp, sp, #52
 1812              	.LCFI65:
 1813              		.cfi_def_cfa_offset 64
 1814 0004 00AF     		add	r7, sp, #0
 1815              	.LCFI66:
 1816              		.cfi_def_cfa_register 7
 1817 0006 7860     		str	r0, [r7, #4]
 1818 0008 3960     		str	r1, [r7]
2168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint16_t pmabuffer;
2169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t len;
2170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* IN endpoint */
2172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in == 1U)
 1819              		.loc 1 2172 9
 1820 000a 3B68     		ldr	r3, [r7]
 1821 000c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1822              		.loc 1 2172 6
 1823 000e 012B     		cmp	r3, #1
 1824 0010 40F06081 		bne	.L68
2173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /*Multi packet transfer*/
2175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->xfer_len > ep->maxpacket)
 1825              		.loc 1 2175 11
 1826 0014 3B68     		ldr	r3, [r7]
 1827 0016 9A69     		ldr	r2, [r3, #24]
 1828              		.loc 1 2175 26
 1829 0018 3B68     		ldr	r3, [r7]
 1830 001a 1B69     		ldr	r3, [r3, #16]
 1831              		.loc 1 2175 8
 1832 001c 9A42     		cmp	r2, r3
 1833 001e 09D9     		bls	.L69
2176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       len = ep->maxpacket;
ARM GAS  /tmp/ccPzcOpE.s 			page 71


 1834              		.loc 1 2177 11
 1835 0020 3B68     		ldr	r3, [r7]
 1836 0022 1B69     		ldr	r3, [r3, #16]
 1837 0024 BB62     		str	r3, [r7, #40]
2178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       ep->xfer_len -= len;
 1838              		.loc 1 2178 20
 1839 0026 3B68     		ldr	r3, [r7]
 1840 0028 9A69     		ldr	r2, [r3, #24]
 1841 002a BB6A     		ldr	r3, [r7, #40]
 1842 002c D21A     		subs	r2, r2, r3
 1843 002e 3B68     		ldr	r3, [r7]
 1844 0030 9A61     		str	r2, [r3, #24]
 1845 0032 05E0     		b	.L70
 1846              	.L69:
2179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       len = ep->xfer_len;
 1847              		.loc 1 2182 11
 1848 0034 3B68     		ldr	r3, [r7]
 1849 0036 9B69     		ldr	r3, [r3, #24]
 1850 0038 BB62     		str	r3, [r7, #40]
2183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       ep->xfer_len = 0U;
 1851              		.loc 1 2183 20
 1852 003a 3B68     		ldr	r3, [r7]
 1853 003c 0022     		movs	r2, #0
 1854 003e 9A61     		str	r2, [r3, #24]
 1855              	.L70:
2184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* configure and validate Tx endpoint */
2187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->doublebuffer == 0U)
 1856              		.loc 1 2187 11
 1857 0040 3B68     		ldr	r3, [r7]
 1858 0042 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1859              		.loc 1 2187 8
 1860 0044 002B     		cmp	r3, #0
 1861 0046 19D1     		bne	.L71
2188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USB_WritePMA(USBx, ep->xfer_buff, ep->pmaadress, (uint16_t)len);
 1862              		.loc 1 2189 7
 1863 0048 3B68     		ldr	r3, [r7]
 1864 004a 5969     		ldr	r1, [r3, #20]
 1865 004c 3B68     		ldr	r3, [r7]
 1866 004e DA88     		ldrh	r2, [r3, #6]
 1867 0050 BB6A     		ldr	r3, [r7, #40]
 1868 0052 9BB2     		uxth	r3, r3
 1869 0054 7868     		ldr	r0, [r7, #4]
 1870 0056 FFF7FEFF 		bl	USB_WritePMA
 1871              	.LBB52:
2190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_TX_CNT(USBx, ep->num, len);
 1872              		.loc 1 2190 7
 1873 005a 7C68     		ldr	r4, [r7, #4]
 1874 005c 7B68     		ldr	r3, [r7, #4]
 1875 005e B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 1876 0062 9BB2     		uxth	r3, r3
 1877 0064 1C44     		add	r4, r4, r3
ARM GAS  /tmp/ccPzcOpE.s 			page 72


 1878 0066 3B68     		ldr	r3, [r7]
 1879 0068 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1880 006a DB00     		lsls	r3, r3, #3
 1881 006c 2344     		add	r3, r3, r4
 1882 006e 03F20243 		addw	r3, r3, #1026
 1883 0072 1C46     		mov	r4, r3
 1884 0074 BB6A     		ldr	r3, [r7, #40]
 1885 0076 9BB2     		uxth	r3, r3
 1886 0078 2380     		strh	r3, [r4]	@ movhi
 1887              	.LBE52:
 1888 007a 0FE1     		b	.L72
 1889              	.L71:
2191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Write the data to the USB endpoint */
2195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if ((PCD_GET_ENDPOINT(USBx, ep->num) & USB_EP_DTOG_TX) != 0U)
 1890              		.loc 1 2195 12
 1891 007c 7A68     		ldr	r2, [r7, #4]
 1892 007e 3B68     		ldr	r3, [r7]
 1893 0080 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1894 0082 9B00     		lsls	r3, r3, #2
 1895 0084 1344     		add	r3, r3, r2
 1896 0086 1B88     		ldrh	r3, [r3]	@ movhi
 1897 0088 9BB2     		uxth	r3, r3
 1898              		.loc 1 2195 44
 1899 008a 03F04003 		and	r3, r3, #64
 1900              		.loc 1 2195 10
 1901 008e 002B     		cmp	r3, #0
 1902 0090 65D0     		beq	.L73
 1903              	.LBB53:
2196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
2197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Set the Double buffer counter for pmabuffer1 */
2198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         PCD_SET_EP_DBUF1_CNT(USBx, ep->num, ep->is_in, len);
 1904              		.loc 1 2198 9
 1905 0092 7C68     		ldr	r4, [r7, #4]
 1906 0094 3B68     		ldr	r3, [r7]
 1907 0096 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1908 0098 002B     		cmp	r3, #0
 1909 009a 48D1     		bne	.L74
 1910              	.LBB54:
 1911              		.loc 1 2198 9 is_stmt 0 discriminator 1
 1912 009c 7C68     		ldr	r4, [r7, #4]
 1913 009e 7B68     		ldr	r3, [r7, #4]
 1914 00a0 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 1915 00a4 9BB2     		uxth	r3, r3
 1916 00a6 1C44     		add	r4, r4, r3
 1917 00a8 3B68     		ldr	r3, [r7]
 1918 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1919 00ac DB00     		lsls	r3, r3, #3
 1920 00ae 2344     		add	r3, r3, r4
 1921 00b0 03F20643 		addw	r3, r3, #1030
 1922 00b4 1C46     		mov	r4, r3
 1923              	.LBB55:
 1924 00b6 BB6A     		ldr	r3, [r7, #40]
 1925 00b8 002B     		cmp	r3, #0
 1926 00ba 0ED1     		bne	.L75
ARM GAS  /tmp/ccPzcOpE.s 			page 73


 1927              		.loc 1 2198 9 discriminator 3
 1928 00bc 2388     		ldrh	r3, [r4]	@ movhi
 1929 00be 9BB2     		uxth	r3, r3
 1930 00c0 23F4F843 		bic	r3, r3, #31744
 1931 00c4 9BB2     		uxth	r3, r3
 1932 00c6 2380     		strh	r3, [r4]	@ movhi
 1933 00c8 2388     		ldrh	r3, [r4]	@ movhi
 1934 00ca 9BB2     		uxth	r3, r3
 1935 00cc 6FEA4343 		mvn	r3, r3, lsl #17
 1936 00d0 6FEA5343 		mvn	r3, r3, lsr #17
 1937 00d4 9BB2     		uxth	r3, r3
 1938 00d6 2380     		strh	r3, [r4]	@ movhi
 1939 00d8 3DE0     		b	.L76
 1940              	.L75:
 1941              		.loc 1 2198 9 discriminator 4
 1942 00da BB6A     		ldr	r3, [r7, #40]
 1943 00dc 3E2B     		cmp	r3, #62
 1944 00de 10D8     		bhi	.L77
 1945              		.loc 1 2198 9 discriminator 5
 1946 00e0 BB6A     		ldr	r3, [r7, #40]
 1947 00e2 5B08     		lsrs	r3, r3, #1
 1948 00e4 7B62     		str	r3, [r7, #36]
 1949 00e6 BB6A     		ldr	r3, [r7, #40]
 1950 00e8 03F00103 		and	r3, r3, #1
 1951 00ec 002B     		cmp	r3, #0
 1952 00ee 02D0     		beq	.L78
 1953              		.loc 1 2198 9 discriminator 7
 1954 00f0 7B6A     		ldr	r3, [r7, #36]
 1955 00f2 0133     		adds	r3, r3, #1
 1956 00f4 7B62     		str	r3, [r7, #36]
 1957              	.L78:
 1958              		.loc 1 2198 9 discriminator 9
 1959 00f6 7B6A     		ldr	r3, [r7, #36]
 1960 00f8 9BB2     		uxth	r3, r3
 1961 00fa 9B02     		lsls	r3, r3, #10
 1962 00fc 9BB2     		uxth	r3, r3
 1963 00fe 2380     		strh	r3, [r4]	@ movhi
 1964 0100 29E0     		b	.L76
 1965              	.L77:
 1966              		.loc 1 2198 9 discriminator 6
 1967 0102 BB6A     		ldr	r3, [r7, #40]
 1968 0104 5B09     		lsrs	r3, r3, #5
 1969 0106 7B62     		str	r3, [r7, #36]
 1970 0108 BB6A     		ldr	r3, [r7, #40]
 1971 010a 03F01F03 		and	r3, r3, #31
 1972 010e 002B     		cmp	r3, #0
 1973 0110 02D1     		bne	.L79
 1974              		.loc 1 2198 9 discriminator 10
 1975 0112 7B6A     		ldr	r3, [r7, #36]
 1976 0114 013B     		subs	r3, r3, #1
 1977 0116 7B62     		str	r3, [r7, #36]
 1978              	.L79:
 1979              		.loc 1 2198 9 discriminator 12
 1980 0118 7B6A     		ldr	r3, [r7, #36]
 1981 011a 9BB2     		uxth	r3, r3
 1982 011c 9B02     		lsls	r3, r3, #10
 1983 011e 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccPzcOpE.s 			page 74


 1984 0120 6FEA4343 		mvn	r3, r3, lsl #17
 1985 0124 6FEA5343 		mvn	r3, r3, lsr #17
 1986 0128 9BB2     		uxth	r3, r3
 1987 012a 2380     		strh	r3, [r4]	@ movhi
 1988 012c 13E0     		b	.L76
 1989              	.L74:
 1990              	.LBE55:
 1991              	.LBE54:
 1992              		.loc 1 2198 9 discriminator 2
 1993 012e 3B68     		ldr	r3, [r7]
 1994 0130 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1995 0132 012B     		cmp	r3, #1
 1996 0134 0FD1     		bne	.L76
 1997              		.loc 1 2198 9 discriminator 13
 1998 0136 7B68     		ldr	r3, [r7, #4]
 1999 0138 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2000 013c 9BB2     		uxth	r3, r3
 2001 013e 1C44     		add	r4, r4, r3
 2002 0140 3B68     		ldr	r3, [r7]
 2003 0142 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2004 0144 DB00     		lsls	r3, r3, #3
 2005 0146 2344     		add	r3, r3, r4
 2006 0148 03F20643 		addw	r3, r3, #1030
 2007 014c FB60     		str	r3, [r7, #12]
 2008 014e BB6A     		ldr	r3, [r7, #40]
 2009 0150 9AB2     		uxth	r2, r3
 2010 0152 FB68     		ldr	r3, [r7, #12]
 2011 0154 1A80     		strh	r2, [r3]	@ movhi
 2012              	.L76:
 2013              	.LBE53:
2199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         pmabuffer = ep->pmaaddr1;
 2014              		.loc 1 2199 19 is_stmt 1
 2015 0156 3B68     		ldr	r3, [r7]
 2016 0158 5B89     		ldrh	r3, [r3, #10]	@ movhi
 2017 015a FB85     		strh	r3, [r7, #46]	@ movhi
 2018 015c 63E0     		b	.L80
 2019              	.L73:
2200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
2201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       else
2202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
2203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Set the Double buffer counter for pmabuffer0 */
2204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         PCD_SET_EP_DBUF0_CNT(USBx, ep->num, ep->is_in, len);
 2020              		.loc 1 2204 9
 2021 015e 3B68     		ldr	r3, [r7]
 2022 0160 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2023 0162 002B     		cmp	r3, #0
 2024 0164 48D1     		bne	.L81
 2025              	.LBB56:
 2026              		.loc 1 2204 9 is_stmt 0 discriminator 1
 2027 0166 7C68     		ldr	r4, [r7, #4]
 2028 0168 7B68     		ldr	r3, [r7, #4]
 2029 016a B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2030 016e 9BB2     		uxth	r3, r3
 2031 0170 1C44     		add	r4, r4, r3
 2032 0172 3B68     		ldr	r3, [r7]
 2033 0174 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2034 0176 DB00     		lsls	r3, r3, #3
ARM GAS  /tmp/ccPzcOpE.s 			page 75


 2035 0178 2344     		add	r3, r3, r4
 2036 017a 03F20243 		addw	r3, r3, #1026
 2037 017e 1C46     		mov	r4, r3
 2038              	.LBB57:
 2039 0180 BB6A     		ldr	r3, [r7, #40]
 2040 0182 002B     		cmp	r3, #0
 2041 0184 0ED1     		bne	.L82
 2042              		.loc 1 2204 9 discriminator 3
 2043 0186 2388     		ldrh	r3, [r4]	@ movhi
 2044 0188 9BB2     		uxth	r3, r3
 2045 018a 23F4F843 		bic	r3, r3, #31744
 2046 018e 9BB2     		uxth	r3, r3
 2047 0190 2380     		strh	r3, [r4]	@ movhi
 2048 0192 2388     		ldrh	r3, [r4]	@ movhi
 2049 0194 9BB2     		uxth	r3, r3
 2050 0196 6FEA4343 		mvn	r3, r3, lsl #17
 2051 019a 6FEA5343 		mvn	r3, r3, lsr #17
 2052 019e 9BB2     		uxth	r3, r3
 2053 01a0 2380     		strh	r3, [r4]	@ movhi
 2054 01a2 3DE0     		b	.L83
 2055              	.L82:
 2056              		.loc 1 2204 9 discriminator 4
 2057 01a4 BB6A     		ldr	r3, [r7, #40]
 2058 01a6 3E2B     		cmp	r3, #62
 2059 01a8 10D8     		bhi	.L84
 2060              		.loc 1 2204 9 discriminator 5
 2061 01aa BB6A     		ldr	r3, [r7, #40]
 2062 01ac 5B08     		lsrs	r3, r3, #1
 2063 01ae 3B62     		str	r3, [r7, #32]
 2064 01b0 BB6A     		ldr	r3, [r7, #40]
 2065 01b2 03F00103 		and	r3, r3, #1
 2066 01b6 002B     		cmp	r3, #0
 2067 01b8 02D0     		beq	.L85
 2068              		.loc 1 2204 9 discriminator 7
 2069 01ba 3B6A     		ldr	r3, [r7, #32]
 2070 01bc 0133     		adds	r3, r3, #1
 2071 01be 3B62     		str	r3, [r7, #32]
 2072              	.L85:
 2073              		.loc 1 2204 9 discriminator 9
 2074 01c0 3B6A     		ldr	r3, [r7, #32]
 2075 01c2 9BB2     		uxth	r3, r3
 2076 01c4 9B02     		lsls	r3, r3, #10
 2077 01c6 9BB2     		uxth	r3, r3
 2078 01c8 2380     		strh	r3, [r4]	@ movhi
 2079 01ca 29E0     		b	.L83
 2080              	.L84:
 2081              		.loc 1 2204 9 discriminator 6
 2082 01cc BB6A     		ldr	r3, [r7, #40]
 2083 01ce 5B09     		lsrs	r3, r3, #5
 2084 01d0 3B62     		str	r3, [r7, #32]
 2085 01d2 BB6A     		ldr	r3, [r7, #40]
 2086 01d4 03F01F03 		and	r3, r3, #31
 2087 01d8 002B     		cmp	r3, #0
 2088 01da 02D1     		bne	.L86
 2089              		.loc 1 2204 9 discriminator 10
 2090 01dc 3B6A     		ldr	r3, [r7, #32]
 2091 01de 013B     		subs	r3, r3, #1
ARM GAS  /tmp/ccPzcOpE.s 			page 76


 2092 01e0 3B62     		str	r3, [r7, #32]
 2093              	.L86:
 2094              		.loc 1 2204 9 discriminator 12
 2095 01e2 3B6A     		ldr	r3, [r7, #32]
 2096 01e4 9BB2     		uxth	r3, r3
 2097 01e6 9B02     		lsls	r3, r3, #10
 2098 01e8 9BB2     		uxth	r3, r3
 2099 01ea 6FEA4343 		mvn	r3, r3, lsl #17
 2100 01ee 6FEA5343 		mvn	r3, r3, lsr #17
 2101 01f2 9BB2     		uxth	r3, r3
 2102 01f4 2380     		strh	r3, [r4]	@ movhi
 2103 01f6 13E0     		b	.L83
 2104              	.L81:
 2105              	.LBE57:
 2106              	.LBE56:
 2107              		.loc 1 2204 9 discriminator 2
 2108 01f8 3B68     		ldr	r3, [r7]
 2109 01fa 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2110 01fc 012B     		cmp	r3, #1
 2111 01fe 0FD1     		bne	.L83
 2112              	.LBB58:
 2113              		.loc 1 2204 9 discriminator 13
 2114 0200 7C68     		ldr	r4, [r7, #4]
 2115 0202 7B68     		ldr	r3, [r7, #4]
 2116 0204 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2117 0208 9BB2     		uxth	r3, r3
 2118 020a 1C44     		add	r4, r4, r3
 2119 020c 3B68     		ldr	r3, [r7]
 2120 020e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2121 0210 DB00     		lsls	r3, r3, #3
 2122 0212 2344     		add	r3, r3, r4
 2123 0214 03F20243 		addw	r3, r3, #1026
 2124 0218 1C46     		mov	r4, r3
 2125 021a BB6A     		ldr	r3, [r7, #40]
 2126 021c 9BB2     		uxth	r3, r3
 2127 021e 2380     		strh	r3, [r4]	@ movhi
 2128              	.L83:
 2129              	.LBE58:
2205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         pmabuffer = ep->pmaaddr0;
 2130              		.loc 1 2205 19 is_stmt 1
 2131 0220 3B68     		ldr	r3, [r7]
 2132 0222 1B89     		ldrh	r3, [r3, #8]	@ movhi
 2133 0224 FB85     		strh	r3, [r7, #46]	@ movhi
 2134              	.L80:
2206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
2207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       USB_WritePMA(USBx, ep->xfer_buff, pmabuffer, (uint16_t)len);
 2135              		.loc 1 2207 7
 2136 0226 3B68     		ldr	r3, [r7]
 2137 0228 5969     		ldr	r1, [r3, #20]
 2138 022a BB6A     		ldr	r3, [r7, #40]
 2139 022c 9BB2     		uxth	r3, r3
 2140 022e FA8D     		ldrh	r2, [r7, #46]
 2141 0230 7868     		ldr	r0, [r7, #4]
 2142 0232 FFF7FEFF 		bl	USB_WritePMA
2208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_FreeUserBuffer(USBx, ep->num, ep->is_in);
 2143              		.loc 1 2208 7
 2144 0236 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccPzcOpE.s 			page 77


 2145 0238 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2146 023a 002B     		cmp	r3, #0
 2147 023c 15D1     		bne	.L87
 2148              	.LBB59:
 2149              		.loc 1 2208 7 is_stmt 0 discriminator 1
 2150 023e 7A68     		ldr	r2, [r7, #4]
 2151 0240 3B68     		ldr	r3, [r7]
 2152 0242 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2153 0244 9B00     		lsls	r3, r3, #2
 2154 0246 1344     		add	r3, r3, r2
 2155 0248 1B88     		ldrh	r3, [r3]	@ movhi
 2156 024a 9BB2     		uxth	r3, r3
 2157 024c 23F4E043 		bic	r3, r3, #28672
 2158 0250 23F07003 		bic	r3, r3, #112
 2159 0254 9CB2     		uxth	r4, r3
 2160 0256 7A68     		ldr	r2, [r7, #4]
 2161 0258 3B68     		ldr	r3, [r7]
 2162 025a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2163 025c 9B00     		lsls	r3, r3, #2
 2164 025e 1A44     		add	r2, r2, r3
 2165 0260 9A4B     		ldr	r3, .L109
 2166 0262 2343     		orrs	r3, r3, r4
 2167 0264 9BB2     		uxth	r3, r3
 2168 0266 1380     		strh	r3, [r2]	@ movhi
 2169              	.LBE59:
 2170 0268 18E0     		b	.L72
 2171              	.L87:
 2172              		.loc 1 2208 7 discriminator 2
 2173 026a 3B68     		ldr	r3, [r7]
 2174 026c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2175 026e 012B     		cmp	r3, #1
 2176 0270 14D1     		bne	.L72
 2177              	.LBB60:
 2178              		.loc 1 2208 7 discriminator 3
 2179 0272 7A68     		ldr	r2, [r7, #4]
 2180 0274 3B68     		ldr	r3, [r7]
 2181 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2182 0278 9B00     		lsls	r3, r3, #2
 2183 027a 1344     		add	r3, r3, r2
 2184 027c 1B88     		ldrh	r3, [r3]	@ movhi
 2185 027e 9BB2     		uxth	r3, r3
 2186 0280 23F4E043 		bic	r3, r3, #28672
 2187 0284 23F07003 		bic	r3, r3, #112
 2188 0288 9CB2     		uxth	r4, r3
 2189 028a 7A68     		ldr	r2, [r7, #4]
 2190 028c 3B68     		ldr	r3, [r7]
 2191 028e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2192 0290 9B00     		lsls	r3, r3, #2
 2193 0292 1A44     		add	r2, r2, r3
 2194 0294 8E4B     		ldr	r3, .L109+4
 2195 0296 2343     		orrs	r3, r3, r4
 2196 0298 9BB2     		uxth	r3, r3
 2197 029a 1380     		strh	r3, [r2]	@ movhi
 2198              	.L72:
 2199              	.LBE60:
 2200              	.LBB61:
2209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
ARM GAS  /tmp/ccPzcOpE.s 			page 78


2210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_VALID);
 2201              		.loc 1 2211 5 is_stmt 1
 2202 029c 7A68     		ldr	r2, [r7, #4]
 2203 029e 3B68     		ldr	r3, [r7]
 2204 02a0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2205 02a2 9B00     		lsls	r3, r3, #2
 2206 02a4 1344     		add	r3, r3, r2
 2207 02a6 1B88     		ldrh	r3, [r3]	@ movhi
 2208 02a8 9BB2     		uxth	r3, r3
 2209 02aa 23F4E043 		bic	r3, r3, #28672
 2210 02ae 23F04003 		bic	r3, r3, #64
 2211 02b2 9CB2     		uxth	r4, r3
 2212 02b4 84F01003 		eor	r3, r4, #16
 2213 02b8 9CB2     		uxth	r4, r3
 2214 02ba 84F02003 		eor	r3, r4, #32
 2215 02be 9CB2     		uxth	r4, r3
 2216 02c0 7A68     		ldr	r2, [r7, #4]
 2217 02c2 3B68     		ldr	r3, [r7]
 2218 02c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2219 02c6 9B00     		lsls	r3, r3, #2
 2220 02c8 1A44     		add	r2, r2, r3
 2221 02ca 824B     		ldr	r3, .L109+8
 2222 02cc 2343     		orrs	r3, r3, r4
 2223 02ce 9BB2     		uxth	r3, r3
 2224 02d0 1380     		strh	r3, [r2]	@ movhi
 2225              	.LBE61:
 2226 02d2 46E1     		b	.L88
 2227              	.L68:
2212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else /* OUT endpoint */
2214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* Multi packet transfer*/
2216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->xfer_len > ep->maxpacket)
 2228              		.loc 1 2216 11
 2229 02d4 3B68     		ldr	r3, [r7]
 2230 02d6 9A69     		ldr	r2, [r3, #24]
 2231              		.loc 1 2216 26
 2232 02d8 3B68     		ldr	r3, [r7]
 2233 02da 1B69     		ldr	r3, [r3, #16]
 2234              		.loc 1 2216 8
 2235 02dc 9A42     		cmp	r2, r3
 2236 02de 09D9     		bls	.L89
2217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       len = ep->maxpacket;
 2237              		.loc 1 2218 11
 2238 02e0 3B68     		ldr	r3, [r7]
 2239 02e2 1B69     		ldr	r3, [r3, #16]
 2240 02e4 BB62     		str	r3, [r7, #40]
2219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       ep->xfer_len -= len;
 2241              		.loc 1 2219 20
 2242 02e6 3B68     		ldr	r3, [r7]
 2243 02e8 9A69     		ldr	r2, [r3, #24]
 2244 02ea BB6A     		ldr	r3, [r7, #40]
 2245 02ec D21A     		subs	r2, r2, r3
 2246 02ee 3B68     		ldr	r3, [r7]
 2247 02f0 9A61     		str	r2, [r3, #24]
ARM GAS  /tmp/ccPzcOpE.s 			page 79


 2248 02f2 05E0     		b	.L90
 2249              	.L89:
2220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       len = ep->xfer_len;
 2250              		.loc 1 2223 11
 2251 02f4 3B68     		ldr	r3, [r7]
 2252 02f6 9B69     		ldr	r3, [r3, #24]
 2253 02f8 BB62     		str	r3, [r7, #40]
2224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       ep->xfer_len = 0U;
 2254              		.loc 1 2224 20
 2255 02fa 3B68     		ldr	r3, [r7]
 2256 02fc 0022     		movs	r2, #0
 2257 02fe 9A61     		str	r2, [r3, #24]
 2258              	.L90:
2225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* configure and validate Rx endpoint */
2228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->doublebuffer == 0U)
 2259              		.loc 1 2228 11
 2260 0300 3B68     		ldr	r3, [r7]
 2261 0302 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 2262              		.loc 1 2228 8
 2263 0304 002B     		cmp	r3, #0
 2264 0306 48D1     		bne	.L91
 2265              	.LBB62:
2229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /*Set RX buffer count*/
2231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_CNT(USBx, ep->num, len);
 2266              		.loc 1 2231 7
 2267 0308 7C68     		ldr	r4, [r7, #4]
 2268 030a 7B68     		ldr	r3, [r7, #4]
 2269 030c B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2270 0310 9BB2     		uxth	r3, r3
 2271 0312 1C44     		add	r4, r4, r3
 2272 0314 3B68     		ldr	r3, [r7]
 2273 0316 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2274 0318 DB00     		lsls	r3, r3, #3
 2275 031a 2344     		add	r3, r3, r4
 2276 031c 03F20643 		addw	r3, r3, #1030
 2277 0320 1C46     		mov	r4, r3
 2278              	.LBB63:
 2279 0322 BB6A     		ldr	r3, [r7, #40]
 2280 0324 002B     		cmp	r3, #0
 2281 0326 0ED1     		bne	.L92
 2282              		.loc 1 2231 7 is_stmt 0 discriminator 1
 2283 0328 2388     		ldrh	r3, [r4]	@ movhi
 2284 032a 9BB2     		uxth	r3, r3
 2285 032c 23F4F843 		bic	r3, r3, #31744
 2286 0330 9BB2     		uxth	r3, r3
 2287 0332 2380     		strh	r3, [r4]	@ movhi
 2288 0334 2388     		ldrh	r3, [r4]	@ movhi
 2289 0336 9BB2     		uxth	r3, r3
 2290 0338 6FEA4343 		mvn	r3, r3, lsl #17
 2291 033c 6FEA5343 		mvn	r3, r3, lsr #17
 2292 0340 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccPzcOpE.s 			page 80


 2293 0342 2380     		strh	r3, [r4]	@ movhi
 2294 0344 F2E0     		b	.L93
 2295              	.L92:
 2296              		.loc 1 2231 7 discriminator 2
 2297 0346 BB6A     		ldr	r3, [r7, #40]
 2298 0348 3E2B     		cmp	r3, #62
 2299 034a 10D8     		bhi	.L94
 2300              		.loc 1 2231 7 discriminator 3
 2301 034c BB6A     		ldr	r3, [r7, #40]
 2302 034e 5B08     		lsrs	r3, r3, #1
 2303 0350 FB61     		str	r3, [r7, #28]
 2304 0352 BB6A     		ldr	r3, [r7, #40]
 2305 0354 03F00103 		and	r3, r3, #1
 2306 0358 002B     		cmp	r3, #0
 2307 035a 02D0     		beq	.L95
 2308              		.loc 1 2231 7 discriminator 5
 2309 035c FB69     		ldr	r3, [r7, #28]
 2310 035e 0133     		adds	r3, r3, #1
 2311 0360 FB61     		str	r3, [r7, #28]
 2312              	.L95:
 2313              		.loc 1 2231 7 discriminator 7
 2314 0362 FB69     		ldr	r3, [r7, #28]
 2315 0364 9BB2     		uxth	r3, r3
 2316 0366 9B02     		lsls	r3, r3, #10
 2317 0368 9BB2     		uxth	r3, r3
 2318 036a 2380     		strh	r3, [r4]	@ movhi
 2319 036c DEE0     		b	.L93
 2320              	.L94:
 2321              		.loc 1 2231 7 discriminator 4
 2322 036e BB6A     		ldr	r3, [r7, #40]
 2323 0370 5B09     		lsrs	r3, r3, #5
 2324 0372 FB61     		str	r3, [r7, #28]
 2325 0374 BB6A     		ldr	r3, [r7, #40]
 2326 0376 03F01F03 		and	r3, r3, #31
 2327 037a 002B     		cmp	r3, #0
 2328 037c 02D1     		bne	.L96
 2329              		.loc 1 2231 7 discriminator 8
 2330 037e FB69     		ldr	r3, [r7, #28]
 2331 0380 013B     		subs	r3, r3, #1
 2332 0382 FB61     		str	r3, [r7, #28]
 2333              	.L96:
 2334              		.loc 1 2231 7 discriminator 10
 2335 0384 FB69     		ldr	r3, [r7, #28]
 2336 0386 9BB2     		uxth	r3, r3
 2337 0388 9B02     		lsls	r3, r3, #10
 2338 038a 9BB2     		uxth	r3, r3
 2339 038c 6FEA4343 		mvn	r3, r3, lsl #17
 2340 0390 6FEA5343 		mvn	r3, r3, lsr #17
 2341 0394 9BB2     		uxth	r3, r3
 2342 0396 2380     		strh	r3, [r4]	@ movhi
 2343 0398 C8E0     		b	.L93
 2344              	.L91:
 2345              	.LBE63:
 2346              	.LBE62:
2232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
ARM GAS  /tmp/ccPzcOpE.s 			page 81


2235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /*Set the Double buffer counter*/
2236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_DBUF_CNT(USBx, ep->num, ep->is_in, len);
 2347              		.loc 1 2236 7 is_stmt 1
 2348 039a 3B68     		ldr	r3, [r7]
 2349 039c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2350 039e 002B     		cmp	r3, #0
 2351 03a0 48D1     		bne	.L97
 2352              	.LBB64:
 2353              		.loc 1 2236 7 is_stmt 0 discriminator 1
 2354 03a2 7C68     		ldr	r4, [r7, #4]
 2355 03a4 7B68     		ldr	r3, [r7, #4]
 2356 03a6 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2357 03aa 9BB2     		uxth	r3, r3
 2358 03ac 1C44     		add	r4, r4, r3
 2359 03ae 3B68     		ldr	r3, [r7]
 2360 03b0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2361 03b2 DB00     		lsls	r3, r3, #3
 2362 03b4 2344     		add	r3, r3, r4
 2363 03b6 03F20243 		addw	r3, r3, #1026
 2364 03ba 1C46     		mov	r4, r3
 2365              	.LBB65:
 2366 03bc BB6A     		ldr	r3, [r7, #40]
 2367 03be 002B     		cmp	r3, #0
 2368 03c0 0ED1     		bne	.L98
 2369              		.loc 1 2236 7 discriminator 3
 2370 03c2 2388     		ldrh	r3, [r4]	@ movhi
 2371 03c4 9BB2     		uxth	r3, r3
 2372 03c6 23F4F843 		bic	r3, r3, #31744
 2373 03ca 9BB2     		uxth	r3, r3
 2374 03cc 2380     		strh	r3, [r4]	@ movhi
 2375 03ce 2388     		ldrh	r3, [r4]	@ movhi
 2376 03d0 9BB2     		uxth	r3, r3
 2377 03d2 6FEA4343 		mvn	r3, r3, lsl #17
 2378 03d6 6FEA5343 		mvn	r3, r3, lsr #17
 2379 03da 9BB2     		uxth	r3, r3
 2380 03dc 2380     		strh	r3, [r4]	@ movhi
 2381 03de 3DE0     		b	.L99
 2382              	.L98:
 2383              		.loc 1 2236 7 discriminator 4
 2384 03e0 BB6A     		ldr	r3, [r7, #40]
 2385 03e2 3E2B     		cmp	r3, #62
 2386 03e4 10D8     		bhi	.L100
 2387              		.loc 1 2236 7 discriminator 5
 2388 03e6 BB6A     		ldr	r3, [r7, #40]
 2389 03e8 5B08     		lsrs	r3, r3, #1
 2390 03ea BB61     		str	r3, [r7, #24]
 2391 03ec BB6A     		ldr	r3, [r7, #40]
 2392 03ee 03F00103 		and	r3, r3, #1
 2393 03f2 002B     		cmp	r3, #0
 2394 03f4 02D0     		beq	.L101
 2395              		.loc 1 2236 7 discriminator 7
 2396 03f6 BB69     		ldr	r3, [r7, #24]
 2397 03f8 0133     		adds	r3, r3, #1
 2398 03fa BB61     		str	r3, [r7, #24]
 2399              	.L101:
 2400              		.loc 1 2236 7 discriminator 9
 2401 03fc BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/ccPzcOpE.s 			page 82


 2402 03fe 9BB2     		uxth	r3, r3
 2403 0400 9B02     		lsls	r3, r3, #10
 2404 0402 9BB2     		uxth	r3, r3
 2405 0404 2380     		strh	r3, [r4]	@ movhi
 2406 0406 29E0     		b	.L99
 2407              	.L100:
 2408              		.loc 1 2236 7 discriminator 6
 2409 0408 BB6A     		ldr	r3, [r7, #40]
 2410 040a 5B09     		lsrs	r3, r3, #5
 2411 040c BB61     		str	r3, [r7, #24]
 2412 040e BB6A     		ldr	r3, [r7, #40]
 2413 0410 03F01F03 		and	r3, r3, #31
 2414 0414 002B     		cmp	r3, #0
 2415 0416 02D1     		bne	.L102
 2416              		.loc 1 2236 7 discriminator 10
 2417 0418 BB69     		ldr	r3, [r7, #24]
 2418 041a 013B     		subs	r3, r3, #1
 2419 041c BB61     		str	r3, [r7, #24]
 2420              	.L102:
 2421              		.loc 1 2236 7 discriminator 12
 2422 041e BB69     		ldr	r3, [r7, #24]
 2423 0420 9BB2     		uxth	r3, r3
 2424 0422 9B02     		lsls	r3, r3, #10
 2425 0424 9BB2     		uxth	r3, r3
 2426 0426 6FEA4343 		mvn	r3, r3, lsl #17
 2427 042a 6FEA5343 		mvn	r3, r3, lsr #17
 2428 042e 9BB2     		uxth	r3, r3
 2429 0430 2380     		strh	r3, [r4]	@ movhi
 2430 0432 13E0     		b	.L99
 2431              	.L97:
 2432              	.LBE65:
 2433              	.LBE64:
 2434              		.loc 1 2236 7 discriminator 2
 2435 0434 3B68     		ldr	r3, [r7]
 2436 0436 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2437 0438 012B     		cmp	r3, #1
 2438 043a 0FD1     		bne	.L99
 2439              	.LBB66:
 2440              		.loc 1 2236 7 discriminator 13
 2441 043c 7C68     		ldr	r4, [r7, #4]
 2442 043e 7B68     		ldr	r3, [r7, #4]
 2443 0440 B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2444 0444 9BB2     		uxth	r3, r3
 2445 0446 1C44     		add	r4, r4, r3
 2446 0448 3B68     		ldr	r3, [r7]
 2447 044a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2448 044c DB00     		lsls	r3, r3, #3
 2449 044e 2344     		add	r3, r3, r4
 2450 0450 03F20243 		addw	r3, r3, #1026
 2451 0454 1C46     		mov	r4, r3
 2452 0456 BB6A     		ldr	r3, [r7, #40]
 2453 0458 9BB2     		uxth	r3, r3
 2454 045a 2380     		strh	r3, [r4]	@ movhi
 2455              	.L99:
 2456              	.LBE66:
 2457              	.LBB67:
 2458              		.loc 1 2236 7 discriminator 15
ARM GAS  /tmp/ccPzcOpE.s 			page 83


 2459 045c 7C68     		ldr	r4, [r7, #4]
 2460 045e 3B68     		ldr	r3, [r7]
 2461 0460 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2462 0462 002B     		cmp	r3, #0
 2463 0464 4ED1     		bne	.L103
 2464              	.LBB68:
 2465              		.loc 1 2236 7 discriminator 16
 2466 0466 7C68     		ldr	r4, [r7, #4]
 2467 0468 7B68     		ldr	r3, [r7, #4]
 2468 046a B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2469 046e 9BB2     		uxth	r3, r3
 2470 0470 1C44     		add	r4, r4, r3
 2471 0472 3B68     		ldr	r3, [r7]
 2472 0474 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2473 0476 DB00     		lsls	r3, r3, #3
 2474 0478 2344     		add	r3, r3, r4
 2475 047a 03F20643 		addw	r3, r3, #1030
 2476 047e 1C46     		mov	r4, r3
 2477              	.LBB69:
 2478 0480 BB6A     		ldr	r3, [r7, #40]
 2479 0482 002B     		cmp	r3, #0
 2480 0484 0ED1     		bne	.L104
 2481              		.loc 1 2236 7 discriminator 18
 2482 0486 2388     		ldrh	r3, [r4]	@ movhi
 2483 0488 9BB2     		uxth	r3, r3
 2484 048a 23F4F843 		bic	r3, r3, #31744
 2485 048e 9BB2     		uxth	r3, r3
 2486 0490 2380     		strh	r3, [r4]	@ movhi
 2487 0492 2388     		ldrh	r3, [r4]	@ movhi
 2488 0494 9BB2     		uxth	r3, r3
 2489 0496 6FEA4343 		mvn	r3, r3, lsl #17
 2490 049a 6FEA5343 		mvn	r3, r3, lsr #17
 2491 049e 9BB2     		uxth	r3, r3
 2492 04a0 2380     		strh	r3, [r4]	@ movhi
 2493 04a2 43E0     		b	.L93
 2494              	.L104:
 2495              		.loc 1 2236 7 discriminator 19
 2496 04a4 BB6A     		ldr	r3, [r7, #40]
 2497 04a6 3E2B     		cmp	r3, #62
 2498 04a8 16D8     		bhi	.L105
 2499              		.loc 1 2236 7 discriminator 20
 2500 04aa BB6A     		ldr	r3, [r7, #40]
 2501 04ac 5B08     		lsrs	r3, r3, #1
 2502 04ae 7B61     		str	r3, [r7, #20]
 2503 04b0 BB6A     		ldr	r3, [r7, #40]
 2504 04b2 03F00103 		and	r3, r3, #1
 2505 04b6 002B     		cmp	r3, #0
 2506 04b8 02D0     		beq	.L106
 2507              		.loc 1 2236 7 discriminator 22
 2508 04ba 7B69     		ldr	r3, [r7, #20]
 2509 04bc 0133     		adds	r3, r3, #1
 2510 04be 7B61     		str	r3, [r7, #20]
 2511              	.L106:
 2512              		.loc 1 2236 7 discriminator 24
 2513 04c0 7B69     		ldr	r3, [r7, #20]
 2514 04c2 9BB2     		uxth	r3, r3
 2515 04c4 9B02     		lsls	r3, r3, #10
ARM GAS  /tmp/ccPzcOpE.s 			page 84


 2516 04c6 9BB2     		uxth	r3, r3
 2517 04c8 2380     		strh	r3, [r4]	@ movhi
 2518 04ca 2FE0     		b	.L93
 2519              	.L110:
 2520              		.align	2
 2521              	.L109:
 2522 04cc C080FFFF 		.word	-32576
 2523 04d0 80C0FFFF 		.word	-16256
 2524 04d4 8080FFFF 		.word	-32640
 2525              	.L105:
 2526              		.loc 1 2236 7 discriminator 21
 2527 04d8 BB6A     		ldr	r3, [r7, #40]
 2528 04da 5B09     		lsrs	r3, r3, #5
 2529 04dc 7B61     		str	r3, [r7, #20]
 2530 04de BB6A     		ldr	r3, [r7, #40]
 2531 04e0 03F01F03 		and	r3, r3, #31
 2532 04e4 002B     		cmp	r3, #0
 2533 04e6 02D1     		bne	.L107
 2534              		.loc 1 2236 7 discriminator 25
 2535 04e8 7B69     		ldr	r3, [r7, #20]
 2536 04ea 013B     		subs	r3, r3, #1
 2537 04ec 7B61     		str	r3, [r7, #20]
 2538              	.L107:
 2539              		.loc 1 2236 7 discriminator 27
 2540 04ee 7B69     		ldr	r3, [r7, #20]
 2541 04f0 9BB2     		uxth	r3, r3
 2542 04f2 9B02     		lsls	r3, r3, #10
 2543 04f4 9BB2     		uxth	r3, r3
 2544 04f6 6FEA4343 		mvn	r3, r3, lsl #17
 2545 04fa 6FEA5343 		mvn	r3, r3, lsr #17
 2546 04fe 9BB2     		uxth	r3, r3
 2547 0500 2380     		strh	r3, [r4]	@ movhi
 2548 0502 13E0     		b	.L93
 2549              	.L103:
 2550              	.LBE69:
 2551              	.LBE68:
 2552              		.loc 1 2236 7 discriminator 17
 2553 0504 3B68     		ldr	r3, [r7]
 2554 0506 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2555 0508 012B     		cmp	r3, #1
 2556 050a 0FD1     		bne	.L93
 2557              		.loc 1 2236 7 discriminator 28
 2558 050c 7B68     		ldr	r3, [r7, #4]
 2559 050e B3F85030 		ldrh	r3, [r3, #80]	@ movhi
 2560 0512 9BB2     		uxth	r3, r3
 2561 0514 1C44     		add	r4, r4, r3
 2562 0516 3B68     		ldr	r3, [r7]
 2563 0518 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2564 051a DB00     		lsls	r3, r3, #3
 2565 051c 2344     		add	r3, r3, r4
 2566 051e 03F20643 		addw	r3, r3, #1030
 2567 0522 3B61     		str	r3, [r7, #16]
 2568 0524 BB6A     		ldr	r3, [r7, #40]
 2569 0526 9AB2     		uxth	r2, r3
 2570 0528 3B69     		ldr	r3, [r7, #16]
 2571 052a 1A80     		strh	r2, [r3]	@ movhi
 2572              	.L93:
ARM GAS  /tmp/ccPzcOpE.s 			page 85


 2573              	.LBE67:
 2574              	.LBB70:
2237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 2575              		.loc 1 2239 5 is_stmt 1
 2576 052c 7A68     		ldr	r2, [r7, #4]
 2577 052e 3B68     		ldr	r3, [r7]
 2578 0530 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2579 0532 9B00     		lsls	r3, r3, #2
 2580 0534 1344     		add	r3, r3, r2
 2581 0536 1B88     		ldrh	r3, [r3]	@ movhi
 2582 0538 9BB2     		uxth	r3, r3
 2583 053a 23F48043 		bic	r3, r3, #16384
 2584 053e 23F07003 		bic	r3, r3, #112
 2585 0542 9CB2     		uxth	r4, r3
 2586 0544 84F48053 		eor	r3, r4, #4096
 2587 0548 9CB2     		uxth	r4, r3
 2588 054a 84F40053 		eor	r3, r4, #8192
 2589 054e 9CB2     		uxth	r4, r3
 2590 0550 7A68     		ldr	r2, [r7, #4]
 2591 0552 3B68     		ldr	r3, [r7]
 2592 0554 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2593 0556 9B00     		lsls	r3, r3, #2
 2594 0558 1A44     		add	r2, r2, r3
 2595 055a 044B     		ldr	r3, .L111
 2596 055c 2343     		orrs	r3, r3, r4
 2597 055e 9BB2     		uxth	r3, r3
 2598 0560 1380     		strh	r3, [r2]	@ movhi
 2599              	.L88:
 2600              	.LBE70:
2240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 2601              		.loc 1 2242 10
 2602 0562 0023     		movs	r3, #0
2243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 2603              		.loc 1 2243 1
 2604 0564 1846     		mov	r0, r3
 2605 0566 3437     		adds	r7, r7, #52
 2606              	.LCFI67:
 2607              		.cfi_def_cfa_offset 12
 2608 0568 BD46     		mov	sp, r7
 2609              	.LCFI68:
 2610              		.cfi_def_cfa_register 13
 2611              		@ sp needed
 2612 056a 90BD     		pop	{r4, r7, pc}
 2613              	.L112:
 2614              		.align	2
 2615              	.L111:
 2616 056c 8080FFFF 		.word	-32640
 2617              		.cfi_endproc
 2618              	.LFE140:
 2620              		.section	.text.USB_WritePacket,"ax",%progbits
 2621              		.align	1
 2622              		.global	USB_WritePacket
 2623              		.syntax unified
ARM GAS  /tmp/ccPzcOpE.s 			page 86


 2624              		.thumb
 2625              		.thumb_func
 2626              		.fpu fpv4-sp-d16
 2628              	USB_WritePacket:
 2629              	.LFB141:
2244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_WritePacket : Writes a packet into the Tx FIFO associated
2247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         with the EP/channel
2248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  src :  pointer to source buffer
2250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ch_ep_num : endpoint or host channel number
2251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  len : Number of bytes to write
2252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_WritePacket(USB_TypeDef *USBx, uint8_t *src, uint8_t ch_ep_num, uint16_t len)
2255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 2630              		.loc 1 2255 1
 2631              		.cfi_startproc
 2632              		@ args = 0, pretend = 0, frame = 16
 2633              		@ frame_needed = 1, uses_anonymous_args = 0
 2634              		@ link register save eliminated.
 2635 0000 80B4     		push	{r7}
 2636              	.LCFI69:
 2637              		.cfi_def_cfa_offset 4
 2638              		.cfi_offset 7, -4
 2639 0002 85B0     		sub	sp, sp, #20
 2640              	.LCFI70:
 2641              		.cfi_def_cfa_offset 24
 2642 0004 00AF     		add	r7, sp, #0
 2643              	.LCFI71:
 2644              		.cfi_def_cfa_register 7
 2645 0006 F860     		str	r0, [r7, #12]
 2646 0008 B960     		str	r1, [r7, #8]
 2647 000a 1146     		mov	r1, r2
 2648 000c 1A46     		mov	r2, r3
 2649 000e 0B46     		mov	r3, r1
 2650 0010 FB71     		strb	r3, [r7, #7]
 2651 0012 1346     		mov	r3, r2	@ movhi
 2652 0014 BB80     		strh	r3, [r7, #4]	@ movhi
2256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
2258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(src);
2259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(ch_ep_num);
2260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(len);
2261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
2262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
2263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
2265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 2653              		.loc 1 2265 10
 2654 0016 0023     		movs	r3, #0
2266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 2655              		.loc 1 2266 1
 2656 0018 1846     		mov	r0, r3
 2657 001a 1437     		adds	r7, r7, #20
 2658              	.LCFI72:
ARM GAS  /tmp/ccPzcOpE.s 			page 87


 2659              		.cfi_def_cfa_offset 4
 2660 001c BD46     		mov	sp, r7
 2661              	.LCFI73:
 2662              		.cfi_def_cfa_register 13
 2663              		@ sp needed
 2664 001e 5DF8047B 		ldr	r7, [sp], #4
 2665              	.LCFI74:
 2666              		.cfi_restore 7
 2667              		.cfi_def_cfa_offset 0
 2668 0022 7047     		bx	lr
 2669              		.cfi_endproc
 2670              	.LFE141:
 2672              		.section	.text.USB_ReadPacket,"ax",%progbits
 2673              		.align	1
 2674              		.global	USB_ReadPacket
 2675              		.syntax unified
 2676              		.thumb
 2677              		.thumb_func
 2678              		.fpu fpv4-sp-d16
 2680              	USB_ReadPacket:
 2681              	.LFB142:
2267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ReadPacket : read a packet from the Tx FIFO associated
2270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *         with the EP/channel
2271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  dest : destination pointer
2273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  len : Number of bytes to read
2274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval pointer to destination buffer
2275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** void *USB_ReadPacket(USB_TypeDef *USBx, uint8_t *dest, uint16_t len)
2277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 2682              		.loc 1 2277 1
 2683              		.cfi_startproc
 2684              		@ args = 0, pretend = 0, frame = 16
 2685              		@ frame_needed = 1, uses_anonymous_args = 0
 2686              		@ link register save eliminated.
 2687 0000 80B4     		push	{r7}
 2688              	.LCFI75:
 2689              		.cfi_def_cfa_offset 4
 2690              		.cfi_offset 7, -4
 2691 0002 85B0     		sub	sp, sp, #20
 2692              	.LCFI76:
 2693              		.cfi_def_cfa_offset 24
 2694 0004 00AF     		add	r7, sp, #0
 2695              	.LCFI77:
 2696              		.cfi_def_cfa_register 7
 2697 0006 F860     		str	r0, [r7, #12]
 2698 0008 B960     		str	r1, [r7, #8]
 2699 000a 1346     		mov	r3, r2
 2700 000c FB80     		strh	r3, [r7, #6]	@ movhi
2278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
2280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(dest);
2281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(len);
2282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
2283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
ARM GAS  /tmp/ccPzcOpE.s 			page 88


2284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
2286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return ((void *)NULL);
 2701              		.loc 1 2286 11
 2702 000e 0023     		movs	r3, #0
2287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 2703              		.loc 1 2287 1
 2704 0010 1846     		mov	r0, r3
 2705 0012 1437     		adds	r7, r7, #20
 2706              	.LCFI78:
 2707              		.cfi_def_cfa_offset 4
 2708 0014 BD46     		mov	sp, r7
 2709              	.LCFI79:
 2710              		.cfi_def_cfa_register 13
 2711              		@ sp needed
 2712 0016 5DF8047B 		ldr	r7, [sp], #4
 2713              	.LCFI80:
 2714              		.cfi_restore 7
 2715              		.cfi_def_cfa_offset 0
 2716 001a 7047     		bx	lr
 2717              		.cfi_endproc
 2718              	.LFE142:
 2720              		.section	.text.USB_EPSetStall,"ax",%progbits
 2721              		.align	1
 2722              		.global	USB_EPSetStall
 2723              		.syntax unified
 2724              		.thumb
 2725              		.thumb_func
 2726              		.fpu fpv4-sp-d16
 2728              	USB_EPSetStall:
 2729              	.LFB143:
2288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EPSetStall : set a stall condition over an EP
2291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
2293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EPSetStall(USB_TypeDef *USBx, USB_EPTypeDef *ep)
2296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 2730              		.loc 1 2296 1
 2731              		.cfi_startproc
 2732              		@ args = 0, pretend = 0, frame = 8
 2733              		@ frame_needed = 1, uses_anonymous_args = 0
 2734              		@ link register save eliminated.
 2735 0000 90B4     		push	{r4, r7}
 2736              	.LCFI81:
 2737              		.cfi_def_cfa_offset 8
 2738              		.cfi_offset 4, -8
 2739              		.cfi_offset 7, -4
 2740 0002 82B0     		sub	sp, sp, #8
 2741              	.LCFI82:
 2742              		.cfi_def_cfa_offset 16
 2743 0004 00AF     		add	r7, sp, #0
 2744              	.LCFI83:
 2745              		.cfi_def_cfa_register 7
 2746 0006 7860     		str	r0, [r7, #4]
ARM GAS  /tmp/ccPzcOpE.s 			page 89


 2747 0008 3960     		str	r1, [r7]
2297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->is_in != 0U)
 2748              		.loc 1 2297 9
 2749 000a 3B68     		ldr	r3, [r7]
 2750 000c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2751              		.loc 1 2297 6
 2752 000e 002B     		cmp	r3, #0
 2753 0010 18D0     		beq	.L118
 2754              	.LBB71:
2298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_STALL);
 2755              		.loc 1 2299 5
 2756 0012 7A68     		ldr	r2, [r7, #4]
 2757 0014 3B68     		ldr	r3, [r7]
 2758 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2759 0018 9B00     		lsls	r3, r3, #2
 2760 001a 1344     		add	r3, r3, r2
 2761 001c 1B88     		ldrh	r3, [r3]	@ movhi
 2762 001e 9BB2     		uxth	r3, r3
 2763 0020 23F4E043 		bic	r3, r3, #28672
 2764 0024 23F04003 		bic	r3, r3, #64
 2765 0028 9CB2     		uxth	r4, r3
 2766 002a 84F01003 		eor	r3, r4, #16
 2767 002e 9CB2     		uxth	r4, r3
 2768 0030 7A68     		ldr	r2, [r7, #4]
 2769 0032 3B68     		ldr	r3, [r7]
 2770 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2771 0036 9B00     		lsls	r3, r3, #2
 2772 0038 1A44     		add	r2, r2, r3
 2773 003a 114B     		ldr	r3, .L121
 2774 003c 2343     		orrs	r3, r3, r4
 2775 003e 9BB2     		uxth	r3, r3
 2776 0040 1380     		strh	r3, [r2]	@ movhi
 2777              	.LBE71:
 2778 0042 17E0     		b	.L119
 2779              	.L118:
 2780              	.LBB72:
2300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   else
2302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_STALL);
 2781              		.loc 1 2303 5
 2782 0044 7A68     		ldr	r2, [r7, #4]
 2783 0046 3B68     		ldr	r3, [r7]
 2784 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2785 004a 9B00     		lsls	r3, r3, #2
 2786 004c 1344     		add	r3, r3, r2
 2787 004e 1B88     		ldrh	r3, [r3]	@ movhi
 2788 0050 9BB2     		uxth	r3, r3
 2789 0052 23F48043 		bic	r3, r3, #16384
 2790 0056 23F07003 		bic	r3, r3, #112
 2791 005a 9CB2     		uxth	r4, r3
 2792 005c 84F48053 		eor	r3, r4, #4096
 2793 0060 9CB2     		uxth	r4, r3
 2794 0062 7A68     		ldr	r2, [r7, #4]
 2795 0064 3B68     		ldr	r3, [r7]
 2796 0066 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccPzcOpE.s 			page 90


 2797 0068 9B00     		lsls	r3, r3, #2
 2798 006a 1A44     		add	r2, r2, r3
 2799 006c 044B     		ldr	r3, .L121
 2800 006e 2343     		orrs	r3, r3, r4
 2801 0070 9BB2     		uxth	r3, r3
 2802 0072 1380     		strh	r3, [r2]	@ movhi
 2803              	.L119:
 2804              	.LBE72:
2304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 2805              		.loc 1 2306 10
 2806 0074 0023     		movs	r3, #0
2307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 2807              		.loc 1 2307 1
 2808 0076 1846     		mov	r0, r3
 2809 0078 0837     		adds	r7, r7, #8
 2810              	.LCFI84:
 2811              		.cfi_def_cfa_offset 8
 2812 007a BD46     		mov	sp, r7
 2813              	.LCFI85:
 2814              		.cfi_def_cfa_register 13
 2815              		@ sp needed
 2816 007c 90BC     		pop	{r4, r7}
 2817              	.LCFI86:
 2818              		.cfi_restore 7
 2819              		.cfi_restore 4
 2820              		.cfi_def_cfa_offset 0
 2821 007e 7047     		bx	lr
 2822              	.L122:
 2823              		.align	2
 2824              	.L121:
 2825 0080 8080FFFF 		.word	-32640
 2826              		.cfi_endproc
 2827              	.LFE143:
 2829              		.section	.text.USB_EPClearStall,"ax",%progbits
 2830              		.align	1
 2831              		.global	USB_EPClearStall
 2832              		.syntax unified
 2833              		.thumb
 2834              		.thumb_func
 2835              		.fpu fpv4-sp-d16
 2837              	USB_EPClearStall:
 2838              	.LFB144:
2308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_EPClearStall : Clear a stall condition over an EP
2311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  ep: pointer to endpoint structure
2313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EPClearStall(USB_TypeDef *USBx, USB_EPTypeDef *ep)
2316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 2839              		.loc 1 2316 1
 2840              		.cfi_startproc
 2841              		@ args = 0, pretend = 0, frame = 8
 2842              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccPzcOpE.s 			page 91


 2843              		@ link register save eliminated.
 2844 0000 90B4     		push	{r4, r7}
 2845              	.LCFI87:
 2846              		.cfi_def_cfa_offset 8
 2847              		.cfi_offset 4, -8
 2848              		.cfi_offset 7, -4
 2849 0002 82B0     		sub	sp, sp, #8
 2850              	.LCFI88:
 2851              		.cfi_def_cfa_offset 16
 2852 0004 00AF     		add	r7, sp, #0
 2853              	.LCFI89:
 2854              		.cfi_def_cfa_register 7
 2855 0006 7860     		str	r0, [r7, #4]
 2856 0008 3960     		str	r1, [r7]
2317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (ep->doublebuffer == 0U)
 2857              		.loc 1 2317 9
 2858 000a 3B68     		ldr	r3, [r7]
 2859 000c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 2860              		.loc 1 2317 6
 2861 000e 002B     		cmp	r3, #0
 2862 0010 7DD1     		bne	.L124
2318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     if (ep->is_in != 0U)
 2863              		.loc 1 2319 11
 2864 0012 3B68     		ldr	r3, [r7]
 2865 0014 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2866              		.loc 1 2319 8
 2867 0016 002B     		cmp	r3, #0
 2868 0018 3DD0     		beq	.L125
 2869              	.LBB73:
2320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_TX_DTOG(USBx, ep->num);
 2870              		.loc 1 2321 7
 2871 001a 7A68     		ldr	r2, [r7, #4]
 2872 001c 3B68     		ldr	r3, [r7]
 2873 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2874 0020 9B00     		lsls	r3, r3, #2
 2875 0022 1344     		add	r3, r3, r2
 2876 0024 1B88     		ldrh	r3, [r3]	@ movhi
 2877 0026 9CB2     		uxth	r4, r3
 2878 0028 2346     		mov	r3, r4
 2879 002a 03F04003 		and	r3, r3, #64
 2880 002e 002B     		cmp	r3, #0
 2881 0030 14D0     		beq	.L126
 2882              	.LBB74:
 2883              		.loc 1 2321 7 is_stmt 0 discriminator 1
 2884 0032 7A68     		ldr	r2, [r7, #4]
 2885 0034 3B68     		ldr	r3, [r7]
 2886 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2887 0038 9B00     		lsls	r3, r3, #2
 2888 003a 1344     		add	r3, r3, r2
 2889 003c 1B88     		ldrh	r3, [r3]	@ movhi
 2890 003e 9BB2     		uxth	r3, r3
 2891 0040 23F4E043 		bic	r3, r3, #28672
 2892 0044 23F07003 		bic	r3, r3, #112
 2893 0048 9CB2     		uxth	r4, r3
 2894 004a 7A68     		ldr	r2, [r7, #4]
ARM GAS  /tmp/ccPzcOpE.s 			page 92


 2895 004c 3B68     		ldr	r3, [r7]
 2896 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2897 0050 9B00     		lsls	r3, r3, #2
 2898 0052 1A44     		add	r2, r2, r3
 2899 0054 314B     		ldr	r3, .L129
 2900 0056 2343     		orrs	r3, r3, r4
 2901 0058 9BB2     		uxth	r3, r3
 2902 005a 1380     		strh	r3, [r2]	@ movhi
 2903              	.L126:
 2904              	.LBE74:
 2905              	.LBE73:
2322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       if (ep->type != EP_TYPE_ISOC)
 2906              		.loc 1 2323 13 is_stmt 1
 2907 005c 3B68     		ldr	r3, [r7]
 2908 005e DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
 2909              		.loc 1 2323 10
 2910 0060 012B     		cmp	r3, #1
 2911 0062 54D0     		beq	.L124
 2912              	.LBB75:
2324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       {
2325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         /* Configure NAK status for the Endpoint */
2326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****         PCD_SET_EP_TX_STATUS(USBx, ep->num, USB_EP_TX_NAK);
 2913              		.loc 1 2326 9
 2914 0064 7A68     		ldr	r2, [r7, #4]
 2915 0066 3B68     		ldr	r3, [r7]
 2916 0068 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2917 006a 9B00     		lsls	r3, r3, #2
 2918 006c 1344     		add	r3, r3, r2
 2919 006e 1B88     		ldrh	r3, [r3]	@ movhi
 2920 0070 9BB2     		uxth	r3, r3
 2921 0072 23F4E043 		bic	r3, r3, #28672
 2922 0076 23F04003 		bic	r3, r3, #64
 2923 007a 9CB2     		uxth	r4, r3
 2924 007c 84F02003 		eor	r3, r4, #32
 2925 0080 9CB2     		uxth	r4, r3
 2926 0082 7A68     		ldr	r2, [r7, #4]
 2927 0084 3B68     		ldr	r3, [r7]
 2928 0086 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2929 0088 9B00     		lsls	r3, r3, #2
 2930 008a 1A44     		add	r2, r2, r3
 2931 008c 244B     		ldr	r3, .L129+4
 2932 008e 2343     		orrs	r3, r3, r4
 2933 0090 9BB2     		uxth	r3, r3
 2934 0092 1380     		strh	r3, [r2]	@ movhi
 2935 0094 3BE0     		b	.L124
 2936              	.L125:
 2937              	.LBE75:
 2938              	.LBB76:
2327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       }
2328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     else
2330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     {
2331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_CLEAR_RX_DTOG(USBx, ep->num);
 2939              		.loc 1 2331 7
 2940 0096 7A68     		ldr	r2, [r7, #4]
 2941 0098 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccPzcOpE.s 			page 93


 2942 009a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2943 009c 9B00     		lsls	r3, r3, #2
 2944 009e 1344     		add	r3, r3, r2
 2945 00a0 1B88     		ldrh	r3, [r3]	@ movhi
 2946 00a2 9CB2     		uxth	r4, r3
 2947 00a4 2346     		mov	r3, r4
 2948 00a6 03F48043 		and	r3, r3, #16384
 2949 00aa 002B     		cmp	r3, #0
 2950 00ac 14D0     		beq	.L127
 2951              	.LBB77:
 2952              		.loc 1 2331 7 is_stmt 0 discriminator 1
 2953 00ae 7A68     		ldr	r2, [r7, #4]
 2954 00b0 3B68     		ldr	r3, [r7]
 2955 00b2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2956 00b4 9B00     		lsls	r3, r3, #2
 2957 00b6 1344     		add	r3, r3, r2
 2958 00b8 1B88     		ldrh	r3, [r3]	@ movhi
 2959 00ba 9BB2     		uxth	r3, r3
 2960 00bc 23F4E043 		bic	r3, r3, #28672
 2961 00c0 23F07003 		bic	r3, r3, #112
 2962 00c4 9CB2     		uxth	r4, r3
 2963 00c6 7A68     		ldr	r2, [r7, #4]
 2964 00c8 3B68     		ldr	r3, [r7]
 2965 00ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2966 00cc 9B00     		lsls	r3, r3, #2
 2967 00ce 1A44     		add	r2, r2, r3
 2968 00d0 144B     		ldr	r3, .L129+8
 2969 00d2 2343     		orrs	r3, r3, r4
 2970 00d4 9BB2     		uxth	r3, r3
 2971 00d6 1380     		strh	r3, [r2]	@ movhi
 2972              	.L127:
 2973              	.LBE77:
 2974              	.LBE76:
 2975              	.LBB78:
2332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       /* Configure VALID status for the Endpoint*/
2334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****       PCD_SET_EP_RX_STATUS(USBx, ep->num, USB_EP_RX_VALID);
 2976              		.loc 1 2334 7 is_stmt 1
 2977 00d8 7A68     		ldr	r2, [r7, #4]
 2978 00da 3B68     		ldr	r3, [r7]
 2979 00dc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2980 00de 9B00     		lsls	r3, r3, #2
 2981 00e0 1344     		add	r3, r3, r2
 2982 00e2 1B88     		ldrh	r3, [r3]	@ movhi
 2983 00e4 9BB2     		uxth	r3, r3
 2984 00e6 23F48043 		bic	r3, r3, #16384
 2985 00ea 23F07003 		bic	r3, r3, #112
 2986 00ee 9CB2     		uxth	r4, r3
 2987 00f0 84F48053 		eor	r3, r4, #4096
 2988 00f4 9CB2     		uxth	r4, r3
 2989 00f6 84F40053 		eor	r3, r4, #8192
 2990 00fa 9CB2     		uxth	r4, r3
 2991 00fc 7A68     		ldr	r2, [r7, #4]
 2992 00fe 3B68     		ldr	r3, [r7]
 2993 0100 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2994 0102 9B00     		lsls	r3, r3, #2
 2995 0104 1A44     		add	r2, r2, r3
ARM GAS  /tmp/ccPzcOpE.s 			page 94


 2996 0106 064B     		ldr	r3, .L129+4
 2997 0108 2343     		orrs	r3, r3, r4
 2998 010a 9BB2     		uxth	r3, r3
 2999 010c 1380     		strh	r3, [r2]	@ movhi
 3000              	.L124:
 3001              	.LBE78:
2335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     }
2336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 3002              		.loc 1 2338 10
 3003 010e 0023     		movs	r3, #0
2339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3004              		.loc 1 2339 1
 3005 0110 1846     		mov	r0, r3
 3006 0112 0837     		adds	r7, r7, #8
 3007              	.LCFI90:
 3008              		.cfi_def_cfa_offset 8
 3009 0114 BD46     		mov	sp, r7
 3010              	.LCFI91:
 3011              		.cfi_def_cfa_register 13
 3012              		@ sp needed
 3013 0116 90BC     		pop	{r4, r7}
 3014              	.LCFI92:
 3015              		.cfi_restore 7
 3016              		.cfi_restore 4
 3017              		.cfi_def_cfa_offset 0
 3018 0118 7047     		bx	lr
 3019              	.L130:
 3020 011a 00BF     		.align	2
 3021              	.L129:
 3022 011c C080FFFF 		.word	-32576
 3023 0120 8080FFFF 		.word	-32640
 3024 0124 80C0FFFF 		.word	-16256
 3025              		.cfi_endproc
 3026              	.LFE144:
 3028              		.section	.text.USB_StopDevice,"ax",%progbits
 3029              		.align	1
 3030              		.global	USB_StopDevice
 3031              		.syntax unified
 3032              		.thumb
 3033              		.thumb_func
 3034              		.fpu fpv4-sp-d16
 3036              	USB_StopDevice:
 3037              	.LFB145:
2340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_StopDevice : Stop the usb device mode
2343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_StopDevice(USB_TypeDef *USBx)
2347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3038              		.loc 1 2347 1
 3039              		.cfi_startproc
 3040              		@ args = 0, pretend = 0, frame = 8
 3041              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccPzcOpE.s 			page 95


 3042              		@ link register save eliminated.
 3043 0000 80B4     		push	{r7}
 3044              	.LCFI93:
 3045              		.cfi_def_cfa_offset 4
 3046              		.cfi_offset 7, -4
 3047 0002 83B0     		sub	sp, sp, #12
 3048              	.LCFI94:
 3049              		.cfi_def_cfa_offset 16
 3050 0004 00AF     		add	r7, sp, #0
 3051              	.LCFI95:
 3052              		.cfi_def_cfa_register 7
 3053 0006 7860     		str	r0, [r7, #4]
2348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* disable all interrupts and force USB reset */
2349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->CNTR = (uint16_t)USB_CNTR_FRES;
 3054              		.loc 1 2349 14
 3055 0008 7B68     		ldr	r3, [r7, #4]
 3056 000a 0122     		movs	r2, #1
 3057 000c A3F84020 		strh	r2, [r3, #64]	@ movhi
2350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* clear interrupt status register */
2352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->ISTR = 0U;
 3058              		.loc 1 2352 14
 3059 0010 7B68     		ldr	r3, [r7, #4]
 3060 0012 0022     		movs	r2, #0
 3061 0014 A3F84420 		strh	r2, [r3, #68]	@ movhi
2353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* switch-off device */
2355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->CNTR = (uint16_t)(USB_CNTR_FRES | USB_CNTR_PDWN);
 3062              		.loc 1 2355 14
 3063 0018 7B68     		ldr	r3, [r7, #4]
 3064 001a 0322     		movs	r2, #3
 3065 001c A3F84020 		strh	r2, [r3, #64]	@ movhi
2356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 3066              		.loc 1 2357 10
 3067 0020 0023     		movs	r3, #0
2358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3068              		.loc 1 2358 1
 3069 0022 1846     		mov	r0, r3
 3070 0024 0C37     		adds	r7, r7, #12
 3071              	.LCFI96:
 3072              		.cfi_def_cfa_offset 4
 3073 0026 BD46     		mov	sp, r7
 3074              	.LCFI97:
 3075              		.cfi_def_cfa_register 13
 3076              		@ sp needed
 3077 0028 5DF8047B 		ldr	r7, [sp], #4
 3078              	.LCFI98:
 3079              		.cfi_restore 7
 3080              		.cfi_def_cfa_offset 0
 3081 002c 7047     		bx	lr
 3082              		.cfi_endproc
 3083              	.LFE145:
 3085              		.section	.text.USB_SetDevAddress,"ax",%progbits
 3086              		.align	1
 3087              		.global	USB_SetDevAddress
 3088              		.syntax unified
ARM GAS  /tmp/ccPzcOpE.s 			page 96


 3089              		.thumb
 3090              		.thumb_func
 3091              		.fpu fpv4-sp-d16
 3093              	USB_SetDevAddress:
 3094              	.LFB146:
2359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_SetDevAddress : Stop the usb device mode
2362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  address : new device address to be assigned
2364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 0 to 255
2365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef  USB_SetDevAddress(USB_TypeDef *USBx, uint8_t address)
2368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3095              		.loc 1 2368 1
 3096              		.cfi_startproc
 3097              		@ args = 0, pretend = 0, frame = 8
 3098              		@ frame_needed = 1, uses_anonymous_args = 0
 3099              		@ link register save eliminated.
 3100 0000 80B4     		push	{r7}
 3101              	.LCFI99:
 3102              		.cfi_def_cfa_offset 4
 3103              		.cfi_offset 7, -4
 3104 0002 83B0     		sub	sp, sp, #12
 3105              	.LCFI100:
 3106              		.cfi_def_cfa_offset 16
 3107 0004 00AF     		add	r7, sp, #0
 3108              	.LCFI101:
 3109              		.cfi_def_cfa_register 7
 3110 0006 7860     		str	r0, [r7, #4]
 3111 0008 0B46     		mov	r3, r1
 3112 000a FB70     		strb	r3, [r7, #3]
2369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if (address == 0U)
 3113              		.loc 1 2369 6
 3114 000c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 3115 000e 002B     		cmp	r3, #0
 3116 0010 03D1     		bne	.L134
2370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     /* set device address and enable function */
2372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     USBx->DADDR = (uint16_t)USB_DADDR_EF;
 3117              		.loc 1 2372 17
 3118 0012 7B68     		ldr	r3, [r7, #4]
 3119 0014 8022     		movs	r2, #128
 3120 0016 A3F84C20 		strh	r2, [r3, #76]	@ movhi
 3121              	.L134:
2373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 3122              		.loc 1 2375 10
 3123 001a 0023     		movs	r3, #0
2376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3124              		.loc 1 2376 1
 3125 001c 1846     		mov	r0, r3
 3126 001e 0C37     		adds	r7, r7, #12
 3127              	.LCFI102:
 3128              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccPzcOpE.s 			page 97


 3129 0020 BD46     		mov	sp, r7
 3130              	.LCFI103:
 3131              		.cfi_def_cfa_register 13
 3132              		@ sp needed
 3133 0022 5DF8047B 		ldr	r7, [sp], #4
 3134              	.LCFI104:
 3135              		.cfi_restore 7
 3136              		.cfi_def_cfa_offset 0
 3137 0026 7047     		bx	lr
 3138              		.cfi_endproc
 3139              	.LFE146:
 3141              		.section	.text.USB_DevConnect,"ax",%progbits
 3142              		.align	1
 3143              		.global	USB_DevConnect
 3144              		.syntax unified
 3145              		.thumb
 3146              		.thumb_func
 3147              		.fpu fpv4-sp-d16
 3149              	USB_DevConnect:
 3150              	.LFB147:
2377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DevConnect : Connect the USB device by enabling the pull-up/pull-down
2380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevConnect(USB_TypeDef *USBx)
2384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3151              		.loc 1 2384 1
 3152              		.cfi_startproc
 3153              		@ args = 0, pretend = 0, frame = 8
 3154              		@ frame_needed = 1, uses_anonymous_args = 0
 3155              		@ link register save eliminated.
 3156 0000 80B4     		push	{r7}
 3157              	.LCFI105:
 3158              		.cfi_def_cfa_offset 4
 3159              		.cfi_offset 7, -4
 3160 0002 83B0     		sub	sp, sp, #12
 3161              	.LCFI106:
 3162              		.cfi_def_cfa_offset 16
 3163 0004 00AF     		add	r7, sp, #0
 3164              	.LCFI107:
 3165              		.cfi_def_cfa_register 7
 3166 0006 7860     		str	r0, [r7, #4]
2385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Enabling DP Pull-UP bit to Connect internal PU resistor on USB DP line */
2386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->BCDR |= (uint16_t)USB_BCDR_DPPU;
 3167              		.loc 1 2386 14
 3168 0008 7B68     		ldr	r3, [r7, #4]
 3169 000a B3F85830 		ldrh	r3, [r3, #88]	@ movhi
 3170 000e 9BB2     		uxth	r3, r3
 3171 0010 6FEA4343 		mvn	r3, r3, lsl #17
 3172 0014 6FEA5343 		mvn	r3, r3, lsr #17
 3173 0018 9AB2     		uxth	r2, r3
 3174 001a 7B68     		ldr	r3, [r7, #4]
 3175 001c A3F85820 		strh	r2, [r3, #88]	@ movhi
2387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
ARM GAS  /tmp/ccPzcOpE.s 			page 98


 3176              		.loc 1 2388 10
 3177 0020 0023     		movs	r3, #0
2389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3178              		.loc 1 2389 1
 3179 0022 1846     		mov	r0, r3
 3180 0024 0C37     		adds	r7, r7, #12
 3181              	.LCFI108:
 3182              		.cfi_def_cfa_offset 4
 3183 0026 BD46     		mov	sp, r7
 3184              	.LCFI109:
 3185              		.cfi_def_cfa_register 13
 3186              		@ sp needed
 3187 0028 5DF8047B 		ldr	r7, [sp], #4
 3188              	.LCFI110:
 3189              		.cfi_restore 7
 3190              		.cfi_def_cfa_offset 0
 3191 002c 7047     		bx	lr
 3192              		.cfi_endproc
 3193              	.LFE147:
 3195              		.section	.text.USB_DevDisconnect,"ax",%progbits
 3196              		.align	1
 3197              		.global	USB_DevDisconnect
 3198              		.syntax unified
 3199              		.thumb
 3200              		.thumb_func
 3201              		.fpu fpv4-sp-d16
 3203              	USB_DevDisconnect:
 3204              	.LFB148:
2390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DevDisconnect : Disconnect the USB device by disabling the pull-up/pull-down
2393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef  USB_DevDisconnect(USB_TypeDef *USBx)
2397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3205              		.loc 1 2397 1
 3206              		.cfi_startproc
 3207              		@ args = 0, pretend = 0, frame = 8
 3208              		@ frame_needed = 1, uses_anonymous_args = 0
 3209              		@ link register save eliminated.
 3210 0000 80B4     		push	{r7}
 3211              	.LCFI111:
 3212              		.cfi_def_cfa_offset 4
 3213              		.cfi_offset 7, -4
 3214 0002 83B0     		sub	sp, sp, #12
 3215              	.LCFI112:
 3216              		.cfi_def_cfa_offset 16
 3217 0004 00AF     		add	r7, sp, #0
 3218              	.LCFI113:
 3219              		.cfi_def_cfa_register 7
 3220 0006 7860     		str	r0, [r7, #4]
2398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Disable DP Pull-Up bit to disconnect the Internal PU resistor on USB DP line */
2399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->BCDR &= (uint16_t)(~(USB_BCDR_DPPU));
 3221              		.loc 1 2399 14
 3222 0008 7B68     		ldr	r3, [r7, #4]
 3223 000a B3F85830 		ldrh	r3, [r3, #88]	@ movhi
ARM GAS  /tmp/ccPzcOpE.s 			page 99


 3224 000e 9BB2     		uxth	r3, r3
 3225 0010 C3F30E03 		ubfx	r3, r3, #0, #15
 3226 0014 9AB2     		uxth	r2, r3
 3227 0016 7B68     		ldr	r3, [r7, #4]
 3228 0018 A3F85820 		strh	r2, [r3, #88]	@ movhi
2400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 3229              		.loc 1 2401 10
 3230 001c 0023     		movs	r3, #0
2402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3231              		.loc 1 2402 1
 3232 001e 1846     		mov	r0, r3
 3233 0020 0C37     		adds	r7, r7, #12
 3234              	.LCFI114:
 3235              		.cfi_def_cfa_offset 4
 3236 0022 BD46     		mov	sp, r7
 3237              	.LCFI115:
 3238              		.cfi_def_cfa_register 13
 3239              		@ sp needed
 3240 0024 5DF8047B 		ldr	r7, [sp], #4
 3241              	.LCFI116:
 3242              		.cfi_restore 7
 3243              		.cfi_def_cfa_offset 0
 3244 0028 7047     		bx	lr
 3245              		.cfi_endproc
 3246              	.LFE148:
 3248              		.section	.text.USB_ReadInterrupts,"ax",%progbits
 3249              		.align	1
 3250              		.global	USB_ReadInterrupts
 3251              		.syntax unified
 3252              		.thumb
 3253              		.thumb_func
 3254              		.fpu fpv4-sp-d16
 3256              	USB_ReadInterrupts:
 3257              	.LFB149:
2403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ReadInterrupts: return the global USB interrupt status
2406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t  USB_ReadInterrupts(USB_TypeDef *USBx)
2410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3258              		.loc 1 2410 1
 3259              		.cfi_startproc
 3260              		@ args = 0, pretend = 0, frame = 16
 3261              		@ frame_needed = 1, uses_anonymous_args = 0
 3262              		@ link register save eliminated.
 3263 0000 80B4     		push	{r7}
 3264              	.LCFI117:
 3265              		.cfi_def_cfa_offset 4
 3266              		.cfi_offset 7, -4
 3267 0002 85B0     		sub	sp, sp, #20
 3268              	.LCFI118:
 3269              		.cfi_def_cfa_offset 24
 3270 0004 00AF     		add	r7, sp, #0
 3271              	.LCFI119:
ARM GAS  /tmp/ccPzcOpE.s 			page 100


 3272              		.cfi_def_cfa_register 7
 3273 0006 7860     		str	r0, [r7, #4]
2411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t tmpreg;
2412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   tmpreg = USBx->ISTR;
 3274              		.loc 1 2413 16
 3275 0008 7B68     		ldr	r3, [r7, #4]
 3276 000a B3F84430 		ldrh	r3, [r3, #68]	@ movhi
 3277 000e 9BB2     		uxth	r3, r3
 3278              		.loc 1 2413 10
 3279 0010 FB60     		str	r3, [r7, #12]
2414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return tmpreg;
 3280              		.loc 1 2414 10
 3281 0012 FB68     		ldr	r3, [r7, #12]
2415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3282              		.loc 1 2415 1
 3283 0014 1846     		mov	r0, r3
 3284 0016 1437     		adds	r7, r7, #20
 3285              	.LCFI120:
 3286              		.cfi_def_cfa_offset 4
 3287 0018 BD46     		mov	sp, r7
 3288              	.LCFI121:
 3289              		.cfi_def_cfa_register 13
 3290              		@ sp needed
 3291 001a 5DF8047B 		ldr	r7, [sp], #4
 3292              	.LCFI122:
 3293              		.cfi_restore 7
 3294              		.cfi_def_cfa_offset 0
 3295 001e 7047     		bx	lr
 3296              		.cfi_endproc
 3297              	.LFE149:
 3299              		.section	.text.USB_ReadDevAllOutEpInterrupt,"ax",%progbits
 3300              		.align	1
 3301              		.global	USB_ReadDevAllOutEpInterrupt
 3302              		.syntax unified
 3303              		.thumb
 3304              		.thumb_func
 3305              		.fpu fpv4-sp-d16
 3307              	USB_ReadDevAllOutEpInterrupt:
 3308              	.LFB150:
2416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ReadDevAllOutEpInterrupt: return the USB device OUT endpoints interrupt status
2419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_ReadDevAllOutEpInterrupt(USB_TypeDef *USBx)
2423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3309              		.loc 1 2423 1
 3310              		.cfi_startproc
 3311              		@ args = 0, pretend = 0, frame = 8
 3312              		@ frame_needed = 1, uses_anonymous_args = 0
 3313              		@ link register save eliminated.
 3314 0000 80B4     		push	{r7}
 3315              	.LCFI123:
 3316              		.cfi_def_cfa_offset 4
 3317              		.cfi_offset 7, -4
ARM GAS  /tmp/ccPzcOpE.s 			page 101


 3318 0002 83B0     		sub	sp, sp, #12
 3319              	.LCFI124:
 3320              		.cfi_def_cfa_offset 16
 3321 0004 00AF     		add	r7, sp, #0
 3322              	.LCFI125:
 3323              		.cfi_def_cfa_register 7
 3324 0006 7860     		str	r0, [r7, #4]
2424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
2426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
2427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
2428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
2430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return (0);
 3325              		.loc 1 2430 10
 3326 0008 0023     		movs	r3, #0
2431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3327              		.loc 1 2431 1
 3328 000a 1846     		mov	r0, r3
 3329 000c 0C37     		adds	r7, r7, #12
 3330              	.LCFI126:
 3331              		.cfi_def_cfa_offset 4
 3332 000e BD46     		mov	sp, r7
 3333              	.LCFI127:
 3334              		.cfi_def_cfa_register 13
 3335              		@ sp needed
 3336 0010 5DF8047B 		ldr	r7, [sp], #4
 3337              	.LCFI128:
 3338              		.cfi_restore 7
 3339              		.cfi_def_cfa_offset 0
 3340 0014 7047     		bx	lr
 3341              		.cfi_endproc
 3342              	.LFE150:
 3344              		.section	.text.USB_ReadDevAllInEpInterrupt,"ax",%progbits
 3345              		.align	1
 3346              		.global	USB_ReadDevAllInEpInterrupt
 3347              		.syntax unified
 3348              		.thumb
 3349              		.thumb_func
 3350              		.fpu fpv4-sp-d16
 3352              	USB_ReadDevAllInEpInterrupt:
 3353              	.LFB151:
2432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ReadDevAllInEpInterrupt: return the USB device IN endpoints interrupt status
2435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_ReadDevAllInEpInterrupt(USB_TypeDef *USBx)
2439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3354              		.loc 1 2439 1
 3355              		.cfi_startproc
 3356              		@ args = 0, pretend = 0, frame = 8
 3357              		@ frame_needed = 1, uses_anonymous_args = 0
 3358              		@ link register save eliminated.
 3359 0000 80B4     		push	{r7}
 3360              	.LCFI129:
ARM GAS  /tmp/ccPzcOpE.s 			page 102


 3361              		.cfi_def_cfa_offset 4
 3362              		.cfi_offset 7, -4
 3363 0002 83B0     		sub	sp, sp, #12
 3364              	.LCFI130:
 3365              		.cfi_def_cfa_offset 16
 3366 0004 00AF     		add	r7, sp, #0
 3367              	.LCFI131:
 3368              		.cfi_def_cfa_register 7
 3369 0006 7860     		str	r0, [r7, #4]
2440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
2442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
2443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
2444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
2446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return (0);
 3370              		.loc 1 2446 10
 3371 0008 0023     		movs	r3, #0
2447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3372              		.loc 1 2447 1
 3373 000a 1846     		mov	r0, r3
 3374 000c 0C37     		adds	r7, r7, #12
 3375              	.LCFI132:
 3376              		.cfi_def_cfa_offset 4
 3377 000e BD46     		mov	sp, r7
 3378              	.LCFI133:
 3379              		.cfi_def_cfa_register 13
 3380              		@ sp needed
 3381 0010 5DF8047B 		ldr	r7, [sp], #4
 3382              	.LCFI134:
 3383              		.cfi_restore 7
 3384              		.cfi_def_cfa_offset 0
 3385 0014 7047     		bx	lr
 3386              		.cfi_endproc
 3387              	.LFE151:
 3389              		.section	.text.USB_ReadDevOutEPInterrupt,"ax",%progbits
 3390              		.align	1
 3391              		.global	USB_ReadDevOutEPInterrupt
 3392              		.syntax unified
 3393              		.thumb
 3394              		.thumb_func
 3395              		.fpu fpv4-sp-d16
 3397              	USB_ReadDevOutEPInterrupt:
 3398              	.LFB152:
2448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Returns Device OUT EP Interrupt register
2451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  epnum : endpoint number
2453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
2454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval Device OUT EP Interrupt register
2455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_ReadDevOutEPInterrupt(USB_TypeDef *USBx, uint8_t epnum)
2457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3399              		.loc 1 2457 1
 3400              		.cfi_startproc
 3401              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /tmp/ccPzcOpE.s 			page 103


 3402              		@ frame_needed = 1, uses_anonymous_args = 0
 3403              		@ link register save eliminated.
 3404 0000 80B4     		push	{r7}
 3405              	.LCFI135:
 3406              		.cfi_def_cfa_offset 4
 3407              		.cfi_offset 7, -4
 3408 0002 83B0     		sub	sp, sp, #12
 3409              	.LCFI136:
 3410              		.cfi_def_cfa_offset 16
 3411 0004 00AF     		add	r7, sp, #0
 3412              	.LCFI137:
 3413              		.cfi_def_cfa_register 7
 3414 0006 7860     		str	r0, [r7, #4]
 3415 0008 0B46     		mov	r3, r1
 3416 000a FB70     		strb	r3, [r7, #3]
2458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
2460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(epnum);
2461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
2462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
2463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
2465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return (0);
 3417              		.loc 1 2465 10
 3418 000c 0023     		movs	r3, #0
2466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3419              		.loc 1 2466 1
 3420 000e 1846     		mov	r0, r3
 3421 0010 0C37     		adds	r7, r7, #12
 3422              	.LCFI138:
 3423              		.cfi_def_cfa_offset 4
 3424 0012 BD46     		mov	sp, r7
 3425              	.LCFI139:
 3426              		.cfi_def_cfa_register 13
 3427              		@ sp needed
 3428 0014 5DF8047B 		ldr	r7, [sp], #4
 3429              	.LCFI140:
 3430              		.cfi_restore 7
 3431              		.cfi_def_cfa_offset 0
 3432 0018 7047     		bx	lr
 3433              		.cfi_endproc
 3434              	.LFE152:
 3436              		.section	.text.USB_ReadDevInEPInterrupt,"ax",%progbits
 3437              		.align	1
 3438              		.global	USB_ReadDevInEPInterrupt
 3439              		.syntax unified
 3440              		.thumb
 3441              		.thumb_func
 3442              		.fpu fpv4-sp-d16
 3444              	USB_ReadDevInEPInterrupt:
 3445              	.LFB153:
2467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Returns Device IN EP Interrupt register
2470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx : Selected device
2471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  epnum : endpoint number
2472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   *          This parameter can be a value from 0 to 15
ARM GAS  /tmp/ccPzcOpE.s 			page 104


2473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval Device IN EP Interrupt register
2474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** uint32_t USB_ReadDevInEPInterrupt(USB_TypeDef *USBx, uint8_t epnum)
2476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3446              		.loc 1 2476 1
 3447              		.cfi_startproc
 3448              		@ args = 0, pretend = 0, frame = 8
 3449              		@ frame_needed = 1, uses_anonymous_args = 0
 3450              		@ link register save eliminated.
 3451 0000 80B4     		push	{r7}
 3452              	.LCFI141:
 3453              		.cfi_def_cfa_offset 4
 3454              		.cfi_offset 7, -4
 3455 0002 83B0     		sub	sp, sp, #12
 3456              	.LCFI142:
 3457              		.cfi_def_cfa_offset 16
 3458 0004 00AF     		add	r7, sp, #0
 3459              	.LCFI143:
 3460              		.cfi_def_cfa_register 7
 3461 0006 7860     		str	r0, [r7, #4]
 3462 0008 0B46     		mov	r3, r1
 3463 000a FB70     		strb	r3, [r7, #3]
2477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
2479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(epnum);
2480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
2481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
2482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
2484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return (0);
 3464              		.loc 1 2484 10
 3465 000c 0023     		movs	r3, #0
2485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3466              		.loc 1 2485 1
 3467 000e 1846     		mov	r0, r3
 3468 0010 0C37     		adds	r7, r7, #12
 3469              	.LCFI144:
 3470              		.cfi_def_cfa_offset 4
 3471 0012 BD46     		mov	sp, r7
 3472              	.LCFI145:
 3473              		.cfi_def_cfa_register 13
 3474              		@ sp needed
 3475 0014 5DF8047B 		ldr	r7, [sp], #4
 3476              	.LCFI146:
 3477              		.cfi_restore 7
 3478              		.cfi_def_cfa_offset 0
 3479 0018 7047     		bx	lr
 3480              		.cfi_endproc
 3481              	.LFE153:
 3483              		.section	.text.USB_ClearInterrupts,"ax",%progbits
 3484              		.align	1
 3485              		.global	USB_ClearInterrupts
 3486              		.syntax unified
 3487              		.thumb
 3488              		.thumb_func
 3489              		.fpu fpv4-sp-d16
 3491              	USB_ClearInterrupts:
ARM GAS  /tmp/ccPzcOpE.s 			page 105


 3492              	.LFB154:
2486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ClearInterrupts: clear a USB interrupt
2489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
2490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  interrupt  interrupt flag
2491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval None
2492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** void  USB_ClearInterrupts(USB_TypeDef *USBx, uint32_t interrupt)
2494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3493              		.loc 1 2494 1
 3494              		.cfi_startproc
 3495              		@ args = 0, pretend = 0, frame = 8
 3496              		@ frame_needed = 1, uses_anonymous_args = 0
 3497              		@ link register save eliminated.
 3498 0000 80B4     		push	{r7}
 3499              	.LCFI147:
 3500              		.cfi_def_cfa_offset 4
 3501              		.cfi_offset 7, -4
 3502 0002 83B0     		sub	sp, sp, #12
 3503              	.LCFI148:
 3504              		.cfi_def_cfa_offset 16
 3505 0004 00AF     		add	r7, sp, #0
 3506              	.LCFI149:
 3507              		.cfi_def_cfa_register 7
 3508 0006 7860     		str	r0, [r7, #4]
 3509 0008 3960     		str	r1, [r7]
2495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
2497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(interrupt);
2498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
2499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
2500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
2502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3510              		.loc 1 2502 1
 3511 000a 00BF     		nop
 3512 000c 0C37     		adds	r7, r7, #12
 3513              	.LCFI150:
 3514              		.cfi_def_cfa_offset 4
 3515 000e BD46     		mov	sp, r7
 3516              	.LCFI151:
 3517              		.cfi_def_cfa_register 13
 3518              		@ sp needed
 3519 0010 5DF8047B 		ldr	r7, [sp], #4
 3520              	.LCFI152:
 3521              		.cfi_restore 7
 3522              		.cfi_def_cfa_offset 0
 3523 0014 7047     		bx	lr
 3524              		.cfi_endproc
 3525              	.LFE154:
 3527              		.section	.text.USB_EP0_OutStart,"ax",%progbits
 3528              		.align	1
 3529              		.global	USB_EP0_OutStart
 3530              		.syntax unified
 3531              		.thumb
 3532              		.thumb_func
ARM GAS  /tmp/ccPzcOpE.s 			page 106


 3533              		.fpu fpv4-sp-d16
 3535              	USB_EP0_OutStart:
 3536              	.LFB155:
2503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  Prepare the EP0 to start the first control setup
2506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
2507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  psetup  pointer to setup packet
2508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_EP0_OutStart(USB_TypeDef *USBx, uint8_t *psetup)
2511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3537              		.loc 1 2511 1
 3538              		.cfi_startproc
 3539              		@ args = 0, pretend = 0, frame = 8
 3540              		@ frame_needed = 1, uses_anonymous_args = 0
 3541              		@ link register save eliminated.
 3542 0000 80B4     		push	{r7}
 3543              	.LCFI153:
 3544              		.cfi_def_cfa_offset 4
 3545              		.cfi_offset 7, -4
 3546 0002 83B0     		sub	sp, sp, #12
 3547              	.LCFI154:
 3548              		.cfi_def_cfa_offset 16
 3549 0004 00AF     		add	r7, sp, #0
 3550              	.LCFI155:
 3551              		.cfi_def_cfa_register 7
 3552 0006 7860     		str	r0, [r7, #4]
 3553 0008 3960     		str	r1, [r7]
2512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* Prevent unused argument(s) compilation warning */
2513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(USBx);
2514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   UNUSED(psetup);
2515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   /* NOTE : - This function is not required by USB Device FS peripheral, it is used
2516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****               only by USB OTG FS peripheral.
2517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****             - This function is added to ensure compatibility across platforms.
2518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****    */
2519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 3554              		.loc 1 2519 10
 3555 000a 0023     		movs	r3, #0
2520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3556              		.loc 1 2520 1
 3557 000c 1846     		mov	r0, r3
 3558 000e 0C37     		adds	r7, r7, #12
 3559              	.LCFI156:
 3560              		.cfi_def_cfa_offset 4
 3561 0010 BD46     		mov	sp, r7
 3562              	.LCFI157:
 3563              		.cfi_def_cfa_register 13
 3564              		@ sp needed
 3565 0012 5DF8047B 		ldr	r7, [sp], #4
 3566              	.LCFI158:
 3567              		.cfi_restore 7
 3568              		.cfi_def_cfa_offset 0
 3569 0016 7047     		bx	lr
 3570              		.cfi_endproc
 3571              	.LFE155:
 3573              		.section	.text.USB_ActivateRemoteWakeup,"ax",%progbits
ARM GAS  /tmp/ccPzcOpE.s 			page 107


 3574              		.align	1
 3575              		.global	USB_ActivateRemoteWakeup
 3576              		.syntax unified
 3577              		.thumb
 3578              		.thumb_func
 3579              		.fpu fpv4-sp-d16
 3581              	USB_ActivateRemoteWakeup:
 3582              	.LFB156:
2521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_ActivateRemoteWakeup : active remote wakeup signalling
2524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
2525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_ActivateRemoteWakeup(USB_TypeDef *USBx)
2528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3583              		.loc 1 2528 1
 3584              		.cfi_startproc
 3585              		@ args = 0, pretend = 0, frame = 8
 3586              		@ frame_needed = 1, uses_anonymous_args = 0
 3587              		@ link register save eliminated.
 3588 0000 80B4     		push	{r7}
 3589              	.LCFI159:
 3590              		.cfi_def_cfa_offset 4
 3591              		.cfi_offset 7, -4
 3592 0002 83B0     		sub	sp, sp, #12
 3593              	.LCFI160:
 3594              		.cfi_def_cfa_offset 16
 3595 0004 00AF     		add	r7, sp, #0
 3596              	.LCFI161:
 3597              		.cfi_def_cfa_register 7
 3598 0006 7860     		str	r0, [r7, #4]
2529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->CNTR |= (uint16_t)USB_CNTR_RESUME;
 3599              		.loc 1 2529 14
 3600 0008 7B68     		ldr	r3, [r7, #4]
 3601 000a B3F84030 		ldrh	r3, [r3, #64]	@ movhi
 3602 000e 9BB2     		uxth	r3, r3
 3603 0010 43F01003 		orr	r3, r3, #16
 3604 0014 9AB2     		uxth	r2, r3
 3605 0016 7B68     		ldr	r3, [r7, #4]
 3606 0018 A3F84020 		strh	r2, [r3, #64]	@ movhi
2530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 3607              		.loc 1 2531 10
 3608 001c 0023     		movs	r3, #0
2532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3609              		.loc 1 2532 1
 3610 001e 1846     		mov	r0, r3
 3611 0020 0C37     		adds	r7, r7, #12
 3612              	.LCFI162:
 3613              		.cfi_def_cfa_offset 4
 3614 0022 BD46     		mov	sp, r7
 3615              	.LCFI163:
 3616              		.cfi_def_cfa_register 13
 3617              		@ sp needed
 3618 0024 5DF8047B 		ldr	r7, [sp], #4
 3619              	.LCFI164:
ARM GAS  /tmp/ccPzcOpE.s 			page 108


 3620              		.cfi_restore 7
 3621              		.cfi_def_cfa_offset 0
 3622 0028 7047     		bx	lr
 3623              		.cfi_endproc
 3624              	.LFE156:
 3626              		.section	.text.USB_DeActivateRemoteWakeup,"ax",%progbits
 3627              		.align	1
 3628              		.global	USB_DeActivateRemoteWakeup
 3629              		.syntax unified
 3630              		.thumb
 3631              		.thumb_func
 3632              		.fpu fpv4-sp-d16
 3634              	USB_DeActivateRemoteWakeup:
 3635              	.LFB157:
2533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief  USB_DeActivateRemoteWakeup : de-active remote wakeup signalling
2536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param  USBx  Selected device
2537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval HAL status
2538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** HAL_StatusTypeDef USB_DeActivateRemoteWakeup(USB_TypeDef *USBx)
2540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3636              		.loc 1 2540 1
 3637              		.cfi_startproc
 3638              		@ args = 0, pretend = 0, frame = 8
 3639              		@ frame_needed = 1, uses_anonymous_args = 0
 3640              		@ link register save eliminated.
 3641 0000 80B4     		push	{r7}
 3642              	.LCFI165:
 3643              		.cfi_def_cfa_offset 4
 3644              		.cfi_offset 7, -4
 3645 0002 83B0     		sub	sp, sp, #12
 3646              	.LCFI166:
 3647              		.cfi_def_cfa_offset 16
 3648 0004 00AF     		add	r7, sp, #0
 3649              	.LCFI167:
 3650              		.cfi_def_cfa_register 7
 3651 0006 7860     		str	r0, [r7, #4]
2541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   USBx->CNTR &= (uint16_t)(~USB_CNTR_RESUME);
 3652              		.loc 1 2541 14
 3653 0008 7B68     		ldr	r3, [r7, #4]
 3654 000a B3F84030 		ldrh	r3, [r3, #64]	@ movhi
 3655 000e 9BB2     		uxth	r3, r3
 3656 0010 23F01003 		bic	r3, r3, #16
 3657 0014 9AB2     		uxth	r2, r3
 3658 0016 7B68     		ldr	r3, [r7, #4]
 3659 0018 A3F84020 		strh	r2, [r3, #64]	@ movhi
2542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   return HAL_OK;
 3660              		.loc 1 2542 10
 3661 001c 0023     		movs	r3, #0
2543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3662              		.loc 1 2543 1
 3663 001e 1846     		mov	r0, r3
 3664 0020 0C37     		adds	r7, r7, #12
 3665              	.LCFI168:
 3666              		.cfi_def_cfa_offset 4
 3667 0022 BD46     		mov	sp, r7
ARM GAS  /tmp/ccPzcOpE.s 			page 109


 3668              	.LCFI169:
 3669              		.cfi_def_cfa_register 13
 3670              		@ sp needed
 3671 0024 5DF8047B 		ldr	r7, [sp], #4
 3672              	.LCFI170:
 3673              		.cfi_restore 7
 3674              		.cfi_def_cfa_offset 0
 3675 0028 7047     		bx	lr
 3676              		.cfi_endproc
 3677              	.LFE157:
 3679              		.section	.text.USB_WritePMA,"ax",%progbits
 3680              		.align	1
 3681              		.global	USB_WritePMA
 3682              		.syntax unified
 3683              		.thumb
 3684              		.thumb_func
 3685              		.fpu fpv4-sp-d16
 3687              	USB_WritePMA:
 3688              	.LFB158:
2544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief Copy a buffer from user memory area to packet memory area (PMA)
2547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param   USBx USB peripheral instance register address.
2548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param   pbUsrBuf pointer to user memory area.
2549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param   wPMABufAddr address into PMA.
2550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param   wNBytes: no. of bytes to be copied.
2551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval None
2552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** void USB_WritePMA(USB_TypeDef *USBx, uint8_t *pbUsrBuf, uint16_t wPMABufAddr, uint16_t wNBytes)
2554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3689              		.loc 1 2554 1
 3690              		.cfi_startproc
 3691              		@ args = 0, pretend = 0, frame = 48
 3692              		@ frame_needed = 1, uses_anonymous_args = 0
 3693              		@ link register save eliminated.
 3694 0000 80B4     		push	{r7}
 3695              	.LCFI171:
 3696              		.cfi_def_cfa_offset 4
 3697              		.cfi_offset 7, -4
 3698 0002 8DB0     		sub	sp, sp, #52
 3699              	.LCFI172:
 3700              		.cfi_def_cfa_offset 56
 3701 0004 00AF     		add	r7, sp, #0
 3702              	.LCFI173:
 3703              		.cfi_def_cfa_register 7
 3704 0006 F860     		str	r0, [r7, #12]
 3705 0008 B960     		str	r1, [r7, #8]
 3706 000a 1146     		mov	r1, r2
 3707 000c 1A46     		mov	r2, r3
 3708 000e 0B46     		mov	r3, r1	@ movhi
 3709 0010 FB80     		strh	r3, [r7, #6]	@ movhi
 3710 0012 1346     		mov	r3, r2	@ movhi
 3711 0014 BB80     		strh	r3, [r7, #4]	@ movhi
2555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t n = ((uint32_t)wNBytes + 1U) >> 1;
 3712              		.loc 1 2555 17
 3713 0016 BB88     		ldrh	r3, [r7, #4]
 3714              		.loc 1 2555 35
ARM GAS  /tmp/ccPzcOpE.s 			page 110


 3715 0018 0133     		adds	r3, r3, #1
 3716              		.loc 1 2555 12
 3717 001a 5B08     		lsrs	r3, r3, #1
 3718 001c 3B62     		str	r3, [r7, #32]
2556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t BaseAddr = (uint32_t)USBx;
 3719              		.loc 1 2556 12
 3720 001e FB68     		ldr	r3, [r7, #12]
 3721 0020 FB61     		str	r3, [r7, #28]
2557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t i, temp1, temp2;
2558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   __IO uint16_t *pdwVal;
2559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint8_t *pBuf = pbUsrBuf;
 3722              		.loc 1 2559 12
 3723 0022 BB68     		ldr	r3, [r7, #8]
 3724 0024 7B62     		str	r3, [r7, #36]
2560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   pdwVal = (__IO uint16_t *)(BaseAddr + 0x400U + ((uint32_t)wPMABufAddr * PMA_ACCESS));
 3725              		.loc 1 2561 73
 3726 0026 FA88     		ldrh	r2, [r7, #6]
 3727              		.loc 1 2561 48
 3728 0028 FB69     		ldr	r3, [r7, #28]
 3729 002a 1344     		add	r3, r3, r2
 3730 002c 03F58063 		add	r3, r3, #1024
 3731              		.loc 1 2561 10
 3732 0030 BB62     		str	r3, [r7, #40]
2562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = n; i != 0U; i--)
 3733              		.loc 1 2563 10
 3734 0032 3B6A     		ldr	r3, [r7, #32]
 3735 0034 FB62     		str	r3, [r7, #44]
 3736              		.loc 1 2563 3
 3737 0036 1BE0     		b	.L158
 3738              	.L159:
2564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     temp1 = *pBuf;
 3739              		.loc 1 2565 13 discriminator 3
 3740 0038 7B6A     		ldr	r3, [r7, #36]
 3741 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3742              		.loc 1 2565 11 discriminator 3
 3743 003c BB61     		str	r3, [r7, #24]
2566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pBuf++;
 3744              		.loc 1 2566 9 discriminator 3
 3745 003e 7B6A     		ldr	r3, [r7, #36]
 3746 0040 0133     		adds	r3, r3, #1
 3747 0042 7B62     		str	r3, [r7, #36]
2567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     temp2 = temp1 | ((uint16_t)((uint16_t) *pBuf << 8));
 3748              		.loc 1 2567 44 discriminator 3
 3749 0044 7B6A     		ldr	r3, [r7, #36]
 3750 0046 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3751 0048 9BB2     		uxth	r3, r3
 3752              		.loc 1 2567 22 discriminator 3
 3753 004a 1B02     		lsls	r3, r3, #8
 3754 004c 9BB2     		uxth	r3, r3
 3755 004e 1A46     		mov	r2, r3
 3756              		.loc 1 2567 11 discriminator 3
 3757 0050 BB69     		ldr	r3, [r7, #24]
 3758 0052 1343     		orrs	r3, r3, r2
 3759 0054 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccPzcOpE.s 			page 111


2568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     *pdwVal = (uint16_t)temp2;
 3760              		.loc 1 2568 15 discriminator 3
 3761 0056 7B69     		ldr	r3, [r7, #20]
 3762 0058 9AB2     		uxth	r2, r3
 3763              		.loc 1 2568 13 discriminator 3
 3764 005a BB6A     		ldr	r3, [r7, #40]
 3765 005c 1A80     		strh	r2, [r3]	@ movhi
2569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pdwVal++;
 3766              		.loc 1 2569 11 discriminator 3
 3767 005e BB6A     		ldr	r3, [r7, #40]
 3768 0060 0233     		adds	r3, r3, #2
 3769 0062 BB62     		str	r3, [r7, #40]
2570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #if PMA_ACCESS > 1U
2572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pdwVal++;
2573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #endif
2574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pBuf++;
 3770              		.loc 1 2575 9 discriminator 3
 3771 0064 7B6A     		ldr	r3, [r7, #36]
 3772 0066 0133     		adds	r3, r3, #1
 3773 0068 7B62     		str	r3, [r7, #36]
2563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 3774              		.loc 1 2563 25 discriminator 3
 3775 006a FB6A     		ldr	r3, [r7, #44]
 3776 006c 013B     		subs	r3, r3, #1
 3777 006e FB62     		str	r3, [r7, #44]
 3778              	.L158:
2563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 3779              		.loc 1 2563 3 discriminator 1
 3780 0070 FB6A     		ldr	r3, [r7, #44]
 3781 0072 002B     		cmp	r3, #0
 3782 0074 E0D1     		bne	.L159
2576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3783              		.loc 1 2577 1
 3784 0076 00BF     		nop
 3785 0078 00BF     		nop
 3786 007a 3437     		adds	r7, r7, #52
 3787              	.LCFI174:
 3788              		.cfi_def_cfa_offset 4
 3789 007c BD46     		mov	sp, r7
 3790              	.LCFI175:
 3791              		.cfi_def_cfa_register 13
 3792              		@ sp needed
 3793 007e 5DF8047B 		ldr	r7, [sp], #4
 3794              	.LCFI176:
 3795              		.cfi_restore 7
 3796              		.cfi_def_cfa_offset 0
 3797 0082 7047     		bx	lr
 3798              		.cfi_endproc
 3799              	.LFE158:
 3801              		.section	.text.USB_ReadPMA,"ax",%progbits
 3802              		.align	1
 3803              		.global	USB_ReadPMA
 3804              		.syntax unified
 3805              		.thumb
ARM GAS  /tmp/ccPzcOpE.s 			page 112


 3806              		.thumb_func
 3807              		.fpu fpv4-sp-d16
 3809              	USB_ReadPMA:
 3810              	.LFB159:
2578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** /**
2580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @brief Copy a buffer from user memory area to packet memory area (PMA)
2581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param   USBx: USB peripheral instance register address.
2582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param   pbUsrBuf pointer to user memory area.
2583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param   wPMABufAddr address into PMA.
2584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @param   wNBytes: no. of bytes to be copied.
2585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   * @retval None
2586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   */
2587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** void USB_ReadPMA(USB_TypeDef *USBx, uint8_t *pbUsrBuf, uint16_t wPMABufAddr, uint16_t wNBytes)
2588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** {
 3811              		.loc 1 2588 1
 3812              		.cfi_startproc
 3813              		@ args = 0, pretend = 0, frame = 40
 3814              		@ frame_needed = 1, uses_anonymous_args = 0
 3815              		@ link register save eliminated.
 3816 0000 80B4     		push	{r7}
 3817              	.LCFI177:
 3818              		.cfi_def_cfa_offset 4
 3819              		.cfi_offset 7, -4
 3820 0002 8BB0     		sub	sp, sp, #44
 3821              	.LCFI178:
 3822              		.cfi_def_cfa_offset 48
 3823 0004 00AF     		add	r7, sp, #0
 3824              	.LCFI179:
 3825              		.cfi_def_cfa_register 7
 3826 0006 F860     		str	r0, [r7, #12]
 3827 0008 B960     		str	r1, [r7, #8]
 3828 000a 1146     		mov	r1, r2
 3829 000c 1A46     		mov	r2, r3
 3830 000e 0B46     		mov	r3, r1	@ movhi
 3831 0010 FB80     		strh	r3, [r7, #6]	@ movhi
 3832 0012 1346     		mov	r3, r2	@ movhi
 3833 0014 BB80     		strh	r3, [r7, #4]	@ movhi
2589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t n = (uint32_t)wNBytes >> 1;
 3834              		.loc 1 2589 34
 3835 0016 BB88     		ldrh	r3, [r7, #4]
 3836 0018 5B08     		lsrs	r3, r3, #1
 3837 001a 9BB2     		uxth	r3, r3
 3838              		.loc 1 2589 12
 3839 001c BB61     		str	r3, [r7, #24]
2590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t BaseAddr = (uint32_t)USBx;
 3840              		.loc 1 2590 12
 3841 001e FB68     		ldr	r3, [r7, #12]
 3842 0020 7B61     		str	r3, [r7, #20]
2591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint32_t i, temp;
2592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   __IO uint16_t *pdwVal;
2593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   uint8_t *pBuf = pbUsrBuf;
 3843              		.loc 1 2593 12
 3844 0022 BB68     		ldr	r3, [r7, #8]
 3845 0024 FB61     		str	r3, [r7, #28]
2594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   pdwVal = (__IO uint16_t *)(BaseAddr + 0x400U + ((uint32_t)wPMABufAddr * PMA_ACCESS));
ARM GAS  /tmp/ccPzcOpE.s 			page 113


 3846              		.loc 1 2595 73
 3847 0026 FA88     		ldrh	r2, [r7, #6]
 3848              		.loc 1 2595 48
 3849 0028 7B69     		ldr	r3, [r7, #20]
 3850 002a 1344     		add	r3, r3, r2
 3851 002c 03F58063 		add	r3, r3, #1024
 3852              		.loc 1 2595 10
 3853 0030 3B62     		str	r3, [r7, #32]
2596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   for (i = n; i != 0U; i--)
 3854              		.loc 1 2597 10
 3855 0032 BB69     		ldr	r3, [r7, #24]
 3856 0034 7B62     		str	r3, [r7, #36]
 3857              		.loc 1 2597 3
 3858 0036 18E0     		b	.L161
 3859              	.L162:
2598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     temp = *(__IO uint16_t *)pdwVal;
 3860              		.loc 1 2599 12 discriminator 3
 3861 0038 3B6A     		ldr	r3, [r7, #32]
 3862 003a 1B88     		ldrh	r3, [r3]	@ movhi
 3863 003c 9BB2     		uxth	r3, r3
 3864              		.loc 1 2599 10 discriminator 3
 3865 003e 3B61     		str	r3, [r7, #16]
2600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pdwVal++;
 3866              		.loc 1 2600 11 discriminator 3
 3867 0040 3B6A     		ldr	r3, [r7, #32]
 3868 0042 0233     		adds	r3, r3, #2
 3869 0044 3B62     		str	r3, [r7, #32]
2601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     *pBuf = (uint8_t)((temp >> 0) & 0xFFU);
 3870              		.loc 1 2601 13 discriminator 3
 3871 0046 3B69     		ldr	r3, [r7, #16]
 3872 0048 DAB2     		uxtb	r2, r3
 3873              		.loc 1 2601 11 discriminator 3
 3874 004a FB69     		ldr	r3, [r7, #28]
 3875 004c 1A70     		strb	r2, [r3]
2602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pBuf++;
 3876              		.loc 1 2602 9 discriminator 3
 3877 004e FB69     		ldr	r3, [r7, #28]
 3878 0050 0133     		adds	r3, r3, #1
 3879 0052 FB61     		str	r3, [r7, #28]
2603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     *pBuf = (uint8_t)((temp >> 8) & 0xFFU);
 3880              		.loc 1 2603 29 discriminator 3
 3881 0054 3B69     		ldr	r3, [r7, #16]
 3882 0056 1B0A     		lsrs	r3, r3, #8
 3883              		.loc 1 2603 13 discriminator 3
 3884 0058 DAB2     		uxtb	r2, r3
 3885              		.loc 1 2603 11 discriminator 3
 3886 005a FB69     		ldr	r3, [r7, #28]
 3887 005c 1A70     		strb	r2, [r3]
2604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pBuf++;
 3888              		.loc 1 2604 9 discriminator 3
 3889 005e FB69     		ldr	r3, [r7, #28]
 3890 0060 0133     		adds	r3, r3, #1
 3891 0062 FB61     		str	r3, [r7, #28]
2597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 3892              		.loc 1 2597 25 discriminator 3
ARM GAS  /tmp/ccPzcOpE.s 			page 114


 3893 0064 7B6A     		ldr	r3, [r7, #36]
 3894 0066 013B     		subs	r3, r3, #1
 3895 0068 7B62     		str	r3, [r7, #36]
 3896              	.L161:
2597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
 3897              		.loc 1 2597 3 discriminator 1
 3898 006a 7B6A     		ldr	r3, [r7, #36]
 3899 006c 002B     		cmp	r3, #0
 3900 006e E3D1     		bne	.L162
2605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #if PMA_ACCESS > 1U
2607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     pdwVal++;
2608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** #endif
2609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** 
2611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   if ((wNBytes % 2U) != 0U)
 3901              		.loc 1 2611 22
 3902 0070 BB88     		ldrh	r3, [r7, #4]	@ movhi
 3903 0072 03F00103 		and	r3, r3, #1
 3904 0076 9BB2     		uxth	r3, r3
 3905              		.loc 1 2611 6
 3906 0078 002B     		cmp	r3, #0
 3907 007a 07D0     		beq	.L164
2612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   {
2613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     temp = *pdwVal;
 3908              		.loc 1 2613 12
 3909 007c 3B6A     		ldr	r3, [r7, #32]
 3910 007e 1B88     		ldrh	r3, [r3]	@ movhi
 3911 0080 9BB2     		uxth	r3, r3
 3912              		.loc 1 2613 10
 3913 0082 3B61     		str	r3, [r7, #16]
2614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****     *pBuf = (uint8_t)((temp >> 0) & 0xFFU);
 3914              		.loc 1 2614 13
 3915 0084 3B69     		ldr	r3, [r7, #16]
 3916 0086 DAB2     		uxtb	r2, r3
 3917              		.loc 1 2614 11
 3918 0088 FB69     		ldr	r3, [r7, #28]
 3919 008a 1A70     		strb	r2, [r3]
 3920              	.L164:
2615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c ****   }
2616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_ll_usb.c **** }
 3921              		.loc 1 2616 1
 3922 008c 00BF     		nop
 3923 008e 2C37     		adds	r7, r7, #44
 3924              	.LCFI180:
 3925              		.cfi_def_cfa_offset 4
 3926 0090 BD46     		mov	sp, r7
 3927              	.LCFI181:
 3928              		.cfi_def_cfa_register 13
 3929              		@ sp needed
 3930 0092 5DF8047B 		ldr	r7, [sp], #4
 3931              	.LCFI182:
 3932              		.cfi_restore 7
 3933              		.cfi_def_cfa_offset 0
 3934 0096 7047     		bx	lr
 3935              		.cfi_endproc
 3936              	.LFE159:
ARM GAS  /tmp/ccPzcOpE.s 			page 115


 3938              		.text
 3939              	.Letext0:
 3940              		.file 2 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/machine/_default
 3941              		.file 3 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/_stdint.h"
 3942              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 3943              		.file 5 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/system_stm32l4xx.h"
 3944              		.file 6 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l433xx.h"
 3945              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 3946              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash.h"
 3947              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_ll_usb.h"
 3948              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
ARM GAS  /tmp/ccPzcOpE.s 			page 116


DEFINED SYMBOLS
                            *ABS*:0000000000000000 stm32l4xx_ll_usb.c
     /tmp/ccPzcOpE.s:18     .text.USB_CoreInit:0000000000000000 $t
     /tmp/ccPzcOpE.s:26     .text.USB_CoreInit:0000000000000000 USB_CoreInit
     /tmp/ccPzcOpE.s:73     .text.USB_EnableGlobalInt:0000000000000000 $t
     /tmp/ccPzcOpE.s:80     .text.USB_EnableGlobalInt:0000000000000000 USB_EnableGlobalInt
     /tmp/ccPzcOpE.s:133    .text.USB_DisableGlobalInt:0000000000000000 $t
     /tmp/ccPzcOpE.s:140    .text.USB_DisableGlobalInt:0000000000000000 USB_DisableGlobalInt
     /tmp/ccPzcOpE.s:195    .text.USB_SetCurrentMode:0000000000000000 $t
     /tmp/ccPzcOpE.s:202    .text.USB_SetCurrentMode:0000000000000000 USB_SetCurrentMode
     /tmp/ccPzcOpE.s:242    .text.USB_DevInit:0000000000000000 $t
     /tmp/ccPzcOpE.s:249    .text.USB_DevInit:0000000000000000 USB_DevInit
     /tmp/ccPzcOpE.s:315    .text.USB_SetDevSpeed:0000000000000000 $t
     /tmp/ccPzcOpE.s:322    .text.USB_SetDevSpeed:0000000000000000 USB_SetDevSpeed
     /tmp/ccPzcOpE.s:362    .text.USB_FlushTxFifo:0000000000000000 $t
     /tmp/ccPzcOpE.s:369    .text.USB_FlushTxFifo:0000000000000000 USB_FlushTxFifo
     /tmp/ccPzcOpE.s:408    .text.USB_FlushRxFifo:0000000000000000 $t
     /tmp/ccPzcOpE.s:415    .text.USB_FlushRxFifo:0000000000000000 USB_FlushRxFifo
     /tmp/ccPzcOpE.s:453    .text.USB_ActivateEndpoint:0000000000000000 $t
     /tmp/ccPzcOpE.s:460    .text.USB_ActivateEndpoint:0000000000000000 USB_ActivateEndpoint
     /tmp/ccPzcOpE.s:505    .text.USB_ActivateEndpoint:0000000000000034 $d
     /tmp/ccPzcOpE.s:509    .text.USB_ActivateEndpoint:0000000000000044 $t
     /tmp/ccPzcOpE.s:883    .text.USB_ActivateEndpoint:00000000000002e4 $d
     /tmp/ccPzcOpE.s:890    .text.USB_ActivateEndpoint:00000000000002f0 $t
     /tmp/ccPzcOpE.s:1233   .text.USB_ActivateEndpoint:000000000000056c $d
     /tmp/ccPzcOpE.s:1240   .text.USB_ActivateEndpoint:000000000000057c $t
     /tmp/ccPzcOpE.s:1304   .text.USB_ActivateEndpoint:00000000000005dc $d
     /tmp/ccPzcOpE.s:1309   .text.USB_DeactivateEndpoint:0000000000000000 $t
     /tmp/ccPzcOpE.s:1316   .text.USB_DeactivateEndpoint:0000000000000000 USB_DeactivateEndpoint
     /tmp/ccPzcOpE.s:1620   .text.USB_DeactivateEndpoint:0000000000000204 $d
     /tmp/ccPzcOpE.s:1626   .text.USB_DeactivateEndpoint:0000000000000210 $t
     /tmp/ccPzcOpE.s:1785   .text.USB_DeactivateEndpoint:0000000000000320 $d
     /tmp/ccPzcOpE.s:1792   .text.USB_EPStartXfer:0000000000000000 $t
     /tmp/ccPzcOpE.s:1799   .text.USB_EPStartXfer:0000000000000000 USB_EPStartXfer
     /tmp/ccPzcOpE.s:3687   .text.USB_WritePMA:0000000000000000 USB_WritePMA
     /tmp/ccPzcOpE.s:2522   .text.USB_EPStartXfer:00000000000004cc $d
     /tmp/ccPzcOpE.s:2527   .text.USB_EPStartXfer:00000000000004d8 $t
     /tmp/ccPzcOpE.s:2616   .text.USB_EPStartXfer:000000000000056c $d
     /tmp/ccPzcOpE.s:2621   .text.USB_WritePacket:0000000000000000 $t
     /tmp/ccPzcOpE.s:2628   .text.USB_WritePacket:0000000000000000 USB_WritePacket
     /tmp/ccPzcOpE.s:2673   .text.USB_ReadPacket:0000000000000000 $t
     /tmp/ccPzcOpE.s:2680   .text.USB_ReadPacket:0000000000000000 USB_ReadPacket
     /tmp/ccPzcOpE.s:2721   .text.USB_EPSetStall:0000000000000000 $t
     /tmp/ccPzcOpE.s:2728   .text.USB_EPSetStall:0000000000000000 USB_EPSetStall
     /tmp/ccPzcOpE.s:2825   .text.USB_EPSetStall:0000000000000080 $d
     /tmp/ccPzcOpE.s:2830   .text.USB_EPClearStall:0000000000000000 $t
     /tmp/ccPzcOpE.s:2837   .text.USB_EPClearStall:0000000000000000 USB_EPClearStall
     /tmp/ccPzcOpE.s:3022   .text.USB_EPClearStall:000000000000011c $d
     /tmp/ccPzcOpE.s:3029   .text.USB_StopDevice:0000000000000000 $t
     /tmp/ccPzcOpE.s:3036   .text.USB_StopDevice:0000000000000000 USB_StopDevice
     /tmp/ccPzcOpE.s:3086   .text.USB_SetDevAddress:0000000000000000 $t
     /tmp/ccPzcOpE.s:3093   .text.USB_SetDevAddress:0000000000000000 USB_SetDevAddress
     /tmp/ccPzcOpE.s:3142   .text.USB_DevConnect:0000000000000000 $t
     /tmp/ccPzcOpE.s:3149   .text.USB_DevConnect:0000000000000000 USB_DevConnect
     /tmp/ccPzcOpE.s:3196   .text.USB_DevDisconnect:0000000000000000 $t
     /tmp/ccPzcOpE.s:3203   .text.USB_DevDisconnect:0000000000000000 USB_DevDisconnect
     /tmp/ccPzcOpE.s:3249   .text.USB_ReadInterrupts:0000000000000000 $t
ARM GAS  /tmp/ccPzcOpE.s 			page 117


     /tmp/ccPzcOpE.s:3256   .text.USB_ReadInterrupts:0000000000000000 USB_ReadInterrupts
     /tmp/ccPzcOpE.s:3300   .text.USB_ReadDevAllOutEpInterrupt:0000000000000000 $t
     /tmp/ccPzcOpE.s:3307   .text.USB_ReadDevAllOutEpInterrupt:0000000000000000 USB_ReadDevAllOutEpInterrupt
     /tmp/ccPzcOpE.s:3345   .text.USB_ReadDevAllInEpInterrupt:0000000000000000 $t
     /tmp/ccPzcOpE.s:3352   .text.USB_ReadDevAllInEpInterrupt:0000000000000000 USB_ReadDevAllInEpInterrupt
     /tmp/ccPzcOpE.s:3390   .text.USB_ReadDevOutEPInterrupt:0000000000000000 $t
     /tmp/ccPzcOpE.s:3397   .text.USB_ReadDevOutEPInterrupt:0000000000000000 USB_ReadDevOutEPInterrupt
     /tmp/ccPzcOpE.s:3437   .text.USB_ReadDevInEPInterrupt:0000000000000000 $t
     /tmp/ccPzcOpE.s:3444   .text.USB_ReadDevInEPInterrupt:0000000000000000 USB_ReadDevInEPInterrupt
     /tmp/ccPzcOpE.s:3484   .text.USB_ClearInterrupts:0000000000000000 $t
     /tmp/ccPzcOpE.s:3491   .text.USB_ClearInterrupts:0000000000000000 USB_ClearInterrupts
     /tmp/ccPzcOpE.s:3528   .text.USB_EP0_OutStart:0000000000000000 $t
     /tmp/ccPzcOpE.s:3535   .text.USB_EP0_OutStart:0000000000000000 USB_EP0_OutStart
     /tmp/ccPzcOpE.s:3574   .text.USB_ActivateRemoteWakeup:0000000000000000 $t
     /tmp/ccPzcOpE.s:3581   .text.USB_ActivateRemoteWakeup:0000000000000000 USB_ActivateRemoteWakeup
     /tmp/ccPzcOpE.s:3627   .text.USB_DeActivateRemoteWakeup:0000000000000000 $t
     /tmp/ccPzcOpE.s:3634   .text.USB_DeActivateRemoteWakeup:0000000000000000 USB_DeActivateRemoteWakeup
     /tmp/ccPzcOpE.s:3680   .text.USB_WritePMA:0000000000000000 $t
     /tmp/ccPzcOpE.s:3802   .text.USB_ReadPMA:0000000000000000 $t
     /tmp/ccPzcOpE.s:3809   .text.USB_ReadPMA:0000000000000000 USB_ReadPMA

NO UNDEFINED SYMBOLS
