ARM GAS  /tmp/cc0TY0Fa.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"deca_device.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.bss.dw1000local,"aw",%nobits
  18              		.align	2
  21              	dw1000local:
  22 0000 00000000 		.space	56
  22      00000000 
  22      00000000 
  22      00000000 
  22      00000000 
  23              		.section	.data.pdw1000local,"aw"
  24              		.align	2
  27              	pdw1000local:
  28 0000 00000000 		.word	dw1000local
  29              		.section	.text.dwt_apiversion,"ax",%progbits
  30              		.align	1
  31              		.global	dwt_apiversion
  32              		.arch armv7e-m
  33              		.syntax unified
  34              		.thumb
  35              		.thumb_func
  36              		.fpu fpv4-sp-d16
  38              	dwt_apiversion:
  39              	.LFB0:
  40              		.file 1 "Middlewares/Decawave/decadriver/deca_device.c"
   1:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
   2:Middlewares/Decawave/decadriver/deca_device.c ****  * @file    deca_device.c
   3:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief   Decawave device configuration and control functions
   4:Middlewares/Decawave/decadriver/deca_device.c ****  *
   5:Middlewares/Decawave/decadriver/deca_device.c ****  * @attention
   6:Middlewares/Decawave/decadriver/deca_device.c ****  *
   7:Middlewares/Decawave/decadriver/deca_device.c ****  * Copyright 2013 (c) Decawave Ltd, Dublin, Ireland.
   8:Middlewares/Decawave/decadriver/deca_device.c ****  *
   9:Middlewares/Decawave/decadriver/deca_device.c ****  * All rights reserved.
  10:Middlewares/Decawave/decadriver/deca_device.c ****  *
  11:Middlewares/Decawave/decadriver/deca_device.c ****  */
  12:Middlewares/Decawave/decadriver/deca_device.c **** 
  13:Middlewares/Decawave/decadriver/deca_device.c **** #include <assert.h>
  14:Middlewares/Decawave/decadriver/deca_device.c **** #include <stdlib.h>
  15:Middlewares/Decawave/decadriver/deca_device.c **** 
  16:Middlewares/Decawave/decadriver/deca_device.c **** #include "deca_types.h"
  17:Middlewares/Decawave/decadriver/deca_device.c **** #include "deca_param_types.h"
  18:Middlewares/Decawave/decadriver/deca_device.c **** #include "deca_regs.h"
ARM GAS  /tmp/cc0TY0Fa.s 			page 2


  19:Middlewares/Decawave/decadriver/deca_device.c **** #include "deca_device_api.h"
  20:Middlewares/Decawave/decadriver/deca_device.c **** 
  21:Middlewares/Decawave/decadriver/deca_device.c **** // Defines for enable_clocks function
  22:Middlewares/Decawave/decadriver/deca_device.c **** #define FORCE_SYS_XTI  0
  23:Middlewares/Decawave/decadriver/deca_device.c **** #define ENABLE_ALL_SEQ 1
  24:Middlewares/Decawave/decadriver/deca_device.c **** #define FORCE_SYS_PLL  2
  25:Middlewares/Decawave/decadriver/deca_device.c **** #define READ_ACC_ON    7
  26:Middlewares/Decawave/decadriver/deca_device.c **** #define READ_ACC_OFF   8
  27:Middlewares/Decawave/decadriver/deca_device.c **** #define FORCE_OTP_ON   11
  28:Middlewares/Decawave/decadriver/deca_device.c **** #define FORCE_OTP_OFF  12
  29:Middlewares/Decawave/decadriver/deca_device.c **** #define FORCE_TX_PLL   13
  30:Middlewares/Decawave/decadriver/deca_device.c **** #define FORCE_LDE      14
  31:Middlewares/Decawave/decadriver/deca_device.c **** 
  32:Middlewares/Decawave/decadriver/deca_device.c **** // Defines for ACK request bitmask in DATA and MAC COMMAND frame control (first byte) - Used to det
  33:Middlewares/Decawave/decadriver/deca_device.c **** #define FCTRL_ACK_REQ_MASK 0x20
  34:Middlewares/Decawave/decadriver/deca_device.c **** // Frame control maximum length in bytes.
  35:Middlewares/Decawave/decadriver/deca_device.c **** #define FCTRL_LEN_MAX 2
  36:Middlewares/Decawave/decadriver/deca_device.c **** 
  37:Middlewares/Decawave/decadriver/deca_device.c **** // #define DWT_API_ERROR_CHECK     // define so API checks config input parameters
  38:Middlewares/Decawave/decadriver/deca_device.c **** 
  39:Middlewares/Decawave/decadriver/deca_device.c **** // ------------------------------------------------------------------------------------------------
  40:Middlewares/Decawave/decadriver/deca_device.c **** //
  41:Middlewares/Decawave/decadriver/deca_device.c **** // Internal functions for controlling and configuring the device
  42:Middlewares/Decawave/decadriver/deca_device.c **** //
  43:Middlewares/Decawave/decadriver/deca_device.c **** // ------------------------------------------------------------------------------------------------
  44:Middlewares/Decawave/decadriver/deca_device.c **** 
  45:Middlewares/Decawave/decadriver/deca_device.c **** // Enable and Configure specified clocks
  46:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_enableclocks(int clocks) ;
  47:Middlewares/Decawave/decadriver/deca_device.c **** // Configure the ucode (FP algorithm) parameters
  48:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_configlde(int prf);
  49:Middlewares/Decawave/decadriver/deca_device.c **** // Load ucode from OTP/ROM
  50:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_loaducodefromrom(void);
  51:Middlewares/Decawave/decadriver/deca_device.c **** // Read non-volatile memory
  52:Middlewares/Decawave/decadriver/deca_device.c **** uint32 _dwt_otpread(uint16 address);
  53:Middlewares/Decawave/decadriver/deca_device.c **** // Program the non-volatile memory
  54:Middlewares/Decawave/decadriver/deca_device.c **** uint32 _dwt_otpprogword32(uint32 data, uint16 address);
  55:Middlewares/Decawave/decadriver/deca_device.c **** // Upload the device configuration into always on memory
  56:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_aonarrayupload(void);
  57:Middlewares/Decawave/decadriver/deca_device.c **** // ------------------------------------------------------------------------------------------------
  58:Middlewares/Decawave/decadriver/deca_device.c **** 
  59:Middlewares/Decawave/decadriver/deca_device.c **** /*!
  60:Middlewares/Decawave/decadriver/deca_device.c ****  * Static data for DW1000 DecaWave Transceiver control
  61:Middlewares/Decawave/decadriver/deca_device.c ****  */
  62:Middlewares/Decawave/decadriver/deca_device.c **** 
  63:Middlewares/Decawave/decadriver/deca_device.c **** // ------------------------------------------------------------------------------------------------
  64:Middlewares/Decawave/decadriver/deca_device.c **** // Structure to hold device data
  65:Middlewares/Decawave/decadriver/deca_device.c **** typedef struct
  66:Middlewares/Decawave/decadriver/deca_device.c **** {
  67:Middlewares/Decawave/decadriver/deca_device.c ****     uint32      partID ;            // IC Part ID - read during initialisation
  68:Middlewares/Decawave/decadriver/deca_device.c ****     uint32      lotID ;             // IC Lot ID - read during initialisation
  69:Middlewares/Decawave/decadriver/deca_device.c ****     uint8       vBatP ;             // IC V bat read during production and stored in OTP (Vmeas @ 3
  70:Middlewares/Decawave/decadriver/deca_device.c ****     uint8       tempP ;             // IC V temp read during production and stored in OTP (Tmeas @ 
  71:Middlewares/Decawave/decadriver/deca_device.c ****     uint8       longFrames ;        // Flag in non-standard long frame mode
  72:Middlewares/Decawave/decadriver/deca_device.c ****     uint8       otprev ;            // OTP revision number (read during initialisation)
  73:Middlewares/Decawave/decadriver/deca_device.c ****     uint32      txFCTRL ;           // Keep TX_FCTRL register config
  74:Middlewares/Decawave/decadriver/deca_device.c ****     uint32      sysCFGreg ;         // Local copy of system config register
  75:Middlewares/Decawave/decadriver/deca_device.c ****     uint8       dblbuffon;          // Double RX buffer mode flag
ARM GAS  /tmp/cc0TY0Fa.s 			page 3


  76:Middlewares/Decawave/decadriver/deca_device.c ****     uint8       wait4resp ;         // wait4response was set with last TX start command
  77:Middlewares/Decawave/decadriver/deca_device.c ****     uint16      sleep_mode;         // Used for automatic reloading of LDO tune and microcode at wa
  78:Middlewares/Decawave/decadriver/deca_device.c ****     uint16      otp_mask ;          // Local copy of the OTP mask used in dwt_initialise call
  79:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_cb_data_t cbData;           // Callback data structure
  80:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_cb_t    cbTxDone;           // Callback for TX confirmation event
  81:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_cb_t    cbRxOk;             // Callback for RX good frame event
  82:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_cb_t    cbRxTo;             // Callback for RX timeout events
  83:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_cb_t    cbRxErr;            // Callback for RX error events
  84:Middlewares/Decawave/decadriver/deca_device.c **** } dwt_local_data_t ;
  85:Middlewares/Decawave/decadriver/deca_device.c **** 
  86:Middlewares/Decawave/decadriver/deca_device.c **** static dwt_local_data_t dw1000local[DWT_NUM_DW_DEV] ; // Static local device data, can be an array 
  87:Middlewares/Decawave/decadriver/deca_device.c **** static dwt_local_data_t *pdw1000local = dw1000local ; // Static local data structure pointer
  88:Middlewares/Decawave/decadriver/deca_device.c **** 
  89:Middlewares/Decawave/decadriver/deca_device.c **** 
  90:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
  91:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_apiversion()
  92:Middlewares/Decawave/decadriver/deca_device.c ****  *
  93:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function returns the version of the API as defined by DW1000_DRIVER_VERSION
  94:Middlewares/Decawave/decadriver/deca_device.c ****  *
  95:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
  96:Middlewares/Decawave/decadriver/deca_device.c ****  *
  97:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
  98:Middlewares/Decawave/decadriver/deca_device.c ****  *
  99:Middlewares/Decawave/decadriver/deca_device.c ****  * returns version (DW1000_DRIVER_VERSION)
 100:Middlewares/Decawave/decadriver/deca_device.c ****  */
 101:Middlewares/Decawave/decadriver/deca_device.c **** int32 dwt_apiversion(void)
 102:Middlewares/Decawave/decadriver/deca_device.c **** {
  41              		.loc 1 102 1
  42              		.cfi_startproc
  43              		@ args = 0, pretend = 0, frame = 0
  44              		@ frame_needed = 1, uses_anonymous_args = 0
  45              		@ link register save eliminated.
  46 0000 80B4     		push	{r7}
  47              	.LCFI0:
  48              		.cfi_def_cfa_offset 4
  49              		.cfi_offset 7, -4
  50 0002 00AF     		add	r7, sp, #0
  51              	.LCFI1:
  52              		.cfi_def_cfa_register 7
 103:Middlewares/Decawave/decadriver/deca_device.c ****     return DW1000_DRIVER_VERSION ;
  53              		.loc 1 103 12
  54 0004 024B     		ldr	r3, .L3
 104:Middlewares/Decawave/decadriver/deca_device.c **** }
  55              		.loc 1 104 1
  56 0006 1846     		mov	r0, r3
  57 0008 BD46     		mov	sp, r7
  58              	.LCFI2:
  59              		.cfi_def_cfa_register 13
  60              		@ sp needed
  61 000a 5DF8047B 		ldr	r7, [sp], #4
  62              	.LCFI3:
  63              		.cfi_restore 7
  64              		.cfi_def_cfa_offset 0
  65 000e 7047     		bx	lr
  66              	.L4:
  67              		.align	2
  68              	.L3:
ARM GAS  /tmp/cc0TY0Fa.s 			page 4


  69 0010 00010500 		.word	327936
  70              		.cfi_endproc
  71              	.LFE0:
  73              		.section	.text.dwt_setlocaldataptr,"ax",%progbits
  74              		.align	1
  75              		.global	dwt_setlocaldataptr
  76              		.syntax unified
  77              		.thumb
  78              		.thumb_func
  79              		.fpu fpv4-sp-d16
  81              	dwt_setlocaldataptr:
  82              	.LFB1:
 105:Middlewares/Decawave/decadriver/deca_device.c **** 
 106:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 107:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setlocaldataptr()
 108:Middlewares/Decawave/decadriver/deca_device.c ****  *
 109:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function sets the local data structure pointer to point to the element in the local 
 110:Middlewares/Decawave/decadriver/deca_device.c ****  *
 111:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 112:Middlewares/Decawave/decadriver/deca_device.c ****  * @param index    - selects the array element to point to. Must be within the array bounds, i.e. <
 113:Middlewares/Decawave/decadriver/deca_device.c ****  *
 114:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 115:Middlewares/Decawave/decadriver/deca_device.c ****  *
 116:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
 117:Middlewares/Decawave/decadriver/deca_device.c ****  */
 118:Middlewares/Decawave/decadriver/deca_device.c **** int dwt_setlocaldataptr(unsigned int index)
 119:Middlewares/Decawave/decadriver/deca_device.c **** {
  83              		.loc 1 119 1
  84              		.cfi_startproc
  85              		@ args = 0, pretend = 0, frame = 8
  86              		@ frame_needed = 1, uses_anonymous_args = 0
  87              		@ link register save eliminated.
  88 0000 80B4     		push	{r7}
  89              	.LCFI4:
  90              		.cfi_def_cfa_offset 4
  91              		.cfi_offset 7, -4
  92 0002 83B0     		sub	sp, sp, #12
  93              	.LCFI5:
  94              		.cfi_def_cfa_offset 16
  95 0004 00AF     		add	r7, sp, #0
  96              	.LCFI6:
  97              		.cfi_def_cfa_register 7
  98 0006 7860     		str	r0, [r7, #4]
 120:Middlewares/Decawave/decadriver/deca_device.c ****     // Check the index is within the array bounds
 121:Middlewares/Decawave/decadriver/deca_device.c ****     if (DWT_NUM_DW_DEV <= index) // return error if index outside the array bounds
  99              		.loc 1 121 8
 100 0008 7B68     		ldr	r3, [r7, #4]
 101 000a 002B     		cmp	r3, #0
 102 000c 02D0     		beq	.L6
 122:Middlewares/Decawave/decadriver/deca_device.c ****     {
 123:Middlewares/Decawave/decadriver/deca_device.c ****         return DWT_ERROR ;
 103              		.loc 1 123 16
 104 000e 4FF0FF33 		mov	r3, #-1
 105 0012 09E0     		b	.L7
 106              	.L6:
 124:Middlewares/Decawave/decadriver/deca_device.c ****     }
 125:Middlewares/Decawave/decadriver/deca_device.c **** 
ARM GAS  /tmp/cc0TY0Fa.s 			page 5


 126:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local = &dw1000local[index];
 107              		.loc 1 126 20
 108 0014 7A68     		ldr	r2, [r7, #4]
 109 0016 1346     		mov	r3, r2
 110 0018 DB00     		lsls	r3, r3, #3
 111 001a 9B1A     		subs	r3, r3, r2
 112 001c DB00     		lsls	r3, r3, #3
 113 001e 054A     		ldr	r2, .L8
 114 0020 1344     		add	r3, r3, r2
 115              		.loc 1 126 18
 116 0022 054A     		ldr	r2, .L8+4
 117 0024 1360     		str	r3, [r2]
 127:Middlewares/Decawave/decadriver/deca_device.c **** 
 128:Middlewares/Decawave/decadriver/deca_device.c ****     return DWT_SUCCESS ;
 118              		.loc 1 128 12
 119 0026 0023     		movs	r3, #0
 120              	.L7:
 129:Middlewares/Decawave/decadriver/deca_device.c **** }
 121              		.loc 1 129 1
 122 0028 1846     		mov	r0, r3
 123 002a 0C37     		adds	r7, r7, #12
 124              	.LCFI7:
 125              		.cfi_def_cfa_offset 4
 126 002c BD46     		mov	sp, r7
 127              	.LCFI8:
 128              		.cfi_def_cfa_register 13
 129              		@ sp needed
 130 002e 5DF8047B 		ldr	r7, [sp], #4
 131              	.LCFI9:
 132              		.cfi_restore 7
 133              		.cfi_def_cfa_offset 0
 134 0032 7047     		bx	lr
 135              	.L9:
 136              		.align	2
 137              	.L8:
 138 0034 00000000 		.word	dw1000local
 139 0038 00000000 		.word	pdw1000local
 140              		.cfi_endproc
 141              	.LFE1:
 143              		.section	.text.dwt_initialise,"ax",%progbits
 144              		.align	1
 145              		.global	dwt_initialise
 146              		.syntax unified
 147              		.thumb
 148              		.thumb_func
 149              		.fpu fpv4-sp-d16
 151              	dwt_initialise:
 152              	.LFB2:
 130:Middlewares/Decawave/decadriver/deca_device.c **** 
 131:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 132:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_initialise()
 133:Middlewares/Decawave/decadriver/deca_device.c ****  *
 134:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function initiates communications with the DW1000 transceiver
 135:Middlewares/Decawave/decadriver/deca_device.c ****  * and reads its DEV_ID register (address 0x00) to verify the IC is one supported
 136:Middlewares/Decawave/decadriver/deca_device.c ****  * by this software (e.g. DW1000 32-bit device ID value is 0xDECA0130).  Then it
 137:Middlewares/Decawave/decadriver/deca_device.c ****  * does any initial once only device configurations needed for its use and initialises
 138:Middlewares/Decawave/decadriver/deca_device.c ****  * as necessary any static data items belonging to this low-level driver.
ARM GAS  /tmp/cc0TY0Fa.s 			page 6


 139:Middlewares/Decawave/decadriver/deca_device.c ****  *
 140:Middlewares/Decawave/decadriver/deca_device.c ****  * This function does not need to be called after DW1000 device is woken up from DEEPSLEEP,
 141:Middlewares/Decawave/decadriver/deca_device.c ****  * the device will preserve register values e.g. LDO, UCODE, XTAL. However if needed this
 142:Middlewares/Decawave/decadriver/deca_device.c ****  * function can be called to initialise internal structure  dw1000local[] if it has not been preser
 143:Middlewares/Decawave/decadriver/deca_device.c ****  * (e.g. if micro was in sleep and its RAM data (containing dw1000local structure was not preserved
 144:Middlewares/Decawave/decadriver/deca_device.c ****  *
 145:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTES:
 146:Middlewares/Decawave/decadriver/deca_device.c ****  * 1. When DW1000 is powered on this function needs to be run before dwt_configuresleep,
 147:Middlewares/Decawave/decadriver/deca_device.c ****  *    also the SPI frequency has to be < 3MHz
 148:Middlewares/Decawave/decadriver/deca_device.c ****  * 2. It reads and applies LDO tune and crystal trim values from OTP memory
 149:Middlewares/Decawave/decadriver/deca_device.c ****  * 3. If accurate RX timestamping is needed microcode/LDE must be loaded
 150:Middlewares/Decawave/decadriver/deca_device.c ****  *
 151:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 152:Middlewares/Decawave/decadriver/deca_device.c ****  * @param config    -   specifies what configuration to load
 153:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_LOADNONE         0x00 - do not load any values from OTP memory
 154:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_LOADUCODE        0x01 - load the LDE microcode from ROM - enable accurate R
 155:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_DW_WAKE_UP       0x02 - just initialise dw1000local[] values (e.g. DW1000 h
 156:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_DW_WUP_NO_UCODE  0x04 - if microcode/LDE algorithm has not already been loa
 157:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_READ_OTP_PID     0x10 - read part ID from OTP
 158:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_READ_OTP_LID     0x20 - read lot ID from OTP
 159:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_READ_OTP_BAT     0x40 - read ref voltage from OTP
 160:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_READ_OTP_TMP     0x80 - read ref temperature from OTP
 161:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 162:Middlewares/Decawave/decadriver/deca_device.c ****  *
 163:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
 164:Middlewares/Decawave/decadriver/deca_device.c ****  */
 165:Middlewares/Decawave/decadriver/deca_device.c **** // OTP addresses definitions
 166:Middlewares/Decawave/decadriver/deca_device.c **** #define LDOTUNE_ADDRESS (0x04)
 167:Middlewares/Decawave/decadriver/deca_device.c **** #define PARTID_ADDRESS (0x06)
 168:Middlewares/Decawave/decadriver/deca_device.c **** #define LOTID_ADDRESS  (0x07)
 169:Middlewares/Decawave/decadriver/deca_device.c **** #define VBAT_ADDRESS   (0x08)
 170:Middlewares/Decawave/decadriver/deca_device.c **** #define VTEMP_ADDRESS  (0x09)
 171:Middlewares/Decawave/decadriver/deca_device.c **** #define XTRIM_ADDRESS  (0x1E)
 172:Middlewares/Decawave/decadriver/deca_device.c **** 
 173:Middlewares/Decawave/decadriver/deca_device.c **** int dwt_initialise(int config)
 174:Middlewares/Decawave/decadriver/deca_device.c **** {
 153              		.loc 1 174 1
 154              		.cfi_startproc
 155              		@ args = 0, pretend = 0, frame = 24
 156              		@ frame_needed = 1, uses_anonymous_args = 0
 157 0000 90B5     		push	{r4, r7, lr}
 158              	.LCFI10:
 159              		.cfi_def_cfa_offset 12
 160              		.cfi_offset 4, -12
 161              		.cfi_offset 7, -8
 162              		.cfi_offset 14, -4
 163 0002 87B0     		sub	sp, sp, #28
 164              	.LCFI11:
 165              		.cfi_def_cfa_offset 40
 166 0004 00AF     		add	r7, sp, #0
 167              	.LCFI12:
 168              		.cfi_def_cfa_register 7
 169 0006 7860     		str	r0, [r7, #4]
 175:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 otp_xtaltrim_and_rev = 0;
 170              		.loc 1 175 12
 171 0008 0023     		movs	r3, #0
 172 000a FB82     		strh	r3, [r7, #22]	@ movhi
ARM GAS  /tmp/cc0TY0Fa.s 			page 7


 176:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 ldo_tune = 0;
 173              		.loc 1 176 12
 174 000c 0023     		movs	r3, #0
 175 000e 3B61     		str	r3, [r7, #16]
 177:Middlewares/Decawave/decadriver/deca_device.c **** 
 178:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->dblbuffon = 0; // - set to 0 - meaning double buffer mode is off by default
 176              		.loc 1 178 17
 177 0010 9F4B     		ldr	r3, .L34
 178 0012 1B68     		ldr	r3, [r3]
 179              		.loc 1 178 29
 180 0014 0022     		movs	r2, #0
 181 0016 1A75     		strb	r2, [r3, #20]
 179:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->wait4resp = 0; // - set to 0 - meaning wait for response not active
 182              		.loc 1 179 17
 183 0018 9D4B     		ldr	r3, .L34
 184 001a 1B68     		ldr	r3, [r3]
 185              		.loc 1 179 29
 186 001c 0022     		movs	r2, #0
 187 001e 5A75     		strb	r2, [r3, #21]
 180:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->sleep_mode = 0; // - set to 0 - meaning sleep mode has not been configured
 188              		.loc 1 180 17
 189 0020 9B4B     		ldr	r3, .L34
 190 0022 1B68     		ldr	r3, [r3]
 191              		.loc 1 180 30
 192 0024 0022     		movs	r2, #0
 193 0026 DA82     		strh	r2, [r3, #22]	@ movhi
 181:Middlewares/Decawave/decadriver/deca_device.c **** 
 182:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbTxDone = NULL;
 194              		.loc 1 182 17
 195 0028 994B     		ldr	r3, .L34
 196 002a 1B68     		ldr	r3, [r3]
 197              		.loc 1 182 28
 198 002c 0022     		movs	r2, #0
 199 002e 9A62     		str	r2, [r3, #40]
 183:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbRxOk = NULL;
 200              		.loc 1 183 17
 201 0030 974B     		ldr	r3, .L34
 202 0032 1B68     		ldr	r3, [r3]
 203              		.loc 1 183 26
 204 0034 0022     		movs	r2, #0
 205 0036 DA62     		str	r2, [r3, #44]
 184:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbRxTo = NULL;
 206              		.loc 1 184 17
 207 0038 954B     		ldr	r3, .L34
 208 003a 1B68     		ldr	r3, [r3]
 209              		.loc 1 184 26
 210 003c 0022     		movs	r2, #0
 211 003e 1A63     		str	r2, [r3, #48]
 185:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbRxErr = NULL;
 212              		.loc 1 185 17
 213 0040 934B     		ldr	r3, .L34
 214 0042 1B68     		ldr	r3, [r3]
 215              		.loc 1 185 27
 216 0044 0022     		movs	r2, #0
 217 0046 5A63     		str	r2, [r3, #52]
 186:Middlewares/Decawave/decadriver/deca_device.c **** 
 187:Middlewares/Decawave/decadriver/deca_device.c **** #if DWT_API_ERROR_CHECK
ARM GAS  /tmp/cc0TY0Fa.s 			page 8


 188:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->otp_mask = config ; // Save the READ_OTP config mask
 189:Middlewares/Decawave/decadriver/deca_device.c **** #endif
 190:Middlewares/Decawave/decadriver/deca_device.c **** 
 191:Middlewares/Decawave/decadriver/deca_device.c ****     // Read and validate device ID, return -1 if not recognised
 192:Middlewares/Decawave/decadriver/deca_device.c ****     if (DWT_DEVICE_ID != dwt_readdevid()) // MP IC ONLY (i.e. DW1000) FOR THIS CODE
 218              		.loc 1 192 26
 219 0048 FFF7FEFF 		bl	dwt_readdevid
 220 004c 0346     		mov	r3, r0
 221              		.loc 1 192 8
 222 004e 914A     		ldr	r2, .L34+4
 223 0050 9342     		cmp	r3, r2
 224 0052 02D0     		beq	.L11
 193:Middlewares/Decawave/decadriver/deca_device.c ****     {
 194:Middlewares/Decawave/decadriver/deca_device.c ****         return DWT_ERROR ;
 225              		.loc 1 194 16
 226 0054 4FF0FF33 		mov	r3, #-1
 227 0058 15E1     		b	.L12
 228              	.L11:
 195:Middlewares/Decawave/decadriver/deca_device.c ****     }
 196:Middlewares/Decawave/decadriver/deca_device.c **** 
 197:Middlewares/Decawave/decadriver/deca_device.c ****     if(!(DWT_DW_WAKE_UP & config)) // Don't reset the device if DWT_DW_WAKE_UP bit is set, e.g. whe
 229              		.loc 1 197 25
 230 005a 7B68     		ldr	r3, [r7, #4]
 231 005c 03F00203 		and	r3, r3, #2
 232              		.loc 1 197 7
 233 0060 002B     		cmp	r3, #0
 234 0062 01D1     		bne	.L13
 198:Middlewares/Decawave/decadriver/deca_device.c ****     {
 199:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_softreset(); // Make sure the device is completely reset before starting initialisation
 235              		.loc 1 199 9
 236 0064 FFF7FEFF 		bl	dwt_softreset
 237              	.L13:
 200:Middlewares/Decawave/decadriver/deca_device.c ****     }
 201:Middlewares/Decawave/decadriver/deca_device.c **** 
 202:Middlewares/Decawave/decadriver/deca_device.c ****     if(!((DWT_DW_WAKE_UP & config) && ((DWT_READ_OTP_TMP | DWT_READ_OTP_BAT | DWT_READ_OTP_LID | DW
 238              		.loc 1 202 26
 239 0068 7B68     		ldr	r3, [r7, #4]
 240 006a 03F00203 		and	r3, r3, #2
 241              		.loc 1 202 7
 242 006e 002B     		cmp	r3, #0
 243 0070 04D0     		beq	.L14
 244              		.loc 1 202 138 discriminator 1
 245 0072 7B68     		ldr	r3, [r7, #4]
 246 0074 03F0F803 		and	r3, r3, #248
 247              		.loc 1 202 8 discriminator 1
 248 0078 002B     		cmp	r3, #0
 249 007a 02D1     		bne	.L15
 250              	.L14:
 203:Middlewares/Decawave/decadriver/deca_device.c ****     {
 204:Middlewares/Decawave/decadriver/deca_device.c ****         _dwt_enableclocks(FORCE_SYS_XTI); // NOTE: set system clock to XTI - this is necessary to m
 251              		.loc 1 204 9
 252 007c 0020     		movs	r0, #0
 253 007e FFF7FEFF 		bl	_dwt_enableclocks
 254              	.L15:
 205:Middlewares/Decawave/decadriver/deca_device.c ****     }                                  // when not reading from OTP, clocks don't need to change.
 206:Middlewares/Decawave/decadriver/deca_device.c **** 
 207:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure the CPLL lock detect
ARM GAS  /tmp/cc0TY0Fa.s 			page 9


 208:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(EXT_SYNC_ID, EC_CTRL_OFFSET, EC_CTRL_PLLLCK);
 255              		.loc 1 208 5
 256 0082 0422     		movs	r2, #4
 257 0084 0021     		movs	r1, #0
 258 0086 2420     		movs	r0, #36
 259 0088 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 209:Middlewares/Decawave/decadriver/deca_device.c **** 
 210:Middlewares/Decawave/decadriver/deca_device.c ****     // When DW1000 IC is initialised from power up, then the LDO value should be kicked from OTP, o
 211:Middlewares/Decawave/decadriver/deca_device.c ****     // DW1000 IC has been woken up (DWT_DW_WAKE_UP bit is set) this can be skipped as LDO would hav
 212:Middlewares/Decawave/decadriver/deca_device.c ****     // kicked/loaded on wake up
 213:Middlewares/Decawave/decadriver/deca_device.c ****     if(!(DWT_DW_WAKE_UP & config))
 260              		.loc 1 213 25
 261 008c 7B68     		ldr	r3, [r7, #4]
 262 008e 03F00203 		and	r3, r3, #2
 263              		.loc 1 213 7
 264 0092 002B     		cmp	r3, #0
 265 0094 16D1     		bne	.L16
 214:Middlewares/Decawave/decadriver/deca_device.c ****     {
 215:Middlewares/Decawave/decadriver/deca_device.c ****         // Load LDO tune from OTP and kick it if there is a value actually programmed.
 216:Middlewares/Decawave/decadriver/deca_device.c ****         ldo_tune = _dwt_otpread(LDOTUNE_ADDRESS);
 266              		.loc 1 216 20
 267 0096 0420     		movs	r0, #4
 268 0098 FFF7FEFF 		bl	_dwt_otpread
 269 009c 3861     		str	r0, [r7, #16]
 217:Middlewares/Decawave/decadriver/deca_device.c ****         if((ldo_tune & 0xFF) != 0)
 270              		.loc 1 217 22
 271 009e 3B69     		ldr	r3, [r7, #16]
 272 00a0 DBB2     		uxtb	r3, r3
 273              		.loc 1 217 11
 274 00a2 002B     		cmp	r3, #0
 275 00a4 1FD0     		beq	.L17
 218:Middlewares/Decawave/decadriver/deca_device.c ****         {
 219:Middlewares/Decawave/decadriver/deca_device.c ****             // Kick LDO tune
 220:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write8bitoffsetreg(OTP_IF_ID, OTP_SF, OTP_SF_LDO_KICK); // Set load LDO kick bit
 276              		.loc 1 220 13
 277 00a6 0222     		movs	r2, #2
 278 00a8 1221     		movs	r1, #18
 279 00aa 2D20     		movs	r0, #45
 280 00ac FFF7FEFF 		bl	dwt_write8bitoffsetreg
 221:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO; // LDO tune must be kicked at wake-up
 281              		.loc 1 221 38
 282 00b0 774B     		ldr	r3, .L34
 283 00b2 1B68     		ldr	r3, [r3]
 284 00b4 DA8A     		ldrh	r2, [r3, #22]
 285 00b6 764B     		ldr	r3, .L34
 286 00b8 1B68     		ldr	r3, [r3]
 287 00ba 42F48052 		orr	r2, r2, #4096
 288 00be 92B2     		uxth	r2, r2
 289 00c0 DA82     		strh	r2, [r3, #22]	@ movhi
 290 00c2 10E0     		b	.L17
 291              	.L16:
 222:Middlewares/Decawave/decadriver/deca_device.c ****         }
 223:Middlewares/Decawave/decadriver/deca_device.c ****     }
 224:Middlewares/Decawave/decadriver/deca_device.c ****     else
 225:Middlewares/Decawave/decadriver/deca_device.c ****     {   //if LDOTUNE reg contains value different from default it means it was kicked from OTP and 
 226:Middlewares/Decawave/decadriver/deca_device.c ****         if(dwt_read32bitoffsetreg(RF_CONF_ID, LDOTUNE) != LDOTUNE_DEFAULT)
 292              		.loc 1 226 12
ARM GAS  /tmp/cc0TY0Fa.s 			page 10


 293 00c4 3021     		movs	r1, #48
 294 00c6 2820     		movs	r0, #40
 295 00c8 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 296 00cc 0346     		mov	r3, r0
 297              		.loc 1 226 11
 298 00ce B3F1883F 		cmp	r3, #-2004318072
 299 00d2 08D0     		beq	.L17
 227:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO;
 300              		.loc 1 227 38
 301 00d4 6E4B     		ldr	r3, .L34
 302 00d6 1B68     		ldr	r3, [r3]
 303 00d8 DA8A     		ldrh	r2, [r3, #22]
 304 00da 6D4B     		ldr	r3, .L34
 305 00dc 1B68     		ldr	r3, [r3]
 306 00de 42F48052 		orr	r2, r2, #4096
 307 00e2 92B2     		uxth	r2, r2
 308 00e4 DA82     		strh	r2, [r3, #22]	@ movhi
 309              	.L17:
 228:Middlewares/Decawave/decadriver/deca_device.c ****     }
 229:Middlewares/Decawave/decadriver/deca_device.c **** 
 230:Middlewares/Decawave/decadriver/deca_device.c ****     if((!(DWT_DW_WAKE_UP & config)) || ((DWT_DW_WAKE_UP & config) && (DWT_DW_WUP_RD_OTPREV & config
 310              		.loc 1 230 26
 311 00e6 7B68     		ldr	r3, [r7, #4]
 312 00e8 03F00203 		and	r3, r3, #2
 313              		.loc 1 230 7
 314 00ec 002B     		cmp	r3, #0
 315 00ee 09D0     		beq	.L18
 316              		.loc 1 230 57 discriminator 1
 317 00f0 7B68     		ldr	r3, [r7, #4]
 318 00f2 03F00203 		and	r3, r3, #2
 319              		.loc 1 230 37 discriminator 1
 320 00f6 002B     		cmp	r3, #0
 321 00f8 11D0     		beq	.L19
 322              		.loc 1 230 92 discriminator 2
 323 00fa 7B68     		ldr	r3, [r7, #4]
 324 00fc 03F00803 		and	r3, r3, #8
 325              		.loc 1 230 67 discriminator 2
 326 0100 002B     		cmp	r3, #0
 327 0102 0CD0     		beq	.L19
 328              	.L18:
 231:Middlewares/Decawave/decadriver/deca_device.c ****     {
 232:Middlewares/Decawave/decadriver/deca_device.c ****         // Read OTP revision number
 233:Middlewares/Decawave/decadriver/deca_device.c ****         otp_xtaltrim_and_rev = _dwt_otpread(XTRIM_ADDRESS) & 0xffff;        // Read 32 bit value, X
 329              		.loc 1 233 32
 330 0104 1E20     		movs	r0, #30
 331 0106 FFF7FEFF 		bl	_dwt_otpread
 332 010a 0346     		mov	r3, r0
 333              		.loc 1 233 30
 334 010c FB82     		strh	r3, [r7, #22]	@ movhi
 234:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->otprev = (otp_xtaltrim_and_rev >> 8) & 0xff;          // OTP revision is the 
 335              		.loc 1 234 30
 336 010e FB8A     		ldrh	r3, [r7, #22]
 337 0110 1B0A     		lsrs	r3, r3, #8
 338 0112 9AB2     		uxth	r2, r3
 339              		.loc 1 234 21
 340 0114 5E4B     		ldr	r3, .L34
 341 0116 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cc0TY0Fa.s 			page 11


 342              		.loc 1 234 30
 343 0118 D2B2     		uxtb	r2, r2
 344 011a DA72     		strb	r2, [r3, #11]
 345 011c 03E0     		b	.L20
 346              	.L19:
 235:Middlewares/Decawave/decadriver/deca_device.c ****     }
 236:Middlewares/Decawave/decadriver/deca_device.c ****     else
 237:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->otprev = 0; // If OTP valuse are not used, if this API is called after DW1000
 347              		.loc 1 237 21
 348 011e 5C4B     		ldr	r3, .L34
 349 0120 1B68     		ldr	r3, [r3]
 350              		.loc 1 237 30
 351 0122 0022     		movs	r2, #0
 352 0124 DA72     		strb	r2, [r3, #11]
 353              	.L20:
 238:Middlewares/Decawave/decadriver/deca_device.c ****                                   // (DWT_DW_WAKE_UP bit is set), set otprev to 0
 239:Middlewares/Decawave/decadriver/deca_device.c **** 
 240:Middlewares/Decawave/decadriver/deca_device.c ****     if(!(DWT_DW_WAKE_UP & config))
 354              		.loc 1 240 25
 355 0126 7B68     		ldr	r3, [r7, #4]
 356 0128 03F00203 		and	r3, r3, #2
 357              		.loc 1 240 7
 358 012c 002B     		cmp	r3, #0
 359 012e 0BD1     		bne	.L21
 241:Middlewares/Decawave/decadriver/deca_device.c ****     {
 242:Middlewares/Decawave/decadriver/deca_device.c ****         // XTAL trim value is set in OTP for DW1000 module and EVK/TREK boards but that might not b
 243:Middlewares/Decawave/decadriver/deca_device.c ****         if ((otp_xtaltrim_and_rev & 0x1F) == 0) // A value of 0 means that the crystal has not been
 360              		.loc 1 243 35
 361 0130 FB8A     		ldrh	r3, [r7, #22]
 362 0132 03F01F03 		and	r3, r3, #31
 363              		.loc 1 243 12
 364 0136 002B     		cmp	r3, #0
 365 0138 01D1     		bne	.L22
 244:Middlewares/Decawave/decadriver/deca_device.c ****         {
 245:Middlewares/Decawave/decadriver/deca_device.c ****             otp_xtaltrim_and_rev = FS_XTALT_MIDRANGE ; // Set to mid-range if no calibration value 
 366              		.loc 1 245 34
 367 013a 1023     		movs	r3, #16
 368 013c FB82     		strh	r3, [r7, #22]	@ movhi
 369              	.L22:
 246:Middlewares/Decawave/decadriver/deca_device.c ****         }
 247:Middlewares/Decawave/decadriver/deca_device.c ****         // Configure XTAL trim
 248:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_setxtaltrim((uint8)otp_xtaltrim_and_rev);
 370              		.loc 1 248 9
 371 013e FB8A     		ldrh	r3, [r7, #22]	@ movhi
 372 0140 DBB2     		uxtb	r3, r3
 373 0142 1846     		mov	r0, r3
 374 0144 FFF7FEFF 		bl	dwt_setxtaltrim
 375              	.L21:
 249:Middlewares/Decawave/decadriver/deca_device.c ****     }
 250:Middlewares/Decawave/decadriver/deca_device.c **** 
 251:Middlewares/Decawave/decadriver/deca_device.c ****     if(DWT_READ_OTP_PID & config)
 376              		.loc 1 251 25
 377 0148 7B68     		ldr	r3, [r7, #4]
 378 014a 03F01003 		and	r3, r3, #16
 379              		.loc 1 251 7
 380 014e 002B     		cmp	r3, #0
 381 0150 07D0     		beq	.L23
ARM GAS  /tmp/cc0TY0Fa.s 			page 12


 252:Middlewares/Decawave/decadriver/deca_device.c ****     {
 253:Middlewares/Decawave/decadriver/deca_device.c ****         // Load Part from OTP
 254:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->partID = _dwt_otpread(PARTID_ADDRESS);
 382              		.loc 1 254 21
 383 0152 4F4B     		ldr	r3, .L34
 384 0154 1C68     		ldr	r4, [r3]
 385              		.loc 1 254 32
 386 0156 0620     		movs	r0, #6
 387 0158 FFF7FEFF 		bl	_dwt_otpread
 388 015c 0346     		mov	r3, r0
 389              		.loc 1 254 30
 390 015e 2360     		str	r3, [r4]
 391 0160 03E0     		b	.L24
 392              	.L23:
 255:Middlewares/Decawave/decadriver/deca_device.c ****     }
 256:Middlewares/Decawave/decadriver/deca_device.c ****     else
 257:Middlewares/Decawave/decadriver/deca_device.c ****     {
 258:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->partID = 0;
 393              		.loc 1 258 21
 394 0162 4B4B     		ldr	r3, .L34
 395 0164 1B68     		ldr	r3, [r3]
 396              		.loc 1 258 30
 397 0166 0022     		movs	r2, #0
 398 0168 1A60     		str	r2, [r3]
 399              	.L24:
 259:Middlewares/Decawave/decadriver/deca_device.c ****     }
 260:Middlewares/Decawave/decadriver/deca_device.c **** 
 261:Middlewares/Decawave/decadriver/deca_device.c ****     if(DWT_READ_OTP_LID & config)
 400              		.loc 1 261 25
 401 016a 7B68     		ldr	r3, [r7, #4]
 402 016c 03F02003 		and	r3, r3, #32
 403              		.loc 1 261 7
 404 0170 002B     		cmp	r3, #0
 405 0172 07D0     		beq	.L25
 262:Middlewares/Decawave/decadriver/deca_device.c ****     {
 263:Middlewares/Decawave/decadriver/deca_device.c ****         // Load Lot ID from OTP
 264:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->lotID = _dwt_otpread(LOTID_ADDRESS);
 406              		.loc 1 264 21
 407 0174 464B     		ldr	r3, .L34
 408 0176 1C68     		ldr	r4, [r3]
 409              		.loc 1 264 31
 410 0178 0720     		movs	r0, #7
 411 017a FFF7FEFF 		bl	_dwt_otpread
 412 017e 0346     		mov	r3, r0
 413              		.loc 1 264 29
 414 0180 6360     		str	r3, [r4, #4]
 415 0182 03E0     		b	.L26
 416              	.L25:
 265:Middlewares/Decawave/decadriver/deca_device.c ****     }
 266:Middlewares/Decawave/decadriver/deca_device.c ****     else
 267:Middlewares/Decawave/decadriver/deca_device.c ****     {
 268:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->lotID = 0;
 417              		.loc 1 268 21
 418 0184 424B     		ldr	r3, .L34
 419 0186 1B68     		ldr	r3, [r3]
 420              		.loc 1 268 29
 421 0188 0022     		movs	r2, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 13


 422 018a 5A60     		str	r2, [r3, #4]
 423              	.L26:
 269:Middlewares/Decawave/decadriver/deca_device.c ****     }
 270:Middlewares/Decawave/decadriver/deca_device.c **** 
 271:Middlewares/Decawave/decadriver/deca_device.c ****     if(DWT_READ_OTP_BAT & config)
 424              		.loc 1 271 25
 425 018c 7B68     		ldr	r3, [r7, #4]
 426 018e 03F04003 		and	r3, r3, #64
 427              		.loc 1 271 7
 428 0192 002B     		cmp	r3, #0
 429 0194 08D0     		beq	.L27
 272:Middlewares/Decawave/decadriver/deca_device.c ****     {
 273:Middlewares/Decawave/decadriver/deca_device.c ****         // Load VBAT from OTP
 274:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->vBatP = _dwt_otpread(VBAT_ADDRESS) & 0xff;
 430              		.loc 1 274 31
 431 0196 0820     		movs	r0, #8
 432 0198 FFF7FEFF 		bl	_dwt_otpread
 433 019c 0246     		mov	r2, r0
 434              		.loc 1 274 21
 435 019e 3C4B     		ldr	r3, .L34
 436 01a0 1B68     		ldr	r3, [r3]
 437              		.loc 1 274 29
 438 01a2 D2B2     		uxtb	r2, r2
 439 01a4 1A72     		strb	r2, [r3, #8]
 440 01a6 03E0     		b	.L28
 441              	.L27:
 275:Middlewares/Decawave/decadriver/deca_device.c ****     }
 276:Middlewares/Decawave/decadriver/deca_device.c ****     else
 277:Middlewares/Decawave/decadriver/deca_device.c ****     {
 278:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->vBatP = 0;
 442              		.loc 1 278 21
 443 01a8 394B     		ldr	r3, .L34
 444 01aa 1B68     		ldr	r3, [r3]
 445              		.loc 1 278 29
 446 01ac 0022     		movs	r2, #0
 447 01ae 1A72     		strb	r2, [r3, #8]
 448              	.L28:
 279:Middlewares/Decawave/decadriver/deca_device.c ****     }
 280:Middlewares/Decawave/decadriver/deca_device.c **** 
 281:Middlewares/Decawave/decadriver/deca_device.c ****     if(DWT_READ_OTP_TMP & config)
 449              		.loc 1 281 25
 450 01b0 7B68     		ldr	r3, [r7, #4]
 451 01b2 03F08003 		and	r3, r3, #128
 452              		.loc 1 281 7
 453 01b6 002B     		cmp	r3, #0
 454 01b8 08D0     		beq	.L29
 282:Middlewares/Decawave/decadriver/deca_device.c ****     {
 283:Middlewares/Decawave/decadriver/deca_device.c ****         // Load TEMP from OTP
 284:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->tempP = _dwt_otpread(VTEMP_ADDRESS) & 0xff;
 455              		.loc 1 284 31
 456 01ba 0920     		movs	r0, #9
 457 01bc FFF7FEFF 		bl	_dwt_otpread
 458 01c0 0246     		mov	r2, r0
 459              		.loc 1 284 21
 460 01c2 334B     		ldr	r3, .L34
 461 01c4 1B68     		ldr	r3, [r3]
 462              		.loc 1 284 29
ARM GAS  /tmp/cc0TY0Fa.s 			page 14


 463 01c6 D2B2     		uxtb	r2, r2
 464 01c8 5A72     		strb	r2, [r3, #9]
 465 01ca 03E0     		b	.L30
 466              	.L29:
 285:Middlewares/Decawave/decadriver/deca_device.c ****     }
 286:Middlewares/Decawave/decadriver/deca_device.c ****     else
 287:Middlewares/Decawave/decadriver/deca_device.c ****     {
 288:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->tempP = 0;
 467              		.loc 1 288 21
 468 01cc 304B     		ldr	r3, .L34
 469 01ce 1B68     		ldr	r3, [r3]
 470              		.loc 1 288 29
 471 01d0 0022     		movs	r2, #0
 472 01d2 5A72     		strb	r2, [r3, #9]
 473              	.L30:
 289:Middlewares/Decawave/decadriver/deca_device.c ****     }
 290:Middlewares/Decawave/decadriver/deca_device.c **** 
 291:Middlewares/Decawave/decadriver/deca_device.c ****     // Load leading edge detect code (LDE/microcode)
 292:Middlewares/Decawave/decadriver/deca_device.c ****     if(!(DWT_DW_WAKE_UP & config))
 474              		.loc 1 292 25
 475 01d4 7B68     		ldr	r3, [r7, #4]
 476 01d6 03F00203 		and	r3, r3, #2
 477              		.loc 1 292 7
 478 01da 002B     		cmp	r3, #0
 479 01dc 21D1     		bne	.L31
 293:Middlewares/Decawave/decadriver/deca_device.c ****     {
 294:Middlewares/Decawave/decadriver/deca_device.c ****         if(DWT_LOADUCODE & config)
 480              		.loc 1 294 26
 481 01de 7B68     		ldr	r3, [r7, #4]
 482 01e0 03F00103 		and	r3, r3, #1
 483              		.loc 1 294 11
 484 01e4 002B     		cmp	r3, #0
 485 01e6 0BD0     		beq	.L32
 295:Middlewares/Decawave/decadriver/deca_device.c ****         {
 296:Middlewares/Decawave/decadriver/deca_device.c ****             _dwt_loaducodefromrom();
 486              		.loc 1 296 13
 487 01e8 FFF7FEFF 		bl	_dwt_loaducodefromrom
 297:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDE; // microcode must be loaded at wake-up i
 488              		.loc 1 297 38
 489 01ec 284B     		ldr	r3, .L34
 490 01ee 1B68     		ldr	r3, [r3]
 491 01f0 DA8A     		ldrh	r2, [r3, #22]
 492 01f2 274B     		ldr	r3, .L34
 493 01f4 1B68     		ldr	r3, [r3]
 494 01f6 42F40062 		orr	r2, r2, #2048
 495 01fa 92B2     		uxth	r2, r2
 496 01fc DA82     		strh	r2, [r3, #22]	@ movhi
 497 01fe 1EE0     		b	.L33
 498              	.L32:
 499              	.LBB2:
 298:Middlewares/Decawave/decadriver/deca_device.c ****         }
 299:Middlewares/Decawave/decadriver/deca_device.c ****         else // Should disable the LDERUN bit enable if LDE has not been loaded
 300:Middlewares/Decawave/decadriver/deca_device.c ****         {
 301:Middlewares/Decawave/decadriver/deca_device.c ****             uint16 rega = dwt_read16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET+1) ;
 500              		.loc 1 301 27
 501 0200 0521     		movs	r1, #5
 502 0202 3620     		movs	r0, #54
ARM GAS  /tmp/cc0TY0Fa.s 			page 15


 503 0204 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 504 0208 0346     		mov	r3, r0
 505 020a FB81     		strh	r3, [r7, #14]	@ movhi
 302:Middlewares/Decawave/decadriver/deca_device.c ****             rega &= 0xFDFF ; // Clear LDERUN bit
 506              		.loc 1 302 18
 507 020c FB89     		ldrh	r3, [r7, #14]	@ movhi
 508 020e 23F40073 		bic	r3, r3, #512
 509 0212 FB81     		strh	r3, [r7, #14]	@ movhi
 303:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET+1, rega) ;
 510              		.loc 1 303 13
 511 0214 FB89     		ldrh	r3, [r7, #14]
 512 0216 1A46     		mov	r2, r3
 513 0218 0521     		movs	r1, #5
 514 021a 3620     		movs	r0, #54
 515 021c FFF7FEFF 		bl	dwt_write16bitoffsetreg
 516 0220 0DE0     		b	.L33
 517              	.L31:
 518              	.LBE2:
 304:Middlewares/Decawave/decadriver/deca_device.c ****         }
 305:Middlewares/Decawave/decadriver/deca_device.c ****     }
 306:Middlewares/Decawave/decadriver/deca_device.c ****     else //if DWT_DW_WUP_NO_UCODE is set then assume that the UCODE was loaded from ROM (i.e. DWT_L
 307:Middlewares/Decawave/decadriver/deca_device.c ****     {     //thus set AON_WCFG_ONW_LLDE, otherwise don't set the AON_WCFG_ONW_LLDE bit in the sleep_
 308:Middlewares/Decawave/decadriver/deca_device.c ****         if((DWT_DW_WUP_NO_UCODE & config) == 0)
 519              		.loc 1 308 33
 520 0222 7B68     		ldr	r3, [r7, #4]
 521 0224 03F00403 		and	r3, r3, #4
 522              		.loc 1 308 11
 523 0228 002B     		cmp	r3, #0
 524 022a 08D1     		bne	.L33
 309:Middlewares/Decawave/decadriver/deca_device.c ****         {
 310:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDE;
 525              		.loc 1 310 38
 526 022c 184B     		ldr	r3, .L34
 527 022e 1B68     		ldr	r3, [r3]
 528 0230 DA8A     		ldrh	r2, [r3, #22]
 529 0232 174B     		ldr	r3, .L34
 530 0234 1B68     		ldr	r3, [r3]
 531 0236 42F40062 		orr	r2, r2, #2048
 532 023a 92B2     		uxth	r2, r2
 533 023c DA82     		strh	r2, [r3, #22]	@ movhi
 534              	.L33:
 311:Middlewares/Decawave/decadriver/deca_device.c ****         }
 312:Middlewares/Decawave/decadriver/deca_device.c ****     }
 313:Middlewares/Decawave/decadriver/deca_device.c **** 
 314:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ); // Enable clocks for sequencing
 535              		.loc 1 314 5
 536 023e 0120     		movs	r0, #1
 537 0240 FFF7FEFF 		bl	_dwt_enableclocks
 315:Middlewares/Decawave/decadriver/deca_device.c **** 
 316:Middlewares/Decawave/decadriver/deca_device.c ****     // The 3 bits in AON CFG1 register must be cleared to ensure proper operation of the DW1000 in 
 317:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, 0x00);
 538              		.loc 1 317 5
 539 0244 0022     		movs	r2, #0
 540 0246 0A21     		movs	r1, #10
 541 0248 2C20     		movs	r0, #44
 542 024a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 318:Middlewares/Decawave/decadriver/deca_device.c **** 
ARM GAS  /tmp/cc0TY0Fa.s 			page 16


 319:Middlewares/Decawave/decadriver/deca_device.c ****     // Read system register / store local copy
 320:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->sysCFGreg = dwt_read32bitreg(SYS_CFG_ID) ; // Read sysconfig register
 543              		.loc 1 320 17
 544 024e 104B     		ldr	r3, .L34
 545 0250 1C68     		ldr	r4, [r3]
 546              		.loc 1 320 31
 547 0252 0021     		movs	r1, #0
 548 0254 0420     		movs	r0, #4
 549 0256 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 550 025a 0346     		mov	r3, r0
 551              		.loc 1 320 29
 552 025c 2361     		str	r3, [r4, #16]
 321:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->longFrames = (pdw1000local->sysCFGreg & SYS_CFG_PHR_MODE_11) >> SYS_CFG_PHR_MODE_
 553              		.loc 1 321 45
 554 025e 0C4B     		ldr	r3, .L34
 555 0260 1B68     		ldr	r3, [r3]
 556 0262 1B69     		ldr	r3, [r3, #16]
 557              		.loc 1 321 80
 558 0264 1B0C     		lsrs	r3, r3, #16
 559 0266 DAB2     		uxtb	r2, r3
 560              		.loc 1 321 17
 561 0268 094B     		ldr	r3, .L34
 562 026a 1B68     		ldr	r3, [r3]
 563              		.loc 1 321 80
 564 026c 02F00302 		and	r2, r2, #3
 565 0270 D2B2     		uxtb	r2, r2
 566              		.loc 1 321 30
 567 0272 9A72     		strb	r2, [r3, #10]
 322:Middlewares/Decawave/decadriver/deca_device.c **** 
 323:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->txFCTRL = dwt_read32bitreg(TX_FCTRL_ID) ;
 568              		.loc 1 323 17
 569 0274 064B     		ldr	r3, .L34
 570 0276 1C68     		ldr	r4, [r3]
 571              		.loc 1 323 29
 572 0278 0021     		movs	r1, #0
 573 027a 0820     		movs	r0, #8
 574 027c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 575 0280 0346     		mov	r3, r0
 576              		.loc 1 323 27
 577 0282 E360     		str	r3, [r4, #12]
 324:Middlewares/Decawave/decadriver/deca_device.c **** 
 325:Middlewares/Decawave/decadriver/deca_device.c ****     return DWT_SUCCESS ;
 578              		.loc 1 325 12
 579 0284 0023     		movs	r3, #0
 580              	.L12:
 326:Middlewares/Decawave/decadriver/deca_device.c **** 
 327:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_initialise()
 581              		.loc 1 327 1
 582 0286 1846     		mov	r0, r3
 583 0288 1C37     		adds	r7, r7, #28
 584              	.LCFI13:
 585              		.cfi_def_cfa_offset 12
 586 028a BD46     		mov	sp, r7
 587              	.LCFI14:
 588              		.cfi_def_cfa_register 13
 589              		@ sp needed
 590 028c 90BD     		pop	{r4, r7, pc}
ARM GAS  /tmp/cc0TY0Fa.s 			page 17


 591              	.L35:
 592 028e 00BF     		.align	2
 593              	.L34:
 594 0290 00000000 		.word	pdw1000local
 595 0294 3001CADE 		.word	-557186768
 596              		.cfi_endproc
 597              	.LFE2:
 599              		.section	.text.dwt_otprevision,"ax",%progbits
 600              		.align	1
 601              		.global	dwt_otprevision
 602              		.syntax unified
 603              		.thumb
 604              		.thumb_func
 605              		.fpu fpv4-sp-d16
 607              	dwt_otprevision:
 608              	.LFB3:
 328:Middlewares/Decawave/decadriver/deca_device.c **** 
 329:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 330:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_otprevision()
 331:Middlewares/Decawave/decadriver/deca_device.c ****  *
 332:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to return the read OTP revision
 333:Middlewares/Decawave/decadriver/deca_device.c ****  *
 334:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 335:Middlewares/Decawave/decadriver/deca_device.c ****  *
 336:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 337:Middlewares/Decawave/decadriver/deca_device.c ****  *
 338:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 339:Middlewares/Decawave/decadriver/deca_device.c ****  *
 340:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the read OTP revision value
 341:Middlewares/Decawave/decadriver/deca_device.c ****  */
 342:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_otprevision(void)
 343:Middlewares/Decawave/decadriver/deca_device.c **** {
 609              		.loc 1 343 1
 610              		.cfi_startproc
 611              		@ args = 0, pretend = 0, frame = 0
 612              		@ frame_needed = 1, uses_anonymous_args = 0
 613              		@ link register save eliminated.
 614 0000 80B4     		push	{r7}
 615              	.LCFI15:
 616              		.cfi_def_cfa_offset 4
 617              		.cfi_offset 7, -4
 618 0002 00AF     		add	r7, sp, #0
 619              	.LCFI16:
 620              		.cfi_def_cfa_register 7
 344:Middlewares/Decawave/decadriver/deca_device.c ****     return pdw1000local->otprev ;
 621              		.loc 1 344 24
 622 0004 034B     		ldr	r3, .L38
 623 0006 1B68     		ldr	r3, [r3]
 624 0008 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 345:Middlewares/Decawave/decadriver/deca_device.c **** }
 625              		.loc 1 345 1
 626 000a 1846     		mov	r0, r3
 627 000c BD46     		mov	sp, r7
 628              	.LCFI17:
 629              		.cfi_def_cfa_register 13
 630              		@ sp needed
 631 000e 5DF8047B 		ldr	r7, [sp], #4
ARM GAS  /tmp/cc0TY0Fa.s 			page 18


 632              	.LCFI18:
 633              		.cfi_restore 7
 634              		.cfi_def_cfa_offset 0
 635 0012 7047     		bx	lr
 636              	.L39:
 637              		.align	2
 638              	.L38:
 639 0014 00000000 		.word	pdw1000local
 640              		.cfi_endproc
 641              	.LFE3:
 643              		.section	.text.dwt_setfinegraintxseq,"ax",%progbits
 644              		.align	1
 645              		.global	dwt_setfinegraintxseq
 646              		.syntax unified
 647              		.thumb
 648              		.thumb_func
 649              		.fpu fpv4-sp-d16
 651              	dwt_setfinegraintxseq:
 652              	.LFB4:
 346:Middlewares/Decawave/decadriver/deca_device.c **** 
 347:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 348:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setfinegraintxseq()
 349:Middlewares/Decawave/decadriver/deca_device.c ****  *
 350:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function enables/disables the fine grain TX sequencing (enabled by default).
 351:Middlewares/Decawave/decadriver/deca_device.c ****  *
 352:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 353:Middlewares/Decawave/decadriver/deca_device.c ****  * @param enable - 1 to enable fine grain TX sequencing, 0 to disable it.
 354:Middlewares/Decawave/decadriver/deca_device.c ****  *
 355:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters none
 356:Middlewares/Decawave/decadriver/deca_device.c ****  *
 357:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 358:Middlewares/Decawave/decadriver/deca_device.c ****  */
 359:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setfinegraintxseq(int enable)
 360:Middlewares/Decawave/decadriver/deca_device.c **** {
 653              		.loc 1 360 1
 654              		.cfi_startproc
 655              		@ args = 0, pretend = 0, frame = 8
 656              		@ frame_needed = 1, uses_anonymous_args = 0
 657 0000 80B5     		push	{r7, lr}
 658              	.LCFI19:
 659              		.cfi_def_cfa_offset 8
 660              		.cfi_offset 7, -8
 661              		.cfi_offset 14, -4
 662 0002 82B0     		sub	sp, sp, #8
 663              	.LCFI20:
 664              		.cfi_def_cfa_offset 16
 665 0004 00AF     		add	r7, sp, #0
 666              	.LCFI21:
 667              		.cfi_def_cfa_register 7
 668 0006 7860     		str	r0, [r7, #4]
 361:Middlewares/Decawave/decadriver/deca_device.c ****     if (enable)
 669              		.loc 1 361 8
 670 0008 7B68     		ldr	r3, [r7, #4]
 671 000a 002B     		cmp	r3, #0
 672 000c 06D0     		beq	.L41
 362:Middlewares/Decawave/decadriver/deca_device.c ****     {
 363:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write16bitoffsetreg(PMSC_ID, PMSC_TXFINESEQ_OFFSET, PMSC_TXFINESEQ_ENABLE);
ARM GAS  /tmp/cc0TY0Fa.s 			page 19


 673              		.loc 1 363 9
 674 000e 40F67432 		movw	r2, #2932
 675 0012 2621     		movs	r1, #38
 676 0014 3620     		movs	r0, #54
 677 0016 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 364:Middlewares/Decawave/decadriver/deca_device.c ****     }
 365:Middlewares/Decawave/decadriver/deca_device.c ****     else
 366:Middlewares/Decawave/decadriver/deca_device.c ****     {
 367:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write16bitoffsetreg(PMSC_ID, PMSC_TXFINESEQ_OFFSET, PMSC_TXFINESEQ_DISABLE);
 368:Middlewares/Decawave/decadriver/deca_device.c ****     }
 369:Middlewares/Decawave/decadriver/deca_device.c **** }
 678              		.loc 1 369 1
 679 001a 04E0     		b	.L43
 680              	.L41:
 367:Middlewares/Decawave/decadriver/deca_device.c ****     }
 681              		.loc 1 367 9
 682 001c 0022     		movs	r2, #0
 683 001e 2621     		movs	r1, #38
 684 0020 3620     		movs	r0, #54
 685 0022 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 686              	.L43:
 687              		.loc 1 369 1
 688 0026 00BF     		nop
 689 0028 0837     		adds	r7, r7, #8
 690              	.LCFI22:
 691              		.cfi_def_cfa_offset 8
 692 002a BD46     		mov	sp, r7
 693              	.LCFI23:
 694              		.cfi_def_cfa_register 13
 695              		@ sp needed
 696 002c 80BD     		pop	{r7, pc}
 697              		.cfi_endproc
 698              	.LFE4:
 700              		.section	.text.dwt_setlnapamode,"ax",%progbits
 701              		.align	1
 702              		.global	dwt_setlnapamode
 703              		.syntax unified
 704              		.thumb
 705              		.thumb_func
 706              		.fpu fpv4-sp-d16
 708              	dwt_setlnapamode:
 709              	.LFB5:
 370:Middlewares/Decawave/decadriver/deca_device.c **** 
 371:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 372:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setlnapamode()
 373:Middlewares/Decawave/decadriver/deca_device.c ****  *
 374:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to enable GPIO for external LNA or PA functionality - HW dependent, consult 
 375:Middlewares/Decawave/decadriver/deca_device.c ****  *        This can also be used for debug as enabling TX and RX GPIOs is quite handy to monitor DW1
 376:Middlewares/Decawave/decadriver/deca_device.c ****  *
 377:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: Enabling PA functionality requires that fine grain TX sequencing is deactivated. This can 
 378:Middlewares/Decawave/decadriver/deca_device.c ****  *       dwt_setfinegraintxseq().
 379:Middlewares/Decawave/decadriver/deca_device.c ****  *
 380:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 381:Middlewares/Decawave/decadriver/deca_device.c ****  * @param lna_pa - bit field: bit 0 if set will enable LNA functionality,
 382:Middlewares/Decawave/decadriver/deca_device.c ****  *                          : bit 1 if set will enable PA functionality,
 383:Middlewares/Decawave/decadriver/deca_device.c ****  *                          : to disable LNA/PA set the bits to 0
 384:Middlewares/Decawave/decadriver/deca_device.c ****  *
ARM GAS  /tmp/cc0TY0Fa.s 			page 20


 385:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 386:Middlewares/Decawave/decadriver/deca_device.c ****  */
 387:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setlnapamode(int lna_pa)
 388:Middlewares/Decawave/decadriver/deca_device.c **** {
 710              		.loc 1 388 1
 711              		.cfi_startproc
 712              		@ args = 0, pretend = 0, frame = 16
 713              		@ frame_needed = 1, uses_anonymous_args = 0
 714 0000 80B5     		push	{r7, lr}
 715              	.LCFI24:
 716              		.cfi_def_cfa_offset 8
 717              		.cfi_offset 7, -8
 718              		.cfi_offset 14, -4
 719 0002 84B0     		sub	sp, sp, #16
 720              	.LCFI25:
 721              		.cfi_def_cfa_offset 24
 722 0004 00AF     		add	r7, sp, #0
 723              	.LCFI26:
 724              		.cfi_def_cfa_register 7
 725 0006 7860     		str	r0, [r7, #4]
 389:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 gpio_mode = dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET);
 726              		.loc 1 389 24
 727 0008 0021     		movs	r1, #0
 728 000a 2620     		movs	r0, #38
 729 000c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 730 0010 F860     		str	r0, [r7, #12]
 390:Middlewares/Decawave/decadriver/deca_device.c ****     gpio_mode &= ~(GPIO_MSGP4_MASK | GPIO_MSGP5_MASK | GPIO_MSGP6_MASK);
 731              		.loc 1 390 15
 732 0012 FB68     		ldr	r3, [r7, #12]
 733 0014 23F47C23 		bic	r3, r3, #1032192
 734 0018 FB60     		str	r3, [r7, #12]
 391:Middlewares/Decawave/decadriver/deca_device.c ****     if (lna_pa & DWT_LNA_ENABLE)
 735              		.loc 1 391 16
 736 001a 7B68     		ldr	r3, [r7, #4]
 737 001c 03F00103 		and	r3, r3, #1
 738              		.loc 1 391 8
 739 0020 002B     		cmp	r3, #0
 740 0022 03D0     		beq	.L45
 392:Middlewares/Decawave/decadriver/deca_device.c ****     {
 393:Middlewares/Decawave/decadriver/deca_device.c ****         gpio_mode |= GPIO_PIN6_EXTRXE;
 741              		.loc 1 393 19
 742 0024 FB68     		ldr	r3, [r7, #12]
 743 0026 43F48023 		orr	r3, r3, #262144
 744 002a FB60     		str	r3, [r7, #12]
 745              	.L45:
 394:Middlewares/Decawave/decadriver/deca_device.c ****     }
 395:Middlewares/Decawave/decadriver/deca_device.c ****     if (lna_pa & DWT_PA_ENABLE)
 746              		.loc 1 395 16
 747 002c 7B68     		ldr	r3, [r7, #4]
 748 002e 03F00203 		and	r3, r3, #2
 749              		.loc 1 395 8
 750 0032 002B     		cmp	r3, #0
 751 0034 03D0     		beq	.L46
 396:Middlewares/Decawave/decadriver/deca_device.c ****     {
 397:Middlewares/Decawave/decadriver/deca_device.c ****         gpio_mode |= (GPIO_PIN5_EXTTXE | GPIO_PIN4_EXTPA);
 752              		.loc 1 397 19
 753 0036 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cc0TY0Fa.s 			page 21


 754 0038 43F4A033 		orr	r3, r3, #81920
 755 003c FB60     		str	r3, [r7, #12]
 756              	.L46:
 398:Middlewares/Decawave/decadriver/deca_device.c ****     }
 399:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET, gpio_mode);
 757              		.loc 1 399 5
 758 003e FA68     		ldr	r2, [r7, #12]
 759 0040 0021     		movs	r1, #0
 760 0042 2620     		movs	r0, #38
 761 0044 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 400:Middlewares/Decawave/decadriver/deca_device.c **** }
 762              		.loc 1 400 1
 763 0048 00BF     		nop
 764 004a 1037     		adds	r7, r7, #16
 765              	.LCFI27:
 766              		.cfi_def_cfa_offset 8
 767 004c BD46     		mov	sp, r7
 768              	.LCFI28:
 769              		.cfi_def_cfa_register 13
 770              		@ sp needed
 771 004e 80BD     		pop	{r7, pc}
 772              		.cfi_endproc
 773              	.LFE5:
 775              		.section	.text.dwt_enablegpioclocks,"ax",%progbits
 776              		.align	1
 777              		.global	dwt_enablegpioclocks
 778              		.syntax unified
 779              		.thumb
 780              		.thumb_func
 781              		.fpu fpv4-sp-d16
 783              	dwt_enablegpioclocks:
 784              	.LFB6:
 401:Middlewares/Decawave/decadriver/deca_device.c **** 
 402:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 403:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_enablegpioclocks()
 404:Middlewares/Decawave/decadriver/deca_device.c ****  *
 405:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to enable GPIO clocks. The clocks are needed to ensure correct GPIO operatio
 406:Middlewares/Decawave/decadriver/deca_device.c ****  *
 407:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 408:Middlewares/Decawave/decadriver/deca_device.c ****  *
 409:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 410:Middlewares/Decawave/decadriver/deca_device.c ****  *
 411:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 412:Middlewares/Decawave/decadriver/deca_device.c ****  */
 413:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_enablegpioclocks(void)
 414:Middlewares/Decawave/decadriver/deca_device.c **** {
 785              		.loc 1 414 1
 786              		.cfi_startproc
 787              		@ args = 0, pretend = 0, frame = 8
 788              		@ frame_needed = 1, uses_anonymous_args = 0
 789 0000 80B5     		push	{r7, lr}
 790              	.LCFI29:
 791              		.cfi_def_cfa_offset 8
 792              		.cfi_offset 7, -8
 793              		.cfi_offset 14, -4
 794 0002 82B0     		sub	sp, sp, #8
 795              	.LCFI30:
ARM GAS  /tmp/cc0TY0Fa.s 			page 22


 796              		.cfi_def_cfa_offset 16
 797 0004 00AF     		add	r7, sp, #0
 798              	.LCFI31:
 799              		.cfi_def_cfa_register 7
 415:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 pmsc_clock_ctrl = dwt_read32bitreg(PMSC_ID);
 800              		.loc 1 415 30
 801 0006 0021     		movs	r1, #0
 802 0008 3620     		movs	r0, #54
 803 000a FFF7FEFF 		bl	dwt_read32bitoffsetreg
 804 000e 7860     		str	r0, [r7, #4]
 416:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(PMSC_ID, pmsc_clock_ctrl | PMSC_CTRL0_GPCE | PMSC_CTRL0_GPRN) ;
 805              		.loc 1 416 5
 806 0010 7B68     		ldr	r3, [r7, #4]
 807 0012 43F44033 		orr	r3, r3, #196608
 808 0016 1A46     		mov	r2, r3
 809 0018 0021     		movs	r1, #0
 810 001a 3620     		movs	r0, #54
 811 001c FFF7FEFF 		bl	dwt_write32bitoffsetreg
 417:Middlewares/Decawave/decadriver/deca_device.c **** }
 812              		.loc 1 417 1
 813 0020 00BF     		nop
 814 0022 0837     		adds	r7, r7, #8
 815              	.LCFI32:
 816              		.cfi_def_cfa_offset 8
 817 0024 BD46     		mov	sp, r7
 818              	.LCFI33:
 819              		.cfi_def_cfa_register 13
 820              		@ sp needed
 821 0026 80BD     		pop	{r7, pc}
 822              		.cfi_endproc
 823              	.LFE6:
 825              		.section	.text.dwt_setgpiodirection,"ax",%progbits
 826              		.align	1
 827              		.global	dwt_setgpiodirection
 828              		.syntax unified
 829              		.thumb
 830              		.thumb_func
 831              		.fpu fpv4-sp-d16
 833              	dwt_setgpiodirection:
 834              	.LFB7:
 418:Middlewares/Decawave/decadriver/deca_device.c **** 
 419:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 420:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setgpiodirection()
 421:Middlewares/Decawave/decadriver/deca_device.c ****  *
 422:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to set GPIO direction as an input (1) or output (0)
 423:Middlewares/Decawave/decadriver/deca_device.c ****  *
 424:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 425:Middlewares/Decawave/decadriver/deca_device.c ****  * @param gpioNum    -   this is the GPIO to configure - see GxM0... GxM8 in the deca_regs.h file
 426:Middlewares/Decawave/decadriver/deca_device.c ****  * @param direction  -   this sets the GPIO direction - see GxP0... GxP8 in the deca_regs.h file
 427:Middlewares/Decawave/decadriver/deca_device.c ****  *
 428:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 429:Middlewares/Decawave/decadriver/deca_device.c ****  *
 430:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 431:Middlewares/Decawave/decadriver/deca_device.c ****  */
 432:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setgpiodirection(uint32 gpioNum, uint32 direction)
 433:Middlewares/Decawave/decadriver/deca_device.c **** {
 835              		.loc 1 433 1
ARM GAS  /tmp/cc0TY0Fa.s 			page 23


 836              		.cfi_startproc
 837              		@ args = 0, pretend = 0, frame = 16
 838              		@ frame_needed = 1, uses_anonymous_args = 0
 839 0000 80B5     		push	{r7, lr}
 840              	.LCFI34:
 841              		.cfi_def_cfa_offset 8
 842              		.cfi_offset 7, -8
 843              		.cfi_offset 14, -4
 844 0002 84B0     		sub	sp, sp, #16
 845              	.LCFI35:
 846              		.cfi_def_cfa_offset 24
 847 0004 00AF     		add	r7, sp, #0
 848              	.LCFI36:
 849              		.cfi_def_cfa_register 7
 850 0006 7860     		str	r0, [r7, #4]
 851 0008 3960     		str	r1, [r7]
 434:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 buf[GPIO_DIR_LEN];
 435:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 command = direction | gpioNum;
 852              		.loc 1 435 12
 853 000a 3A68     		ldr	r2, [r7]
 854 000c 7B68     		ldr	r3, [r7, #4]
 855 000e 1343     		orrs	r3, r3, r2
 856 0010 FB60     		str	r3, [r7, #12]
 436:Middlewares/Decawave/decadriver/deca_device.c **** 
 437:Middlewares/Decawave/decadriver/deca_device.c ****     buf[0] = command & 0xff;
 857              		.loc 1 437 12
 858 0012 FB68     		ldr	r3, [r7, #12]
 859 0014 DBB2     		uxtb	r3, r3
 860 0016 3B72     		strb	r3, [r7, #8]
 438:Middlewares/Decawave/decadriver/deca_device.c ****     buf[1] = (command >> 8) & 0xff;
 861              		.loc 1 438 23
 862 0018 FB68     		ldr	r3, [r7, #12]
 863 001a 1B0A     		lsrs	r3, r3, #8
 864              		.loc 1 438 12
 865 001c DBB2     		uxtb	r3, r3
 866 001e 7B72     		strb	r3, [r7, #9]
 439:Middlewares/Decawave/decadriver/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 867              		.loc 1 439 23
 868 0020 FB68     		ldr	r3, [r7, #12]
 869 0022 1B0C     		lsrs	r3, r3, #16
 870              		.loc 1 439 12
 871 0024 DBB2     		uxtb	r3, r3
 872 0026 BB72     		strb	r3, [r7, #10]
 440:Middlewares/Decawave/decadriver/deca_device.c **** 
 441:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(GPIO_CTRL_ID, GPIO_DIR_OFFSET, GPIO_DIR_LEN, buf);
 873              		.loc 1 441 5
 874 0028 07F10803 		add	r3, r7, #8
 875 002c 0322     		movs	r2, #3
 876 002e 0821     		movs	r1, #8
 877 0030 2620     		movs	r0, #38
 878 0032 FFF7FEFF 		bl	dwt_writetodevice
 442:Middlewares/Decawave/decadriver/deca_device.c **** }
 879              		.loc 1 442 1
 880 0036 00BF     		nop
 881 0038 1037     		adds	r7, r7, #16
 882              	.LCFI37:
 883              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc0TY0Fa.s 			page 24


 884 003a BD46     		mov	sp, r7
 885              	.LCFI38:
 886              		.cfi_def_cfa_register 13
 887              		@ sp needed
 888 003c 80BD     		pop	{r7, pc}
 889              		.cfi_endproc
 890              	.LFE7:
 892              		.section	.text.dwt_setgpiovalue,"ax",%progbits
 893              		.align	1
 894              		.global	dwt_setgpiovalue
 895              		.syntax unified
 896              		.thumb
 897              		.thumb_func
 898              		.fpu fpv4-sp-d16
 900              	dwt_setgpiovalue:
 901              	.LFB8:
 443:Middlewares/Decawave/decadriver/deca_device.c **** 
 444:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 445:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setgpiovalue()
 446:Middlewares/Decawave/decadriver/deca_device.c ****  *
 447:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to set GPIO value as (1) or (0) only applies if the GPIO is configured as ou
 448:Middlewares/Decawave/decadriver/deca_device.c ****  *
 449:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 450:Middlewares/Decawave/decadriver/deca_device.c ****  * @param gpioNum    -   this is the GPIO to configure - see DWT_GxP0... DWT_GxP8
 451:Middlewares/Decawave/decadriver/deca_device.c ****  * @param value  -   this sets the GPIO value - see DWT_GxP0... DWT_GxP8
 452:Middlewares/Decawave/decadriver/deca_device.c ****  *
 453:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 454:Middlewares/Decawave/decadriver/deca_device.c ****  *
 455:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 456:Middlewares/Decawave/decadriver/deca_device.c ****  */
 457:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setgpiovalue(uint32 gpioNum, uint32 value)
 458:Middlewares/Decawave/decadriver/deca_device.c **** {
 902              		.loc 1 458 1
 903              		.cfi_startproc
 904              		@ args = 0, pretend = 0, frame = 16
 905              		@ frame_needed = 1, uses_anonymous_args = 0
 906 0000 80B5     		push	{r7, lr}
 907              	.LCFI39:
 908              		.cfi_def_cfa_offset 8
 909              		.cfi_offset 7, -8
 910              		.cfi_offset 14, -4
 911 0002 84B0     		sub	sp, sp, #16
 912              	.LCFI40:
 913              		.cfi_def_cfa_offset 24
 914 0004 00AF     		add	r7, sp, #0
 915              	.LCFI41:
 916              		.cfi_def_cfa_register 7
 917 0006 7860     		str	r0, [r7, #4]
 918 0008 3960     		str	r1, [r7]
 459:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 buf[GPIO_DOUT_LEN];
 460:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 command = value | gpioNum;
 919              		.loc 1 460 12
 920 000a 3A68     		ldr	r2, [r7]
 921 000c 7B68     		ldr	r3, [r7, #4]
 922 000e 1343     		orrs	r3, r3, r2
 923 0010 FB60     		str	r3, [r7, #12]
 461:Middlewares/Decawave/decadriver/deca_device.c **** 
ARM GAS  /tmp/cc0TY0Fa.s 			page 25


 462:Middlewares/Decawave/decadriver/deca_device.c ****     buf[0] = command & 0xff;
 924              		.loc 1 462 12
 925 0012 FB68     		ldr	r3, [r7, #12]
 926 0014 DBB2     		uxtb	r3, r3
 927 0016 3B72     		strb	r3, [r7, #8]
 463:Middlewares/Decawave/decadriver/deca_device.c ****     buf[1] = (command >> 8) & 0xff;
 928              		.loc 1 463 23
 929 0018 FB68     		ldr	r3, [r7, #12]
 930 001a 1B0A     		lsrs	r3, r3, #8
 931              		.loc 1 463 12
 932 001c DBB2     		uxtb	r3, r3
 933 001e 7B72     		strb	r3, [r7, #9]
 464:Middlewares/Decawave/decadriver/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 934              		.loc 1 464 23
 935 0020 FB68     		ldr	r3, [r7, #12]
 936 0022 1B0C     		lsrs	r3, r3, #16
 937              		.loc 1 464 12
 938 0024 DBB2     		uxtb	r3, r3
 939 0026 BB72     		strb	r3, [r7, #10]
 465:Middlewares/Decawave/decadriver/deca_device.c **** 
 466:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(GPIO_CTRL_ID, GPIO_DOUT_OFFSET, GPIO_DOUT_LEN, buf);
 940              		.loc 1 466 5
 941 0028 07F10803 		add	r3, r7, #8
 942 002c 0322     		movs	r2, #3
 943 002e 0C21     		movs	r1, #12
 944 0030 2620     		movs	r0, #38
 945 0032 FFF7FEFF 		bl	dwt_writetodevice
 467:Middlewares/Decawave/decadriver/deca_device.c **** }
 946              		.loc 1 467 1
 947 0036 00BF     		nop
 948 0038 1037     		adds	r7, r7, #16
 949              	.LCFI42:
 950              		.cfi_def_cfa_offset 8
 951 003a BD46     		mov	sp, r7
 952              	.LCFI43:
 953              		.cfi_def_cfa_register 13
 954              		@ sp needed
 955 003c 80BD     		pop	{r7, pc}
 956              		.cfi_endproc
 957              	.LFE8:
 959              		.section	.text.dwt_getgpiovalue,"ax",%progbits
 960              		.align	1
 961              		.global	dwt_getgpiovalue
 962              		.syntax unified
 963              		.thumb
 964              		.thumb_func
 965              		.fpu fpv4-sp-d16
 967              	dwt_getgpiovalue:
 968              	.LFB9:
 468:Middlewares/Decawave/decadriver/deca_device.c **** 
 469:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 470:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_getgpiovalue()
 471:Middlewares/Decawave/decadriver/deca_device.c ****  *
 472:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to return 1 or 0 depending if the depending if the GPIO is high or low, only
 473:Middlewares/Decawave/decadriver/deca_device.c ****  *        be tested at a time
 474:Middlewares/Decawave/decadriver/deca_device.c ****  *
 475:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
ARM GAS  /tmp/cc0TY0Fa.s 			page 26


 476:Middlewares/Decawave/decadriver/deca_device.c ****  * @param gpioNum    -   this is the GPIO to configure - see DWT_GxP0... DWT_GxP8
 477:Middlewares/Decawave/decadriver/deca_device.c ****  *
 478:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 479:Middlewares/Decawave/decadriver/deca_device.c ****  *
 480:Middlewares/Decawave/decadriver/deca_device.c ****  * return int (1 or 0)
 481:Middlewares/Decawave/decadriver/deca_device.c ****  */
 482:Middlewares/Decawave/decadriver/deca_device.c **** int dwt_getgpiovalue(uint32 gpioNum)
 483:Middlewares/Decawave/decadriver/deca_device.c **** {
 969              		.loc 1 483 1
 970              		.cfi_startproc
 971              		@ args = 0, pretend = 0, frame = 8
 972              		@ frame_needed = 1, uses_anonymous_args = 0
 973 0000 80B5     		push	{r7, lr}
 974              	.LCFI44:
 975              		.cfi_def_cfa_offset 8
 976              		.cfi_offset 7, -8
 977              		.cfi_offset 14, -4
 978 0002 82B0     		sub	sp, sp, #8
 979              	.LCFI45:
 980              		.cfi_def_cfa_offset 16
 981 0004 00AF     		add	r7, sp, #0
 982              	.LCFI46:
 983              		.cfi_def_cfa_register 7
 984 0006 7860     		str	r0, [r7, #4]
 484:Middlewares/Decawave/decadriver/deca_device.c ****     return ((dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_RAW_OFFSET) & gpioNum)? 1 : 0);
 985              		.loc 1 484 14
 986 0008 2821     		movs	r1, #40
 987 000a 2620     		movs	r0, #38
 988 000c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 989 0010 0246     		mov	r2, r0
 990              		.loc 1 484 68
 991 0012 7B68     		ldr	r3, [r7, #4]
 992 0014 1340     		ands	r3, r3, r2
 993              		.loc 1 484 82
 994 0016 002B     		cmp	r3, #0
 995 0018 14BF     		ite	ne
 996 001a 0123     		movne	r3, #1
 997 001c 0023     		moveq	r3, #0
 998 001e DBB2     		uxtb	r3, r3
 485:Middlewares/Decawave/decadriver/deca_device.c **** }
 999              		.loc 1 485 1
 1000 0020 1846     		mov	r0, r3
 1001 0022 0837     		adds	r7, r7, #8
 1002              	.LCFI47:
 1003              		.cfi_def_cfa_offset 8
 1004 0024 BD46     		mov	sp, r7
 1005              	.LCFI48:
 1006              		.cfi_def_cfa_register 13
 1007              		@ sp needed
 1008 0026 80BD     		pop	{r7, pc}
 1009              		.cfi_endproc
 1010              	.LFE9:
 1012              		.section	.text.dwt_geticrefvolt,"ax",%progbits
 1013              		.align	1
 1014              		.global	dwt_geticrefvolt
 1015              		.syntax unified
 1016              		.thumb
ARM GAS  /tmp/cc0TY0Fa.s 			page 27


 1017              		.thumb_func
 1018              		.fpu fpv4-sp-d16
 1020              	dwt_geticrefvolt:
 1021              	.LFB10:
 486:Middlewares/Decawave/decadriver/deca_device.c **** 
 487:Middlewares/Decawave/decadriver/deca_device.c **** 
 488:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 489:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_geticrefvolt()
 490:Middlewares/Decawave/decadriver/deca_device.c ****  *
 491:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to return the read V measured @ 3.3 V value recorded in OTP address 0x8 (VBA
 492:Middlewares/Decawave/decadriver/deca_device.c ****  *
 493:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 494:Middlewares/Decawave/decadriver/deca_device.c ****  *
 495:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 496:Middlewares/Decawave/decadriver/deca_device.c ****  *
 497:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 498:Middlewares/Decawave/decadriver/deca_device.c ****  *
 499:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the 8 bit V bat value as programmed in the factory
 500:Middlewares/Decawave/decadriver/deca_device.c ****  */
 501:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_geticrefvolt(void)
 502:Middlewares/Decawave/decadriver/deca_device.c **** {
 1022              		.loc 1 502 1
 1023              		.cfi_startproc
 1024              		@ args = 0, pretend = 0, frame = 0
 1025              		@ frame_needed = 1, uses_anonymous_args = 0
 1026              		@ link register save eliminated.
 1027 0000 80B4     		push	{r7}
 1028              	.LCFI49:
 1029              		.cfi_def_cfa_offset 4
 1030              		.cfi_offset 7, -4
 1031 0002 00AF     		add	r7, sp, #0
 1032              	.LCFI50:
 1033              		.cfi_def_cfa_register 7
 503:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 504:Middlewares/Decawave/decadriver/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_BAT);
 505:Middlewares/Decawave/decadriver/deca_device.c **** #endif
 506:Middlewares/Decawave/decadriver/deca_device.c ****     return pdw1000local->vBatP;
 1034              		.loc 1 506 24
 1035 0004 034B     		ldr	r3, .L54
 1036 0006 1B68     		ldr	r3, [r3]
 1037 0008 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 507:Middlewares/Decawave/decadriver/deca_device.c **** }
 1038              		.loc 1 507 1
 1039 000a 1846     		mov	r0, r3
 1040 000c BD46     		mov	sp, r7
 1041              	.LCFI51:
 1042              		.cfi_def_cfa_register 13
 1043              		@ sp needed
 1044 000e 5DF8047B 		ldr	r7, [sp], #4
 1045              	.LCFI52:
 1046              		.cfi_restore 7
 1047              		.cfi_def_cfa_offset 0
 1048 0012 7047     		bx	lr
 1049              	.L55:
 1050              		.align	2
 1051              	.L54:
 1052 0014 00000000 		.word	pdw1000local
ARM GAS  /tmp/cc0TY0Fa.s 			page 28


 1053              		.cfi_endproc
 1054              	.LFE10:
 1056              		.section	.text.dwt_geticreftemp,"ax",%progbits
 1057              		.align	1
 1058              		.global	dwt_geticreftemp
 1059              		.syntax unified
 1060              		.thumb
 1061              		.thumb_func
 1062              		.fpu fpv4-sp-d16
 1064              	dwt_geticreftemp:
 1065              	.LFB11:
 508:Middlewares/Decawave/decadriver/deca_device.c **** 
 509:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 510:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_geticreftemp()
 511:Middlewares/Decawave/decadriver/deca_device.c ****  *
 512:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to return the read T measured @ 23 C value recorded in OTP address 0x9 (VTEM
 513:Middlewares/Decawave/decadriver/deca_device.c ****  *
 514:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 515:Middlewares/Decawave/decadriver/deca_device.c ****  *
 516:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 517:Middlewares/Decawave/decadriver/deca_device.c ****  *
 518:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 519:Middlewares/Decawave/decadriver/deca_device.c ****  *
 520:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the 8 bit V temp value as programmed in the factory
 521:Middlewares/Decawave/decadriver/deca_device.c ****  */
 522:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_geticreftemp(void)
 523:Middlewares/Decawave/decadriver/deca_device.c **** {
 1066              		.loc 1 523 1
 1067              		.cfi_startproc
 1068              		@ args = 0, pretend = 0, frame = 0
 1069              		@ frame_needed = 1, uses_anonymous_args = 0
 1070              		@ link register save eliminated.
 1071 0000 80B4     		push	{r7}
 1072              	.LCFI53:
 1073              		.cfi_def_cfa_offset 4
 1074              		.cfi_offset 7, -4
 1075 0002 00AF     		add	r7, sp, #0
 1076              	.LCFI54:
 1077              		.cfi_def_cfa_register 7
 524:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 525:Middlewares/Decawave/decadriver/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_TMP);
 526:Middlewares/Decawave/decadriver/deca_device.c **** #endif
 527:Middlewares/Decawave/decadriver/deca_device.c ****     return pdw1000local->tempP;
 1078              		.loc 1 527 24
 1079 0004 034B     		ldr	r3, .L58
 1080 0006 1B68     		ldr	r3, [r3]
 1081 0008 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 528:Middlewares/Decawave/decadriver/deca_device.c **** }
 1082              		.loc 1 528 1
 1083 000a 1846     		mov	r0, r3
 1084 000c BD46     		mov	sp, r7
 1085              	.LCFI55:
 1086              		.cfi_def_cfa_register 13
 1087              		@ sp needed
 1088 000e 5DF8047B 		ldr	r7, [sp], #4
 1089              	.LCFI56:
 1090              		.cfi_restore 7
ARM GAS  /tmp/cc0TY0Fa.s 			page 29


 1091              		.cfi_def_cfa_offset 0
 1092 0012 7047     		bx	lr
 1093              	.L59:
 1094              		.align	2
 1095              	.L58:
 1096 0014 00000000 		.word	pdw1000local
 1097              		.cfi_endproc
 1098              	.LFE11:
 1100              		.section	.text.dwt_getpartid,"ax",%progbits
 1101              		.align	1
 1102              		.global	dwt_getpartid
 1103              		.syntax unified
 1104              		.thumb
 1105              		.thumb_func
 1106              		.fpu fpv4-sp-d16
 1108              	dwt_getpartid:
 1109              	.LFB12:
 529:Middlewares/Decawave/decadriver/deca_device.c **** 
 530:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 531:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_getpartid()
 532:Middlewares/Decawave/decadriver/deca_device.c ****  *
 533:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to return the read part ID (or chip ID) of the device
 534:Middlewares/Decawave/decadriver/deca_device.c ****  *
 535:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 536:Middlewares/Decawave/decadriver/deca_device.c ****  *
 537:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 538:Middlewares/Decawave/decadriver/deca_device.c ****  *
 539:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 540:Middlewares/Decawave/decadriver/deca_device.c ****  *
 541:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the 32 bit part ID (or chip ID) value as programmed in the factory
 542:Middlewares/Decawave/decadriver/deca_device.c ****  */
 543:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_getpartid(void)
 544:Middlewares/Decawave/decadriver/deca_device.c **** {
 1110              		.loc 1 544 1
 1111              		.cfi_startproc
 1112              		@ args = 0, pretend = 0, frame = 0
 1113              		@ frame_needed = 1, uses_anonymous_args = 0
 1114              		@ link register save eliminated.
 1115 0000 80B4     		push	{r7}
 1116              	.LCFI57:
 1117              		.cfi_def_cfa_offset 4
 1118              		.cfi_offset 7, -4
 1119 0002 00AF     		add	r7, sp, #0
 1120              	.LCFI58:
 1121              		.cfi_def_cfa_register 7
 545:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 546:Middlewares/Decawave/decadriver/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_PID);
 547:Middlewares/Decawave/decadriver/deca_device.c **** #endif
 548:Middlewares/Decawave/decadriver/deca_device.c **** 
 549:Middlewares/Decawave/decadriver/deca_device.c ****     return pdw1000local->partID;
 1122              		.loc 1 549 24
 1123 0004 034B     		ldr	r3, .L62
 1124 0006 1B68     		ldr	r3, [r3]
 1125 0008 1B68     		ldr	r3, [r3]
 550:Middlewares/Decawave/decadriver/deca_device.c **** }
 1126              		.loc 1 550 1
 1127 000a 1846     		mov	r0, r3
ARM GAS  /tmp/cc0TY0Fa.s 			page 30


 1128 000c BD46     		mov	sp, r7
 1129              	.LCFI59:
 1130              		.cfi_def_cfa_register 13
 1131              		@ sp needed
 1132 000e 5DF8047B 		ldr	r7, [sp], #4
 1133              	.LCFI60:
 1134              		.cfi_restore 7
 1135              		.cfi_def_cfa_offset 0
 1136 0012 7047     		bx	lr
 1137              	.L63:
 1138              		.align	2
 1139              	.L62:
 1140 0014 00000000 		.word	pdw1000local
 1141              		.cfi_endproc
 1142              	.LFE12:
 1144              		.section	.text.dwt_getlotid,"ax",%progbits
 1145              		.align	1
 1146              		.global	dwt_getlotid
 1147              		.syntax unified
 1148              		.thumb
 1149              		.thumb_func
 1150              		.fpu fpv4-sp-d16
 1152              	dwt_getlotid:
 1153              	.LFB13:
 551:Middlewares/Decawave/decadriver/deca_device.c **** 
 552:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 553:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_getlotid()
 554:Middlewares/Decawave/decadriver/deca_device.c ****  *
 555:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to return the read lot ID of the device
 556:Middlewares/Decawave/decadriver/deca_device.c ****  *
 557:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 558:Middlewares/Decawave/decadriver/deca_device.c ****  *
 559:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 560:Middlewares/Decawave/decadriver/deca_device.c ****  *
 561:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 562:Middlewares/Decawave/decadriver/deca_device.c ****  *
 563:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the 32 bit lot ID value as programmed in the factory
 564:Middlewares/Decawave/decadriver/deca_device.c ****  */
 565:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_getlotid(void)
 566:Middlewares/Decawave/decadriver/deca_device.c **** {
 1154              		.loc 1 566 1
 1155              		.cfi_startproc
 1156              		@ args = 0, pretend = 0, frame = 0
 1157              		@ frame_needed = 1, uses_anonymous_args = 0
 1158              		@ link register save eliminated.
 1159 0000 80B4     		push	{r7}
 1160              	.LCFI61:
 1161              		.cfi_def_cfa_offset 4
 1162              		.cfi_offset 7, -4
 1163 0002 00AF     		add	r7, sp, #0
 1164              	.LCFI62:
 1165              		.cfi_def_cfa_register 7
 567:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 568:Middlewares/Decawave/decadriver/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_LID);
 569:Middlewares/Decawave/decadriver/deca_device.c **** #endif
 570:Middlewares/Decawave/decadriver/deca_device.c **** 
 571:Middlewares/Decawave/decadriver/deca_device.c ****     return pdw1000local->lotID;
ARM GAS  /tmp/cc0TY0Fa.s 			page 31


 1166              		.loc 1 571 24
 1167 0004 034B     		ldr	r3, .L66
 1168 0006 1B68     		ldr	r3, [r3]
 1169 0008 5B68     		ldr	r3, [r3, #4]
 572:Middlewares/Decawave/decadriver/deca_device.c **** }
 1170              		.loc 1 572 1
 1171 000a 1846     		mov	r0, r3
 1172 000c BD46     		mov	sp, r7
 1173              	.LCFI63:
 1174              		.cfi_def_cfa_register 13
 1175              		@ sp needed
 1176 000e 5DF8047B 		ldr	r7, [sp], #4
 1177              	.LCFI64:
 1178              		.cfi_restore 7
 1179              		.cfi_def_cfa_offset 0
 1180 0012 7047     		bx	lr
 1181              	.L67:
 1182              		.align	2
 1183              	.L66:
 1184 0014 00000000 		.word	pdw1000local
 1185              		.cfi_endproc
 1186              	.LFE13:
 1188              		.section	.text.dwt_readdevid,"ax",%progbits
 1189              		.align	1
 1190              		.global	dwt_readdevid
 1191              		.syntax unified
 1192              		.thumb
 1193              		.thumb_func
 1194              		.fpu fpv4-sp-d16
 1196              	dwt_readdevid:
 1197              	.LFB14:
 573:Middlewares/Decawave/decadriver/deca_device.c **** 
 574:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 575:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readdevid()
 576:Middlewares/Decawave/decadriver/deca_device.c ****  *
 577:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to return the read device type and revision information of the DW1000 device
 578:Middlewares/Decawave/decadriver/deca_device.c ****  *
 579:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 580:Middlewares/Decawave/decadriver/deca_device.c ****  *
 581:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 582:Middlewares/Decawave/decadriver/deca_device.c ****  *
 583:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the read value which for DW1000 is 0xDECA0130
 584:Middlewares/Decawave/decadriver/deca_device.c ****  */
 585:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_readdevid(void)
 586:Middlewares/Decawave/decadriver/deca_device.c **** {
 1198              		.loc 1 586 1
 1199              		.cfi_startproc
 1200              		@ args = 0, pretend = 0, frame = 0
 1201              		@ frame_needed = 1, uses_anonymous_args = 0
 1202 0000 80B5     		push	{r7, lr}
 1203              	.LCFI65:
 1204              		.cfi_def_cfa_offset 8
 1205              		.cfi_offset 7, -8
 1206              		.cfi_offset 14, -4
 1207 0002 00AF     		add	r7, sp, #0
 1208              	.LCFI66:
 1209              		.cfi_def_cfa_register 7
ARM GAS  /tmp/cc0TY0Fa.s 			page 32


 587:Middlewares/Decawave/decadriver/deca_device.c ****     return dwt_read32bitoffsetreg(DEV_ID_ID,0);
 1210              		.loc 1 587 12
 1211 0004 0021     		movs	r1, #0
 1212 0006 0020     		movs	r0, #0
 1213 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1214 000c 0346     		mov	r3, r0
 588:Middlewares/Decawave/decadriver/deca_device.c **** }
 1215              		.loc 1 588 1
 1216 000e 1846     		mov	r0, r3
 1217 0010 80BD     		pop	{r7, pc}
 1218              		.cfi_endproc
 1219              	.LFE14:
 1221              		.section	.text.dwt_configuretxrf,"ax",%progbits
 1222              		.align	1
 1223              		.global	dwt_configuretxrf
 1224              		.syntax unified
 1225              		.thumb
 1226              		.thumb_func
 1227              		.fpu fpv4-sp-d16
 1229              	dwt_configuretxrf:
 1230              	.LFB15:
 589:Middlewares/Decawave/decadriver/deca_device.c **** 
 590:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 591:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_configuretxrf()
 592:Middlewares/Decawave/decadriver/deca_device.c ****  *
 593:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function provides the API for the configuration of the TX spectrum
 594:Middlewares/Decawave/decadriver/deca_device.c ****  * including the power and pulse generator delay. The input is a pointer to the data structure
 595:Middlewares/Decawave/decadriver/deca_device.c ****  * of type dwt_txconfig_t that holds all the configurable items.
 596:Middlewares/Decawave/decadriver/deca_device.c ****  *
 597:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 598:Middlewares/Decawave/decadriver/deca_device.c ****  * @param config    -   pointer to the txrf configuration structure, which contains the tx rf confi
 599:Middlewares/Decawave/decadriver/deca_device.c ****  *
 600:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 601:Middlewares/Decawave/decadriver/deca_device.c ****  *
 602:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 603:Middlewares/Decawave/decadriver/deca_device.c ****  */
 604:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_configuretxrf(dwt_txconfig_t *config)
 605:Middlewares/Decawave/decadriver/deca_device.c **** {
 1231              		.loc 1 605 1
 1232              		.cfi_startproc
 1233              		@ args = 0, pretend = 0, frame = 8
 1234              		@ frame_needed = 1, uses_anonymous_args = 0
 1235 0000 80B5     		push	{r7, lr}
 1236              	.LCFI67:
 1237              		.cfi_def_cfa_offset 8
 1238              		.cfi_offset 7, -8
 1239              		.cfi_offset 14, -4
 1240 0002 82B0     		sub	sp, sp, #8
 1241              	.LCFI68:
 1242              		.cfi_def_cfa_offset 16
 1243 0004 00AF     		add	r7, sp, #0
 1244              	.LCFI69:
 1245              		.cfi_def_cfa_register 7
 1246 0006 7860     		str	r0, [r7, #4]
 606:Middlewares/Decawave/decadriver/deca_device.c **** 
 607:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure RF TX PG_DELAY
 608:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGDELAY_OFFSET, config->PGdly);
ARM GAS  /tmp/cc0TY0Fa.s 			page 33


 1247              		.loc 1 608 5
 1248 0008 7B68     		ldr	r3, [r7, #4]
 1249 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1250 000c 1A46     		mov	r2, r3
 1251 000e 0B21     		movs	r1, #11
 1252 0010 2A20     		movs	r0, #42
 1253 0012 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 609:Middlewares/Decawave/decadriver/deca_device.c **** 
 610:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure TX power
 611:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(TX_POWER_ID, config->power);
 1254              		.loc 1 611 5
 1255 0016 7B68     		ldr	r3, [r7, #4]
 1256 0018 5B68     		ldr	r3, [r3, #4]
 1257 001a 1A46     		mov	r2, r3
 1258 001c 0021     		movs	r1, #0
 1259 001e 1E20     		movs	r0, #30
 1260 0020 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 612:Middlewares/Decawave/decadriver/deca_device.c **** 
 613:Middlewares/Decawave/decadriver/deca_device.c **** }
 1261              		.loc 1 613 1
 1262 0024 00BF     		nop
 1263 0026 0837     		adds	r7, r7, #8
 1264              	.LCFI70:
 1265              		.cfi_def_cfa_offset 8
 1266 0028 BD46     		mov	sp, r7
 1267              	.LCFI71:
 1268              		.cfi_def_cfa_register 13
 1269              		@ sp needed
 1270 002a 80BD     		pop	{r7, pc}
 1271              		.cfi_endproc
 1272              	.LFE15:
 1274              		.section	.text.dwt_configurefor64plen,"ax",%progbits
 1275              		.align	1
 1276              		.global	dwt_configurefor64plen
 1277              		.syntax unified
 1278              		.thumb
 1279              		.thumb_func
 1280              		.fpu fpv4-sp-d16
 1282              	dwt_configurefor64plen:
 1283              	.LFB16:
 614:Middlewares/Decawave/decadriver/deca_device.c **** 
 615:Middlewares/Decawave/decadriver/deca_device.c **** 
 616:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 617:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_configurefor64plen()
 618:Middlewares/Decawave/decadriver/deca_device.c ****  *  - Use default OPS table should be used with following register modifications:
 619:Middlewares/Decawave/decadriver/deca_device.c ****  *    These modifications optimise the default OPS configuration further for 64 length preamble use
 620:Middlewares/Decawave/decadriver/deca_device.c ****  *
 621:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: These register settings are not preserved during SLEEP/DEEPSLEEP, thus they should be prog
 622:Middlewares/Decawave/decadriver/deca_device.c ****  *
 623:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 624:Middlewares/Decawave/decadriver/deca_device.c ****  * @param prf
 625:Middlewares/Decawave/decadriver/deca_device.c ****  *
 626:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 627:Middlewares/Decawave/decadriver/deca_device.c ****  *
 628:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 629:Middlewares/Decawave/decadriver/deca_device.c ****  */
 630:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_configurefor64plen(int prf)
ARM GAS  /tmp/cc0TY0Fa.s 			page 34


 631:Middlewares/Decawave/decadriver/deca_device.c **** {
 1284              		.loc 1 631 1
 1285              		.cfi_startproc
 1286              		@ args = 0, pretend = 0, frame = 8
 1287              		@ frame_needed = 1, uses_anonymous_args = 0
 1288 0000 80B5     		push	{r7, lr}
 1289              	.LCFI72:
 1290              		.cfi_def_cfa_offset 8
 1291              		.cfi_offset 7, -8
 1292              		.cfi_offset 14, -4
 1293 0002 82B0     		sub	sp, sp, #8
 1294              	.LCFI73:
 1295              		.cfi_def_cfa_offset 16
 1296 0004 00AF     		add	r7, sp, #0
 1297              	.LCFI74:
 1298              		.cfi_def_cfa_register 7
 1299 0006 7860     		str	r0, [r7, #4]
 632:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(CRTR_ID, CRTR_GEAR_OFFSET, DEMOD_GEAR_64L);
 1300              		.loc 1 632 5
 1301 0008 4722     		movs	r2, #71
 1302 000a 2821     		movs	r1, #40
 1303 000c 3120     		movs	r0, #49
 1304 000e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 633:Middlewares/Decawave/decadriver/deca_device.c **** 
 634:Middlewares/Decawave/decadriver/deca_device.c ****     if(prf == DWT_PRF_16M)
 1305              		.loc 1 634 7
 1306 0012 7B68     		ldr	r3, [r7, #4]
 1307 0014 012B     		cmp	r3, #1
 1308 0016 05D1     		bne	.L72
 635:Middlewares/Decawave/decadriver/deca_device.c ****     {
 636:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE2_OFFSET+2, DRX_TUNE2_UNCONF_SFD_TH_PRF16);
 1309              		.loc 1 636 9
 1310 0018 0E22     		movs	r2, #14
 1311 001a 0A21     		movs	r1, #10
 1312 001c 2720     		movs	r0, #39
 1313 001e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 637:Middlewares/Decawave/decadriver/deca_device.c ****     }
 638:Middlewares/Decawave/decadriver/deca_device.c ****     else
 639:Middlewares/Decawave/decadriver/deca_device.c ****     {
 640:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE2_OFFSET+2, DRX_TUNE2_UNCONF_SFD_TH_PRF64);
 641:Middlewares/Decawave/decadriver/deca_device.c ****     }
 642:Middlewares/Decawave/decadriver/deca_device.c **** }
 1314              		.loc 1 642 1
 1315 0022 04E0     		b	.L74
 1316              	.L72:
 640:Middlewares/Decawave/decadriver/deca_device.c ****     }
 1317              		.loc 1 640 9
 1318 0024 2022     		movs	r2, #32
 1319 0026 0A21     		movs	r1, #10
 1320 0028 2720     		movs	r0, #39
 1321 002a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 1322              	.L74:
 1323              		.loc 1 642 1
 1324 002e 00BF     		nop
 1325 0030 0837     		adds	r7, r7, #8
 1326              	.LCFI75:
 1327              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc0TY0Fa.s 			page 35


 1328 0032 BD46     		mov	sp, r7
 1329              	.LCFI76:
 1330              		.cfi_def_cfa_register 13
 1331              		@ sp needed
 1332 0034 80BD     		pop	{r7, pc}
 1333              		.cfi_endproc
 1334              	.LFE16:
 1336              		.section	.text.dwt_configure,"ax",%progbits
 1337              		.align	1
 1338              		.global	dwt_configure
 1339              		.syntax unified
 1340              		.thumb
 1341              		.thumb_func
 1342              		.fpu fpv4-sp-d16
 1344              	dwt_configure:
 1345              	.LFB17:
 643:Middlewares/Decawave/decadriver/deca_device.c **** 
 644:Middlewares/Decawave/decadriver/deca_device.c **** 
 645:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 646:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_configure()
 647:Middlewares/Decawave/decadriver/deca_device.c ****  *
 648:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function provides the main API for the configuration of the
 649:Middlewares/Decawave/decadriver/deca_device.c ****  * DW1000 and this low-level driver.  The input is a pointer to the data structure
 650:Middlewares/Decawave/decadriver/deca_device.c ****  * of type dwt_config_t that holds all the configurable items.
 651:Middlewares/Decawave/decadriver/deca_device.c ****  * The dwt_config_t structure shows which ones are supported
 652:Middlewares/Decawave/decadriver/deca_device.c ****  *
 653:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 654:Middlewares/Decawave/decadriver/deca_device.c ****  * @param config    -   pointer to the configuration structure, which contains the device configura
 655:Middlewares/Decawave/decadriver/deca_device.c ****  *
 656:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 657:Middlewares/Decawave/decadriver/deca_device.c ****  *
 658:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 659:Middlewares/Decawave/decadriver/deca_device.c ****  */
 660:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_configure(dwt_config_t *config)
 661:Middlewares/Decawave/decadriver/deca_device.c **** {
 1346              		.loc 1 661 1
 1347              		.cfi_startproc
 1348              		@ args = 0, pretend = 0, frame = 24
 1349              		@ frame_needed = 1, uses_anonymous_args = 0
 1350 0000 80B5     		push	{r7, lr}
 1351              	.LCFI77:
 1352              		.cfi_def_cfa_offset 8
 1353              		.cfi_offset 7, -8
 1354              		.cfi_offset 14, -4
 1355 0002 86B0     		sub	sp, sp, #24
 1356              	.LCFI78:
 1357              		.cfi_def_cfa_offset 32
 1358 0004 00AF     		add	r7, sp, #0
 1359              	.LCFI79:
 1360              		.cfi_def_cfa_register 7
 1361 0006 7860     		str	r0, [r7, #4]
 662:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 nsSfd_result  = 0;
 1362              		.loc 1 662 11
 1363 0008 0023     		movs	r3, #0
 1364 000a FB75     		strb	r3, [r7, #23]
 663:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 useDWnsSFD = 0;
 1365              		.loc 1 663 11
ARM GAS  /tmp/cc0TY0Fa.s 			page 36


 1366 000c 0023     		movs	r3, #0
 1367 000e BB75     		strb	r3, [r7, #22]
 664:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 chan = config->chan ;
 1368              		.loc 1 664 11
 1369 0010 7B68     		ldr	r3, [r7, #4]
 1370 0012 1B78     		ldrb	r3, [r3]
 1371 0014 FB74     		strb	r3, [r7, #19]
 665:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 regval ;
 666:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 reg16 = lde_replicaCoeff[config->rxCode];
 1372              		.loc 1 666 43
 1373 0016 7B68     		ldr	r3, [r7, #4]
 1374 0018 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 1375 001a 1A46     		mov	r2, r3
 1376              		.loc 1 666 12
 1377 001c A14B     		ldr	r3, .L86
 1378 001e 33F81230 		ldrh	r3, [r3, r2, lsl #1]	@ movhi
 1379 0022 BB82     		strh	r3, [r7, #20]	@ movhi
 667:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 prfIndex = config->prf - DWT_PRF_16M;
 1380              		.loc 1 667 28
 1381 0024 7B68     		ldr	r3, [r7, #4]
 1382 0026 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1383              		.loc 1 667 11
 1384 0028 013B     		subs	r3, r3, #1
 1385 002a BB74     		strb	r3, [r7, #18]
 668:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 bw = ((chan == 4) || (chan == 7)) ? 1 : 0 ; // Select wide or narrow band
 1386              		.loc 1 668 49
 1387 002c FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 1388 002e 042B     		cmp	r3, #4
 1389 0030 02D0     		beq	.L76
 1390              		.loc 1 668 49 is_stmt 0 discriminator 2
 1391 0032 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 1392 0034 072B     		cmp	r3, #7
 1393 0036 01D1     		bne	.L77
 1394              	.L76:
 1395              		.loc 1 668 49 discriminator 3
 1396 0038 0123     		movs	r3, #1
 1397 003a 00E0     		b	.L78
 1398              	.L77:
 1399              		.loc 1 668 49 discriminator 4
 1400 003c 0023     		movs	r3, #0
 1401              	.L78:
 1402              		.loc 1 668 11 is_stmt 1 discriminator 6
 1403 003e 7B74     		strb	r3, [r7, #17]
 669:Middlewares/Decawave/decadriver/deca_device.c **** 
 670:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 671:Middlewares/Decawave/decadriver/deca_device.c ****     assert(config->dataRate <= DWT_BR_6M8);
 672:Middlewares/Decawave/decadriver/deca_device.c ****     assert(config->rxPAC <= DWT_PAC64);
 673:Middlewares/Decawave/decadriver/deca_device.c ****     assert((chan >= 1) && (chan <= 7) && (chan != 6));
 674:Middlewares/Decawave/decadriver/deca_device.c ****     assert(((config->prf == DWT_PRF_64M) && (config->txCode >= 9) && (config->txCode <= 24))
 675:Middlewares/Decawave/decadriver/deca_device.c ****            || ((config->prf == DWT_PRF_16M) && (config->txCode >= 1) && (config->txCode <= 8)));
 676:Middlewares/Decawave/decadriver/deca_device.c ****     assert(((config->prf == DWT_PRF_64M) && (config->rxCode >= 9) && (config->rxCode <= 24))
 677:Middlewares/Decawave/decadriver/deca_device.c ****            || ((config->prf == DWT_PRF_16M) && (config->rxCode >= 1) && (config->rxCode <= 8)));
 678:Middlewares/Decawave/decadriver/deca_device.c ****     assert((config->txPreambLength == DWT_PLEN_64) || (config->txPreambLength == DWT_PLEN_128) || (
 679:Middlewares/Decawave/decadriver/deca_device.c ****            || (config->txPreambLength == DWT_PLEN_512) || (config->txPreambLength == DWT_PLEN_1024)
 680:Middlewares/Decawave/decadriver/deca_device.c ****            || (config->txPreambLength == DWT_PLEN_2048) || (config->txPreambLength == DWT_PLEN_4096
 681:Middlewares/Decawave/decadriver/deca_device.c ****     assert((config->phrMode == DWT_PHRMODE_STD) || (config->phrMode == DWT_PHRMODE_EXT));
 682:Middlewares/Decawave/decadriver/deca_device.c **** #endif
ARM GAS  /tmp/cc0TY0Fa.s 			page 37


 683:Middlewares/Decawave/decadriver/deca_device.c **** 
 684:Middlewares/Decawave/decadriver/deca_device.c ****     // For 110 kbps we need a special setup
 685:Middlewares/Decawave/decadriver/deca_device.c ****     if(DWT_BR_110K == config->dataRate)
 1404              		.loc 1 685 29 discriminator 6
 1405 0040 7B68     		ldr	r3, [r7, #4]
 1406 0042 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 1407              		.loc 1 685 7 discriminator 6
 1408 0044 002B     		cmp	r3, #0
 1409 0046 0BD1     		bne	.L79
 686:Middlewares/Decawave/decadriver/deca_device.c ****     {
 687:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->sysCFGreg |= SYS_CFG_RXM110K ;
 1410              		.loc 1 687 33
 1411 0048 974B     		ldr	r3, .L86+4
 1412 004a 1B68     		ldr	r3, [r3]
 1413 004c 1A69     		ldr	r2, [r3, #16]
 1414 004e 964B     		ldr	r3, .L86+4
 1415 0050 1B68     		ldr	r3, [r3]
 1416 0052 42F48002 		orr	r2, r2, #4194304
 1417 0056 1A61     		str	r2, [r3, #16]
 688:Middlewares/Decawave/decadriver/deca_device.c ****         reg16 >>= 3; // lde_replicaCoeff must be divided by 8
 1418              		.loc 1 688 15
 1419 0058 BB8A     		ldrh	r3, [r7, #20]
 1420 005a DB08     		lsrs	r3, r3, #3
 1421 005c BB82     		strh	r3, [r7, #20]	@ movhi
 1422 005e 07E0     		b	.L80
 1423              	.L79:
 689:Middlewares/Decawave/decadriver/deca_device.c ****     }
 690:Middlewares/Decawave/decadriver/deca_device.c ****     else
 691:Middlewares/Decawave/decadriver/deca_device.c ****     {
 692:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->sysCFGreg &= (~SYS_CFG_RXM110K) ;
 1424              		.loc 1 692 33
 1425 0060 914B     		ldr	r3, .L86+4
 1426 0062 1B68     		ldr	r3, [r3]
 1427 0064 1A69     		ldr	r2, [r3, #16]
 1428 0066 904B     		ldr	r3, .L86+4
 1429 0068 1B68     		ldr	r3, [r3]
 1430 006a 22F48002 		bic	r2, r2, #4194304
 1431 006e 1A61     		str	r2, [r3, #16]
 1432              	.L80:
 693:Middlewares/Decawave/decadriver/deca_device.c ****     }
 694:Middlewares/Decawave/decadriver/deca_device.c **** 
 695:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->longFrames = config->phrMode ;
 1433              		.loc 1 695 17
 1434 0070 8D4B     		ldr	r3, .L86+4
 1435 0072 1B68     		ldr	r3, [r3]
 1436              		.loc 1 695 38
 1437 0074 7A68     		ldr	r2, [r7, #4]
 1438 0076 127A     		ldrb	r2, [r2, #8]	@ zero_extendqisi2
 1439              		.loc 1 695 30
 1440 0078 9A72     		strb	r2, [r3, #10]
 696:Middlewares/Decawave/decadriver/deca_device.c **** 
 697:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->sysCFGreg &= ~SYS_CFG_PHR_MODE_11;
 1441              		.loc 1 697 29
 1442 007a 8B4B     		ldr	r3, .L86+4
 1443 007c 1B68     		ldr	r3, [r3]
 1444 007e 1A69     		ldr	r2, [r3, #16]
 1445 0080 894B     		ldr	r3, .L86+4
ARM GAS  /tmp/cc0TY0Fa.s 			page 38


 1446 0082 1B68     		ldr	r3, [r3]
 1447 0084 22F44032 		bic	r2, r2, #196608
 1448 0088 1A61     		str	r2, [r3, #16]
 698:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->sysCFGreg |= (SYS_CFG_PHR_MODE_11 & ((uint32)config->phrMode << SYS_CFG_PHR_MODE_
 1449              		.loc 1 698 29
 1450 008a 874B     		ldr	r3, .L86+4
 1451 008c 1B68     		ldr	r3, [r3]
 1452 008e 1969     		ldr	r1, [r3, #16]
 1453              		.loc 1 698 70
 1454 0090 7B68     		ldr	r3, [r7, #4]
 1455 0092 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1456              		.loc 1 698 80
 1457 0094 1B04     		lsls	r3, r3, #16
 1458              		.loc 1 698 53
 1459 0096 03F44032 		and	r2, r3, #196608
 1460              		.loc 1 698 29
 1461 009a 834B     		ldr	r3, .L86+4
 1462 009c 1B68     		ldr	r3, [r3]
 1463 009e 0A43     		orrs	r2, r2, r1
 1464 00a0 1A61     		str	r2, [r3, #16]
 699:Middlewares/Decawave/decadriver/deca_device.c **** 
 700:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,pdw1000local->sysCFGreg) ;
 1465              		.loc 1 700 5
 1466 00a2 814B     		ldr	r3, .L86+4
 1467 00a4 1B68     		ldr	r3, [r3]
 1468 00a6 1B69     		ldr	r3, [r3, #16]
 1469 00a8 1A46     		mov	r2, r3
 1470 00aa 0021     		movs	r1, #0
 1471 00ac 0420     		movs	r0, #4
 1472 00ae FFF7FEFF 		bl	dwt_write32bitoffsetreg
 701:Middlewares/Decawave/decadriver/deca_device.c ****     // Set the lde_replicaCoeff
 702:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(LDE_IF_ID, LDE_REPC_OFFSET, reg16) ;
 1473              		.loc 1 702 5
 1474 00b2 BB8A     		ldrh	r3, [r7, #20]
 1475 00b4 1A46     		mov	r2, r3
 1476 00b6 42F60401 		movw	r1, #10244
 1477 00ba 2E20     		movs	r0, #46
 1478 00bc FFF7FEFF 		bl	dwt_write16bitoffsetreg
 703:Middlewares/Decawave/decadriver/deca_device.c **** 
 704:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_configlde(prfIndex);
 1479              		.loc 1 704 5
 1480 00c0 BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 1481 00c2 1846     		mov	r0, r3
 1482 00c4 FFF7FEFF 		bl	_dwt_configlde
 705:Middlewares/Decawave/decadriver/deca_device.c **** 
 706:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure PLL2/RF PLL block CFG/TUNE (for a given channel)
 707:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(FS_CTRL_ID, FS_PLLCFG_OFFSET, fs_pll_cfg[chan_idx[chan]]);
 1483              		.loc 1 707 78
 1484 00c8 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 1485 00ca 784A     		ldr	r2, .L86+8
 1486 00cc D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 1487 00ce 1A46     		mov	r2, r3
 1488              		.loc 1 707 5
 1489 00d0 774B     		ldr	r3, .L86+12
 1490 00d2 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1491 00d6 1A46     		mov	r2, r3
 1492 00d8 0721     		movs	r1, #7
ARM GAS  /tmp/cc0TY0Fa.s 			page 39


 1493 00da 2B20     		movs	r0, #43
 1494 00dc FFF7FEFF 		bl	dwt_write32bitoffsetreg
 708:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_PLLTUNE_OFFSET, fs_pll_tune[chan_idx[chan]]);
 1495              		.loc 1 708 79
 1496 00e0 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 1497 00e2 724A     		ldr	r2, .L86+8
 1498 00e4 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 1499 00e6 1A46     		mov	r2, r3
 1500              		.loc 1 708 5
 1501 00e8 724B     		ldr	r3, .L86+16
 1502 00ea 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 1503 00ec 1A46     		mov	r2, r3
 1504 00ee 0B21     		movs	r1, #11
 1505 00f0 2B20     		movs	r0, #43
 1506 00f2 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 709:Middlewares/Decawave/decadriver/deca_device.c **** 
 710:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure RF RX blocks (for specified channel/bandwidth)
 711:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(RF_CONF_ID, RF_RXCTRLH_OFFSET, rx_config[bw]);
 1507              		.loc 1 711 5
 1508 00f6 7B7C     		ldrb	r3, [r7, #17]	@ zero_extendqisi2
 1509 00f8 6F4A     		ldr	r2, .L86+20
 1510 00fa D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 1511 00fc 1A46     		mov	r2, r3
 1512 00fe 0B21     		movs	r1, #11
 1513 0100 2820     		movs	r0, #40
 1514 0102 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 712:Middlewares/Decawave/decadriver/deca_device.c **** 
 713:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure RF TX blocks (for specified channel and PRF)
 714:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure RF TX control
 715:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(RF_CONF_ID, RF_TXCTRL_OFFSET, tx_config[chan_idx[chan]]);
 1515              		.loc 1 715 77
 1516 0106 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 1517 0108 684A     		ldr	r2, .L86+8
 1518 010a D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 1519 010c 1A46     		mov	r2, r3
 1520              		.loc 1 715 5
 1521 010e 6B4B     		ldr	r3, .L86+24
 1522 0110 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1523 0114 1A46     		mov	r2, r3
 1524 0116 0C21     		movs	r1, #12
 1525 0118 2820     		movs	r0, #40
 1526 011a FFF7FEFF 		bl	dwt_write32bitoffsetreg
 716:Middlewares/Decawave/decadriver/deca_device.c **** 
 717:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure the baseband parameters (for specified PRF, bit rate, PAC, and SFD settings)
 718:Middlewares/Decawave/decadriver/deca_device.c ****     // DTUNE0
 719:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE0b_OFFSET, sftsh[config->dataRate][config->nsSFD])
 1527              		.loc 1 719 73
 1528 011e 7B68     		ldr	r3, [r7, #4]
 1529 0120 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 1530 0122 1846     		mov	r0, r3
 1531              		.loc 1 719 91
 1532 0124 7B68     		ldr	r3, [r7, #4]
 1533 0126 9B79     		ldrb	r3, [r3, #6]	@ zero_extendqisi2
 1534 0128 1946     		mov	r1, r3
 1535              		.loc 1 719 5
 1536 012a 654A     		ldr	r2, .L86+28
 1537 012c 4300     		lsls	r3, r0, #1
ARM GAS  /tmp/cc0TY0Fa.s 			page 40


 1538 012e 0B44     		add	r3, r3, r1
 1539 0130 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1540 0134 1A46     		mov	r2, r3
 1541 0136 0221     		movs	r1, #2
 1542 0138 2720     		movs	r0, #39
 1543 013a FFF7FEFF 		bl	dwt_write16bitoffsetreg
 720:Middlewares/Decawave/decadriver/deca_device.c **** 
 721:Middlewares/Decawave/decadriver/deca_device.c ****     // DTUNE1
 722:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE1a_OFFSET, dtune1[prfIndex]);
 1544              		.loc 1 722 5
 1545 013e BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 1546 0140 604A     		ldr	r2, .L86+32
 1547 0142 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1548 0146 1A46     		mov	r2, r3
 1549 0148 0421     		movs	r1, #4
 1550 014a 2720     		movs	r0, #39
 1551 014c FFF7FEFF 		bl	dwt_write16bitoffsetreg
 723:Middlewares/Decawave/decadriver/deca_device.c **** 
 724:Middlewares/Decawave/decadriver/deca_device.c ****     if(config->dataRate == DWT_BR_110K)
 1552              		.loc 1 724 14
 1553 0150 7B68     		ldr	r3, [r7, #4]
 1554 0152 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 1555              		.loc 1 724 7
 1556 0154 002B     		cmp	r3, #0
 1557 0156 05D1     		bne	.L81
 725:Middlewares/Decawave/decadriver/deca_device.c ****     {
 726:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE1b_OFFSET, DRX_TUNE1b_110K);
 1558              		.loc 1 726 9
 1559 0158 6422     		movs	r2, #100
 1560 015a 0621     		movs	r1, #6
 1561 015c 2720     		movs	r0, #39
 1562 015e FFF7FEFF 		bl	dwt_write16bitoffsetreg
 1563 0162 18E0     		b	.L82
 1564              	.L81:
 727:Middlewares/Decawave/decadriver/deca_device.c ****     }
 728:Middlewares/Decawave/decadriver/deca_device.c ****     else
 729:Middlewares/Decawave/decadriver/deca_device.c ****     {
 730:Middlewares/Decawave/decadriver/deca_device.c ****         if(config->txPreambLength == DWT_PLEN_64)
 1565              		.loc 1 730 18
 1566 0164 7B68     		ldr	r3, [r7, #4]
 1567 0166 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 1568              		.loc 1 730 11
 1569 0168 042B     		cmp	r3, #4
 1570 016a 0AD1     		bne	.L83
 731:Middlewares/Decawave/decadriver/deca_device.c ****         {
 732:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE1b_OFFSET, DRX_TUNE1b_6M8_PRE64);
 1571              		.loc 1 732 13
 1572 016c 1022     		movs	r2, #16
 1573 016e 0621     		movs	r1, #6
 1574 0170 2720     		movs	r0, #39
 1575 0172 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 733:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE4H_OFFSET, DRX_TUNE4H_PRE64);
 1576              		.loc 1 733 13
 1577 0176 1022     		movs	r2, #16
 1578 0178 2621     		movs	r1, #38
 1579 017a 2720     		movs	r0, #39
 1580 017c FFF7FEFF 		bl	dwt_write8bitoffsetreg
ARM GAS  /tmp/cc0TY0Fa.s 			page 41


 1581 0180 09E0     		b	.L82
 1582              	.L83:
 734:Middlewares/Decawave/decadriver/deca_device.c ****         }
 735:Middlewares/Decawave/decadriver/deca_device.c ****         else
 736:Middlewares/Decawave/decadriver/deca_device.c ****         {
 737:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE1b_OFFSET, DRX_TUNE1b_850K_6M8);
 1583              		.loc 1 737 13
 1584 0182 2022     		movs	r2, #32
 1585 0184 0621     		movs	r1, #6
 1586 0186 2720     		movs	r0, #39
 1587 0188 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 738:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE4H_OFFSET, DRX_TUNE4H_PRE128PLUS);
 1588              		.loc 1 738 13
 1589 018c 2822     		movs	r2, #40
 1590 018e 2621     		movs	r1, #38
 1591 0190 2720     		movs	r0, #39
 1592 0192 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 1593              	.L82:
 739:Middlewares/Decawave/decadriver/deca_device.c ****         }
 740:Middlewares/Decawave/decadriver/deca_device.c ****     }
 741:Middlewares/Decawave/decadriver/deca_device.c **** 
 742:Middlewares/Decawave/decadriver/deca_device.c ****     // DTUNE2
 743:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(DRX_CONF_ID, DRX_TUNE2_OFFSET, digital_bb_config[prfIndex][config->rxPA
 1594              		.loc 1 743 5
 1595 0196 BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 1596              		.loc 1 743 94
 1597 0198 7A68     		ldr	r2, [r7, #4]
 1598 019a D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 1599 019c 1146     		mov	r1, r2
 1600              		.loc 1 743 5
 1601 019e 4A4A     		ldr	r2, .L86+36
 1602 01a0 9B00     		lsls	r3, r3, #2
 1603 01a2 0B44     		add	r3, r3, r1
 1604 01a4 52F82330 		ldr	r3, [r2, r3, lsl #2]
 1605 01a8 1A46     		mov	r2, r3
 1606 01aa 0821     		movs	r1, #8
 1607 01ac 2720     		movs	r0, #39
 1608 01ae FFF7FEFF 		bl	dwt_write32bitoffsetreg
 744:Middlewares/Decawave/decadriver/deca_device.c **** 
 745:Middlewares/Decawave/decadriver/deca_device.c ****     // DTUNE3 (SFD timeout)
 746:Middlewares/Decawave/decadriver/deca_device.c ****     // Don't allow 0 - SFD timeout will always be enabled
 747:Middlewares/Decawave/decadriver/deca_device.c ****     if(config->sfdTO == 0)
 1609              		.loc 1 747 14
 1610 01b2 7B68     		ldr	r3, [r7, #4]
 1611 01b4 5B89     		ldrh	r3, [r3, #10]
 1612              		.loc 1 747 7
 1613 01b6 002B     		cmp	r3, #0
 1614 01b8 03D1     		bne	.L84
 748:Middlewares/Decawave/decadriver/deca_device.c ****     {
 749:Middlewares/Decawave/decadriver/deca_device.c ****         config->sfdTO = DWT_SFDTOC_DEF;
 1615              		.loc 1 749 23
 1616 01ba 7B68     		ldr	r3, [r7, #4]
 1617 01bc 41F24102 		movw	r2, #4161
 1618 01c0 5A81     		strh	r2, [r3, #10]	@ movhi
 1619              	.L84:
 750:Middlewares/Decawave/decadriver/deca_device.c ****     }
 751:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_SFDTOC_OFFSET, config->sfdTO);
ARM GAS  /tmp/cc0TY0Fa.s 			page 42


 1620              		.loc 1 751 5
 1621 01c2 7B68     		ldr	r3, [r7, #4]
 1622 01c4 5B89     		ldrh	r3, [r3, #10]
 1623 01c6 1A46     		mov	r2, r3
 1624 01c8 2021     		movs	r1, #32
 1625 01ca 2720     		movs	r0, #39
 1626 01cc FFF7FEFF 		bl	dwt_write16bitoffsetreg
 752:Middlewares/Decawave/decadriver/deca_device.c **** 
 753:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure AGC parameters
 754:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg( AGC_CFG_STS_ID, 0xC, agc_config.lo32);
 1627              		.loc 1 754 5
 1628 01d0 3E4B     		ldr	r3, .L86+40
 1629 01d2 1B68     		ldr	r3, [r3]
 1630 01d4 1A46     		mov	r2, r3
 1631 01d6 0C21     		movs	r1, #12
 1632 01d8 2320     		movs	r0, #35
 1633 01da FFF7FEFF 		bl	dwt_write32bitoffsetreg
 755:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg( AGC_CFG_STS_ID, 0x4, agc_config.target[prfIndex]);
 1634              		.loc 1 755 5
 1635 01de BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 1636 01e0 3A4A     		ldr	r2, .L86+40
 1637 01e2 5B00     		lsls	r3, r3, #1
 1638 01e4 1344     		add	r3, r3, r2
 1639 01e6 9B88     		ldrh	r3, [r3, #4]
 1640 01e8 1A46     		mov	r2, r3
 1641 01ea 0421     		movs	r1, #4
 1642 01ec 2320     		movs	r0, #35
 1643 01ee FFF7FEFF 		bl	dwt_write16bitoffsetreg
 756:Middlewares/Decawave/decadriver/deca_device.c **** 
 757:Middlewares/Decawave/decadriver/deca_device.c ****     // Set (non-standard) user SFD for improved performance,
 758:Middlewares/Decawave/decadriver/deca_device.c ****     if(config->nsSFD)
 1644              		.loc 1 758 14
 1645 01f2 7B68     		ldr	r3, [r7, #4]
 1646 01f4 9B79     		ldrb	r3, [r3, #6]	@ zero_extendqisi2
 1647              		.loc 1 758 7
 1648 01f6 002B     		cmp	r3, #0
 1649 01f8 0DD0     		beq	.L85
 759:Middlewares/Decawave/decadriver/deca_device.c ****     {
 760:Middlewares/Decawave/decadriver/deca_device.c ****         // Write non standard (DW) SFD length
 761:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(USR_SFD_ID, 0x00, dwnsSFDlen[config->dataRate]);
 1650              		.loc 1 761 67
 1651 01fa 7B68     		ldr	r3, [r7, #4]
 1652 01fc DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 1653 01fe 1A46     		mov	r2, r3
 1654              		.loc 1 761 9
 1655 0200 334B     		ldr	r3, .L86+44
 1656 0202 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 1657 0204 1A46     		mov	r2, r3
 1658 0206 0021     		movs	r1, #0
 1659 0208 2120     		movs	r0, #33
 1660 020a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 762:Middlewares/Decawave/decadriver/deca_device.c ****         nsSfd_result = 3 ;
 1661              		.loc 1 762 22
 1662 020e 0323     		movs	r3, #3
 1663 0210 FB75     		strb	r3, [r7, #23]
 763:Middlewares/Decawave/decadriver/deca_device.c ****         useDWnsSFD = 1 ;
 1664              		.loc 1 763 20
ARM GAS  /tmp/cc0TY0Fa.s 			page 43


 1665 0212 0123     		movs	r3, #1
 1666 0214 BB75     		strb	r3, [r7, #22]
 1667              	.L85:
 764:Middlewares/Decawave/decadriver/deca_device.c ****     }
 765:Middlewares/Decawave/decadriver/deca_device.c ****     regval =  (CHAN_CTRL_TX_CHAN_MASK & (chan << CHAN_CTRL_TX_CHAN_SHIFT)) | // Transmit Channel
 1668              		.loc 1 765 47
 1669 0216 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 1670              		.loc 1 765 39
 1671 0218 03F00F02 		and	r2, r3, #15
 766:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_RX_CHAN_MASK & (chan << CHAN_CTRL_RX_CHAN_SHIFT)) | // Receive Channel
 1672              		.loc 1 766 47
 1673 021c FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 1674 021e 1B01     		lsls	r3, r3, #4
 1675              		.loc 1 766 39
 1676 0220 DBB2     		uxtb	r3, r3
 765:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_RX_CHAN_MASK & (chan << CHAN_CTRL_RX_CHAN_SHIFT)) | // Receive Channel
 1677              		.loc 1 765 76
 1678 0222 1A43     		orrs	r2, r2, r3
 767:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_RXFPRF_MASK & ((uint32)config->prf << CHAN_CTRL_RXFPRF_SHIFT)) | // RX PRF
 1679              		.loc 1 767 55
 1680 0224 7B68     		ldr	r3, [r7, #4]
 1681 0226 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1682              		.loc 1 767 61
 1683 0228 9B04     		lsls	r3, r3, #18
 1684              		.loc 1 767 38
 1685 022a 03F44023 		and	r3, r3, #786432
 766:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_RX_CHAN_MASK & (chan << CHAN_CTRL_RX_CHAN_SHIFT)) | // Receive Channel
 1686              		.loc 1 766 76
 1687 022e 1A43     		orrs	r2, r2, r3
 768:Middlewares/Decawave/decadriver/deca_device.c ****               ((CHAN_CTRL_TNSSFD|CHAN_CTRL_RNSSFD) & ((uint32)nsSfd_result << CHAN_CTRL_TNSSFD_SHIF
 1688              		.loc 1 768 55
 1689 0230 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1690              		.loc 1 768 76
 1691 0232 1B05     		lsls	r3, r3, #20
 1692              		.loc 1 768 52
 1693 0234 03F44013 		and	r3, r3, #3145728
 767:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_RXFPRF_MASK & ((uint32)config->prf << CHAN_CTRL_RXFPRF_SHIFT)) | // RX PRF
 1694              		.loc 1 767 89
 1695 0238 1A43     		orrs	r2, r2, r3
 769:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_DWSFD & ((uint32)useDWnsSFD << CHAN_CTRL_DWSFD_SHIFT)) | // Use DW nsSFD
 1696              		.loc 1 769 35
 1697 023a BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 1698              		.loc 1 769 54
 1699 023c 5B04     		lsls	r3, r3, #17
 1700              		.loc 1 769 32
 1701 023e 03F40033 		and	r3, r3, #131072
 768:Middlewares/Decawave/decadriver/deca_device.c ****               ((CHAN_CTRL_TNSSFD|CHAN_CTRL_RNSSFD) & ((uint32)nsSfd_result << CHAN_CTRL_TNSSFD_SHIF
 1702              		.loc 1 768 104
 1703 0242 1A43     		orrs	r2, r2, r3
 770:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_TX_PCOD_MASK & ((uint32)config->txCode << CHAN_CTRL_TX_PCOD_SHIFT)) | // T
 1704              		.loc 1 770 56
 1705 0244 7B68     		ldr	r3, [r7, #4]
 1706 0246 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 1707              		.loc 1 770 65
 1708 0248 9B05     		lsls	r3, r3, #22
 1709              		.loc 1 770 39
 1710 024a 03F0F863 		and	r3, r3, #130023424
ARM GAS  /tmp/cc0TY0Fa.s 			page 44


 769:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_DWSFD & ((uint32)useDWnsSFD << CHAN_CTRL_DWSFD_SHIFT)) | // Use DW nsSFD
 1711              		.loc 1 769 81
 1712 024e 1A43     		orrs	r2, r2, r3
 771:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_RX_PCOD_MASK & ((uint32)config->rxCode << CHAN_CTRL_RX_PCOD_SHIFT)) ; // R
 1713              		.loc 1 771 56
 1714 0250 7B68     		ldr	r3, [r7, #4]
 1715 0252 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 1716              		.loc 1 771 39
 1717 0254 DB06     		lsls	r3, r3, #27
 765:Middlewares/Decawave/decadriver/deca_device.c ****               (CHAN_CTRL_RX_CHAN_MASK & (chan << CHAN_CTRL_RX_CHAN_SHIFT)) | // Receive Channel
 1718              		.loc 1 765 12
 1719 0256 1343     		orrs	r3, r3, r2
 1720 0258 FB60     		str	r3, [r7, #12]
 772:Middlewares/Decawave/decadriver/deca_device.c **** 
 773:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(CHAN_CTRL_ID,regval) ;
 1721              		.loc 1 773 5
 1722 025a FA68     		ldr	r2, [r7, #12]
 1723 025c 0021     		movs	r1, #0
 1724 025e 1F20     		movs	r0, #31
 1725 0260 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 774:Middlewares/Decawave/decadriver/deca_device.c **** 
 775:Middlewares/Decawave/decadriver/deca_device.c ****     // Set up TX Preamble Size, PRF and Data Rate
 776:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->txFCTRL = ((uint32)(config->txPreambLength | config->prf) << TX_FCTRL_TXPRF_SHFT)
 1726              		.loc 1 776 45
 1727 0264 7B68     		ldr	r3, [r7, #4]
 1728 0266 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 1729              		.loc 1 776 70
 1730 0268 7B68     		ldr	r3, [r7, #4]
 1731 026a 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1732              		.loc 1 776 30
 1733 026c 1343     		orrs	r3, r3, r2
 1734 026e DBB2     		uxtb	r3, r3
 1735              		.loc 1 776 77
 1736 0270 1904     		lsls	r1, r3, #16
 1737              		.loc 1 776 118
 1738 0272 7B68     		ldr	r3, [r7, #4]
 1739 0274 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 1740              		.loc 1 776 129
 1741 0276 5A03     		lsls	r2, r3, #13
 1742              		.loc 1 776 17
 1743 0278 0B4B     		ldr	r3, .L86+4
 1744 027a 1B68     		ldr	r3, [r3]
 1745              		.loc 1 776 101
 1746 027c 0A43     		orrs	r2, r2, r1
 1747              		.loc 1 776 27
 1748 027e DA60     		str	r2, [r3, #12]
 777:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 1749              		.loc 1 777 5
 1750 0280 094B     		ldr	r3, .L86+4
 1751 0282 1B68     		ldr	r3, [r3]
 1752 0284 DB68     		ldr	r3, [r3, #12]
 1753 0286 1A46     		mov	r2, r3
 1754 0288 0021     		movs	r1, #0
 1755 028a 0820     		movs	r0, #8
 1756 028c FFF7FEFF 		bl	dwt_write32bitoffsetreg
 778:Middlewares/Decawave/decadriver/deca_device.c **** 
 779:Middlewares/Decawave/decadriver/deca_device.c ****     // The SFD transmit pattern is initialised by the DW1000 upon a user TX request, but (due to an
ARM GAS  /tmp/cc0TY0Fa.s 			page 45


 780:Middlewares/Decawave/decadriver/deca_device.c ****     // SYS_CTRL write below works around this issue, by simultaneously initiating and aborting a tr
 781:Middlewares/Decawave/decadriver/deca_device.c ****     // after its configuration or reconfiguration.
 782:Middlewares/Decawave/decadriver/deca_device.c ****     // This issue is not documented at the time of writing this code. It should be in next release 
 783:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, SYS_CTRL_TXSTRT | SYS_CTRL_TRXOFF); // Req
 1757              		.loc 1 783 5
 1758 0290 4222     		movs	r2, #66
 1759 0292 0021     		movs	r1, #0
 1760 0294 0D20     		movs	r0, #13
 1761 0296 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 784:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_configure()
 1762              		.loc 1 784 1
 1763 029a 00BF     		nop
 1764 029c 1837     		adds	r7, r7, #24
 1765              	.LCFI80:
 1766              		.cfi_def_cfa_offset 8
 1767 029e BD46     		mov	sp, r7
 1768              	.LCFI81:
 1769              		.cfi_def_cfa_register 13
 1770              		@ sp needed
 1771 02a0 80BD     		pop	{r7, pc}
 1772              	.L87:
 1773 02a2 00BF     		.align	2
 1774              	.L86:
 1775 02a4 00000000 		.word	lde_replicaCoeff
 1776 02a8 00000000 		.word	pdw1000local
 1777 02ac 00000000 		.word	chan_idx
 1778 02b0 00000000 		.word	fs_pll_cfg
 1779 02b4 00000000 		.word	fs_pll_tune
 1780 02b8 00000000 		.word	rx_config
 1781 02bc 00000000 		.word	tx_config
 1782 02c0 00000000 		.word	sftsh
 1783 02c4 00000000 		.word	dtune1
 1784 02c8 00000000 		.word	digital_bb_config
 1785 02cc 00000000 		.word	agc_config
 1786 02d0 00000000 		.word	dwnsSFDlen
 1787              		.cfi_endproc
 1788              	.LFE17:
 1790              		.section	.text.dwt_setrxantennadelay,"ax",%progbits
 1791              		.align	1
 1792              		.global	dwt_setrxantennadelay
 1793              		.syntax unified
 1794              		.thumb
 1795              		.thumb_func
 1796              		.fpu fpv4-sp-d16
 1798              	dwt_setrxantennadelay:
 1799              	.LFB18:
 785:Middlewares/Decawave/decadriver/deca_device.c **** 
 786:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 787:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setrxantennadelay()
 788:Middlewares/Decawave/decadriver/deca_device.c ****  *
 789:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This API function writes the antenna delay (in time units) to RX registers
 790:Middlewares/Decawave/decadriver/deca_device.c ****  *
 791:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
 792:Middlewares/Decawave/decadriver/deca_device.c ****  * @param rxDelay - this is the total (RX) antenna delay value, which
 793:Middlewares/Decawave/decadriver/deca_device.c ****  *                          will be programmed into the RX register
 794:Middlewares/Decawave/decadriver/deca_device.c ****  *
 795:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
ARM GAS  /tmp/cc0TY0Fa.s 			page 46


 796:Middlewares/Decawave/decadriver/deca_device.c ****  *
 797:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 798:Middlewares/Decawave/decadriver/deca_device.c ****  */
 799:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setrxantennadelay(uint16 rxDelay)
 800:Middlewares/Decawave/decadriver/deca_device.c **** {
 1800              		.loc 1 800 1
 1801              		.cfi_startproc
 1802              		@ args = 0, pretend = 0, frame = 8
 1803              		@ frame_needed = 1, uses_anonymous_args = 0
 1804 0000 80B5     		push	{r7, lr}
 1805              	.LCFI82:
 1806              		.cfi_def_cfa_offset 8
 1807              		.cfi_offset 7, -8
 1808              		.cfi_offset 14, -4
 1809 0002 82B0     		sub	sp, sp, #8
 1810              	.LCFI83:
 1811              		.cfi_def_cfa_offset 16
 1812 0004 00AF     		add	r7, sp, #0
 1813              	.LCFI84:
 1814              		.cfi_def_cfa_register 7
 1815 0006 0346     		mov	r3, r0
 1816 0008 FB80     		strh	r3, [r7, #6]	@ movhi
 801:Middlewares/Decawave/decadriver/deca_device.c ****     // Set the RX antenna delay for auto TX timestamp adjustment
 802:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(LDE_IF_ID, LDE_RXANTD_OFFSET, rxDelay);
 1817              		.loc 1 802 5
 1818 000a FB88     		ldrh	r3, [r7, #6]
 1819 000c 1A46     		mov	r2, r3
 1820 000e 41F60401 		movw	r1, #6148
 1821 0012 2E20     		movs	r0, #46
 1822 0014 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 803:Middlewares/Decawave/decadriver/deca_device.c **** }
 1823              		.loc 1 803 1
 1824 0018 00BF     		nop
 1825 001a 0837     		adds	r7, r7, #8
 1826              	.LCFI85:
 1827              		.cfi_def_cfa_offset 8
 1828 001c BD46     		mov	sp, r7
 1829              	.LCFI86:
 1830              		.cfi_def_cfa_register 13
 1831              		@ sp needed
 1832 001e 80BD     		pop	{r7, pc}
 1833              		.cfi_endproc
 1834              	.LFE18:
 1836              		.section	.text.dwt_settxantennadelay,"ax",%progbits
 1837              		.align	1
 1838              		.global	dwt_settxantennadelay
 1839              		.syntax unified
 1840              		.thumb
 1841              		.thumb_func
 1842              		.fpu fpv4-sp-d16
 1844              	dwt_settxantennadelay:
 1845              	.LFB19:
 804:Middlewares/Decawave/decadriver/deca_device.c **** 
 805:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 806:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_settxantennadelay()
 807:Middlewares/Decawave/decadriver/deca_device.c ****  *
 808:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This API function writes the antenna delay (in time units) to TX registers
ARM GAS  /tmp/cc0TY0Fa.s 			page 47


 809:Middlewares/Decawave/decadriver/deca_device.c ****  *
 810:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
 811:Middlewares/Decawave/decadriver/deca_device.c ****  * @param txDelay - this is the total (TX) antenna delay value, which
 812:Middlewares/Decawave/decadriver/deca_device.c ****  *                          will be programmed into the TX delay register
 813:Middlewares/Decawave/decadriver/deca_device.c ****  *
 814:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 815:Middlewares/Decawave/decadriver/deca_device.c ****  *
 816:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 817:Middlewares/Decawave/decadriver/deca_device.c ****  */
 818:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_settxantennadelay(uint16 txDelay)
 819:Middlewares/Decawave/decadriver/deca_device.c **** {
 1846              		.loc 1 819 1
 1847              		.cfi_startproc
 1848              		@ args = 0, pretend = 0, frame = 8
 1849              		@ frame_needed = 1, uses_anonymous_args = 0
 1850 0000 80B5     		push	{r7, lr}
 1851              	.LCFI87:
 1852              		.cfi_def_cfa_offset 8
 1853              		.cfi_offset 7, -8
 1854              		.cfi_offset 14, -4
 1855 0002 82B0     		sub	sp, sp, #8
 1856              	.LCFI88:
 1857              		.cfi_def_cfa_offset 16
 1858 0004 00AF     		add	r7, sp, #0
 1859              	.LCFI89:
 1860              		.cfi_def_cfa_register 7
 1861 0006 0346     		mov	r3, r0
 1862 0008 FB80     		strh	r3, [r7, #6]	@ movhi
 820:Middlewares/Decawave/decadriver/deca_device.c ****     // Set the TX antenna delay for auto TX timestamp adjustment
 821:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(TX_ANTD_ID, TX_ANTD_OFFSET, txDelay);
 1863              		.loc 1 821 5
 1864 000a FB88     		ldrh	r3, [r7, #6]
 1865 000c 1A46     		mov	r2, r3
 1866 000e 0021     		movs	r1, #0
 1867 0010 1820     		movs	r0, #24
 1868 0012 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 822:Middlewares/Decawave/decadriver/deca_device.c **** }
 1869              		.loc 1 822 1
 1870 0016 00BF     		nop
 1871 0018 0837     		adds	r7, r7, #8
 1872              	.LCFI90:
 1873              		.cfi_def_cfa_offset 8
 1874 001a BD46     		mov	sp, r7
 1875              	.LCFI91:
 1876              		.cfi_def_cfa_register 13
 1877              		@ sp needed
 1878 001c 80BD     		pop	{r7, pc}
 1879              		.cfi_endproc
 1880              	.LFE19:
 1882              		.section	.text.dwt_writetxdata,"ax",%progbits
 1883              		.align	1
 1884              		.global	dwt_writetxdata
 1885              		.syntax unified
 1886              		.thumb
 1887              		.thumb_func
 1888              		.fpu fpv4-sp-d16
 1890              	dwt_writetxdata:
ARM GAS  /tmp/cc0TY0Fa.s 			page 48


 1891              	.LFB20:
 823:Middlewares/Decawave/decadriver/deca_device.c **** 
 824:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 825:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_writetxdata()
 826:Middlewares/Decawave/decadriver/deca_device.c ****  *
 827:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This API function writes the supplied TX data into the DW1000's
 828:Middlewares/Decawave/decadriver/deca_device.c ****  * TX buffer.  The input parameters are the data length in bytes and a pointer
 829:Middlewares/Decawave/decadriver/deca_device.c ****  * to those data bytes.
 830:Middlewares/Decawave/decadriver/deca_device.c ****  *
 831:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 832:Middlewares/Decawave/decadriver/deca_device.c ****  * @param txFrameLength  - This is the total frame length, including the two byte CRC.
 833:Middlewares/Decawave/decadriver/deca_device.c ****  *                         Note: this is the length of TX message (including the 2 byte CRC) - max 
 834:Middlewares/Decawave/decadriver/deca_device.c ****  *                         standard PHR mode allows up to 127 bytes
 835:Middlewares/Decawave/decadriver/deca_device.c ****  *                         if > 127 is programmed, DWT_PHRMODE_EXT needs to be set in the phrMode c
 836:Middlewares/Decawave/decadriver/deca_device.c ****  *                         see dwt_configure function
 837:Middlewares/Decawave/decadriver/deca_device.c ****  * @param txFrameBytes   - Pointer to the users buffer containing the data to send.
 838:Middlewares/Decawave/decadriver/deca_device.c ****  * @param txBufferOffset - This specifies an offset in the DW1000s TX Buffer at which to start w
 839:Middlewares/Decawave/decadriver/deca_device.c ****  *
 840:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 841:Middlewares/Decawave/decadriver/deca_device.c ****  *
 842:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
 843:Middlewares/Decawave/decadriver/deca_device.c ****  */
 844:Middlewares/Decawave/decadriver/deca_device.c **** int dwt_writetxdata(uint16 txFrameLength, uint8 *txFrameBytes, uint16 txBufferOffset)
 845:Middlewares/Decawave/decadriver/deca_device.c **** {
 1892              		.loc 1 845 1
 1893              		.cfi_startproc
 1894              		@ args = 0, pretend = 0, frame = 8
 1895              		@ frame_needed = 1, uses_anonymous_args = 0
 1896 0000 80B5     		push	{r7, lr}
 1897              	.LCFI92:
 1898              		.cfi_def_cfa_offset 8
 1899              		.cfi_offset 7, -8
 1900              		.cfi_offset 14, -4
 1901 0002 82B0     		sub	sp, sp, #8
 1902              	.LCFI93:
 1903              		.cfi_def_cfa_offset 16
 1904 0004 00AF     		add	r7, sp, #0
 1905              	.LCFI94:
 1906              		.cfi_def_cfa_register 7
 1907 0006 0346     		mov	r3, r0
 1908 0008 3960     		str	r1, [r7]
 1909 000a FB80     		strh	r3, [r7, #6]	@ movhi
 1910 000c 1346     		mov	r3, r2	@ movhi
 1911 000e BB80     		strh	r3, [r7, #4]	@ movhi
 846:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 847:Middlewares/Decawave/decadriver/deca_device.c ****     assert(txFrameLength >= 2);
 848:Middlewares/Decawave/decadriver/deca_device.c ****     assert((pdw1000local->longFrames && (txFrameLength <= 1023)) || (txFrameLength <= 127));
 849:Middlewares/Decawave/decadriver/deca_device.c ****     assert((txBufferOffset + txFrameLength) <= 1024);
 850:Middlewares/Decawave/decadriver/deca_device.c **** #endif
 851:Middlewares/Decawave/decadriver/deca_device.c **** 
 852:Middlewares/Decawave/decadriver/deca_device.c ****     if ((txBufferOffset + txFrameLength) <= 1024)
 1912              		.loc 1 852 25
 1913 0010 BA88     		ldrh	r2, [r7, #4]
 1914 0012 FB88     		ldrh	r3, [r7, #6]
 1915 0014 1344     		add	r3, r3, r2
 1916              		.loc 1 852 8
 1917 0016 B3F5806F 		cmp	r3, #1024
ARM GAS  /tmp/cc0TY0Fa.s 			page 49


 1918 001a 09DC     		bgt	.L91
 853:Middlewares/Decawave/decadriver/deca_device.c ****     {
 854:Middlewares/Decawave/decadriver/deca_device.c ****         // Write the data to the IC TX buffer, (-2 bytes for auto generated CRC)
 855:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_writetodevice( TX_BUFFER_ID, txBufferOffset, txFrameLength-2, txFrameBytes);
 1919              		.loc 1 855 71
 1920 001c FB88     		ldrh	r3, [r7, #6]
 1921 001e 023B     		subs	r3, r3, #2
 1922              		.loc 1 855 9
 1923 0020 1A46     		mov	r2, r3
 1924 0022 B988     		ldrh	r1, [r7, #4]
 1925 0024 3B68     		ldr	r3, [r7]
 1926 0026 0920     		movs	r0, #9
 1927 0028 FFF7FEFF 		bl	dwt_writetodevice
 856:Middlewares/Decawave/decadriver/deca_device.c ****         return DWT_SUCCESS;
 1928              		.loc 1 856 16
 1929 002c 0023     		movs	r3, #0
 1930 002e 01E0     		b	.L92
 1931              	.L91:
 857:Middlewares/Decawave/decadriver/deca_device.c ****     }
 858:Middlewares/Decawave/decadriver/deca_device.c ****     else
 859:Middlewares/Decawave/decadriver/deca_device.c ****     {
 860:Middlewares/Decawave/decadriver/deca_device.c ****         return DWT_ERROR;
 1932              		.loc 1 860 16
 1933 0030 4FF0FF33 		mov	r3, #-1
 1934              	.L92:
 861:Middlewares/Decawave/decadriver/deca_device.c ****     }
 862:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_writetxdata()
 1935              		.loc 1 862 1
 1936 0034 1846     		mov	r0, r3
 1937 0036 0837     		adds	r7, r7, #8
 1938              	.LCFI95:
 1939              		.cfi_def_cfa_offset 8
 1940 0038 BD46     		mov	sp, r7
 1941              	.LCFI96:
 1942              		.cfi_def_cfa_register 13
 1943              		@ sp needed
 1944 003a 80BD     		pop	{r7, pc}
 1945              		.cfi_endproc
 1946              	.LFE20:
 1948              		.section	.text.dwt_writetxfctrl,"ax",%progbits
 1949              		.align	1
 1950              		.global	dwt_writetxfctrl
 1951              		.syntax unified
 1952              		.thumb
 1953              		.thumb_func
 1954              		.fpu fpv4-sp-d16
 1956              	dwt_writetxfctrl:
 1957              	.LFB21:
 863:Middlewares/Decawave/decadriver/deca_device.c **** 
 864:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 865:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_writetxfctrl()
 866:Middlewares/Decawave/decadriver/deca_device.c ****  *
 867:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This API function configures the TX frame control register before the transmission of a f
 868:Middlewares/Decawave/decadriver/deca_device.c ****  *
 869:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
 870:Middlewares/Decawave/decadriver/deca_device.c ****  * @param txFrameLength - this is the length of TX message (including the 2 byte CRC) - max is 1023
 871:Middlewares/Decawave/decadriver/deca_device.c ****  *                              NOTE: standard PHR mode allows up to 127 bytes
ARM GAS  /tmp/cc0TY0Fa.s 			page 50


 872:Middlewares/Decawave/decadriver/deca_device.c ****  *                              if > 127 is programmed, DWT_PHRMODE_EXT needs to be set in the phrM
 873:Middlewares/Decawave/decadriver/deca_device.c ****  *                              see dwt_configure function
 874:Middlewares/Decawave/decadriver/deca_device.c ****  * @param txBufferOffset - the offset in the tx buffer to start writing the data
 875:Middlewares/Decawave/decadriver/deca_device.c ****  * @param ranging - 1 if this is a ranging frame, else 0
 876:Middlewares/Decawave/decadriver/deca_device.c ****  *
 877:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 878:Middlewares/Decawave/decadriver/deca_device.c ****  *
 879:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 880:Middlewares/Decawave/decadriver/deca_device.c ****  */
 881:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_writetxfctrl(uint16 txFrameLength, uint16 txBufferOffset, int ranging)
 882:Middlewares/Decawave/decadriver/deca_device.c **** {
 1958              		.loc 1 882 1
 1959              		.cfi_startproc
 1960              		@ args = 0, pretend = 0, frame = 16
 1961              		@ frame_needed = 1, uses_anonymous_args = 0
 1962 0000 80B5     		push	{r7, lr}
 1963              	.LCFI97:
 1964              		.cfi_def_cfa_offset 8
 1965              		.cfi_offset 7, -8
 1966              		.cfi_offset 14, -4
 1967 0002 84B0     		sub	sp, sp, #16
 1968              	.LCFI98:
 1969              		.cfi_def_cfa_offset 24
 1970 0004 00AF     		add	r7, sp, #0
 1971              	.LCFI99:
 1972              		.cfi_def_cfa_register 7
 1973 0006 0346     		mov	r3, r0
 1974 0008 3A60     		str	r2, [r7]
 1975 000a FB80     		strh	r3, [r7, #6]	@ movhi
 1976 000c 0B46     		mov	r3, r1	@ movhi
 1977 000e BB80     		strh	r3, [r7, #4]	@ movhi
 883:Middlewares/Decawave/decadriver/deca_device.c **** 
 884:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 885:Middlewares/Decawave/decadriver/deca_device.c ****     assert((pdw1000local->longFrames && (txFrameLength <= 1023)) || (txFrameLength <= 127));
 886:Middlewares/Decawave/decadriver/deca_device.c ****     assert((txBufferOffset + txFrameLength) <= 1024);
 887:Middlewares/Decawave/decadriver/deca_device.c ****     assert((ranging == 0) || (ranging == 1))
 888:Middlewares/Decawave/decadriver/deca_device.c **** #endif
 889:Middlewares/Decawave/decadriver/deca_device.c **** 
 890:Middlewares/Decawave/decadriver/deca_device.c ****     // Write the frame length to the TX frame control register
 891:Middlewares/Decawave/decadriver/deca_device.c ****     // pdw1000local->txFCTRL has kept configured bit rate information
 892:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 reg32 = pdw1000local->txFCTRL | txFrameLength | ((uint32)txBufferOffset << TX_FCTRL_TXBO
 1978              		.loc 1 892 32
 1979 0010 0A4B     		ldr	r3, .L94
 1980 0012 1B68     		ldr	r3, [r3]
 1981 0014 DA68     		ldr	r2, [r3, #12]
 1982              		.loc 1 892 42
 1983 0016 FB88     		ldrh	r3, [r7, #6]
 1984 0018 1A43     		orrs	r2, r2, r3
 1985              		.loc 1 892 61
 1986 001a BB88     		ldrh	r3, [r7, #4]
 1987              		.loc 1 892 84
 1988 001c 9B05     		lsls	r3, r3, #22
 1989              		.loc 1 892 58
 1990 001e 1A43     		orrs	r2, r2, r3
 1991              		.loc 1 892 113
 1992 0020 3B68     		ldr	r3, [r7]
 1993              		.loc 1 892 129
ARM GAS  /tmp/cc0TY0Fa.s 			page 51


 1994 0022 DB03     		lsls	r3, r3, #15
 1995              		.loc 1 892 12
 1996 0024 1343     		orrs	r3, r3, r2
 1997 0026 FB60     		str	r3, [r7, #12]
 893:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, reg32);
 1998              		.loc 1 893 5
 1999 0028 FA68     		ldr	r2, [r7, #12]
 2000 002a 0021     		movs	r1, #0
 2001 002c 0820     		movs	r0, #8
 2002 002e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 894:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_writetxfctrl()
 2003              		.loc 1 894 1
 2004 0032 00BF     		nop
 2005 0034 1037     		adds	r7, r7, #16
 2006              	.LCFI100:
 2007              		.cfi_def_cfa_offset 8
 2008 0036 BD46     		mov	sp, r7
 2009              	.LCFI101:
 2010              		.cfi_def_cfa_register 13
 2011              		@ sp needed
 2012 0038 80BD     		pop	{r7, pc}
 2013              	.L95:
 2014 003a 00BF     		.align	2
 2015              	.L94:
 2016 003c 00000000 		.word	pdw1000local
 2017              		.cfi_endproc
 2018              	.LFE21:
 2020              		.section	.text.dwt_readrxdata,"ax",%progbits
 2021              		.align	1
 2022              		.global	dwt_readrxdata
 2023              		.syntax unified
 2024              		.thumb
 2025              		.thumb_func
 2026              		.fpu fpv4-sp-d16
 2028              	dwt_readrxdata:
 2029              	.LFB22:
 895:Middlewares/Decawave/decadriver/deca_device.c **** 
 896:Middlewares/Decawave/decadriver/deca_device.c **** 
 897:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 898:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readrxdata()
 899:Middlewares/Decawave/decadriver/deca_device.c ****  *
 900:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the data from the RX buffer, from an offset location give by offset 
 901:Middlewares/Decawave/decadriver/deca_device.c ****  *
 902:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 903:Middlewares/Decawave/decadriver/deca_device.c ****  * @param buffer - the buffer into which the data will be read
 904:Middlewares/Decawave/decadriver/deca_device.c ****  * @param length - the length of data to read (in bytes)
 905:Middlewares/Decawave/decadriver/deca_device.c ****  * @param rxBufferOffset - the offset in the rx buffer from which to read the data
 906:Middlewares/Decawave/decadriver/deca_device.c ****  *
 907:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 908:Middlewares/Decawave/decadriver/deca_device.c ****  *
 909:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 910:Middlewares/Decawave/decadriver/deca_device.c ****  */
 911:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_readrxdata(uint8 *buffer, uint16 length, uint16 rxBufferOffset)
 912:Middlewares/Decawave/decadriver/deca_device.c **** {
 2030              		.loc 1 912 1
 2031              		.cfi_startproc
 2032              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /tmp/cc0TY0Fa.s 			page 52


 2033              		@ frame_needed = 1, uses_anonymous_args = 0
 2034 0000 80B5     		push	{r7, lr}
 2035              	.LCFI102:
 2036              		.cfi_def_cfa_offset 8
 2037              		.cfi_offset 7, -8
 2038              		.cfi_offset 14, -4
 2039 0002 82B0     		sub	sp, sp, #8
 2040              	.LCFI103:
 2041              		.cfi_def_cfa_offset 16
 2042 0004 00AF     		add	r7, sp, #0
 2043              	.LCFI104:
 2044              		.cfi_def_cfa_register 7
 2045 0006 7860     		str	r0, [r7, #4]
 2046 0008 0B46     		mov	r3, r1
 2047 000a 7B80     		strh	r3, [r7, #2]	@ movhi
 2048 000c 1346     		mov	r3, r2	@ movhi
 2049 000e 3B80     		strh	r3, [r7]	@ movhi
 913:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(RX_BUFFER_ID,rxBufferOffset,length,buffer) ;
 2050              		.loc 1 913 5
 2051 0010 7A88     		ldrh	r2, [r7, #2]
 2052 0012 3988     		ldrh	r1, [r7]
 2053 0014 7B68     		ldr	r3, [r7, #4]
 2054 0016 1120     		movs	r0, #17
 2055 0018 FFF7FEFF 		bl	dwt_readfromdevice
 914:Middlewares/Decawave/decadriver/deca_device.c **** }
 2056              		.loc 1 914 1
 2057 001c 00BF     		nop
 2058 001e 0837     		adds	r7, r7, #8
 2059              	.LCFI105:
 2060              		.cfi_def_cfa_offset 8
 2061 0020 BD46     		mov	sp, r7
 2062              	.LCFI106:
 2063              		.cfi_def_cfa_register 13
 2064              		@ sp needed
 2065 0022 80BD     		pop	{r7, pc}
 2066              		.cfi_endproc
 2067              	.LFE22:
 2069              		.section	.text.dwt_readaccdata,"ax",%progbits
 2070              		.align	1
 2071              		.global	dwt_readaccdata
 2072              		.syntax unified
 2073              		.thumb
 2074              		.thumb_func
 2075              		.fpu fpv4-sp-d16
 2077              	dwt_readaccdata:
 2078              	.LFB23:
 915:Middlewares/Decawave/decadriver/deca_device.c **** 
 916:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 917:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readaccdata()
 918:Middlewares/Decawave/decadriver/deca_device.c ****  *
 919:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the data from the Accumulator buffer, from an offset location give b
 920:Middlewares/Decawave/decadriver/deca_device.c ****  *
 921:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: Because of an internal memory access delay when reading the accumulator the first octet ou
 922:Middlewares/Decawave/decadriver/deca_device.c ****  *       that should be discarded. This is true no matter what sub-index the read begins at.
 923:Middlewares/Decawave/decadriver/deca_device.c ****  *
 924:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 925:Middlewares/Decawave/decadriver/deca_device.c ****  * @param buffer - the buffer into which the data will be read
ARM GAS  /tmp/cc0TY0Fa.s 			page 53


 926:Middlewares/Decawave/decadriver/deca_device.c ****  * @param length - the length of data to read (in bytes)
 927:Middlewares/Decawave/decadriver/deca_device.c ****  * @param accOffset - the offset in the acc buffer from which to read the data
 928:Middlewares/Decawave/decadriver/deca_device.c ****  *
 929:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 930:Middlewares/Decawave/decadriver/deca_device.c ****  *
 931:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 932:Middlewares/Decawave/decadriver/deca_device.c ****  */
 933:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_readaccdata(uint8 *buffer, uint16 len, uint16 accOffset)
 934:Middlewares/Decawave/decadriver/deca_device.c **** {
 2079              		.loc 1 934 1
 2080              		.cfi_startproc
 2081              		@ args = 0, pretend = 0, frame = 8
 2082              		@ frame_needed = 1, uses_anonymous_args = 0
 2083 0000 80B5     		push	{r7, lr}
 2084              	.LCFI107:
 2085              		.cfi_def_cfa_offset 8
 2086              		.cfi_offset 7, -8
 2087              		.cfi_offset 14, -4
 2088 0002 82B0     		sub	sp, sp, #8
 2089              	.LCFI108:
 2090              		.cfi_def_cfa_offset 16
 2091 0004 00AF     		add	r7, sp, #0
 2092              	.LCFI109:
 2093              		.cfi_def_cfa_register 7
 2094 0006 7860     		str	r0, [r7, #4]
 2095 0008 0B46     		mov	r3, r1
 2096 000a 7B80     		strh	r3, [r7, #2]	@ movhi
 2097 000c 1346     		mov	r3, r2	@ movhi
 2098 000e 3B80     		strh	r3, [r7]	@ movhi
 935:Middlewares/Decawave/decadriver/deca_device.c ****     // Force on the ACC clocks if we are sequenced
 936:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(READ_ACC_ON);
 2099              		.loc 1 936 5
 2100 0010 0720     		movs	r0, #7
 2101 0012 FFF7FEFF 		bl	_dwt_enableclocks
 937:Middlewares/Decawave/decadriver/deca_device.c **** 
 938:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(ACC_MEM_ID,accOffset,len,buffer) ;
 2102              		.loc 1 938 5
 2103 0016 7A88     		ldrh	r2, [r7, #2]
 2104 0018 3988     		ldrh	r1, [r7]
 2105 001a 7B68     		ldr	r3, [r7, #4]
 2106 001c 2520     		movs	r0, #37
 2107 001e FFF7FEFF 		bl	dwt_readfromdevice
 939:Middlewares/Decawave/decadriver/deca_device.c **** 
 940:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(READ_ACC_OFF); // Revert clocks back
 2108              		.loc 1 940 5
 2109 0022 0820     		movs	r0, #8
 2110 0024 FFF7FEFF 		bl	_dwt_enableclocks
 941:Middlewares/Decawave/decadriver/deca_device.c **** }
 2111              		.loc 1 941 1
 2112 0028 00BF     		nop
 2113 002a 0837     		adds	r7, r7, #8
 2114              	.LCFI110:
 2115              		.cfi_def_cfa_offset 8
 2116 002c BD46     		mov	sp, r7
 2117              	.LCFI111:
 2118              		.cfi_def_cfa_register 13
 2119              		@ sp needed
ARM GAS  /tmp/cc0TY0Fa.s 			page 54


 2120 002e 80BD     		pop	{r7, pc}
 2121              		.cfi_endproc
 2122              	.LFE23:
 2124              		.section	.text.dwt_readcarrierintegrator,"ax",%progbits
 2125              		.align	1
 2126              		.global	dwt_readcarrierintegrator
 2127              		.syntax unified
 2128              		.thumb
 2129              		.thumb_func
 2130              		.fpu fpv4-sp-d16
 2132              	dwt_readcarrierintegrator:
 2133              	.LFB24:
 942:Middlewares/Decawave/decadriver/deca_device.c **** 
 943:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 944:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readcarrierintegrator()
 945:Middlewares/Decawave/decadriver/deca_device.c ****  *
 946:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the RX carrier integrator value (relating to the frequency offset of
 947:Middlewares/Decawave/decadriver/deca_device.c ****  *
 948:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: This is a 21-bit signed quantity, the function sign extends the most significant bit, whic
 949:Middlewares/Decawave/decadriver/deca_device.c ****  *       (numbering from bit zero) to return a 32-bit signed integer value.
 950:Middlewares/Decawave/decadriver/deca_device.c ****  *
 951:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters - NONE
 952:Middlewares/Decawave/decadriver/deca_device.c ****  *
 953:Middlewares/Decawave/decadriver/deca_device.c ****  * return value - the (int32) signed carrier integrator value.
 954:Middlewares/Decawave/decadriver/deca_device.c ****  *                A positive value means the local RX clock is running faster than the remote TX de
 955:Middlewares/Decawave/decadriver/deca_device.c ****  */
 956:Middlewares/Decawave/decadriver/deca_device.c **** 
 957:Middlewares/Decawave/decadriver/deca_device.c **** #define B20_SIGN_EXTEND_TEST (0x00100000UL)
 958:Middlewares/Decawave/decadriver/deca_device.c **** #define B20_SIGN_EXTEND_MASK (0xFFF00000UL)
 959:Middlewares/Decawave/decadriver/deca_device.c **** 
 960:Middlewares/Decawave/decadriver/deca_device.c **** int32 dwt_readcarrierintegrator(void)
 961:Middlewares/Decawave/decadriver/deca_device.c **** {
 2134              		.loc 1 961 1
 2135              		.cfi_startproc
 2136              		@ args = 0, pretend = 0, frame = 16
 2137              		@ frame_needed = 1, uses_anonymous_args = 0
 2138 0000 80B5     		push	{r7, lr}
 2139              	.LCFI112:
 2140              		.cfi_def_cfa_offset 8
 2141              		.cfi_offset 7, -8
 2142              		.cfi_offset 14, -4
 2143 0002 84B0     		sub	sp, sp, #16
 2144              	.LCFI113:
 2145              		.cfi_def_cfa_offset 24
 2146 0004 00AF     		add	r7, sp, #0
 2147              	.LCFI114:
 2148              		.cfi_def_cfa_register 7
 962:Middlewares/Decawave/decadriver/deca_device.c ****     uint32  regval = 0 ;
 2149              		.loc 1 962 13
 2150 0006 0023     		movs	r3, #0
 2151 0008 FB60     		str	r3, [r7, #12]
 963:Middlewares/Decawave/decadriver/deca_device.c ****     int     j ;
 964:Middlewares/Decawave/decadriver/deca_device.c ****     uint8   buffer[DRX_CARRIER_INT_LEN] ;
 965:Middlewares/Decawave/decadriver/deca_device.c **** 
 966:Middlewares/Decawave/decadriver/deca_device.c ****     /* Read 3 bytes into buffer (21-bit quantity) */
 967:Middlewares/Decawave/decadriver/deca_device.c **** 
 968:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(DRX_CONF_ID,DRX_CARRIER_INT_OFFSET,DRX_CARRIER_INT_LEN, buffer) ;
ARM GAS  /tmp/cc0TY0Fa.s 			page 55


 2152              		.loc 1 968 5
 2153 000a 3B1D     		adds	r3, r7, #4
 2154 000c 0322     		movs	r2, #3
 2155 000e 2821     		movs	r1, #40
 2156 0010 2720     		movs	r0, #39
 2157 0012 FFF7FEFF 		bl	dwt_readfromdevice
 969:Middlewares/Decawave/decadriver/deca_device.c **** 
 970:Middlewares/Decawave/decadriver/deca_device.c ****     for (j = 2 ; j >= 0 ; j --)  // arrange the three bytes into an unsigned integer value
 2158              		.loc 1 970 12
 2159 0016 0223     		movs	r3, #2
 2160 0018 BB60     		str	r3, [r7, #8]
 2161              		.loc 1 970 5
 2162 001a 0AE0     		b	.L99
 2163              	.L100:
 971:Middlewares/Decawave/decadriver/deca_device.c ****     {
 972:Middlewares/Decawave/decadriver/deca_device.c ****         regval = (regval << 8) + buffer[j] ;
 2164              		.loc 1 972 26 discriminator 3
 2165 001c FB68     		ldr	r3, [r7, #12]
 2166 001e 1B02     		lsls	r3, r3, #8
 2167              		.loc 1 972 40 discriminator 3
 2168 0020 391D     		adds	r1, r7, #4
 2169 0022 BA68     		ldr	r2, [r7, #8]
 2170 0024 0A44     		add	r2, r2, r1
 2171 0026 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2172              		.loc 1 972 16 discriminator 3
 2173 0028 1344     		add	r3, r3, r2
 2174 002a FB60     		str	r3, [r7, #12]
 970:Middlewares/Decawave/decadriver/deca_device.c ****     {
 2175              		.loc 1 970 29 discriminator 3
 2176 002c BB68     		ldr	r3, [r7, #8]
 2177 002e 013B     		subs	r3, r3, #1
 2178 0030 BB60     		str	r3, [r7, #8]
 2179              	.L99:
 970:Middlewares/Decawave/decadriver/deca_device.c ****     {
 2180              		.loc 1 970 5 discriminator 1
 2181 0032 BB68     		ldr	r3, [r7, #8]
 2182 0034 002B     		cmp	r3, #0
 2183 0036 F1DA     		bge	.L100
 973:Middlewares/Decawave/decadriver/deca_device.c ****     }
 974:Middlewares/Decawave/decadriver/deca_device.c **** 
 975:Middlewares/Decawave/decadriver/deca_device.c ****     if (regval & B20_SIGN_EXTEND_TEST) regval |= B20_SIGN_EXTEND_MASK ; // sign extend bit #20 to w
 2184              		.loc 1 975 16
 2185 0038 FB68     		ldr	r3, [r7, #12]
 2186 003a 03F48013 		and	r3, r3, #1048576
 2187              		.loc 1 975 8
 2188 003e 002B     		cmp	r3, #0
 2189 0040 06D0     		beq	.L101
 2190              		.loc 1 975 47 discriminator 1
 2191 0042 FB68     		ldr	r3, [r7, #12]
 2192 0044 6FEA0333 		mvn	r3, r3, lsl #12
 2193 0048 6FEA1333 		mvn	r3, r3, lsr #12
 2194 004c FB60     		str	r3, [r7, #12]
 2195 004e 03E0     		b	.L102
 2196              	.L101:
 976:Middlewares/Decawave/decadriver/deca_device.c ****     else regval &= DRX_CARRIER_INT_MASK ;                               // make sure upper bits are
 2197              		.loc 1 976 17
 2198 0050 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cc0TY0Fa.s 			page 56


 2199 0052 C3F31403 		ubfx	r3, r3, #0, #21
 2200 0056 FB60     		str	r3, [r7, #12]
 2201              	.L102:
 977:Middlewares/Decawave/decadriver/deca_device.c **** 
 978:Middlewares/Decawave/decadriver/deca_device.c ****     return (int32) regval ; // cast unsigned value to signed quantity.
 2202              		.loc 1 978 12
 2203 0058 FB68     		ldr	r3, [r7, #12]
 979:Middlewares/Decawave/decadriver/deca_device.c **** }
 2204              		.loc 1 979 1
 2205 005a 1846     		mov	r0, r3
 2206 005c 1037     		adds	r7, r7, #16
 2207              	.LCFI115:
 2208              		.cfi_def_cfa_offset 8
 2209 005e BD46     		mov	sp, r7
 2210              	.LCFI116:
 2211              		.cfi_def_cfa_register 13
 2212              		@ sp needed
 2213 0060 80BD     		pop	{r7, pc}
 2214              		.cfi_endproc
 2215              	.LFE24:
 2217              		.section	.text.dwt_readdiagnostics,"ax",%progbits
 2218              		.align	1
 2219              		.global	dwt_readdiagnostics
 2220              		.syntax unified
 2221              		.thumb
 2222              		.thumb_func
 2223              		.fpu fpv4-sp-d16
 2225              	dwt_readdiagnostics:
 2226              	.LFB25:
 980:Middlewares/Decawave/decadriver/deca_device.c **** 
 981:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 982:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readdiagnostics()
 983:Middlewares/Decawave/decadriver/deca_device.c ****  *
 984:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function reads the RX signal quality diagnostic data
 985:Middlewares/Decawave/decadriver/deca_device.c ****  *
 986:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
 987:Middlewares/Decawave/decadriver/deca_device.c ****  * @param diagnostics - diagnostic structure pointer, this will contain the diagnostic data read fr
 988:Middlewares/Decawave/decadriver/deca_device.c ****  *
 989:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
 990:Middlewares/Decawave/decadriver/deca_device.c ****  *
 991:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
 992:Middlewares/Decawave/decadriver/deca_device.c ****  */
 993:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_readdiagnostics(dwt_rxdiag_t *diagnostics)
 994:Middlewares/Decawave/decadriver/deca_device.c **** {
 2227              		.loc 1 994 1
 2228              		.cfi_startproc
 2229              		@ args = 0, pretend = 0, frame = 8
 2230              		@ frame_needed = 1, uses_anonymous_args = 0
 2231 0000 80B5     		push	{r7, lr}
 2232              	.LCFI117:
 2233              		.cfi_def_cfa_offset 8
 2234              		.cfi_offset 7, -8
 2235              		.cfi_offset 14, -4
 2236 0002 82B0     		sub	sp, sp, #8
 2237              	.LCFI118:
 2238              		.cfi_def_cfa_offset 16
 2239 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 57


 2240              	.LCFI119:
 2241              		.cfi_def_cfa_register 7
 2242 0006 7860     		str	r0, [r7, #4]
 995:Middlewares/Decawave/decadriver/deca_device.c ****     // Read the HW FP index
 996:Middlewares/Decawave/decadriver/deca_device.c ****     diagnostics->firstPath = dwt_read16bitoffsetreg(RX_TIME_ID, RX_TIME_FP_INDEX_OFFSET);
 2243              		.loc 1 996 30
 2244 0008 0521     		movs	r1, #5
 2245 000a 1520     		movs	r0, #21
 2246 000c FFF7FEFF 		bl	dwt_read16bitoffsetreg
 2247 0010 0346     		mov	r3, r0
 2248 0012 1A46     		mov	r2, r3
 2249              		.loc 1 996 28
 2250 0014 7B68     		ldr	r3, [r7, #4]
 2251 0016 DA81     		strh	r2, [r3, #14]	@ movhi
 997:Middlewares/Decawave/decadriver/deca_device.c **** 
 998:Middlewares/Decawave/decadriver/deca_device.c ****     // LDE diagnostic data
 999:Middlewares/Decawave/decadriver/deca_device.c ****     diagnostics->maxNoise = dwt_read16bitoffsetreg(LDE_IF_ID, LDE_THRESH_OFFSET);
 2252              		.loc 1 999 29
 2253 0018 0021     		movs	r1, #0
 2254 001a 2E20     		movs	r0, #46
 2255 001c FFF7FEFF 		bl	dwt_read16bitoffsetreg
 2256 0020 0346     		mov	r3, r0
 2257 0022 1A46     		mov	r2, r3
 2258              		.loc 1 999 27
 2259 0024 7B68     		ldr	r3, [r7, #4]
 2260 0026 1A80     		strh	r2, [r3]	@ movhi
1000:Middlewares/Decawave/decadriver/deca_device.c **** 
1001:Middlewares/Decawave/decadriver/deca_device.c ****     // Read all 8 bytes in one SPI transaction
1002:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(RX_FQUAL_ID, 0x0, 8, (uint8*)&diagnostics->stdNoise);
 2261              		.loc 1 1002 53
 2262 0028 7B68     		ldr	r3, [r7, #4]
 2263 002a 0433     		adds	r3, r3, #4
 2264              		.loc 1 1002 5
 2265 002c 0822     		movs	r2, #8
 2266 002e 0021     		movs	r1, #0
 2267 0030 1220     		movs	r0, #18
 2268 0032 FFF7FEFF 		bl	dwt_readfromdevice
1003:Middlewares/Decawave/decadriver/deca_device.c **** 
1004:Middlewares/Decawave/decadriver/deca_device.c ****     diagnostics->firstPathAmp1 = dwt_read16bitoffsetreg(RX_TIME_ID, RX_TIME_FP_AMPL1_OFFSET);
 2269              		.loc 1 1004 34
 2270 0036 0721     		movs	r1, #7
 2271 0038 1520     		movs	r0, #21
 2272 003a FFF7FEFF 		bl	dwt_read16bitoffsetreg
 2273 003e 0346     		mov	r3, r0
 2274 0040 1A46     		mov	r2, r3
 2275              		.loc 1 1004 32
 2276 0042 7B68     		ldr	r3, [r7, #4]
 2277 0044 5A80     		strh	r2, [r3, #2]	@ movhi
1005:Middlewares/Decawave/decadriver/deca_device.c **** 
1006:Middlewares/Decawave/decadriver/deca_device.c ****     diagnostics->rxPreamCount = (dwt_read32bitreg(RX_FINFO_ID) & RX_FINFO_RXPACC_MASK) >> RX_FINFO_
 2278              		.loc 1 1006 34
 2279 0046 0021     		movs	r1, #0
 2280 0048 1020     		movs	r0, #16
 2281 004a FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2282 004e 0346     		mov	r3, r0
 2283              		.loc 1 1006 88
 2284 0050 1B0D     		lsrs	r3, r3, #20
ARM GAS  /tmp/cc0TY0Fa.s 			page 58


 2285 0052 9BB2     		uxth	r3, r3
 2286 0054 C3F30B03 		ubfx	r3, r3, #0, #12
 2287 0058 9AB2     		uxth	r2, r3
 2288              		.loc 1 1006 31
 2289 005a 7B68     		ldr	r3, [r7, #4]
 2290 005c 9A81     		strh	r2, [r3, #12]	@ movhi
1007:Middlewares/Decawave/decadriver/deca_device.c **** }
 2291              		.loc 1 1007 1
 2292 005e 00BF     		nop
 2293 0060 0837     		adds	r7, r7, #8
 2294              	.LCFI120:
 2295              		.cfi_def_cfa_offset 8
 2296 0062 BD46     		mov	sp, r7
 2297              	.LCFI121:
 2298              		.cfi_def_cfa_register 13
 2299              		@ sp needed
 2300 0064 80BD     		pop	{r7, pc}
 2301              		.cfi_endproc
 2302              	.LFE25:
 2304              		.section	.text.dwt_readtxtimestamp,"ax",%progbits
 2305              		.align	1
 2306              		.global	dwt_readtxtimestamp
 2307              		.syntax unified
 2308              		.thumb
 2309              		.thumb_func
 2310              		.fpu fpv4-sp-d16
 2312              	dwt_readtxtimestamp:
 2313              	.LFB26:
1008:Middlewares/Decawave/decadriver/deca_device.c **** 
1009:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1010:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readtxtimestamp()
1011:Middlewares/Decawave/decadriver/deca_device.c ****  *
1012:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the TX timestamp (adjusted with the programmed antenna delay)
1013:Middlewares/Decawave/decadriver/deca_device.c ****  *
1014:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1015:Middlewares/Decawave/decadriver/deca_device.c ****  * @param timestamp - a pointer to a 5-byte buffer which will store the read TX timestamp time
1016:Middlewares/Decawave/decadriver/deca_device.c ****  *
1017:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters - the timestamp buffer will contain the value after the function call
1018:Middlewares/Decawave/decadriver/deca_device.c ****  *
1019:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1020:Middlewares/Decawave/decadriver/deca_device.c ****  */
1021:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_readtxtimestamp(uint8 * timestamp)
1022:Middlewares/Decawave/decadriver/deca_device.c **** {
 2314              		.loc 1 1022 1
 2315              		.cfi_startproc
 2316              		@ args = 0, pretend = 0, frame = 8
 2317              		@ frame_needed = 1, uses_anonymous_args = 0
 2318 0000 80B5     		push	{r7, lr}
 2319              	.LCFI122:
 2320              		.cfi_def_cfa_offset 8
 2321              		.cfi_offset 7, -8
 2322              		.cfi_offset 14, -4
 2323 0002 82B0     		sub	sp, sp, #8
 2324              	.LCFI123:
 2325              		.cfi_def_cfa_offset 16
 2326 0004 00AF     		add	r7, sp, #0
 2327              	.LCFI124:
ARM GAS  /tmp/cc0TY0Fa.s 			page 59


 2328              		.cfi_def_cfa_register 7
 2329 0006 7860     		str	r0, [r7, #4]
1023:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(TX_TIME_ID, TX_TIME_TX_STAMP_OFFSET, TX_TIME_TX_STAMP_LEN, timestamp) ; // R
 2330              		.loc 1 1023 5
 2331 0008 7B68     		ldr	r3, [r7, #4]
 2332 000a 0522     		movs	r2, #5
 2333 000c 0021     		movs	r1, #0
 2334 000e 1720     		movs	r0, #23
 2335 0010 FFF7FEFF 		bl	dwt_readfromdevice
1024:Middlewares/Decawave/decadriver/deca_device.c **** }
 2336              		.loc 1 1024 1
 2337 0014 00BF     		nop
 2338 0016 0837     		adds	r7, r7, #8
 2339              	.LCFI125:
 2340              		.cfi_def_cfa_offset 8
 2341 0018 BD46     		mov	sp, r7
 2342              	.LCFI126:
 2343              		.cfi_def_cfa_register 13
 2344              		@ sp needed
 2345 001a 80BD     		pop	{r7, pc}
 2346              		.cfi_endproc
 2347              	.LFE26:
 2349              		.section	.text.dwt_readtxtimestamphi32,"ax",%progbits
 2350              		.align	1
 2351              		.global	dwt_readtxtimestamphi32
 2352              		.syntax unified
 2353              		.thumb
 2354              		.thumb_func
 2355              		.fpu fpv4-sp-d16
 2357              	dwt_readtxtimestamphi32:
 2358              	.LFB27:
1025:Middlewares/Decawave/decadriver/deca_device.c **** 
1026:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1027:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readtxtimestamphi32()
1028:Middlewares/Decawave/decadriver/deca_device.c ****  *
1029:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the high 32-bits of the TX timestamp (adjusted with the programmed a
1030:Middlewares/Decawave/decadriver/deca_device.c ****  *
1031:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1032:Middlewares/Decawave/decadriver/deca_device.c ****  *
1033:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1034:Middlewares/Decawave/decadriver/deca_device.c ****  *
1035:Middlewares/Decawave/decadriver/deca_device.c ****  * returns high 32-bits of TX timestamp
1036:Middlewares/Decawave/decadriver/deca_device.c ****  */
1037:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_readtxtimestamphi32(void)
1038:Middlewares/Decawave/decadriver/deca_device.c **** {
 2359              		.loc 1 1038 1
 2360              		.cfi_startproc
 2361              		@ args = 0, pretend = 0, frame = 0
 2362              		@ frame_needed = 1, uses_anonymous_args = 0
 2363 0000 80B5     		push	{r7, lr}
 2364              	.LCFI127:
 2365              		.cfi_def_cfa_offset 8
 2366              		.cfi_offset 7, -8
 2367              		.cfi_offset 14, -4
 2368 0002 00AF     		add	r7, sp, #0
 2369              	.LCFI128:
 2370              		.cfi_def_cfa_register 7
ARM GAS  /tmp/cc0TY0Fa.s 			page 60


1039:Middlewares/Decawave/decadriver/deca_device.c ****     return dwt_read32bitoffsetreg(TX_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
 2371              		.loc 1 1039 12
 2372 0004 0121     		movs	r1, #1
 2373 0006 1720     		movs	r0, #23
 2374 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2375 000c 0346     		mov	r3, r0
1040:Middlewares/Decawave/decadriver/deca_device.c **** }
 2376              		.loc 1 1040 1
 2377 000e 1846     		mov	r0, r3
 2378 0010 80BD     		pop	{r7, pc}
 2379              		.cfi_endproc
 2380              	.LFE27:
 2382              		.section	.text.dwt_readtxtimestamplo32,"ax",%progbits
 2383              		.align	1
 2384              		.global	dwt_readtxtimestamplo32
 2385              		.syntax unified
 2386              		.thumb
 2387              		.thumb_func
 2388              		.fpu fpv4-sp-d16
 2390              	dwt_readtxtimestamplo32:
 2391              	.LFB28:
1041:Middlewares/Decawave/decadriver/deca_device.c **** 
1042:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1043:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readtxtimestamplo32()
1044:Middlewares/Decawave/decadriver/deca_device.c ****  *
1045:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the low 32-bits of the TX timestamp (adjusted with the programmed an
1046:Middlewares/Decawave/decadriver/deca_device.c ****  *
1047:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1048:Middlewares/Decawave/decadriver/deca_device.c ****  *
1049:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1050:Middlewares/Decawave/decadriver/deca_device.c ****  *
1051:Middlewares/Decawave/decadriver/deca_device.c ****  * returns low 32-bits of TX timestamp
1052:Middlewares/Decawave/decadriver/deca_device.c ****  */
1053:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_readtxtimestamplo32(void)
1054:Middlewares/Decawave/decadriver/deca_device.c **** {
 2392              		.loc 1 1054 1
 2393              		.cfi_startproc
 2394              		@ args = 0, pretend = 0, frame = 0
 2395              		@ frame_needed = 1, uses_anonymous_args = 0
 2396 0000 80B5     		push	{r7, lr}
 2397              	.LCFI129:
 2398              		.cfi_def_cfa_offset 8
 2399              		.cfi_offset 7, -8
 2400              		.cfi_offset 14, -4
 2401 0002 00AF     		add	r7, sp, #0
 2402              	.LCFI130:
 2403              		.cfi_def_cfa_register 7
1055:Middlewares/Decawave/decadriver/deca_device.c ****     return dwt_read32bitreg(TX_TIME_ID); // Read TX TIME as a 32-bit register to get the 4 lower by
 2404              		.loc 1 1055 12
 2405 0004 0021     		movs	r1, #0
 2406 0006 1720     		movs	r0, #23
 2407 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2408 000c 0346     		mov	r3, r0
1056:Middlewares/Decawave/decadriver/deca_device.c **** }
 2409              		.loc 1 1056 1
 2410 000e 1846     		mov	r0, r3
 2411 0010 80BD     		pop	{r7, pc}
ARM GAS  /tmp/cc0TY0Fa.s 			page 61


 2412              		.cfi_endproc
 2413              	.LFE28:
 2415              		.section	.text.dwt_readrxtimestamp,"ax",%progbits
 2416              		.align	1
 2417              		.global	dwt_readrxtimestamp
 2418              		.syntax unified
 2419              		.thumb
 2420              		.thumb_func
 2421              		.fpu fpv4-sp-d16
 2423              	dwt_readrxtimestamp:
 2424              	.LFB29:
1057:Middlewares/Decawave/decadriver/deca_device.c **** 
1058:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1059:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readrxtimestamp()
1060:Middlewares/Decawave/decadriver/deca_device.c ****  *
1061:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the RX timestamp (adjusted time of arrival)
1062:Middlewares/Decawave/decadriver/deca_device.c ****  *
1063:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1064:Middlewares/Decawave/decadriver/deca_device.c ****  * @param timestamp - a pointer to a 5-byte buffer which will store the read RX timestamp time
1065:Middlewares/Decawave/decadriver/deca_device.c ****  *
1066:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters - the timestamp buffer will contain the value after the function call
1067:Middlewares/Decawave/decadriver/deca_device.c ****  *
1068:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1069:Middlewares/Decawave/decadriver/deca_device.c ****  */
1070:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_readrxtimestamp(uint8 * timestamp)
1071:Middlewares/Decawave/decadriver/deca_device.c **** {
 2425              		.loc 1 1071 1
 2426              		.cfi_startproc
 2427              		@ args = 0, pretend = 0, frame = 8
 2428              		@ frame_needed = 1, uses_anonymous_args = 0
 2429 0000 80B5     		push	{r7, lr}
 2430              	.LCFI131:
 2431              		.cfi_def_cfa_offset 8
 2432              		.cfi_offset 7, -8
 2433              		.cfi_offset 14, -4
 2434 0002 82B0     		sub	sp, sp, #8
 2435              	.LCFI132:
 2436              		.cfi_def_cfa_offset 16
 2437 0004 00AF     		add	r7, sp, #0
 2438              	.LCFI133:
 2439              		.cfi_def_cfa_register 7
 2440 0006 7860     		str	r0, [r7, #4]
1072:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(RX_TIME_ID, RX_TIME_RX_STAMP_OFFSET, RX_TIME_RX_STAMP_LEN, timestamp) ; // G
 2441              		.loc 1 1072 5
 2442 0008 7B68     		ldr	r3, [r7, #4]
 2443 000a 0522     		movs	r2, #5
 2444 000c 0021     		movs	r1, #0
 2445 000e 1520     		movs	r0, #21
 2446 0010 FFF7FEFF 		bl	dwt_readfromdevice
1073:Middlewares/Decawave/decadriver/deca_device.c **** }
 2447              		.loc 1 1073 1
 2448 0014 00BF     		nop
 2449 0016 0837     		adds	r7, r7, #8
 2450              	.LCFI134:
 2451              		.cfi_def_cfa_offset 8
 2452 0018 BD46     		mov	sp, r7
 2453              	.LCFI135:
ARM GAS  /tmp/cc0TY0Fa.s 			page 62


 2454              		.cfi_def_cfa_register 13
 2455              		@ sp needed
 2456 001a 80BD     		pop	{r7, pc}
 2457              		.cfi_endproc
 2458              	.LFE29:
 2460              		.section	.text.dwt_readrxtimestamphi32,"ax",%progbits
 2461              		.align	1
 2462              		.global	dwt_readrxtimestamphi32
 2463              		.syntax unified
 2464              		.thumb
 2465              		.thumb_func
 2466              		.fpu fpv4-sp-d16
 2468              	dwt_readrxtimestamphi32:
 2469              	.LFB30:
1074:Middlewares/Decawave/decadriver/deca_device.c **** 
1075:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1076:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readrxtimestamphi32()
1077:Middlewares/Decawave/decadriver/deca_device.c ****  *
1078:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the high 32-bits of the RX timestamp (adjusted with the programmed a
1079:Middlewares/Decawave/decadriver/deca_device.c ****  *
1080:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1081:Middlewares/Decawave/decadriver/deca_device.c ****  *
1082:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1083:Middlewares/Decawave/decadriver/deca_device.c ****  *
1084:Middlewares/Decawave/decadriver/deca_device.c ****  * returns high 32-bits of RX timestamp
1085:Middlewares/Decawave/decadriver/deca_device.c ****  */
1086:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_readrxtimestamphi32(void)
1087:Middlewares/Decawave/decadriver/deca_device.c **** {
 2470              		.loc 1 1087 1
 2471              		.cfi_startproc
 2472              		@ args = 0, pretend = 0, frame = 0
 2473              		@ frame_needed = 1, uses_anonymous_args = 0
 2474 0000 80B5     		push	{r7, lr}
 2475              	.LCFI136:
 2476              		.cfi_def_cfa_offset 8
 2477              		.cfi_offset 7, -8
 2478              		.cfi_offset 14, -4
 2479 0002 00AF     		add	r7, sp, #0
 2480              	.LCFI137:
 2481              		.cfi_def_cfa_register 7
1088:Middlewares/Decawave/decadriver/deca_device.c ****     return dwt_read32bitoffsetreg(RX_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
 2482              		.loc 1 1088 12
 2483 0004 0121     		movs	r1, #1
 2484 0006 1520     		movs	r0, #21
 2485 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2486 000c 0346     		mov	r3, r0
1089:Middlewares/Decawave/decadriver/deca_device.c **** }
 2487              		.loc 1 1089 1
 2488 000e 1846     		mov	r0, r3
 2489 0010 80BD     		pop	{r7, pc}
 2490              		.cfi_endproc
 2491              	.LFE30:
 2493              		.section	.text.dwt_readrxtimestamplo32,"ax",%progbits
 2494              		.align	1
 2495              		.global	dwt_readrxtimestamplo32
 2496              		.syntax unified
 2497              		.thumb
ARM GAS  /tmp/cc0TY0Fa.s 			page 63


 2498              		.thumb_func
 2499              		.fpu fpv4-sp-d16
 2501              	dwt_readrxtimestamplo32:
 2502              	.LFB31:
1090:Middlewares/Decawave/decadriver/deca_device.c **** 
1091:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1092:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readrxtimestamplo32()
1093:Middlewares/Decawave/decadriver/deca_device.c ****  *
1094:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the low 32-bits of the RX timestamp (adjusted with the programmed an
1095:Middlewares/Decawave/decadriver/deca_device.c ****  *
1096:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1097:Middlewares/Decawave/decadriver/deca_device.c ****  *
1098:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1099:Middlewares/Decawave/decadriver/deca_device.c ****  *
1100:Middlewares/Decawave/decadriver/deca_device.c ****  * returns low 32-bits of RX timestamp
1101:Middlewares/Decawave/decadriver/deca_device.c ****  */
1102:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_readrxtimestamplo32(void)
1103:Middlewares/Decawave/decadriver/deca_device.c **** {
 2503              		.loc 1 1103 1
 2504              		.cfi_startproc
 2505              		@ args = 0, pretend = 0, frame = 0
 2506              		@ frame_needed = 1, uses_anonymous_args = 0
 2507 0000 80B5     		push	{r7, lr}
 2508              	.LCFI138:
 2509              		.cfi_def_cfa_offset 8
 2510              		.cfi_offset 7, -8
 2511              		.cfi_offset 14, -4
 2512 0002 00AF     		add	r7, sp, #0
 2513              	.LCFI139:
 2514              		.cfi_def_cfa_register 7
1104:Middlewares/Decawave/decadriver/deca_device.c ****     return dwt_read32bitreg(RX_TIME_ID); // Read RX TIME as a 32-bit register to get the 4 lower by
 2515              		.loc 1 1104 12
 2516 0004 0021     		movs	r1, #0
 2517 0006 1520     		movs	r0, #21
 2518 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2519 000c 0346     		mov	r3, r0
1105:Middlewares/Decawave/decadriver/deca_device.c **** }
 2520              		.loc 1 1105 1
 2521 000e 1846     		mov	r0, r3
 2522 0010 80BD     		pop	{r7, pc}
 2523              		.cfi_endproc
 2524              	.LFE31:
 2526              		.section	.text.dwt_readsystimestamphi32,"ax",%progbits
 2527              		.align	1
 2528              		.global	dwt_readsystimestamphi32
 2529              		.syntax unified
 2530              		.thumb
 2531              		.thumb_func
 2532              		.fpu fpv4-sp-d16
 2534              	dwt_readsystimestamphi32:
 2535              	.LFB32:
1106:Middlewares/Decawave/decadriver/deca_device.c **** 
1107:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1108:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readsystimestamphi32()
1109:Middlewares/Decawave/decadriver/deca_device.c ****  *
1110:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the high 32-bits of the system time
1111:Middlewares/Decawave/decadriver/deca_device.c ****  *
ARM GAS  /tmp/cc0TY0Fa.s 			page 64


1112:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1113:Middlewares/Decawave/decadriver/deca_device.c ****  *
1114:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1115:Middlewares/Decawave/decadriver/deca_device.c ****  *
1116:Middlewares/Decawave/decadriver/deca_device.c ****  * returns high 32-bits of system time timestamp
1117:Middlewares/Decawave/decadriver/deca_device.c ****  */
1118:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_readsystimestamphi32(void)
1119:Middlewares/Decawave/decadriver/deca_device.c **** {
 2536              		.loc 1 1119 1
 2537              		.cfi_startproc
 2538              		@ args = 0, pretend = 0, frame = 0
 2539              		@ frame_needed = 1, uses_anonymous_args = 0
 2540 0000 80B5     		push	{r7, lr}
 2541              	.LCFI140:
 2542              		.cfi_def_cfa_offset 8
 2543              		.cfi_offset 7, -8
 2544              		.cfi_offset 14, -4
 2545 0002 00AF     		add	r7, sp, #0
 2546              	.LCFI141:
 2547              		.cfi_def_cfa_register 7
1120:Middlewares/Decawave/decadriver/deca_device.c ****     return dwt_read32bitoffsetreg(SYS_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
 2548              		.loc 1 1120 12
 2549 0004 0121     		movs	r1, #1
 2550 0006 0620     		movs	r0, #6
 2551 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2552 000c 0346     		mov	r3, r0
1121:Middlewares/Decawave/decadriver/deca_device.c **** }
 2553              		.loc 1 1121 1
 2554 000e 1846     		mov	r0, r3
 2555 0010 80BD     		pop	{r7, pc}
 2556              		.cfi_endproc
 2557              	.LFE32:
 2559              		.section	.text.dwt_readsystime,"ax",%progbits
 2560              		.align	1
 2561              		.global	dwt_readsystime
 2562              		.syntax unified
 2563              		.thumb
 2564              		.thumb_func
 2565              		.fpu fpv4-sp-d16
 2567              	dwt_readsystime:
 2568              	.LFB33:
1122:Middlewares/Decawave/decadriver/deca_device.c **** 
1123:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1124:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readsystime()
1125:Middlewares/Decawave/decadriver/deca_device.c ****  *
1126:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the system time
1127:Middlewares/Decawave/decadriver/deca_device.c ****  *
1128:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1129:Middlewares/Decawave/decadriver/deca_device.c ****  * @param timestamp - a pointer to a 5-byte buffer which will store the read system time
1130:Middlewares/Decawave/decadriver/deca_device.c ****  *
1131:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1132:Middlewares/Decawave/decadriver/deca_device.c ****  * @param timestamp - the timestamp buffer will contain the value after the function call
1133:Middlewares/Decawave/decadriver/deca_device.c ****  *
1134:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1135:Middlewares/Decawave/decadriver/deca_device.c ****  */
1136:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_readsystime(uint8 * timestamp)
1137:Middlewares/Decawave/decadriver/deca_device.c **** {
ARM GAS  /tmp/cc0TY0Fa.s 			page 65


 2569              		.loc 1 1137 1
 2570              		.cfi_startproc
 2571              		@ args = 0, pretend = 0, frame = 8
 2572              		@ frame_needed = 1, uses_anonymous_args = 0
 2573 0000 80B5     		push	{r7, lr}
 2574              	.LCFI142:
 2575              		.cfi_def_cfa_offset 8
 2576              		.cfi_offset 7, -8
 2577              		.cfi_offset 14, -4
 2578 0002 82B0     		sub	sp, sp, #8
 2579              	.LCFI143:
 2580              		.cfi_def_cfa_offset 16
 2581 0004 00AF     		add	r7, sp, #0
 2582              	.LCFI144:
 2583              		.cfi_def_cfa_register 7
 2584 0006 7860     		str	r0, [r7, #4]
1138:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(SYS_TIME_ID, SYS_TIME_OFFSET, SYS_TIME_LEN, timestamp) ;
 2585              		.loc 1 1138 5
 2586 0008 7B68     		ldr	r3, [r7, #4]
 2587 000a 0522     		movs	r2, #5
 2588 000c 0021     		movs	r1, #0
 2589 000e 0620     		movs	r0, #6
 2590 0010 FFF7FEFF 		bl	dwt_readfromdevice
1139:Middlewares/Decawave/decadriver/deca_device.c **** }
 2591              		.loc 1 1139 1
 2592 0014 00BF     		nop
 2593 0016 0837     		adds	r7, r7, #8
 2594              	.LCFI145:
 2595              		.cfi_def_cfa_offset 8
 2596 0018 BD46     		mov	sp, r7
 2597              	.LCFI146:
 2598              		.cfi_def_cfa_register 13
 2599              		@ sp needed
 2600 001a 80BD     		pop	{r7, pc}
 2601              		.cfi_endproc
 2602              	.LFE33:
 2604              		.section	.text.dwt_writetodevice,"ax",%progbits
 2605              		.align	1
 2606              		.global	dwt_writetodevice
 2607              		.syntax unified
 2608              		.thumb
 2609              		.thumb_func
 2610              		.fpu fpv4-sp-d16
 2612              	dwt_writetodevice:
 2613              	.LFB34:
1140:Middlewares/Decawave/decadriver/deca_device.c **** 
1141:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1142:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_writetodevice()
1143:Middlewares/Decawave/decadriver/deca_device.c ****  *
1144:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function is used to write to the DW1000 device registers
1145:Middlewares/Decawave/decadriver/deca_device.c ****  * Notes:
1146:Middlewares/Decawave/decadriver/deca_device.c ****  *        1. Firstly we create a header (the first byte is a header byte)
1147:Middlewares/Decawave/decadriver/deca_device.c ****  *        a. check if sub index is used, if subindexing is used - set bit-6 to 1 to signify that th
1148:Middlewares/Decawave/decadriver/deca_device.c ****  *        b. set bit-7 (or with 0x80) for write operation
1149:Middlewares/Decawave/decadriver/deca_device.c ****  *        c. if extended sub address index is used (i.e. if index > 127) set bit-7 of the first sub
1150:Middlewares/Decawave/decadriver/deca_device.c ****  *
1151:Middlewares/Decawave/decadriver/deca_device.c ****  *        2. Write the header followed by the data bytes to the DW1000 device
ARM GAS  /tmp/cc0TY0Fa.s 			page 66


1152:Middlewares/Decawave/decadriver/deca_device.c ****  *
1153:Middlewares/Decawave/decadriver/deca_device.c ****  *
1154:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
1155:Middlewares/Decawave/decadriver/deca_device.c ****  * @param recordNumber  - ID of register file or buffer being accessed
1156:Middlewares/Decawave/decadriver/deca_device.c ****  * @param index         - byte index into register file or buffer being accessed
1157:Middlewares/Decawave/decadriver/deca_device.c ****  * @param length        - number of bytes being written
1158:Middlewares/Decawave/decadriver/deca_device.c ****  * @param buffer        - pointer to buffer containing the 'length' bytes to be written
1159:Middlewares/Decawave/decadriver/deca_device.c ****  *
1160:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1161:Middlewares/Decawave/decadriver/deca_device.c ****  *
1162:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1163:Middlewares/Decawave/decadriver/deca_device.c ****  */
1164:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_writetodevice
1165:Middlewares/Decawave/decadriver/deca_device.c **** (
1166:Middlewares/Decawave/decadriver/deca_device.c ****     uint16  recordNumber,
1167:Middlewares/Decawave/decadriver/deca_device.c ****     uint16  index,
1168:Middlewares/Decawave/decadriver/deca_device.c ****     uint32        length,
1169:Middlewares/Decawave/decadriver/deca_device.c ****     const uint8   *buffer
1170:Middlewares/Decawave/decadriver/deca_device.c **** )
1171:Middlewares/Decawave/decadriver/deca_device.c **** {
 2614              		.loc 1 1171 1
 2615              		.cfi_startproc
 2616              		@ args = 0, pretend = 0, frame = 24
 2617              		@ frame_needed = 1, uses_anonymous_args = 0
 2618 0000 80B5     		push	{r7, lr}
 2619              	.LCFI147:
 2620              		.cfi_def_cfa_offset 8
 2621              		.cfi_offset 7, -8
 2622              		.cfi_offset 14, -4
 2623 0002 86B0     		sub	sp, sp, #24
 2624              	.LCFI148:
 2625              		.cfi_def_cfa_offset 32
 2626 0004 00AF     		add	r7, sp, #0
 2627              	.LCFI149:
 2628              		.cfi_def_cfa_register 7
 2629 0006 BA60     		str	r2, [r7, #8]
 2630 0008 7B60     		str	r3, [r7, #4]
 2631 000a 0346     		mov	r3, r0	@ movhi
 2632 000c FB81     		strh	r3, [r7, #14]	@ movhi
 2633 000e 0B46     		mov	r3, r1	@ movhi
 2634 0010 BB81     		strh	r3, [r7, #12]	@ movhi
1172:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 header[3] ; // Buffer to compose header in
1173:Middlewares/Decawave/decadriver/deca_device.c ****     int   cnt = 0; // Counter for length of header
 2635              		.loc 1 1173 11
 2636 0012 0023     		movs	r3, #0
 2637 0014 7B61     		str	r3, [r7, #20]
1174:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
1175:Middlewares/Decawave/decadriver/deca_device.c ****     assert(recordNumber <= 0x3F); // Record number is limited to 6-bits.
1176:Middlewares/Decawave/decadriver/deca_device.c **** #endif
1177:Middlewares/Decawave/decadriver/deca_device.c **** 
1178:Middlewares/Decawave/decadriver/deca_device.c ****     // Write message header selecting WRITE operation and addresses as appropriate (this is one to 
1179:Middlewares/Decawave/decadriver/deca_device.c ****     if (index == 0) // For index of 0, no sub-index is required
 2638              		.loc 1 1179 8
 2639 0016 BB89     		ldrh	r3, [r7, #12]
 2640 0018 002B     		cmp	r3, #0
 2641 001a 0DD1     		bne	.L119
1180:Middlewares/Decawave/decadriver/deca_device.c ****     {
ARM GAS  /tmp/cc0TY0Fa.s 			page 67


1181:Middlewares/Decawave/decadriver/deca_device.c ****         header[cnt++] = 0x80 | recordNumber ; // Bit-7 is WRITE operation, bit-6 zero=NO sub-addres
 2642              		.loc 1 1181 23
 2643 001c FB89     		ldrh	r3, [r7, #14]	@ movhi
 2644 001e DAB2     		uxtb	r2, r3
 2645              		.loc 1 1181 19
 2646 0020 7B69     		ldr	r3, [r7, #20]
 2647 0022 591C     		adds	r1, r3, #1
 2648 0024 7961     		str	r1, [r7, #20]
 2649              		.loc 1 1181 23
 2650 0026 62F07F02 		orn	r2, r2, #127
 2651 002a D2B2     		uxtb	r2, r2
 2652 002c 07F11801 		add	r1, r7, #24
 2653 0030 0B44     		add	r3, r3, r1
 2654 0032 03F8082C 		strb	r2, [r3, #-8]
 2655 0036 33E0     		b	.L120
 2656              	.L119:
1182:Middlewares/Decawave/decadriver/deca_device.c ****     }
1183:Middlewares/Decawave/decadriver/deca_device.c ****     else
1184:Middlewares/Decawave/decadriver/deca_device.c ****     {
1185:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
1186:Middlewares/Decawave/decadriver/deca_device.c ****         assert((index <= 0x7FFF) && ((index + length) <= 0x7FFF)); // Index and sub-addressable are
1187:Middlewares/Decawave/decadriver/deca_device.c **** #endif
1188:Middlewares/Decawave/decadriver/deca_device.c ****         header[cnt++] = 0xC0 | recordNumber ; // Bit-7 is WRITE operation, bit-6 one=sub-address fo
 2657              		.loc 1 1188 23
 2658 0038 FB89     		ldrh	r3, [r7, #14]	@ movhi
 2659 003a DAB2     		uxtb	r2, r3
 2660              		.loc 1 1188 19
 2661 003c 7B69     		ldr	r3, [r7, #20]
 2662 003e 591C     		adds	r1, r3, #1
 2663 0040 7961     		str	r1, [r7, #20]
 2664              		.loc 1 1188 23
 2665 0042 62F03F02 		orn	r2, r2, #63
 2666 0046 D2B2     		uxtb	r2, r2
 2667 0048 07F11801 		add	r1, r7, #24
 2668 004c 0B44     		add	r3, r3, r1
 2669 004e 03F8082C 		strb	r2, [r3, #-8]
1189:Middlewares/Decawave/decadriver/deca_device.c **** 
1190:Middlewares/Decawave/decadriver/deca_device.c ****         if (index <= 127) // For non-zero index < 127, just a single sub-index byte is required
 2670              		.loc 1 1190 12
 2671 0052 BB89     		ldrh	r3, [r7, #12]
 2672 0054 7F2B     		cmp	r3, #127
 2673 0056 0AD8     		bhi	.L121
1191:Middlewares/Decawave/decadriver/deca_device.c ****         {
1192:Middlewares/Decawave/decadriver/deca_device.c ****             header[cnt++] = (uint8)index ; // Bit-7 zero means no extension, bits 6-0 is index.
 2674              		.loc 1 1192 23
 2675 0058 7B69     		ldr	r3, [r7, #20]
 2676 005a 5A1C     		adds	r2, r3, #1
 2677 005c 7A61     		str	r2, [r7, #20]
 2678              		.loc 1 1192 29
 2679 005e BA89     		ldrh	r2, [r7, #12]	@ movhi
 2680 0060 D2B2     		uxtb	r2, r2
 2681              		.loc 1 1192 27
 2682 0062 07F11801 		add	r1, r7, #24
 2683 0066 0B44     		add	r3, r3, r1
 2684 0068 03F8082C 		strb	r2, [r3, #-8]
 2685 006c 18E0     		b	.L120
 2686              	.L121:
ARM GAS  /tmp/cc0TY0Fa.s 			page 68


1193:Middlewares/Decawave/decadriver/deca_device.c ****         }
1194:Middlewares/Decawave/decadriver/deca_device.c ****         else
1195:Middlewares/Decawave/decadriver/deca_device.c ****         {
1196:Middlewares/Decawave/decadriver/deca_device.c ****             header[cnt++] = 0x80 | (uint8)(index) ; // Bit-7 one means extended index, bits 6-0 is 
 2687              		.loc 1 1196 36
 2688 006e BB89     		ldrh	r3, [r7, #12]	@ movhi
 2689 0070 DAB2     		uxtb	r2, r3
 2690              		.loc 1 1196 23
 2691 0072 7B69     		ldr	r3, [r7, #20]
 2692 0074 591C     		adds	r1, r3, #1
 2693 0076 7961     		str	r1, [r7, #20]
 2694              		.loc 1 1196 27
 2695 0078 62F07F02 		orn	r2, r2, #127
 2696 007c D2B2     		uxtb	r2, r2
 2697 007e 07F11801 		add	r1, r7, #24
 2698 0082 0B44     		add	r3, r3, r1
 2699 0084 03F8082C 		strb	r2, [r3, #-8]
1197:Middlewares/Decawave/decadriver/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
 2700              		.loc 1 1197 30
 2701 0088 BB89     		ldrh	r3, [r7, #12]
 2702 008a DB09     		lsrs	r3, r3, #7
 2703 008c 99B2     		uxth	r1, r3
 2704              		.loc 1 1197 23
 2705 008e 7B69     		ldr	r3, [r7, #20]
 2706 0090 5A1C     		adds	r2, r3, #1
 2707 0092 7A61     		str	r2, [r7, #20]
 2708              		.loc 1 1197 30
 2709 0094 CAB2     		uxtb	r2, r1
 2710              		.loc 1 1197 27
 2711 0096 07F11801 		add	r1, r7, #24
 2712 009a 0B44     		add	r3, r3, r1
 2713 009c 03F8082C 		strb	r2, [r3, #-8]
 2714              	.L120:
1198:Middlewares/Decawave/decadriver/deca_device.c ****         }
1199:Middlewares/Decawave/decadriver/deca_device.c ****     }
1200:Middlewares/Decawave/decadriver/deca_device.c **** 
1201:Middlewares/Decawave/decadriver/deca_device.c ****     // Write it to the SPI
1202:Middlewares/Decawave/decadriver/deca_device.c ****     writetospi(cnt,header,length,buffer);
 2715              		.loc 1 1202 5
 2716 00a0 7B69     		ldr	r3, [r7, #20]
 2717 00a2 98B2     		uxth	r0, r3
 2718 00a4 07F11001 		add	r1, r7, #16
 2719 00a8 7B68     		ldr	r3, [r7, #4]
 2720 00aa BA68     		ldr	r2, [r7, #8]
 2721 00ac FFF7FEFF 		bl	writetospi
1203:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_writetodevice()
 2722              		.loc 1 1203 1
 2723 00b0 00BF     		nop
 2724 00b2 1837     		adds	r7, r7, #24
 2725              	.LCFI150:
 2726              		.cfi_def_cfa_offset 8
 2727 00b4 BD46     		mov	sp, r7
 2728              	.LCFI151:
 2729              		.cfi_def_cfa_register 13
 2730              		@ sp needed
 2731 00b6 80BD     		pop	{r7, pc}
 2732              		.cfi_endproc
ARM GAS  /tmp/cc0TY0Fa.s 			page 69


 2733              	.LFE34:
 2735              		.section	.text.dwt_readfromdevice,"ax",%progbits
 2736              		.align	1
 2737              		.global	dwt_readfromdevice
 2738              		.syntax unified
 2739              		.thumb
 2740              		.thumb_func
 2741              		.fpu fpv4-sp-d16
 2743              	dwt_readfromdevice:
 2744              	.LFB35:
1204:Middlewares/Decawave/decadriver/deca_device.c **** 
1205:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1206:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readfromdevice()
1207:Middlewares/Decawave/decadriver/deca_device.c ****  *
1208:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function is used to read from the DW1000 device registers
1209:Middlewares/Decawave/decadriver/deca_device.c ****  * Notes:
1210:Middlewares/Decawave/decadriver/deca_device.c ****  *        1. Firstly we create a header (the first byte is a header byte)
1211:Middlewares/Decawave/decadriver/deca_device.c ****  *        a. check if sub index is used, if subindexing is used - set bit-6 to 1 to signify that th
1212:Middlewares/Decawave/decadriver/deca_device.c ****  *        b. set bit-7 (or with 0x80) for write operation
1213:Middlewares/Decawave/decadriver/deca_device.c ****  *        c. if extended sub address index is used (i.e. if index > 127) set bit-7 of the first sub
1214:Middlewares/Decawave/decadriver/deca_device.c ****  *
1215:Middlewares/Decawave/decadriver/deca_device.c ****  *        2. Write the header followed by the data bytes to the DW1000 device
1216:Middlewares/Decawave/decadriver/deca_device.c ****  *        3. Store the read data in the input buffer
1217:Middlewares/Decawave/decadriver/deca_device.c ****  *
1218:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
1219:Middlewares/Decawave/decadriver/deca_device.c ****  * @param recordNumber  - ID of register file or buffer being accessed
1220:Middlewares/Decawave/decadriver/deca_device.c ****  * @param index         - byte index into register file or buffer being accessed
1221:Middlewares/Decawave/decadriver/deca_device.c ****  * @param length        - number of bytes being read
1222:Middlewares/Decawave/decadriver/deca_device.c ****  * @param buffer        - pointer to buffer in which to return the read data.
1223:Middlewares/Decawave/decadriver/deca_device.c ****  *
1224:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1225:Middlewares/Decawave/decadriver/deca_device.c ****  *
1226:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1227:Middlewares/Decawave/decadriver/deca_device.c ****  */
1228:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_readfromdevice
1229:Middlewares/Decawave/decadriver/deca_device.c **** (
1230:Middlewares/Decawave/decadriver/deca_device.c ****     uint16  recordNumber,
1231:Middlewares/Decawave/decadriver/deca_device.c ****     uint16  index,
1232:Middlewares/Decawave/decadriver/deca_device.c ****     uint32        length,
1233:Middlewares/Decawave/decadriver/deca_device.c ****     uint8         *buffer
1234:Middlewares/Decawave/decadriver/deca_device.c **** )
1235:Middlewares/Decawave/decadriver/deca_device.c **** {
 2745              		.loc 1 1235 1
 2746              		.cfi_startproc
 2747              		@ args = 0, pretend = 0, frame = 24
 2748              		@ frame_needed = 1, uses_anonymous_args = 0
 2749 0000 80B5     		push	{r7, lr}
 2750              	.LCFI152:
 2751              		.cfi_def_cfa_offset 8
 2752              		.cfi_offset 7, -8
 2753              		.cfi_offset 14, -4
 2754 0002 86B0     		sub	sp, sp, #24
 2755              	.LCFI153:
 2756              		.cfi_def_cfa_offset 32
 2757 0004 00AF     		add	r7, sp, #0
 2758              	.LCFI154:
 2759              		.cfi_def_cfa_register 7
ARM GAS  /tmp/cc0TY0Fa.s 			page 70


 2760 0006 BA60     		str	r2, [r7, #8]
 2761 0008 7B60     		str	r3, [r7, #4]
 2762 000a 0346     		mov	r3, r0	@ movhi
 2763 000c FB81     		strh	r3, [r7, #14]	@ movhi
 2764 000e 0B46     		mov	r3, r1	@ movhi
 2765 0010 BB81     		strh	r3, [r7, #12]	@ movhi
1236:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 header[3] ; // Buffer to compose header in
1237:Middlewares/Decawave/decadriver/deca_device.c ****     int   cnt = 0; // Counter for length of header
 2766              		.loc 1 1237 11
 2767 0012 0023     		movs	r3, #0
 2768 0014 7B61     		str	r3, [r7, #20]
1238:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
1239:Middlewares/Decawave/decadriver/deca_device.c ****     assert(recordNumber <= 0x3F); // Record number is limited to 6-bits.
1240:Middlewares/Decawave/decadriver/deca_device.c **** #endif
1241:Middlewares/Decawave/decadriver/deca_device.c **** 
1242:Middlewares/Decawave/decadriver/deca_device.c ****     // Write message header selecting READ operation and addresses as appropriate (this is one to t
1243:Middlewares/Decawave/decadriver/deca_device.c ****     if (index == 0) // For index of 0, no sub-index is required
 2769              		.loc 1 1243 8
 2770 0016 BB89     		ldrh	r3, [r7, #12]
 2771 0018 002B     		cmp	r3, #0
 2772 001a 0AD1     		bne	.L123
1244:Middlewares/Decawave/decadriver/deca_device.c ****     {
1245:Middlewares/Decawave/decadriver/deca_device.c ****         header[cnt++] = (uint8) recordNumber ; // Bit-7 zero is READ operation, bit-6 zero=NO sub-a
 2773              		.loc 1 1245 19
 2774 001c 7B69     		ldr	r3, [r7, #20]
 2775 001e 5A1C     		adds	r2, r3, #1
 2776 0020 7A61     		str	r2, [r7, #20]
 2777              		.loc 1 1245 25
 2778 0022 FA89     		ldrh	r2, [r7, #14]	@ movhi
 2779 0024 D2B2     		uxtb	r2, r2
 2780              		.loc 1 1245 23
 2781 0026 07F11801 		add	r1, r7, #24
 2782 002a 0B44     		add	r3, r3, r1
 2783 002c 03F8082C 		strb	r2, [r3, #-8]
 2784 0030 33E0     		b	.L124
 2785              	.L123:
1246:Middlewares/Decawave/decadriver/deca_device.c ****     }
1247:Middlewares/Decawave/decadriver/deca_device.c ****     else
1248:Middlewares/Decawave/decadriver/deca_device.c ****     {
1249:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
1250:Middlewares/Decawave/decadriver/deca_device.c ****         assert((index <= 0x7FFF) && ((index + length) <= 0x7FFF)); // Index and sub-addressable are
1251:Middlewares/Decawave/decadriver/deca_device.c **** #endif
1252:Middlewares/Decawave/decadriver/deca_device.c ****         header[cnt++] = (uint8)(0x40 | recordNumber) ; // Bit-7 zero is READ operation, bit-6 one=s
 2786              		.loc 1 1252 25
 2787 0032 FB89     		ldrh	r3, [r7, #14]	@ movhi
 2788 0034 DAB2     		uxtb	r2, r3
 2789              		.loc 1 1252 19
 2790 0036 7B69     		ldr	r3, [r7, #20]
 2791 0038 591C     		adds	r1, r3, #1
 2792 003a 7961     		str	r1, [r7, #20]
 2793              		.loc 1 1252 25
 2794 003c 42F04002 		orr	r2, r2, #64
 2795 0040 D2B2     		uxtb	r2, r2
 2796              		.loc 1 1252 23
 2797 0042 07F11801 		add	r1, r7, #24
 2798 0046 0B44     		add	r3, r3, r1
 2799 0048 03F8082C 		strb	r2, [r3, #-8]
ARM GAS  /tmp/cc0TY0Fa.s 			page 71


1253:Middlewares/Decawave/decadriver/deca_device.c **** 
1254:Middlewares/Decawave/decadriver/deca_device.c ****         if (index <= 127) // For non-zero index < 127, just a single sub-index byte is required
 2800              		.loc 1 1254 12
 2801 004c BB89     		ldrh	r3, [r7, #12]
 2802 004e 7F2B     		cmp	r3, #127
 2803 0050 0AD8     		bhi	.L125
1255:Middlewares/Decawave/decadriver/deca_device.c ****         {
1256:Middlewares/Decawave/decadriver/deca_device.c ****             header[cnt++] = (uint8) index ; // Bit-7 zero means no extension, bits 6-0 is index.
 2804              		.loc 1 1256 23
 2805 0052 7B69     		ldr	r3, [r7, #20]
 2806 0054 5A1C     		adds	r2, r3, #1
 2807 0056 7A61     		str	r2, [r7, #20]
 2808              		.loc 1 1256 29
 2809 0058 BA89     		ldrh	r2, [r7, #12]	@ movhi
 2810 005a D2B2     		uxtb	r2, r2
 2811              		.loc 1 1256 27
 2812 005c 07F11801 		add	r1, r7, #24
 2813 0060 0B44     		add	r3, r3, r1
 2814 0062 03F8082C 		strb	r2, [r3, #-8]
 2815 0066 18E0     		b	.L124
 2816              	.L125:
1257:Middlewares/Decawave/decadriver/deca_device.c ****         }
1258:Middlewares/Decawave/decadriver/deca_device.c ****         else
1259:Middlewares/Decawave/decadriver/deca_device.c ****         {
1260:Middlewares/Decawave/decadriver/deca_device.c ****             header[cnt++] = 0x80 | (uint8)(index) ; // Bit-7 one means extended index, bits 6-0 is 
 2817              		.loc 1 1260 36
 2818 0068 BB89     		ldrh	r3, [r7, #12]	@ movhi
 2819 006a DAB2     		uxtb	r2, r3
 2820              		.loc 1 1260 23
 2821 006c 7B69     		ldr	r3, [r7, #20]
 2822 006e 591C     		adds	r1, r3, #1
 2823 0070 7961     		str	r1, [r7, #20]
 2824              		.loc 1 1260 27
 2825 0072 62F07F02 		orn	r2, r2, #127
 2826 0076 D2B2     		uxtb	r2, r2
 2827 0078 07F11801 		add	r1, r7, #24
 2828 007c 0B44     		add	r3, r3, r1
 2829 007e 03F8082C 		strb	r2, [r3, #-8]
1261:Middlewares/Decawave/decadriver/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
 2830              		.loc 1 1261 30
 2831 0082 BB89     		ldrh	r3, [r7, #12]
 2832 0084 DB09     		lsrs	r3, r3, #7
 2833 0086 99B2     		uxth	r1, r3
 2834              		.loc 1 1261 23
 2835 0088 7B69     		ldr	r3, [r7, #20]
 2836 008a 5A1C     		adds	r2, r3, #1
 2837 008c 7A61     		str	r2, [r7, #20]
 2838              		.loc 1 1261 30
 2839 008e CAB2     		uxtb	r2, r1
 2840              		.loc 1 1261 27
 2841 0090 07F11801 		add	r1, r7, #24
 2842 0094 0B44     		add	r3, r3, r1
 2843 0096 03F8082C 		strb	r2, [r3, #-8]
 2844              	.L124:
1262:Middlewares/Decawave/decadriver/deca_device.c ****         }
1263:Middlewares/Decawave/decadriver/deca_device.c ****     }
1264:Middlewares/Decawave/decadriver/deca_device.c **** 
ARM GAS  /tmp/cc0TY0Fa.s 			page 72


1265:Middlewares/Decawave/decadriver/deca_device.c ****     // Do the read from the SPI
1266:Middlewares/Decawave/decadriver/deca_device.c ****     readfromspi(cnt, header, length, buffer);  // result is stored in the buffer
 2845              		.loc 1 1266 5
 2846 009a 7B69     		ldr	r3, [r7, #20]
 2847 009c 98B2     		uxth	r0, r3
 2848 009e 07F11001 		add	r1, r7, #16
 2849 00a2 7B68     		ldr	r3, [r7, #4]
 2850 00a4 BA68     		ldr	r2, [r7, #8]
 2851 00a6 FFF7FEFF 		bl	readfromspi
1267:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_readfromdevice()
 2852              		.loc 1 1267 1
 2853 00aa 00BF     		nop
 2854 00ac 1837     		adds	r7, r7, #24
 2855              	.LCFI155:
 2856              		.cfi_def_cfa_offset 8
 2857 00ae BD46     		mov	sp, r7
 2858              	.LCFI156:
 2859              		.cfi_def_cfa_register 13
 2860              		@ sp needed
 2861 00b0 80BD     		pop	{r7, pc}
 2862              		.cfi_endproc
 2863              	.LFE35:
 2865              		.section	.text.dwt_read32bitoffsetreg,"ax",%progbits
 2866              		.align	1
 2867              		.global	dwt_read32bitoffsetreg
 2868              		.syntax unified
 2869              		.thumb
 2870              		.thumb_func
 2871              		.fpu fpv4-sp-d16
 2873              	dwt_read32bitoffsetreg:
 2874              	.LFB36:
1268:Middlewares/Decawave/decadriver/deca_device.c **** 
1269:Middlewares/Decawave/decadriver/deca_device.c **** 
1270:Middlewares/Decawave/decadriver/deca_device.c **** 
1271:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1272:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_read32bitoffsetreg()
1273:Middlewares/Decawave/decadriver/deca_device.c ****  *
1274:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function is used to read 32-bit value from the DW1000 device registers
1275:Middlewares/Decawave/decadriver/deca_device.c ****  *
1276:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
1277:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1278:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1279:Middlewares/Decawave/decadriver/deca_device.c ****  *
1280:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1281:Middlewares/Decawave/decadriver/deca_device.c ****  *
1282:Middlewares/Decawave/decadriver/deca_device.c ****  * returns 32 bit register value
1283:Middlewares/Decawave/decadriver/deca_device.c ****  */
1284:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_read32bitoffsetreg(int regFileID, int regOffset)
1285:Middlewares/Decawave/decadriver/deca_device.c **** {
 2875              		.loc 1 1285 1
 2876              		.cfi_startproc
 2877              		@ args = 0, pretend = 0, frame = 24
 2878              		@ frame_needed = 1, uses_anonymous_args = 0
 2879 0000 80B5     		push	{r7, lr}
 2880              	.LCFI157:
 2881              		.cfi_def_cfa_offset 8
 2882              		.cfi_offset 7, -8
ARM GAS  /tmp/cc0TY0Fa.s 			page 73


 2883              		.cfi_offset 14, -4
 2884 0002 86B0     		sub	sp, sp, #24
 2885              	.LCFI158:
 2886              		.cfi_def_cfa_offset 32
 2887 0004 00AF     		add	r7, sp, #0
 2888              	.LCFI159:
 2889              		.cfi_def_cfa_register 7
 2890 0006 7860     		str	r0, [r7, #4]
 2891 0008 3960     		str	r1, [r7]
1286:Middlewares/Decawave/decadriver/deca_device.c ****     uint32  regval = 0 ;
 2892              		.loc 1 1286 13
 2893 000a 0023     		movs	r3, #0
 2894 000c 7B61     		str	r3, [r7, #20]
1287:Middlewares/Decawave/decadriver/deca_device.c ****     int     j ;
1288:Middlewares/Decawave/decadriver/deca_device.c ****     uint8   buffer[4] ;
1289:Middlewares/Decawave/decadriver/deca_device.c **** 
1290:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(regFileID,regOffset,4,buffer); // Read 4 bytes (32-bits) register into buffe
 2895              		.loc 1 1290 5
 2896 000e 7B68     		ldr	r3, [r7, #4]
 2897 0010 98B2     		uxth	r0, r3
 2898 0012 3B68     		ldr	r3, [r7]
 2899 0014 99B2     		uxth	r1, r3
 2900 0016 07F10C03 		add	r3, r7, #12
 2901 001a 0422     		movs	r2, #4
 2902 001c FFF7FEFF 		bl	dwt_readfromdevice
1291:Middlewares/Decawave/decadriver/deca_device.c **** 
1292:Middlewares/Decawave/decadriver/deca_device.c ****     for (j = 3 ; j >= 0 ; j --)
 2903              		.loc 1 1292 12
 2904 0020 0323     		movs	r3, #3
 2905 0022 3B61     		str	r3, [r7, #16]
 2906              		.loc 1 1292 5
 2907 0024 0BE0     		b	.L127
 2908              	.L128:
1293:Middlewares/Decawave/decadriver/deca_device.c ****     {
1294:Middlewares/Decawave/decadriver/deca_device.c ****         regval = (regval << 8) + buffer[j] ;
 2909              		.loc 1 1294 26 discriminator 3
 2910 0026 7B69     		ldr	r3, [r7, #20]
 2911 0028 1B02     		lsls	r3, r3, #8
 2912              		.loc 1 1294 40 discriminator 3
 2913 002a 07F10C01 		add	r1, r7, #12
 2914 002e 3A69     		ldr	r2, [r7, #16]
 2915 0030 0A44     		add	r2, r2, r1
 2916 0032 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2917              		.loc 1 1294 16 discriminator 3
 2918 0034 1344     		add	r3, r3, r2
 2919 0036 7B61     		str	r3, [r7, #20]
1292:Middlewares/Decawave/decadriver/deca_device.c ****     {
 2920              		.loc 1 1292 29 discriminator 3
 2921 0038 3B69     		ldr	r3, [r7, #16]
 2922 003a 013B     		subs	r3, r3, #1
 2923 003c 3B61     		str	r3, [r7, #16]
 2924              	.L127:
1292:Middlewares/Decawave/decadriver/deca_device.c ****     {
 2925              		.loc 1 1292 5 discriminator 1
 2926 003e 3B69     		ldr	r3, [r7, #16]
 2927 0040 002B     		cmp	r3, #0
 2928 0042 F0DA     		bge	.L128
ARM GAS  /tmp/cc0TY0Fa.s 			page 74


1295:Middlewares/Decawave/decadriver/deca_device.c ****     }
1296:Middlewares/Decawave/decadriver/deca_device.c ****     return regval ;
 2929              		.loc 1 1296 12
 2930 0044 7B69     		ldr	r3, [r7, #20]
1297:Middlewares/Decawave/decadriver/deca_device.c **** 
1298:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_read32bitoffsetreg()
 2931              		.loc 1 1298 1
 2932 0046 1846     		mov	r0, r3
 2933 0048 1837     		adds	r7, r7, #24
 2934              	.LCFI160:
 2935              		.cfi_def_cfa_offset 8
 2936 004a BD46     		mov	sp, r7
 2937              	.LCFI161:
 2938              		.cfi_def_cfa_register 13
 2939              		@ sp needed
 2940 004c 80BD     		pop	{r7, pc}
 2941              		.cfi_endproc
 2942              	.LFE36:
 2944              		.section	.text.dwt_read16bitoffsetreg,"ax",%progbits
 2945              		.align	1
 2946              		.global	dwt_read16bitoffsetreg
 2947              		.syntax unified
 2948              		.thumb
 2949              		.thumb_func
 2950              		.fpu fpv4-sp-d16
 2952              	dwt_read16bitoffsetreg:
 2953              	.LFB37:
1299:Middlewares/Decawave/decadriver/deca_device.c **** 
1300:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1301:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_read16bitoffsetreg()
1302:Middlewares/Decawave/decadriver/deca_device.c ****  *
1303:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function is used to read 16-bit value from the DW1000 device registers
1304:Middlewares/Decawave/decadriver/deca_device.c ****  *
1305:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
1306:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1307:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1308:Middlewares/Decawave/decadriver/deca_device.c ****  *
1309:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1310:Middlewares/Decawave/decadriver/deca_device.c ****  *
1311:Middlewares/Decawave/decadriver/deca_device.c ****  * returns 16 bit register value
1312:Middlewares/Decawave/decadriver/deca_device.c ****  */
1313:Middlewares/Decawave/decadriver/deca_device.c **** uint16 dwt_read16bitoffsetreg(int regFileID, int regOffset)
1314:Middlewares/Decawave/decadriver/deca_device.c **** {
 2954              		.loc 1 1314 1
 2955              		.cfi_startproc
 2956              		@ args = 0, pretend = 0, frame = 16
 2957              		@ frame_needed = 1, uses_anonymous_args = 0
 2958 0000 80B5     		push	{r7, lr}
 2959              	.LCFI162:
 2960              		.cfi_def_cfa_offset 8
 2961              		.cfi_offset 7, -8
 2962              		.cfi_offset 14, -4
 2963 0002 84B0     		sub	sp, sp, #16
 2964              	.LCFI163:
 2965              		.cfi_def_cfa_offset 24
 2966 0004 00AF     		add	r7, sp, #0
 2967              	.LCFI164:
ARM GAS  /tmp/cc0TY0Fa.s 			page 75


 2968              		.cfi_def_cfa_register 7
 2969 0006 7860     		str	r0, [r7, #4]
 2970 0008 3960     		str	r1, [r7]
1315:Middlewares/Decawave/decadriver/deca_device.c ****     uint16  regval = 0 ;
 2971              		.loc 1 1315 13
 2972 000a 0023     		movs	r3, #0
 2973 000c FB81     		strh	r3, [r7, #14]	@ movhi
1316:Middlewares/Decawave/decadriver/deca_device.c ****     uint8   buffer[2] ;
1317:Middlewares/Decawave/decadriver/deca_device.c **** 
1318:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(regFileID,regOffset,2,buffer); // Read 2 bytes (16-bits) register into buffe
 2974              		.loc 1 1318 5
 2975 000e 7B68     		ldr	r3, [r7, #4]
 2976 0010 98B2     		uxth	r0, r3
 2977 0012 3B68     		ldr	r3, [r7]
 2978 0014 99B2     		uxth	r1, r3
 2979 0016 07F10C03 		add	r3, r7, #12
 2980 001a 0222     		movs	r2, #2
 2981 001c FFF7FEFF 		bl	dwt_readfromdevice
1319:Middlewares/Decawave/decadriver/deca_device.c **** 
1320:Middlewares/Decawave/decadriver/deca_device.c ****     regval = ((uint16)buffer[1] << 8) + buffer[0] ;
 2982              		.loc 1 1320 29
 2983 0020 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 2984 0022 9BB2     		uxth	r3, r3
 2985              		.loc 1 1320 33
 2986 0024 1B02     		lsls	r3, r3, #8
 2987 0026 9AB2     		uxth	r2, r3
 2988              		.loc 1 1320 47
 2989 0028 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 2990 002a 9BB2     		uxth	r3, r3
 2991              		.loc 1 1320 12
 2992 002c 1344     		add	r3, r3, r2
 2993 002e FB81     		strh	r3, [r7, #14]	@ movhi
1321:Middlewares/Decawave/decadriver/deca_device.c ****     return regval ;
 2994              		.loc 1 1321 12
 2995 0030 FB89     		ldrh	r3, [r7, #14]
1322:Middlewares/Decawave/decadriver/deca_device.c **** 
1323:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_read16bitoffsetreg()
 2996              		.loc 1 1323 1
 2997 0032 1846     		mov	r0, r3
 2998 0034 1037     		adds	r7, r7, #16
 2999              	.LCFI165:
 3000              		.cfi_def_cfa_offset 8
 3001 0036 BD46     		mov	sp, r7
 3002              	.LCFI166:
 3003              		.cfi_def_cfa_register 13
 3004              		@ sp needed
 3005 0038 80BD     		pop	{r7, pc}
 3006              		.cfi_endproc
 3007              	.LFE37:
 3009              		.section	.text.dwt_read8bitoffsetreg,"ax",%progbits
 3010              		.align	1
 3011              		.global	dwt_read8bitoffsetreg
 3012              		.syntax unified
 3013              		.thumb
 3014              		.thumb_func
 3015              		.fpu fpv4-sp-d16
 3017              	dwt_read8bitoffsetreg:
ARM GAS  /tmp/cc0TY0Fa.s 			page 76


 3018              	.LFB38:
1324:Middlewares/Decawave/decadriver/deca_device.c **** 
1325:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1326:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_read8bitoffsetreg()
1327:Middlewares/Decawave/decadriver/deca_device.c ****  *
1328:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function is used to read an 8-bit value from the DW1000 device registers
1329:Middlewares/Decawave/decadriver/deca_device.c ****  *
1330:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
1331:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1332:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1333:Middlewares/Decawave/decadriver/deca_device.c ****  *
1334:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1335:Middlewares/Decawave/decadriver/deca_device.c ****  *
1336:Middlewares/Decawave/decadriver/deca_device.c ****  * returns 8-bit register value
1337:Middlewares/Decawave/decadriver/deca_device.c ****  */
1338:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_read8bitoffsetreg(int regFileID, int regOffset)
1339:Middlewares/Decawave/decadriver/deca_device.c **** {
 3019              		.loc 1 1339 1
 3020              		.cfi_startproc
 3021              		@ args = 0, pretend = 0, frame = 16
 3022              		@ frame_needed = 1, uses_anonymous_args = 0
 3023 0000 80B5     		push	{r7, lr}
 3024              	.LCFI167:
 3025              		.cfi_def_cfa_offset 8
 3026              		.cfi_offset 7, -8
 3027              		.cfi_offset 14, -4
 3028 0002 84B0     		sub	sp, sp, #16
 3029              	.LCFI168:
 3030              		.cfi_def_cfa_offset 24
 3031 0004 00AF     		add	r7, sp, #0
 3032              	.LCFI169:
 3033              		.cfi_def_cfa_register 7
 3034 0006 7860     		str	r0, [r7, #4]
 3035 0008 3960     		str	r1, [r7]
1340:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 regval;
1341:Middlewares/Decawave/decadriver/deca_device.c **** 
1342:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(regFileID, regOffset, 1, &regval);
 3036              		.loc 1 1342 5
 3037 000a 7B68     		ldr	r3, [r7, #4]
 3038 000c 98B2     		uxth	r0, r3
 3039 000e 3B68     		ldr	r3, [r7]
 3040 0010 99B2     		uxth	r1, r3
 3041 0012 07F10F03 		add	r3, r7, #15
 3042 0016 0122     		movs	r2, #1
 3043 0018 FFF7FEFF 		bl	dwt_readfromdevice
1343:Middlewares/Decawave/decadriver/deca_device.c **** 
1344:Middlewares/Decawave/decadriver/deca_device.c ****     return regval ;
 3044              		.loc 1 1344 12
 3045 001c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
1345:Middlewares/Decawave/decadriver/deca_device.c **** }
 3046              		.loc 1 1345 1
 3047 001e 1846     		mov	r0, r3
 3048 0020 1037     		adds	r7, r7, #16
 3049              	.LCFI170:
 3050              		.cfi_def_cfa_offset 8
 3051 0022 BD46     		mov	sp, r7
 3052              	.LCFI171:
ARM GAS  /tmp/cc0TY0Fa.s 			page 77


 3053              		.cfi_def_cfa_register 13
 3054              		@ sp needed
 3055 0024 80BD     		pop	{r7, pc}
 3056              		.cfi_endproc
 3057              	.LFE38:
 3059              		.section	.text.dwt_write8bitoffsetreg,"ax",%progbits
 3060              		.align	1
 3061              		.global	dwt_write8bitoffsetreg
 3062              		.syntax unified
 3063              		.thumb
 3064              		.thumb_func
 3065              		.fpu fpv4-sp-d16
 3067              	dwt_write8bitoffsetreg:
 3068              	.LFB39:
1346:Middlewares/Decawave/decadriver/deca_device.c **** 
1347:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1348:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_write8bitoffsetreg()
1349:Middlewares/Decawave/decadriver/deca_device.c ****  *
1350:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function is used to write an 8-bit value to the DW1000 device registers
1351:Middlewares/Decawave/decadriver/deca_device.c ****  *
1352:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
1353:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1354:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1355:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regval    - the value to write
1356:Middlewares/Decawave/decadriver/deca_device.c ****  *
1357:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1358:Middlewares/Decawave/decadriver/deca_device.c ****  *
1359:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1360:Middlewares/Decawave/decadriver/deca_device.c ****  */
1361:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_write8bitoffsetreg(int regFileID, int regOffset, uint8 regval)
1362:Middlewares/Decawave/decadriver/deca_device.c **** {
 3069              		.loc 1 1362 1
 3070              		.cfi_startproc
 3071              		@ args = 0, pretend = 0, frame = 16
 3072              		@ frame_needed = 1, uses_anonymous_args = 0
 3073 0000 80B5     		push	{r7, lr}
 3074              	.LCFI172:
 3075              		.cfi_def_cfa_offset 8
 3076              		.cfi_offset 7, -8
 3077              		.cfi_offset 14, -4
 3078 0002 84B0     		sub	sp, sp, #16
 3079              	.LCFI173:
 3080              		.cfi_def_cfa_offset 24
 3081 0004 00AF     		add	r7, sp, #0
 3082              	.LCFI174:
 3083              		.cfi_def_cfa_register 7
 3084 0006 F860     		str	r0, [r7, #12]
 3085 0008 B960     		str	r1, [r7, #8]
 3086 000a 1346     		mov	r3, r2
 3087 000c FB71     		strb	r3, [r7, #7]
1363:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(regFileID, regOffset, 1, &regval);
 3088              		.loc 1 1363 5
 3089 000e FB68     		ldr	r3, [r7, #12]
 3090 0010 98B2     		uxth	r0, r3
 3091 0012 BB68     		ldr	r3, [r7, #8]
 3092 0014 99B2     		uxth	r1, r3
 3093 0016 FB1D     		adds	r3, r7, #7
ARM GAS  /tmp/cc0TY0Fa.s 			page 78


 3094 0018 0122     		movs	r2, #1
 3095 001a FFF7FEFF 		bl	dwt_writetodevice
1364:Middlewares/Decawave/decadriver/deca_device.c **** }
 3096              		.loc 1 1364 1
 3097 001e 00BF     		nop
 3098 0020 1037     		adds	r7, r7, #16
 3099              	.LCFI175:
 3100              		.cfi_def_cfa_offset 8
 3101 0022 BD46     		mov	sp, r7
 3102              	.LCFI176:
 3103              		.cfi_def_cfa_register 13
 3104              		@ sp needed
 3105 0024 80BD     		pop	{r7, pc}
 3106              		.cfi_endproc
 3107              	.LFE39:
 3109              		.section	.text.dwt_write16bitoffsetreg,"ax",%progbits
 3110              		.align	1
 3111              		.global	dwt_write16bitoffsetreg
 3112              		.syntax unified
 3113              		.thumb
 3114              		.thumb_func
 3115              		.fpu fpv4-sp-d16
 3117              	dwt_write16bitoffsetreg:
 3118              	.LFB40:
1365:Middlewares/Decawave/decadriver/deca_device.c **** 
1366:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1367:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_write16bitoffsetreg()
1368:Middlewares/Decawave/decadriver/deca_device.c ****  *
1369:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function is used to write 16-bit value to the DW1000 device registers
1370:Middlewares/Decawave/decadriver/deca_device.c ****  *
1371:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
1372:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1373:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1374:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regval    - the value to write
1375:Middlewares/Decawave/decadriver/deca_device.c ****  *
1376:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1377:Middlewares/Decawave/decadriver/deca_device.c ****  *
1378:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1379:Middlewares/Decawave/decadriver/deca_device.c ****  */
1380:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_write16bitoffsetreg(int regFileID, int regOffset, uint16 regval)
1381:Middlewares/Decawave/decadriver/deca_device.c **** {
 3119              		.loc 1 1381 1
 3120              		.cfi_startproc
 3121              		@ args = 0, pretend = 0, frame = 24
 3122              		@ frame_needed = 1, uses_anonymous_args = 0
 3123 0000 80B5     		push	{r7, lr}
 3124              	.LCFI177:
 3125              		.cfi_def_cfa_offset 8
 3126              		.cfi_offset 7, -8
 3127              		.cfi_offset 14, -4
 3128 0002 86B0     		sub	sp, sp, #24
 3129              	.LCFI178:
 3130              		.cfi_def_cfa_offset 32
 3131 0004 00AF     		add	r7, sp, #0
 3132              	.LCFI179:
 3133              		.cfi_def_cfa_register 7
 3134 0006 F860     		str	r0, [r7, #12]
ARM GAS  /tmp/cc0TY0Fa.s 			page 79


 3135 0008 B960     		str	r1, [r7, #8]
 3136 000a 1346     		mov	r3, r2
 3137 000c FB80     		strh	r3, [r7, #6]	@ movhi
1382:Middlewares/Decawave/decadriver/deca_device.c ****     uint8   buffer[2] ;
1383:Middlewares/Decawave/decadriver/deca_device.c **** 
1384:Middlewares/Decawave/decadriver/deca_device.c ****     buffer[0] = regval & 0xFF;
 3138              		.loc 1 1384 15
 3139 000e FB88     		ldrh	r3, [r7, #6]	@ movhi
 3140 0010 DBB2     		uxtb	r3, r3
 3141 0012 3B75     		strb	r3, [r7, #20]
1385:Middlewares/Decawave/decadriver/deca_device.c ****     buffer[1] = regval >> 8 ;
 3142              		.loc 1 1385 15
 3143 0014 FB88     		ldrh	r3, [r7, #6]
 3144 0016 1B0A     		lsrs	r3, r3, #8
 3145 0018 9BB2     		uxth	r3, r3
 3146 001a DBB2     		uxtb	r3, r3
 3147 001c 7B75     		strb	r3, [r7, #21]
1386:Middlewares/Decawave/decadriver/deca_device.c **** 
1387:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(regFileID,regOffset,2,buffer);
 3148              		.loc 1 1387 5
 3149 001e FB68     		ldr	r3, [r7, #12]
 3150 0020 98B2     		uxth	r0, r3
 3151 0022 BB68     		ldr	r3, [r7, #8]
 3152 0024 99B2     		uxth	r1, r3
 3153 0026 07F11403 		add	r3, r7, #20
 3154 002a 0222     		movs	r2, #2
 3155 002c FFF7FEFF 		bl	dwt_writetodevice
1388:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_write16bitoffsetreg()
 3156              		.loc 1 1388 1
 3157 0030 00BF     		nop
 3158 0032 1837     		adds	r7, r7, #24
 3159              	.LCFI180:
 3160              		.cfi_def_cfa_offset 8
 3161 0034 BD46     		mov	sp, r7
 3162              	.LCFI181:
 3163              		.cfi_def_cfa_register 13
 3164              		@ sp needed
 3165 0036 80BD     		pop	{r7, pc}
 3166              		.cfi_endproc
 3167              	.LFE40:
 3169              		.section	.text.dwt_write32bitoffsetreg,"ax",%progbits
 3170              		.align	1
 3171              		.global	dwt_write32bitoffsetreg
 3172              		.syntax unified
 3173              		.thumb
 3174              		.thumb_func
 3175              		.fpu fpv4-sp-d16
 3177              	dwt_write32bitoffsetreg:
 3178              	.LFB41:
1389:Middlewares/Decawave/decadriver/deca_device.c **** 
1390:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1391:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_write32bitoffsetreg()
1392:Middlewares/Decawave/decadriver/deca_device.c ****  *
1393:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function is used to write 32-bit value to the DW1000 device registers
1394:Middlewares/Decawave/decadriver/deca_device.c ****  *
1395:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
1396:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
ARM GAS  /tmp/cc0TY0Fa.s 			page 80


1397:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1398:Middlewares/Decawave/decadriver/deca_device.c ****  * @param regval    - the value to write
1399:Middlewares/Decawave/decadriver/deca_device.c ****  *
1400:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1401:Middlewares/Decawave/decadriver/deca_device.c ****  *
1402:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1403:Middlewares/Decawave/decadriver/deca_device.c ****  */
1404:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_write32bitoffsetreg(int regFileID, int regOffset, uint32 regval)
1405:Middlewares/Decawave/decadriver/deca_device.c **** {
 3179              		.loc 1 1405 1
 3180              		.cfi_startproc
 3181              		@ args = 0, pretend = 0, frame = 24
 3182              		@ frame_needed = 1, uses_anonymous_args = 0
 3183 0000 80B5     		push	{r7, lr}
 3184              	.LCFI182:
 3185              		.cfi_def_cfa_offset 8
 3186              		.cfi_offset 7, -8
 3187              		.cfi_offset 14, -4
 3188 0002 86B0     		sub	sp, sp, #24
 3189              	.LCFI183:
 3190              		.cfi_def_cfa_offset 32
 3191 0004 00AF     		add	r7, sp, #0
 3192              	.LCFI184:
 3193              		.cfi_def_cfa_register 7
 3194 0006 F860     		str	r0, [r7, #12]
 3195 0008 B960     		str	r1, [r7, #8]
 3196 000a 7A60     		str	r2, [r7, #4]
1406:Middlewares/Decawave/decadriver/deca_device.c ****     int     j ;
1407:Middlewares/Decawave/decadriver/deca_device.c ****     uint8   buffer[4] ;
1408:Middlewares/Decawave/decadriver/deca_device.c **** 
1409:Middlewares/Decawave/decadriver/deca_device.c ****     for ( j = 0 ; j < 4 ; j++ )
 3197              		.loc 1 1409 13
 3198 000c 0023     		movs	r3, #0
 3199 000e 7B61     		str	r3, [r7, #20]
 3200              		.loc 1 1409 5
 3201 0010 0DE0     		b	.L137
 3202              	.L138:
1410:Middlewares/Decawave/decadriver/deca_device.c ****     {
1411:Middlewares/Decawave/decadriver/deca_device.c ****         buffer[j] = regval & 0xff ;
 3203              		.loc 1 1411 19 discriminator 3
 3204 0012 7B68     		ldr	r3, [r7, #4]
 3205 0014 D9B2     		uxtb	r1, r3
 3206 0016 07F11002 		add	r2, r7, #16
 3207 001a 7B69     		ldr	r3, [r7, #20]
 3208 001c 1344     		add	r3, r3, r2
 3209 001e 0A46     		mov	r2, r1
 3210 0020 1A70     		strb	r2, [r3]
1412:Middlewares/Decawave/decadriver/deca_device.c ****         regval >>= 8 ;
 3211              		.loc 1 1412 16 discriminator 3
 3212 0022 7B68     		ldr	r3, [r7, #4]
 3213 0024 1B0A     		lsrs	r3, r3, #8
 3214 0026 7B60     		str	r3, [r7, #4]
1409:Middlewares/Decawave/decadriver/deca_device.c ****     {
 3215              		.loc 1 1409 28 discriminator 3
 3216 0028 7B69     		ldr	r3, [r7, #20]
 3217 002a 0133     		adds	r3, r3, #1
 3218 002c 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/cc0TY0Fa.s 			page 81


 3219              	.L137:
1409:Middlewares/Decawave/decadriver/deca_device.c ****     {
 3220              		.loc 1 1409 5 discriminator 1
 3221 002e 7B69     		ldr	r3, [r7, #20]
 3222 0030 032B     		cmp	r3, #3
 3223 0032 EEDD     		ble	.L138
1413:Middlewares/Decawave/decadriver/deca_device.c ****     }
1414:Middlewares/Decawave/decadriver/deca_device.c **** 
1415:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(regFileID,regOffset,4,buffer);
 3224              		.loc 1 1415 5
 3225 0034 FB68     		ldr	r3, [r7, #12]
 3226 0036 98B2     		uxth	r0, r3
 3227 0038 BB68     		ldr	r3, [r7, #8]
 3228 003a 99B2     		uxth	r1, r3
 3229 003c 07F11003 		add	r3, r7, #16
 3230 0040 0422     		movs	r2, #4
 3231 0042 FFF7FEFF 		bl	dwt_writetodevice
1416:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_write32bitoffsetreg()
 3232              		.loc 1 1416 1
 3233 0046 00BF     		nop
 3234 0048 1837     		adds	r7, r7, #24
 3235              	.LCFI185:
 3236              		.cfi_def_cfa_offset 8
 3237 004a BD46     		mov	sp, r7
 3238              	.LCFI186:
 3239              		.cfi_def_cfa_register 13
 3240              		@ sp needed
 3241 004c 80BD     		pop	{r7, pc}
 3242              		.cfi_endproc
 3243              	.LFE41:
 3245              		.section	.text.dwt_enableframefilter,"ax",%progbits
 3246              		.align	1
 3247              		.global	dwt_enableframefilter
 3248              		.syntax unified
 3249              		.thumb
 3250              		.thumb_func
 3251              		.fpu fpv4-sp-d16
 3253              	dwt_enableframefilter:
 3254              	.LFB42:
1417:Middlewares/Decawave/decadriver/deca_device.c **** 
1418:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1419:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_enableframefilter()
1420:Middlewares/Decawave/decadriver/deca_device.c ****  *
1421:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to enable the frame filtering - (the default option is to
1422:Middlewares/Decawave/decadriver/deca_device.c ****  * accept any data and ACK frames with correct destination address
1423:Middlewares/Decawave/decadriver/deca_device.c ****  *
1424:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1425:Middlewares/Decawave/decadriver/deca_device.c ****  * @param - bitmask - enables/disables the frame filtering options according to
1426:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_FF_NOTYPE_EN        0x000   no frame types allowed
1427:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_FF_COORD_EN         0x002   behave as coordinator (can receive frames with no destinati
1428:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_FF_BEACON_EN        0x004   beacon frames allowed
1429:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_FF_DATA_EN          0x008   data frames allowed
1430:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_FF_ACK_EN           0x010   ack frames allowed
1431:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_FF_MAC_EN           0x020   mac control frames allowed
1432:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_FF_RSVD_EN          0x040   reserved frame types allowed
1433:Middlewares/Decawave/decadriver/deca_device.c ****  *
1434:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
ARM GAS  /tmp/cc0TY0Fa.s 			page 82


1435:Middlewares/Decawave/decadriver/deca_device.c ****  *
1436:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1437:Middlewares/Decawave/decadriver/deca_device.c ****  */
1438:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_enableframefilter(uint16 enable)
1439:Middlewares/Decawave/decadriver/deca_device.c **** {
 3255              		.loc 1 1439 1
 3256              		.cfi_startproc
 3257              		@ args = 0, pretend = 0, frame = 16
 3258              		@ frame_needed = 1, uses_anonymous_args = 0
 3259 0000 80B5     		push	{r7, lr}
 3260              	.LCFI187:
 3261              		.cfi_def_cfa_offset 8
 3262              		.cfi_offset 7, -8
 3263              		.cfi_offset 14, -4
 3264 0002 84B0     		sub	sp, sp, #16
 3265              	.LCFI188:
 3266              		.cfi_def_cfa_offset 24
 3267 0004 00AF     		add	r7, sp, #0
 3268              	.LCFI189:
 3269              		.cfi_def_cfa_register 7
 3270 0006 0346     		mov	r3, r0
 3271 0008 FB80     		strh	r3, [r7, #6]	@ movhi
1440:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 sysconfig = SYS_CFG_MASK & dwt_read32bitreg(SYS_CFG_ID) ; // Read sysconfig register
 3272              		.loc 1 1440 39
 3273 000a 0021     		movs	r1, #0
 3274 000c 0420     		movs	r0, #4
 3275 000e FFF7FEFF 		bl	dwt_read32bitoffsetreg
 3276 0012 0346     		mov	r3, r0
 3277              		.loc 1 1440 12
 3278 0014 23F07B63 		bic	r3, r3, #263192576
 3279 0018 23F40023 		bic	r3, r3, #524288
 3280 001c FB60     		str	r3, [r7, #12]
1441:Middlewares/Decawave/decadriver/deca_device.c **** 
1442:Middlewares/Decawave/decadriver/deca_device.c ****     if(enable)
 3281              		.loc 1 1442 7
 3282 001e FB88     		ldrh	r3, [r7, #6]
 3283 0020 002B     		cmp	r3, #0
 3284 0022 0CD0     		beq	.L140
1443:Middlewares/Decawave/decadriver/deca_device.c ****     {
1444:Middlewares/Decawave/decadriver/deca_device.c ****         // Enable frame filtering and configure frame types
1445:Middlewares/Decawave/decadriver/deca_device.c ****         sysconfig &= ~(SYS_CFG_FF_ALL_EN); // Clear all
 3285              		.loc 1 1445 19
 3286 0024 FB68     		ldr	r3, [r7, #12]
 3287 0026 23F4FF73 		bic	r3, r3, #510
 3288 002a FB60     		str	r3, [r7, #12]
1446:Middlewares/Decawave/decadriver/deca_device.c ****         sysconfig |= (enable & SYS_CFG_FF_ALL_EN) | SYS_CFG_FFE;
 3289              		.loc 1 1446 30
 3290 002c FB88     		ldrh	r3, [r7, #6]
 3291 002e 03F4FF72 		and	r2, r3, #510
 3292              		.loc 1 1446 19
 3293 0032 FB68     		ldr	r3, [r7, #12]
 3294 0034 1343     		orrs	r3, r3, r2
 3295 0036 43F00103 		orr	r3, r3, #1
 3296 003a FB60     		str	r3, [r7, #12]
 3297 003c 03E0     		b	.L141
 3298              	.L140:
1447:Middlewares/Decawave/decadriver/deca_device.c ****     }
ARM GAS  /tmp/cc0TY0Fa.s 			page 83


1448:Middlewares/Decawave/decadriver/deca_device.c ****     else
1449:Middlewares/Decawave/decadriver/deca_device.c ****     {
1450:Middlewares/Decawave/decadriver/deca_device.c ****         sysconfig &= ~(SYS_CFG_FFE);
 3299              		.loc 1 1450 19
 3300 003e FB68     		ldr	r3, [r7, #12]
 3301 0040 23F00103 		bic	r3, r3, #1
 3302 0044 FB60     		str	r3, [r7, #12]
 3303              	.L141:
1451:Middlewares/Decawave/decadriver/deca_device.c ****     }
1452:Middlewares/Decawave/decadriver/deca_device.c **** 
1453:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->sysCFGreg = sysconfig ;
 3304              		.loc 1 1453 17
 3305 0046 064B     		ldr	r3, .L142
 3306 0048 1B68     		ldr	r3, [r3]
 3307              		.loc 1 1453 29
 3308 004a FA68     		ldr	r2, [r7, #12]
 3309 004c 1A61     		str	r2, [r3, #16]
1454:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,sysconfig) ;
 3310              		.loc 1 1454 5
 3311 004e FA68     		ldr	r2, [r7, #12]
 3312 0050 0021     		movs	r1, #0
 3313 0052 0420     		movs	r0, #4
 3314 0054 FFF7FEFF 		bl	dwt_write32bitoffsetreg
1455:Middlewares/Decawave/decadriver/deca_device.c **** }
 3315              		.loc 1 1455 1
 3316 0058 00BF     		nop
 3317 005a 1037     		adds	r7, r7, #16
 3318              	.LCFI190:
 3319              		.cfi_def_cfa_offset 8
 3320 005c BD46     		mov	sp, r7
 3321              	.LCFI191:
 3322              		.cfi_def_cfa_register 13
 3323              		@ sp needed
 3324 005e 80BD     		pop	{r7, pc}
 3325              	.L143:
 3326              		.align	2
 3327              	.L142:
 3328 0060 00000000 		.word	pdw1000local
 3329              		.cfi_endproc
 3330              	.LFE42:
 3332              		.section	.text.dwt_setpanid,"ax",%progbits
 3333              		.align	1
 3334              		.global	dwt_setpanid
 3335              		.syntax unified
 3336              		.thumb
 3337              		.thumb_func
 3338              		.fpu fpv4-sp-d16
 3340              	dwt_setpanid:
 3341              	.LFB43:
1456:Middlewares/Decawave/decadriver/deca_device.c **** 
1457:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1458:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setpanid()
1459:Middlewares/Decawave/decadriver/deca_device.c ****  *
1460:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to set the PAN ID
1461:Middlewares/Decawave/decadriver/deca_device.c ****  *
1462:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1463:Middlewares/Decawave/decadriver/deca_device.c ****  * @param panID - this is the PAN ID
ARM GAS  /tmp/cc0TY0Fa.s 			page 84


1464:Middlewares/Decawave/decadriver/deca_device.c ****  *
1465:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1466:Middlewares/Decawave/decadriver/deca_device.c ****  *
1467:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1468:Middlewares/Decawave/decadriver/deca_device.c ****  */
1469:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setpanid(uint16 panID)
1470:Middlewares/Decawave/decadriver/deca_device.c **** {
 3342              		.loc 1 1470 1
 3343              		.cfi_startproc
 3344              		@ args = 0, pretend = 0, frame = 8
 3345              		@ frame_needed = 1, uses_anonymous_args = 0
 3346 0000 80B5     		push	{r7, lr}
 3347              	.LCFI192:
 3348              		.cfi_def_cfa_offset 8
 3349              		.cfi_offset 7, -8
 3350              		.cfi_offset 14, -4
 3351 0002 82B0     		sub	sp, sp, #8
 3352              	.LCFI193:
 3353              		.cfi_def_cfa_offset 16
 3354 0004 00AF     		add	r7, sp, #0
 3355              	.LCFI194:
 3356              		.cfi_def_cfa_register 7
 3357 0006 0346     		mov	r3, r0
 3358 0008 FB80     		strh	r3, [r7, #6]	@ movhi
1471:Middlewares/Decawave/decadriver/deca_device.c ****     // PAN ID is high 16 bits of register
1472:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(PANADR_ID, PANADR_PAN_ID_OFFSET, panID);
 3359              		.loc 1 1472 5
 3360 000a FB88     		ldrh	r3, [r7, #6]
 3361 000c 1A46     		mov	r2, r3
 3362 000e 0221     		movs	r1, #2
 3363 0010 0320     		movs	r0, #3
 3364 0012 FFF7FEFF 		bl	dwt_write16bitoffsetreg
1473:Middlewares/Decawave/decadriver/deca_device.c **** }
 3365              		.loc 1 1473 1
 3366 0016 00BF     		nop
 3367 0018 0837     		adds	r7, r7, #8
 3368              	.LCFI195:
 3369              		.cfi_def_cfa_offset 8
 3370 001a BD46     		mov	sp, r7
 3371              	.LCFI196:
 3372              		.cfi_def_cfa_register 13
 3373              		@ sp needed
 3374 001c 80BD     		pop	{r7, pc}
 3375              		.cfi_endproc
 3376              	.LFE43:
 3378              		.section	.text.dwt_setaddress16,"ax",%progbits
 3379              		.align	1
 3380              		.global	dwt_setaddress16
 3381              		.syntax unified
 3382              		.thumb
 3383              		.thumb_func
 3384              		.fpu fpv4-sp-d16
 3386              	dwt_setaddress16:
 3387              	.LFB44:
1474:Middlewares/Decawave/decadriver/deca_device.c **** 
1475:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1476:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setaddress16()
ARM GAS  /tmp/cc0TY0Fa.s 			page 85


1477:Middlewares/Decawave/decadriver/deca_device.c ****  *
1478:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to set 16-bit (short) address
1479:Middlewares/Decawave/decadriver/deca_device.c ****  *
1480:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1481:Middlewares/Decawave/decadriver/deca_device.c ****  * @param shortAddress - this sets the 16 bit short address
1482:Middlewares/Decawave/decadriver/deca_device.c ****  *
1483:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1484:Middlewares/Decawave/decadriver/deca_device.c ****  *
1485:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1486:Middlewares/Decawave/decadriver/deca_device.c ****  */
1487:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setaddress16(uint16 shortAddress)
1488:Middlewares/Decawave/decadriver/deca_device.c **** {
 3388              		.loc 1 1488 1
 3389              		.cfi_startproc
 3390              		@ args = 0, pretend = 0, frame = 8
 3391              		@ frame_needed = 1, uses_anonymous_args = 0
 3392 0000 80B5     		push	{r7, lr}
 3393              	.LCFI197:
 3394              		.cfi_def_cfa_offset 8
 3395              		.cfi_offset 7, -8
 3396              		.cfi_offset 14, -4
 3397 0002 82B0     		sub	sp, sp, #8
 3398              	.LCFI198:
 3399              		.cfi_def_cfa_offset 16
 3400 0004 00AF     		add	r7, sp, #0
 3401              	.LCFI199:
 3402              		.cfi_def_cfa_register 7
 3403 0006 0346     		mov	r3, r0
 3404 0008 FB80     		strh	r3, [r7, #6]	@ movhi
1489:Middlewares/Decawave/decadriver/deca_device.c ****     // Short address into low 16 bits
1490:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(PANADR_ID, PANADR_SHORT_ADDR_OFFSET, shortAddress);
 3405              		.loc 1 1490 5
 3406 000a FB88     		ldrh	r3, [r7, #6]
 3407 000c 1A46     		mov	r2, r3
 3408 000e 0021     		movs	r1, #0
 3409 0010 0320     		movs	r0, #3
 3410 0012 FFF7FEFF 		bl	dwt_write16bitoffsetreg
1491:Middlewares/Decawave/decadriver/deca_device.c **** }
 3411              		.loc 1 1491 1
 3412 0016 00BF     		nop
 3413 0018 0837     		adds	r7, r7, #8
 3414              	.LCFI200:
 3415              		.cfi_def_cfa_offset 8
 3416 001a BD46     		mov	sp, r7
 3417              	.LCFI201:
 3418              		.cfi_def_cfa_register 13
 3419              		@ sp needed
 3420 001c 80BD     		pop	{r7, pc}
 3421              		.cfi_endproc
 3422              	.LFE44:
 3424              		.section	.text.dwt_seteui,"ax",%progbits
 3425              		.align	1
 3426              		.global	dwt_seteui
 3427              		.syntax unified
 3428              		.thumb
 3429              		.thumb_func
 3430              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc0TY0Fa.s 			page 86


 3432              	dwt_seteui:
 3433              	.LFB45:
1492:Middlewares/Decawave/decadriver/deca_device.c **** 
1493:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1494:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_seteui()
1495:Middlewares/Decawave/decadriver/deca_device.c ****  *
1496:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to set the EUI 64-bit (long) address
1497:Middlewares/Decawave/decadriver/deca_device.c ****  *
1498:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1499:Middlewares/Decawave/decadriver/deca_device.c ****  * @param eui64 - this is the pointer to a buffer that contains the 64bit address
1500:Middlewares/Decawave/decadriver/deca_device.c ****  *
1501:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1502:Middlewares/Decawave/decadriver/deca_device.c ****  *
1503:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1504:Middlewares/Decawave/decadriver/deca_device.c ****  */
1505:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_seteui(uint8 *eui64)
1506:Middlewares/Decawave/decadriver/deca_device.c **** {
 3434              		.loc 1 1506 1
 3435              		.cfi_startproc
 3436              		@ args = 0, pretend = 0, frame = 8
 3437              		@ frame_needed = 1, uses_anonymous_args = 0
 3438 0000 80B5     		push	{r7, lr}
 3439              	.LCFI202:
 3440              		.cfi_def_cfa_offset 8
 3441              		.cfi_offset 7, -8
 3442              		.cfi_offset 14, -4
 3443 0002 82B0     		sub	sp, sp, #8
 3444              	.LCFI203:
 3445              		.cfi_def_cfa_offset 16
 3446 0004 00AF     		add	r7, sp, #0
 3447              	.LCFI204:
 3448              		.cfi_def_cfa_register 7
 3449 0006 7860     		str	r0, [r7, #4]
1507:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(EUI_64_ID, EUI_64_OFFSET, EUI_64_LEN, eui64);
 3450              		.loc 1 1507 5
 3451 0008 7B68     		ldr	r3, [r7, #4]
 3452 000a 0822     		movs	r2, #8
 3453 000c 0021     		movs	r1, #0
 3454 000e 0120     		movs	r0, #1
 3455 0010 FFF7FEFF 		bl	dwt_writetodevice
1508:Middlewares/Decawave/decadriver/deca_device.c **** }
 3456              		.loc 1 1508 1
 3457 0014 00BF     		nop
 3458 0016 0837     		adds	r7, r7, #8
 3459              	.LCFI205:
 3460              		.cfi_def_cfa_offset 8
 3461 0018 BD46     		mov	sp, r7
 3462              	.LCFI206:
 3463              		.cfi_def_cfa_register 13
 3464              		@ sp needed
 3465 001a 80BD     		pop	{r7, pc}
 3466              		.cfi_endproc
 3467              	.LFE45:
 3469              		.section	.text.dwt_geteui,"ax",%progbits
 3470              		.align	1
 3471              		.global	dwt_geteui
 3472              		.syntax unified
ARM GAS  /tmp/cc0TY0Fa.s 			page 87


 3473              		.thumb
 3474              		.thumb_func
 3475              		.fpu fpv4-sp-d16
 3477              	dwt_geteui:
 3478              	.LFB46:
1509:Middlewares/Decawave/decadriver/deca_device.c **** 
1510:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1511:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_geteui()
1512:Middlewares/Decawave/decadriver/deca_device.c ****  *
1513:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to get the EUI 64-bit from the DW1000
1514:Middlewares/Decawave/decadriver/deca_device.c ****  *
1515:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1516:Middlewares/Decawave/decadriver/deca_device.c ****  * @param eui64 - this is the pointer to a buffer that will contain the read 64-bit EUI value
1517:Middlewares/Decawave/decadriver/deca_device.c ****  *
1518:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1519:Middlewares/Decawave/decadriver/deca_device.c ****  *
1520:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1521:Middlewares/Decawave/decadriver/deca_device.c ****  */
1522:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_geteui(uint8 *eui64)
1523:Middlewares/Decawave/decadriver/deca_device.c **** {
 3479              		.loc 1 1523 1
 3480              		.cfi_startproc
 3481              		@ args = 0, pretend = 0, frame = 8
 3482              		@ frame_needed = 1, uses_anonymous_args = 0
 3483 0000 80B5     		push	{r7, lr}
 3484              	.LCFI207:
 3485              		.cfi_def_cfa_offset 8
 3486              		.cfi_offset 7, -8
 3487              		.cfi_offset 14, -4
 3488 0002 82B0     		sub	sp, sp, #8
 3489              	.LCFI208:
 3490              		.cfi_def_cfa_offset 16
 3491 0004 00AF     		add	r7, sp, #0
 3492              	.LCFI209:
 3493              		.cfi_def_cfa_register 7
 3494 0006 7860     		str	r0, [r7, #4]
1524:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(EUI_64_ID, EUI_64_OFFSET, EUI_64_LEN, eui64);
 3495              		.loc 1 1524 5
 3496 0008 7B68     		ldr	r3, [r7, #4]
 3497 000a 0822     		movs	r2, #8
 3498 000c 0021     		movs	r1, #0
 3499 000e 0120     		movs	r0, #1
 3500 0010 FFF7FEFF 		bl	dwt_readfromdevice
1525:Middlewares/Decawave/decadriver/deca_device.c **** }
 3501              		.loc 1 1525 1
 3502 0014 00BF     		nop
 3503 0016 0837     		adds	r7, r7, #8
 3504              	.LCFI210:
 3505              		.cfi_def_cfa_offset 8
 3506 0018 BD46     		mov	sp, r7
 3507              	.LCFI211:
 3508              		.cfi_def_cfa_register 13
 3509              		@ sp needed
 3510 001a 80BD     		pop	{r7, pc}
 3511              		.cfi_endproc
 3512              	.LFE46:
 3514              		.section	.text.dwt_otpread,"ax",%progbits
ARM GAS  /tmp/cc0TY0Fa.s 			page 88


 3515              		.align	1
 3516              		.global	dwt_otpread
 3517              		.syntax unified
 3518              		.thumb
 3519              		.thumb_func
 3520              		.fpu fpv4-sp-d16
 3522              	dwt_otpread:
 3523              	.LFB47:
1526:Middlewares/Decawave/decadriver/deca_device.c **** 
1527:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1528:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_otpread()
1529:Middlewares/Decawave/decadriver/deca_device.c ****  *
1530:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the OTP data from given address into provided array
1531:Middlewares/Decawave/decadriver/deca_device.c ****  *
1532:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1533:Middlewares/Decawave/decadriver/deca_device.c ****  * @param address - this is the OTP address to read from
1534:Middlewares/Decawave/decadriver/deca_device.c ****  * @param array - this is the pointer to the array into which to read the data
1535:Middlewares/Decawave/decadriver/deca_device.c ****  * @param length - this is the number of 32 bit words to read (array needs to be at least this leng
1536:Middlewares/Decawave/decadriver/deca_device.c ****  *
1537:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1538:Middlewares/Decawave/decadriver/deca_device.c ****  *
1539:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1540:Middlewares/Decawave/decadriver/deca_device.c ****  */
1541:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_otpread(uint16 address, uint32 *array, uint8 length)
1542:Middlewares/Decawave/decadriver/deca_device.c **** {
 3524              		.loc 1 1542 1
 3525              		.cfi_startproc
 3526              		@ args = 0, pretend = 0, frame = 16
 3527              		@ frame_needed = 1, uses_anonymous_args = 0
 3528 0000 90B5     		push	{r4, r7, lr}
 3529              	.LCFI212:
 3530              		.cfi_def_cfa_offset 12
 3531              		.cfi_offset 4, -12
 3532              		.cfi_offset 7, -8
 3533              		.cfi_offset 14, -4
 3534 0002 85B0     		sub	sp, sp, #20
 3535              	.LCFI213:
 3536              		.cfi_def_cfa_offset 32
 3537 0004 00AF     		add	r7, sp, #0
 3538              	.LCFI214:
 3539              		.cfi_def_cfa_register 7
 3540 0006 0346     		mov	r3, r0
 3541 0008 3960     		str	r1, [r7]
 3542 000a FB80     		strh	r3, [r7, #6]	@ movhi
 3543 000c 1346     		mov	r3, r2
 3544 000e 7B71     		strb	r3, [r7, #5]
1543:Middlewares/Decawave/decadriver/deca_device.c ****     int i;
1544:Middlewares/Decawave/decadriver/deca_device.c **** 
1545:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI); // NOTE: Set system clock to XTAL - this is necessary to make
 3545              		.loc 1 1545 5
 3546 0010 0020     		movs	r0, #0
 3547 0012 FFF7FEFF 		bl	_dwt_enableclocks
1546:Middlewares/Decawave/decadriver/deca_device.c **** 
1547:Middlewares/Decawave/decadriver/deca_device.c ****     for(i=0; i<length; i++)
 3548              		.loc 1 1547 10
 3549 0016 0023     		movs	r3, #0
 3550 0018 FB60     		str	r3, [r7, #12]
ARM GAS  /tmp/cc0TY0Fa.s 			page 89


 3551              		.loc 1 1547 5
 3552 001a 10E0     		b	.L149
 3553              	.L150:
1548:Middlewares/Decawave/decadriver/deca_device.c ****     {
1549:Middlewares/Decawave/decadriver/deca_device.c ****         array[i] = _dwt_otpread(address + i) ;
 3554              		.loc 1 1549 20 discriminator 3
 3555 001c FB68     		ldr	r3, [r7, #12]
 3556 001e 9AB2     		uxth	r2, r3
 3557 0020 FB88     		ldrh	r3, [r7, #6]	@ movhi
 3558 0022 1344     		add	r3, r3, r2
 3559 0024 99B2     		uxth	r1, r3
 3560              		.loc 1 1549 14 discriminator 3
 3561 0026 FB68     		ldr	r3, [r7, #12]
 3562 0028 9B00     		lsls	r3, r3, #2
 3563 002a 3A68     		ldr	r2, [r7]
 3564 002c D418     		adds	r4, r2, r3
 3565              		.loc 1 1549 20 discriminator 3
 3566 002e 0846     		mov	r0, r1
 3567 0030 FFF7FEFF 		bl	_dwt_otpread
 3568 0034 0346     		mov	r3, r0
 3569              		.loc 1 1549 18 discriminator 3
 3570 0036 2360     		str	r3, [r4]
1547:Middlewares/Decawave/decadriver/deca_device.c ****     {
 3571              		.loc 1 1547 25 discriminator 3
 3572 0038 FB68     		ldr	r3, [r7, #12]
 3573 003a 0133     		adds	r3, r3, #1
 3574 003c FB60     		str	r3, [r7, #12]
 3575              	.L149:
1547:Middlewares/Decawave/decadriver/deca_device.c ****     {
 3576              		.loc 1 1547 15 discriminator 1
 3577 003e 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
1547:Middlewares/Decawave/decadriver/deca_device.c ****     {
 3578              		.loc 1 1547 5 discriminator 1
 3579 0040 FA68     		ldr	r2, [r7, #12]
 3580 0042 9A42     		cmp	r2, r3
 3581 0044 EADB     		blt	.L150
1550:Middlewares/Decawave/decadriver/deca_device.c ****     }
1551:Middlewares/Decawave/decadriver/deca_device.c **** 
1552:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ); // Restore system clock to PLL
 3582              		.loc 1 1552 5
 3583 0046 0120     		movs	r0, #1
 3584 0048 FFF7FEFF 		bl	_dwt_enableclocks
1553:Middlewares/Decawave/decadriver/deca_device.c **** 
1554:Middlewares/Decawave/decadriver/deca_device.c ****     return ;
 3585              		.loc 1 1554 5
 3586 004c 00BF     		nop
1555:Middlewares/Decawave/decadriver/deca_device.c **** }
 3587              		.loc 1 1555 1
 3588 004e 1437     		adds	r7, r7, #20
 3589              	.LCFI215:
 3590              		.cfi_def_cfa_offset 12
 3591 0050 BD46     		mov	sp, r7
 3592              	.LCFI216:
 3593              		.cfi_def_cfa_register 13
 3594              		@ sp needed
 3595 0052 90BD     		pop	{r4, r7, pc}
 3596              		.cfi_endproc
ARM GAS  /tmp/cc0TY0Fa.s 			page 90


 3597              	.LFE47:
 3599              		.section	.text._dwt_otpread,"ax",%progbits
 3600              		.align	1
 3601              		.global	_dwt_otpread
 3602              		.syntax unified
 3603              		.thumb
 3604              		.thumb_func
 3605              		.fpu fpv4-sp-d16
 3607              	_dwt_otpread:
 3608              	.LFB48:
1556:Middlewares/Decawave/decadriver/deca_device.c **** 
1557:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1558:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_otpread()
1559:Middlewares/Decawave/decadriver/deca_device.c ****  *
1560:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief function to read the OTP memory. Ensure that MR,MRa,MRb are reset to 0.
1561:Middlewares/Decawave/decadriver/deca_device.c ****  *
1562:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1563:Middlewares/Decawave/decadriver/deca_device.c ****  * @param address - address to read at
1564:Middlewares/Decawave/decadriver/deca_device.c ****  *
1565:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1566:Middlewares/Decawave/decadriver/deca_device.c ****  *
1567:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the 32bit of read data
1568:Middlewares/Decawave/decadriver/deca_device.c ****  */
1569:Middlewares/Decawave/decadriver/deca_device.c **** uint32 _dwt_otpread(uint16 address)
1570:Middlewares/Decawave/decadriver/deca_device.c **** {
 3609              		.loc 1 1570 1
 3610              		.cfi_startproc
 3611              		@ args = 0, pretend = 0, frame = 16
 3612              		@ frame_needed = 1, uses_anonymous_args = 0
 3613 0000 80B5     		push	{r7, lr}
 3614              	.LCFI217:
 3615              		.cfi_def_cfa_offset 8
 3616              		.cfi_offset 7, -8
 3617              		.cfi_offset 14, -4
 3618 0002 84B0     		sub	sp, sp, #16
 3619              	.LCFI218:
 3620              		.cfi_def_cfa_offset 24
 3621 0004 00AF     		add	r7, sp, #0
 3622              	.LCFI219:
 3623              		.cfi_def_cfa_register 7
 3624 0006 0346     		mov	r3, r0
 3625 0008 FB80     		strh	r3, [r7, #6]	@ movhi
1571:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 ret_data;
1572:Middlewares/Decawave/decadriver/deca_device.c **** 
1573:Middlewares/Decawave/decadriver/deca_device.c ****     // Write the address
1574:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(OTP_IF_ID, OTP_ADDR, address);
 3626              		.loc 1 1574 5
 3627 000a FB88     		ldrh	r3, [r7, #6]
 3628 000c 1A46     		mov	r2, r3
 3629 000e 0421     		movs	r1, #4
 3630 0010 2D20     		movs	r0, #45
 3631 0012 FFF7FEFF 		bl	dwt_write16bitoffsetreg
1575:Middlewares/Decawave/decadriver/deca_device.c **** 
1576:Middlewares/Decawave/decadriver/deca_device.c ****     // Perform OTP Read - Manual read mode has to be set
1577:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(OTP_IF_ID, OTP_CTRL, OTP_CTRL_OTPREAD | OTP_CTRL_OTPRDEN);
 3632              		.loc 1 1577 5
 3633 0016 0322     		movs	r2, #3
ARM GAS  /tmp/cc0TY0Fa.s 			page 91


 3634 0018 0621     		movs	r1, #6
 3635 001a 2D20     		movs	r0, #45
 3636 001c FFF7FEFF 		bl	dwt_write8bitoffsetreg
1578:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(OTP_IF_ID, OTP_CTRL, 0x00); // OTPREAD is self clearing but OTPRDEN is n
 3637              		.loc 1 1578 5
 3638 0020 0022     		movs	r2, #0
 3639 0022 0621     		movs	r1, #6
 3640 0024 2D20     		movs	r0, #45
 3641 0026 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1579:Middlewares/Decawave/decadriver/deca_device.c **** 
1580:Middlewares/Decawave/decadriver/deca_device.c ****     // Read read data, available 40ns after rising edge of OTP_READ
1581:Middlewares/Decawave/decadriver/deca_device.c ****     ret_data = dwt_read32bitoffsetreg(OTP_IF_ID, OTP_RDAT);
 3642              		.loc 1 1581 16
 3643 002a 0A21     		movs	r1, #10
 3644 002c 2D20     		movs	r0, #45
 3645 002e FFF7FEFF 		bl	dwt_read32bitoffsetreg
 3646 0032 F860     		str	r0, [r7, #12]
1582:Middlewares/Decawave/decadriver/deca_device.c **** 
1583:Middlewares/Decawave/decadriver/deca_device.c ****     // Return the 32bit of read data
1584:Middlewares/Decawave/decadriver/deca_device.c ****     return ret_data;
 3647              		.loc 1 1584 12
 3648 0034 FB68     		ldr	r3, [r7, #12]
1585:Middlewares/Decawave/decadriver/deca_device.c **** }
 3649              		.loc 1 1585 1
 3650 0036 1846     		mov	r0, r3
 3651 0038 1037     		adds	r7, r7, #16
 3652              	.LCFI220:
 3653              		.cfi_def_cfa_offset 8
 3654 003a BD46     		mov	sp, r7
 3655              	.LCFI221:
 3656              		.cfi_def_cfa_register 13
 3657              		@ sp needed
 3658 003c 80BD     		pop	{r7, pc}
 3659              		.cfi_endproc
 3660              	.LFE48:
 3662              		.section	.text._dwt_otpsetmrregs,"ax",%progbits
 3663              		.align	1
 3664              		.global	_dwt_otpsetmrregs
 3665              		.syntax unified
 3666              		.thumb
 3667              		.thumb_func
 3668              		.fpu fpv4-sp-d16
 3670              	_dwt_otpsetmrregs:
 3671              	.LFB49:
1586:Middlewares/Decawave/decadriver/deca_device.c **** 
1587:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1588:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_otpsetmrregs()
1589:Middlewares/Decawave/decadriver/deca_device.c ****  *
1590:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief Configure the MR registers for initial programming (enable charge pump).
1591:Middlewares/Decawave/decadriver/deca_device.c ****  * Read margin is used to stress the read back from the
1592:Middlewares/Decawave/decadriver/deca_device.c ****  * programmed bit. In normal operation this is relaxed.
1593:Middlewares/Decawave/decadriver/deca_device.c ****  *
1594:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1595:Middlewares/Decawave/decadriver/deca_device.c ****  * @param mode - "0" : Reset all to 0x0:           MRA=0x0000, MRB=0x0000, MR=0x0000
1596:Middlewares/Decawave/decadriver/deca_device.c ****  *               "1" : Set for inital programming: MRA=0x9220, MRB=0x000E, MR=0x1024
1597:Middlewares/Decawave/decadriver/deca_device.c ****  *               "2" : Set for soak programming:   MRA=0x9220, MRB=0x0003, MR=0x1824
1598:Middlewares/Decawave/decadriver/deca_device.c ****  *               "3" : High Vpp:                   MRA=0x9220, MRB=0x004E, MR=0x1824
ARM GAS  /tmp/cc0TY0Fa.s 			page 92


1599:Middlewares/Decawave/decadriver/deca_device.c ****  *               "4" : Low Read Margin:            MRA=0x0000, MRB=0x0003, MR=0x0000
1600:Middlewares/Decawave/decadriver/deca_device.c ****  *               "5" : Array Clean:                MRA=0x0049, MRB=0x0003, MR=0x0024
1601:Middlewares/Decawave/decadriver/deca_device.c ****  *               "4" : Very Low Read Margin:       MRA=0x0000, MRB=0x0003, MR=0x0000
1602:Middlewares/Decawave/decadriver/deca_device.c ****  *
1603:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1604:Middlewares/Decawave/decadriver/deca_device.c ****  *
1605:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
1606:Middlewares/Decawave/decadriver/deca_device.c ****  */
1607:Middlewares/Decawave/decadriver/deca_device.c **** uint32 _dwt_otpsetmrregs(int mode)
1608:Middlewares/Decawave/decadriver/deca_device.c **** {
 3672              		.loc 1 1608 1
 3673              		.cfi_startproc
 3674              		@ args = 0, pretend = 0, frame = 24
 3675              		@ frame_needed = 1, uses_anonymous_args = 0
 3676 0000 80B5     		push	{r7, lr}
 3677              	.LCFI222:
 3678              		.cfi_def_cfa_offset 8
 3679              		.cfi_offset 7, -8
 3680              		.cfi_offset 14, -4
 3681 0002 86B0     		sub	sp, sp, #24
 3682              	.LCFI223:
 3683              		.cfi_def_cfa_offset 32
 3684 0004 00AF     		add	r7, sp, #0
 3685              	.LCFI224:
 3686              		.cfi_def_cfa_register 7
 3687 0006 7860     		str	r0, [r7, #4]
1609:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 wr_buf[4];
1610:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 mra=0,mrb=0,mr=0;
 3688              		.loc 1 1610 12
 3689 0008 0023     		movs	r3, #0
 3690 000a 7B61     		str	r3, [r7, #20]
 3691              		.loc 1 1610 18
 3692 000c 0023     		movs	r3, #0
 3693 000e 3B61     		str	r3, [r7, #16]
 3694              		.loc 1 1610 24
 3695 0010 0023     		movs	r3, #0
 3696 0012 FB60     		str	r3, [r7, #12]
1611:Middlewares/Decawave/decadriver/deca_device.c **** 
1612:Middlewares/Decawave/decadriver/deca_device.c ****     // PROGRAMME MRA
1613:Middlewares/Decawave/decadriver/deca_device.c ****     // Set MRA, MODE_SEL
1614:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x03;
 3697              		.loc 1 1614 15
 3698 0014 0323     		movs	r3, #3
 3699 0016 3B72     		strb	r3, [r7, #8]
1615:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL+1,1,wr_buf);
 3700              		.loc 1 1615 5
 3701 0018 07F10803 		add	r3, r7, #8
 3702 001c 0122     		movs	r2, #1
 3703 001e 0721     		movs	r1, #7
 3704 0020 2D20     		movs	r0, #45
 3705 0022 FFF7FEFF 		bl	dwt_writetodevice
1616:Middlewares/Decawave/decadriver/deca_device.c **** 
1617:Middlewares/Decawave/decadriver/deca_device.c ****     // Load data
1618:Middlewares/Decawave/decadriver/deca_device.c ****     switch(mode&0x0f) {
 3706              		.loc 1 1618 16
 3707 0026 7B68     		ldr	r3, [r7, #4]
 3708 0028 03F00F03 		and	r3, r3, #15
ARM GAS  /tmp/cc0TY0Fa.s 			page 93


 3709 002c 052B     		cmp	r3, #5
 3710 002e 3FD8     		bhi	.L155
 3711 0030 01A2     		adr	r2, .L157
 3712 0032 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 3713 0036 00BF     		.p2align 2
 3714              	.L157:
 3715 0038 51000000 		.word	.L162+1
 3716 003c 5F000000 		.word	.L161+1
 3717 0040 71000000 		.word	.L160+1
 3718 0044 83000000 		.word	.L159+1
 3719 0048 95000000 		.word	.L158+1
 3720 004c A3000000 		.word	.L156+1
 3721              		.p2align 1
 3722              	.L162:
1619:Middlewares/Decawave/decadriver/deca_device.c ****     case 0x0 :
1620:Middlewares/Decawave/decadriver/deca_device.c ****         mr =0x0000;
 3723              		.loc 1 1620 12
 3724 0050 0023     		movs	r3, #0
 3725 0052 FB60     		str	r3, [r7, #12]
1621:Middlewares/Decawave/decadriver/deca_device.c ****         mra=0x0000;
 3726              		.loc 1 1621 12
 3727 0054 0023     		movs	r3, #0
 3728 0056 7B61     		str	r3, [r7, #20]
1622:Middlewares/Decawave/decadriver/deca_device.c ****         mrb=0x0000;
 3729              		.loc 1 1622 12
 3730 0058 0023     		movs	r3, #0
 3731 005a 3B61     		str	r3, [r7, #16]
1623:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 3732              		.loc 1 1623 9
 3733 005c 2BE0     		b	.L163
 3734              	.L161:
1624:Middlewares/Decawave/decadriver/deca_device.c ****     case 0x1 :
1625:Middlewares/Decawave/decadriver/deca_device.c ****         mr =0x1024;
 3735              		.loc 1 1625 12
 3736 005e 41F22403 		movw	r3, #4132
 3737 0062 FB60     		str	r3, [r7, #12]
1626:Middlewares/Decawave/decadriver/deca_device.c ****         mra=0x9220; // Enable CPP mon
 3738              		.loc 1 1626 12
 3739 0064 49F22023 		movw	r3, #37408
 3740 0068 7B61     		str	r3, [r7, #20]
1627:Middlewares/Decawave/decadriver/deca_device.c ****         mrb=0x000e;
 3741              		.loc 1 1627 12
 3742 006a 0E23     		movs	r3, #14
 3743 006c 3B61     		str	r3, [r7, #16]
1628:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 3744              		.loc 1 1628 9
 3745 006e 22E0     		b	.L163
 3746              	.L160:
1629:Middlewares/Decawave/decadriver/deca_device.c ****     case 0x2 :
1630:Middlewares/Decawave/decadriver/deca_device.c ****         mr =0x1824;
 3747              		.loc 1 1630 12
 3748 0070 41F62403 		movw	r3, #6180
 3749 0074 FB60     		str	r3, [r7, #12]
1631:Middlewares/Decawave/decadriver/deca_device.c ****         mra=0x9220;
 3750              		.loc 1 1631 12
 3751 0076 49F22023 		movw	r3, #37408
 3752 007a 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/cc0TY0Fa.s 			page 94


1632:Middlewares/Decawave/decadriver/deca_device.c ****         mrb=0x0003;
 3753              		.loc 1 1632 12
 3754 007c 0323     		movs	r3, #3
 3755 007e 3B61     		str	r3, [r7, #16]
1633:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 3756              		.loc 1 1633 9
 3757 0080 19E0     		b	.L163
 3758              	.L159:
1634:Middlewares/Decawave/decadriver/deca_device.c ****     case 0x3 :
1635:Middlewares/Decawave/decadriver/deca_device.c ****         mr =0x1824;
 3759              		.loc 1 1635 12
 3760 0082 41F62403 		movw	r3, #6180
 3761 0086 FB60     		str	r3, [r7, #12]
1636:Middlewares/Decawave/decadriver/deca_device.c ****         mra=0x9220;
 3762              		.loc 1 1636 12
 3763 0088 49F22023 		movw	r3, #37408
 3764 008c 7B61     		str	r3, [r7, #20]
1637:Middlewares/Decawave/decadriver/deca_device.c ****         mrb=0x004e;
 3765              		.loc 1 1637 12
 3766 008e 4E23     		movs	r3, #78
 3767 0090 3B61     		str	r3, [r7, #16]
1638:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 3768              		.loc 1 1638 9
 3769 0092 10E0     		b	.L163
 3770              	.L158:
1639:Middlewares/Decawave/decadriver/deca_device.c ****     case 0x4 :
1640:Middlewares/Decawave/decadriver/deca_device.c ****         mr =0x0000;
 3771              		.loc 1 1640 12
 3772 0094 0023     		movs	r3, #0
 3773 0096 FB60     		str	r3, [r7, #12]
1641:Middlewares/Decawave/decadriver/deca_device.c ****         mra=0x0000;
 3774              		.loc 1 1641 12
 3775 0098 0023     		movs	r3, #0
 3776 009a 7B61     		str	r3, [r7, #20]
1642:Middlewares/Decawave/decadriver/deca_device.c ****         mrb=0x0003;
 3777              		.loc 1 1642 12
 3778 009c 0323     		movs	r3, #3
 3779 009e 3B61     		str	r3, [r7, #16]
1643:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 3780              		.loc 1 1643 9
 3781 00a0 09E0     		b	.L163
 3782              	.L156:
1644:Middlewares/Decawave/decadriver/deca_device.c ****     case 0x5 :
1645:Middlewares/Decawave/decadriver/deca_device.c ****         mr =0x0024;
 3783              		.loc 1 1645 12
 3784 00a2 2423     		movs	r3, #36
 3785 00a4 FB60     		str	r3, [r7, #12]
1646:Middlewares/Decawave/decadriver/deca_device.c ****         mra=0x0000;
 3786              		.loc 1 1646 12
 3787 00a6 0023     		movs	r3, #0
 3788 00a8 7B61     		str	r3, [r7, #20]
1647:Middlewares/Decawave/decadriver/deca_device.c ****         mrb=0x0003;
 3789              		.loc 1 1647 12
 3790 00aa 0323     		movs	r3, #3
 3791 00ac 3B61     		str	r3, [r7, #16]
1648:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 3792              		.loc 1 1648 9
ARM GAS  /tmp/cc0TY0Fa.s 			page 95


 3793 00ae 02E0     		b	.L163
 3794              	.L155:
1649:Middlewares/Decawave/decadriver/deca_device.c ****     default :
1650:Middlewares/Decawave/decadriver/deca_device.c ****         return DWT_ERROR;
 3795              		.loc 1 1650 16
 3796 00b0 4FF0FF33 		mov	r3, #-1
 3797 00b4 B1E0     		b	.L165
 3798              	.L163:
1651:Middlewares/Decawave/decadriver/deca_device.c ****     }
1652:Middlewares/Decawave/decadriver/deca_device.c **** 
1653:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = mra & 0x00ff;
 3799              		.loc 1 1653 15
 3800 00b6 7B69     		ldr	r3, [r7, #20]
 3801 00b8 DBB2     		uxtb	r3, r3
 3802 00ba 3B72     		strb	r3, [r7, #8]
1654:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[1] = (mra & 0xff00)>>8;
 3803              		.loc 1 1654 31
 3804 00bc 7B69     		ldr	r3, [r7, #20]
 3805 00be 1B0A     		lsrs	r3, r3, #8
 3806              		.loc 1 1654 15
 3807 00c0 DBB2     		uxtb	r3, r3
 3808 00c2 7B72     		strb	r3, [r7, #9]
1655:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_WDAT,2,wr_buf);
 3809              		.loc 1 1655 5
 3810 00c4 07F10803 		add	r3, r7, #8
 3811 00c8 0222     		movs	r2, #2
 3812 00ca 0021     		movs	r1, #0
 3813 00cc 2D20     		movs	r0, #45
 3814 00ce FFF7FEFF 		bl	dwt_writetodevice
1656:Middlewares/Decawave/decadriver/deca_device.c **** 
1657:Middlewares/Decawave/decadriver/deca_device.c **** 
1658:Middlewares/Decawave/decadriver/deca_device.c ****     // Set WRITE_MR
1659:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x08;
 3815              		.loc 1 1659 15
 3816 00d2 0823     		movs	r3, #8
 3817 00d4 3B72     		strb	r3, [r7, #8]
1660:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3818              		.loc 1 1660 5
 3819 00d6 07F10803 		add	r3, r7, #8
 3820 00da 0122     		movs	r2, #1
 3821 00dc 0621     		movs	r1, #6
 3822 00de 2D20     		movs	r0, #45
 3823 00e0 FFF7FEFF 		bl	dwt_writetodevice
1661:Middlewares/Decawave/decadriver/deca_device.c **** 
1662:Middlewares/Decawave/decadriver/deca_device.c ****     // Wait?
1663:Middlewares/Decawave/decadriver/deca_device.c ****     deca_sleep(2);
 3824              		.loc 1 1663 5
 3825 00e4 0220     		movs	r0, #2
 3826 00e6 FFF7FEFF 		bl	deca_sleep
1664:Middlewares/Decawave/decadriver/deca_device.c **** 
1665:Middlewares/Decawave/decadriver/deca_device.c ****     // Set Clear Mode sel
1666:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x02;
 3827              		.loc 1 1666 15
 3828 00ea 0223     		movs	r3, #2
 3829 00ec 3B72     		strb	r3, [r7, #8]
1667:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 3830              		.loc 1 1667 5
ARM GAS  /tmp/cc0TY0Fa.s 			page 96


 3831 00ee 07F10803 		add	r3, r7, #8
 3832 00f2 0122     		movs	r2, #1
 3833 00f4 0721     		movs	r1, #7
 3834 00f6 2D20     		movs	r0, #45
 3835 00f8 FFF7FEFF 		bl	dwt_writetodevice
1668:Middlewares/Decawave/decadriver/deca_device.c **** 
1669:Middlewares/Decawave/decadriver/deca_device.c ****     // Set AUX update, write MR
1670:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x88;
 3836              		.loc 1 1670 15
 3837 00fc 8823     		movs	r3, #136
 3838 00fe 3B72     		strb	r3, [r7, #8]
1671:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3839              		.loc 1 1671 5
 3840 0100 07F10803 		add	r3, r7, #8
 3841 0104 0122     		movs	r2, #1
 3842 0106 0621     		movs	r1, #6
 3843 0108 2D20     		movs	r0, #45
 3844 010a FFF7FEFF 		bl	dwt_writetodevice
1672:Middlewares/Decawave/decadriver/deca_device.c ****     // Clear write MR
1673:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x80;
 3845              		.loc 1 1673 15
 3846 010e 8023     		movs	r3, #128
 3847 0110 3B72     		strb	r3, [r7, #8]
1674:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3848              		.loc 1 1674 5
 3849 0112 07F10803 		add	r3, r7, #8
 3850 0116 0122     		movs	r2, #1
 3851 0118 0621     		movs	r1, #6
 3852 011a 2D20     		movs	r0, #45
 3853 011c FFF7FEFF 		bl	dwt_writetodevice
1675:Middlewares/Decawave/decadriver/deca_device.c ****     // Clear AUX update
1676:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x00;
 3854              		.loc 1 1676 15
 3855 0120 0023     		movs	r3, #0
 3856 0122 3B72     		strb	r3, [r7, #8]
1677:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3857              		.loc 1 1677 5
 3858 0124 07F10803 		add	r3, r7, #8
 3859 0128 0122     		movs	r2, #1
 3860 012a 0621     		movs	r1, #6
 3861 012c 2D20     		movs	r0, #45
 3862 012e FFF7FEFF 		bl	dwt_writetodevice
1678:Middlewares/Decawave/decadriver/deca_device.c **** 
1679:Middlewares/Decawave/decadriver/deca_device.c ****     ///////////////////////////////////////////
1680:Middlewares/Decawave/decadriver/deca_device.c ****     // PROGRAM MRB
1681:Middlewares/Decawave/decadriver/deca_device.c ****     // Set SLOW, MRB, MODE_SEL
1682:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x05;
 3863              		.loc 1 1682 15
 3864 0132 0523     		movs	r3, #5
 3865 0134 3B72     		strb	r3, [r7, #8]
1683:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 3866              		.loc 1 1683 5
 3867 0136 07F10803 		add	r3, r7, #8
 3868 013a 0122     		movs	r2, #1
 3869 013c 0721     		movs	r1, #7
 3870 013e 2D20     		movs	r0, #45
 3871 0140 FFF7FEFF 		bl	dwt_writetodevice
ARM GAS  /tmp/cc0TY0Fa.s 			page 97


1684:Middlewares/Decawave/decadriver/deca_device.c **** 
1685:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = mrb & 0x00ff;
 3872              		.loc 1 1685 15
 3873 0144 3B69     		ldr	r3, [r7, #16]
 3874 0146 DBB2     		uxtb	r3, r3
 3875 0148 3B72     		strb	r3, [r7, #8]
1686:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[1] = (mrb & 0xff00)>>8;
 3876              		.loc 1 1686 31
 3877 014a 3B69     		ldr	r3, [r7, #16]
 3878 014c 1B0A     		lsrs	r3, r3, #8
 3879              		.loc 1 1686 15
 3880 014e DBB2     		uxtb	r3, r3
 3881 0150 7B72     		strb	r3, [r7, #9]
1687:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_WDAT,2,wr_buf);
 3882              		.loc 1 1687 5
 3883 0152 07F10803 		add	r3, r7, #8
 3884 0156 0222     		movs	r2, #2
 3885 0158 0021     		movs	r1, #0
 3886 015a 2D20     		movs	r0, #45
 3887 015c FFF7FEFF 		bl	dwt_writetodevice
1688:Middlewares/Decawave/decadriver/deca_device.c **** 
1689:Middlewares/Decawave/decadriver/deca_device.c ****     // Set WRITE_MR
1690:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x08;
 3888              		.loc 1 1690 15
 3889 0160 0823     		movs	r3, #8
 3890 0162 3B72     		strb	r3, [r7, #8]
1691:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3891              		.loc 1 1691 5
 3892 0164 07F10803 		add	r3, r7, #8
 3893 0168 0122     		movs	r2, #1
 3894 016a 0621     		movs	r1, #6
 3895 016c 2D20     		movs	r0, #45
 3896 016e FFF7FEFF 		bl	dwt_writetodevice
1692:Middlewares/Decawave/decadriver/deca_device.c **** 
1693:Middlewares/Decawave/decadriver/deca_device.c ****     // Wait?
1694:Middlewares/Decawave/decadriver/deca_device.c ****     deca_sleep(2);
 3897              		.loc 1 1694 5
 3898 0172 0220     		movs	r0, #2
 3899 0174 FFF7FEFF 		bl	deca_sleep
1695:Middlewares/Decawave/decadriver/deca_device.c **** 
1696:Middlewares/Decawave/decadriver/deca_device.c ****     // Set Clear Mode sel
1697:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x04;
 3900              		.loc 1 1697 15
 3901 0178 0423     		movs	r3, #4
 3902 017a 3B72     		strb	r3, [r7, #8]
1698:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 3903              		.loc 1 1698 5
 3904 017c 07F10803 		add	r3, r7, #8
 3905 0180 0122     		movs	r2, #1
 3906 0182 0721     		movs	r1, #7
 3907 0184 2D20     		movs	r0, #45
 3908 0186 FFF7FEFF 		bl	dwt_writetodevice
1699:Middlewares/Decawave/decadriver/deca_device.c **** 
1700:Middlewares/Decawave/decadriver/deca_device.c ****     // Set AUX update, write MR
1701:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x88;
 3909              		.loc 1 1701 15
 3910 018a 8823     		movs	r3, #136
ARM GAS  /tmp/cc0TY0Fa.s 			page 98


 3911 018c 3B72     		strb	r3, [r7, #8]
1702:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3912              		.loc 1 1702 5
 3913 018e 07F10803 		add	r3, r7, #8
 3914 0192 0122     		movs	r2, #1
 3915 0194 0621     		movs	r1, #6
 3916 0196 2D20     		movs	r0, #45
 3917 0198 FFF7FEFF 		bl	dwt_writetodevice
1703:Middlewares/Decawave/decadriver/deca_device.c ****     // Clear write MR
1704:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x80;
 3918              		.loc 1 1704 15
 3919 019c 8023     		movs	r3, #128
 3920 019e 3B72     		strb	r3, [r7, #8]
1705:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3921              		.loc 1 1705 5
 3922 01a0 07F10803 		add	r3, r7, #8
 3923 01a4 0122     		movs	r2, #1
 3924 01a6 0621     		movs	r1, #6
 3925 01a8 2D20     		movs	r0, #45
 3926 01aa FFF7FEFF 		bl	dwt_writetodevice
1706:Middlewares/Decawave/decadriver/deca_device.c ****     // Clear AUX update
1707:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x00;
 3927              		.loc 1 1707 15
 3928 01ae 0023     		movs	r3, #0
 3929 01b0 3B72     		strb	r3, [r7, #8]
1708:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3930              		.loc 1 1708 5
 3931 01b2 07F10803 		add	r3, r7, #8
 3932 01b6 0122     		movs	r2, #1
 3933 01b8 0621     		movs	r1, #6
 3934 01ba 2D20     		movs	r0, #45
 3935 01bc FFF7FEFF 		bl	dwt_writetodevice
1709:Middlewares/Decawave/decadriver/deca_device.c **** 
1710:Middlewares/Decawave/decadriver/deca_device.c ****     ///////////////////////////////////////////
1711:Middlewares/Decawave/decadriver/deca_device.c ****     // PROGRAM MR
1712:Middlewares/Decawave/decadriver/deca_device.c ****     // Set SLOW, MODE_SEL
1713:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x01;
 3936              		.loc 1 1713 15
 3937 01c0 0123     		movs	r3, #1
 3938 01c2 3B72     		strb	r3, [r7, #8]
1714:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 3939              		.loc 1 1714 5
 3940 01c4 07F10803 		add	r3, r7, #8
 3941 01c8 0122     		movs	r2, #1
 3942 01ca 0721     		movs	r1, #7
 3943 01cc 2D20     		movs	r0, #45
 3944 01ce FFF7FEFF 		bl	dwt_writetodevice
1715:Middlewares/Decawave/decadriver/deca_device.c ****     // Load data
1716:Middlewares/Decawave/decadriver/deca_device.c **** 
1717:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = mr & 0x00ff;
 3945              		.loc 1 1717 15
 3946 01d2 FB68     		ldr	r3, [r7, #12]
 3947 01d4 DBB2     		uxtb	r3, r3
 3948 01d6 3B72     		strb	r3, [r7, #8]
1718:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[1] = (mr & 0xff00)>>8;
 3949              		.loc 1 1718 30
 3950 01d8 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cc0TY0Fa.s 			page 99


 3951 01da 1B0A     		lsrs	r3, r3, #8
 3952              		.loc 1 1718 15
 3953 01dc DBB2     		uxtb	r3, r3
 3954 01de 7B72     		strb	r3, [r7, #9]
1719:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_WDAT,2,wr_buf);
 3955              		.loc 1 1719 5
 3956 01e0 07F10803 		add	r3, r7, #8
 3957 01e4 0222     		movs	r2, #2
 3958 01e6 0021     		movs	r1, #0
 3959 01e8 2D20     		movs	r0, #45
 3960 01ea FFF7FEFF 		bl	dwt_writetodevice
1720:Middlewares/Decawave/decadriver/deca_device.c **** 
1721:Middlewares/Decawave/decadriver/deca_device.c ****     // Set WRITE_MR
1722:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x08;
 3961              		.loc 1 1722 15
 3962 01ee 0823     		movs	r3, #8
 3963 01f0 3B72     		strb	r3, [r7, #8]
1723:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 3964              		.loc 1 1723 5
 3965 01f2 07F10803 		add	r3, r7, #8
 3966 01f6 0122     		movs	r2, #1
 3967 01f8 0621     		movs	r1, #6
 3968 01fa 2D20     		movs	r0, #45
 3969 01fc FFF7FEFF 		bl	dwt_writetodevice
1724:Middlewares/Decawave/decadriver/deca_device.c **** 
1725:Middlewares/Decawave/decadriver/deca_device.c ****     // Wait?
1726:Middlewares/Decawave/decadriver/deca_device.c ****     deca_sleep(2);
 3970              		.loc 1 1726 5
 3971 0200 0220     		movs	r0, #2
 3972 0202 FFF7FEFF 		bl	deca_sleep
1727:Middlewares/Decawave/decadriver/deca_device.c ****     // Set Clear Mode sel
1728:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x00;
 3973              		.loc 1 1728 15
 3974 0206 0023     		movs	r3, #0
 3975 0208 3B72     		strb	r3, [r7, #8]
1729:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 3976              		.loc 1 1729 5
 3977 020a 07F10803 		add	r3, r7, #8
 3978 020e 0122     		movs	r2, #1
 3979 0210 0721     		movs	r1, #7
 3980 0212 2D20     		movs	r0, #45
 3981 0214 FFF7FEFF 		bl	dwt_writetodevice
1730:Middlewares/Decawave/decadriver/deca_device.c **** 
1731:Middlewares/Decawave/decadriver/deca_device.c ****     return DWT_SUCCESS;
 3982              		.loc 1 1731 12
 3983 0218 0023     		movs	r3, #0
 3984              	.L165:
1732:Middlewares/Decawave/decadriver/deca_device.c **** }
 3985              		.loc 1 1732 1 discriminator 1
 3986 021a 1846     		mov	r0, r3
 3987 021c 1837     		adds	r7, r7, #24
 3988              	.LCFI225:
 3989              		.cfi_def_cfa_offset 8
 3990 021e BD46     		mov	sp, r7
 3991              	.LCFI226:
 3992              		.cfi_def_cfa_register 13
 3993              		@ sp needed
ARM GAS  /tmp/cc0TY0Fa.s 			page 100


 3994 0220 80BD     		pop	{r7, pc}
 3995              		.cfi_endproc
 3996              	.LFE49:
 3998 0222 00BF     		.section	.text._dwt_otpprogword32,"ax",%progbits
 3999              		.align	1
 4000              		.global	_dwt_otpprogword32
 4001              		.syntax unified
 4002              		.thumb
 4003              		.thumb_func
 4004              		.fpu fpv4-sp-d16
 4006              	_dwt_otpprogword32:
 4007              	.LFB50:
1733:Middlewares/Decawave/decadriver/deca_device.c **** 
1734:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1735:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_otpprogword32()
1736:Middlewares/Decawave/decadriver/deca_device.c ****  *
1737:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief function to program the OTP memory. Ensure that MR,MRa,MRb are reset to 0.
1738:Middlewares/Decawave/decadriver/deca_device.c ****  * VNM Charge pump needs to be enabled (see _dwt_otpsetmrregs)
1739:Middlewares/Decawave/decadriver/deca_device.c ****  * Note the address is only 11 bits long.
1740:Middlewares/Decawave/decadriver/deca_device.c ****  *
1741:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1742:Middlewares/Decawave/decadriver/deca_device.c ****  * @param address - address to read at
1743:Middlewares/Decawave/decadriver/deca_device.c ****  *
1744:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1745:Middlewares/Decawave/decadriver/deca_device.c ****  *
1746:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
1747:Middlewares/Decawave/decadriver/deca_device.c ****  */
1748:Middlewares/Decawave/decadriver/deca_device.c **** uint32 _dwt_otpprogword32(uint32 data, uint16 address)
1749:Middlewares/Decawave/decadriver/deca_device.c **** {
 4008              		.loc 1 1749 1
 4009              		.cfi_startproc
 4010              		@ args = 0, pretend = 0, frame = 16
 4011              		@ frame_needed = 1, uses_anonymous_args = 0
 4012 0000 80B5     		push	{r7, lr}
 4013              	.LCFI227:
 4014              		.cfi_def_cfa_offset 8
 4015              		.cfi_offset 7, -8
 4016              		.cfi_offset 14, -4
 4017 0002 84B0     		sub	sp, sp, #16
 4018              	.LCFI228:
 4019              		.cfi_def_cfa_offset 24
 4020 0004 00AF     		add	r7, sp, #0
 4021              	.LCFI229:
 4022              		.cfi_def_cfa_register 7
 4023 0006 7860     		str	r0, [r7, #4]
 4024 0008 0B46     		mov	r3, r1
 4025 000a 7B80     		strh	r3, [r7, #2]	@ movhi
1750:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 rd_buf[1];
1751:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 wr_buf[4];
1752:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 otp_done;
1753:Middlewares/Decawave/decadriver/deca_device.c **** 
1754:Middlewares/Decawave/decadriver/deca_device.c ****     // Write the data
1755:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[3] = (data>>24) & 0xff;
 4026              		.loc 1 1755 22
 4027 000c 7B68     		ldr	r3, [r7, #4]
 4028 000e 1B0E     		lsrs	r3, r3, #24
 4029              		.loc 1 1755 15
ARM GAS  /tmp/cc0TY0Fa.s 			page 101


 4030 0010 DBB2     		uxtb	r3, r3
 4031 0012 FB72     		strb	r3, [r7, #11]
1756:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[2] = (data>>16) & 0xff;
 4032              		.loc 1 1756 22
 4033 0014 7B68     		ldr	r3, [r7, #4]
 4034 0016 1B0C     		lsrs	r3, r3, #16
 4035              		.loc 1 1756 15
 4036 0018 DBB2     		uxtb	r3, r3
 4037 001a BB72     		strb	r3, [r7, #10]
1757:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[1] = (data>>8) & 0xff;
 4038              		.loc 1 1757 22
 4039 001c 7B68     		ldr	r3, [r7, #4]
 4040 001e 1B0A     		lsrs	r3, r3, #8
 4041              		.loc 1 1757 15
 4042 0020 DBB2     		uxtb	r3, r3
 4043 0022 7B72     		strb	r3, [r7, #9]
1758:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = data & 0xff;
 4044              		.loc 1 1758 15
 4045 0024 7B68     		ldr	r3, [r7, #4]
 4046 0026 DBB2     		uxtb	r3, r3
 4047 0028 3B72     		strb	r3, [r7, #8]
1759:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_WDAT, 4, wr_buf);
 4048              		.loc 1 1759 5
 4049 002a 07F10803 		add	r3, r7, #8
 4050 002e 0422     		movs	r2, #4
 4051 0030 0021     		movs	r1, #0
 4052 0032 2D20     		movs	r0, #45
 4053 0034 FFF7FEFF 		bl	dwt_writetodevice
1760:Middlewares/Decawave/decadriver/deca_device.c **** 
1761:Middlewares/Decawave/decadriver/deca_device.c ****     // Write the address [10:0]
1762:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[1] = (address>>8) & 0x07;
 4054              		.loc 1 1762 30
 4055 0038 7B88     		ldrh	r3, [r7, #2]
 4056 003a 1B0A     		lsrs	r3, r3, #8
 4057 003c 9BB2     		uxth	r3, r3
 4058 003e DBB2     		uxtb	r3, r3
 4059 0040 03F00703 		and	r3, r3, #7
 4060 0044 DBB2     		uxtb	r3, r3
 4061              		.loc 1 1762 15
 4062 0046 7B72     		strb	r3, [r7, #9]
1763:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = address & 0xff;
 4063              		.loc 1 1763 15
 4064 0048 7B88     		ldrh	r3, [r7, #2]	@ movhi
 4065 004a DBB2     		uxtb	r3, r3
 4066 004c 3B72     		strb	r3, [r7, #8]
1764:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_ADDR, 2, wr_buf);
 4067              		.loc 1 1764 5
 4068 004e 07F10803 		add	r3, r7, #8
 4069 0052 0222     		movs	r2, #2
 4070 0054 0421     		movs	r1, #4
 4071 0056 2D20     		movs	r0, #45
 4072 0058 FFF7FEFF 		bl	dwt_writetodevice
1765:Middlewares/Decawave/decadriver/deca_device.c **** 
1766:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable Sequenced programming
1767:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = OTP_CTRL_OTPPROG;
 4073              		.loc 1 1767 15
 4074 005c 4023     		movs	r3, #64
ARM GAS  /tmp/cc0TY0Fa.s 			page 102


 4075 005e 3B72     		strb	r3, [r7, #8]
1768:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL, 1, wr_buf);
 4076              		.loc 1 1768 5
 4077 0060 07F10803 		add	r3, r7, #8
 4078 0064 0122     		movs	r2, #1
 4079 0066 0621     		movs	r1, #6
 4080 0068 2D20     		movs	r0, #45
 4081 006a FFF7FEFF 		bl	dwt_writetodevice
1769:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x00; // And clear
 4082              		.loc 1 1769 15
 4083 006e 0023     		movs	r3, #0
 4084 0070 3B72     		strb	r3, [r7, #8]
1770:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL, 1, wr_buf);
 4085              		.loc 1 1770 5
 4086 0072 07F10803 		add	r3, r7, #8
 4087 0076 0122     		movs	r2, #1
 4088 0078 0621     		movs	r1, #6
 4089 007a 2D20     		movs	r0, #45
 4090 007c FFF7FEFF 		bl	dwt_writetodevice
1771:Middlewares/Decawave/decadriver/deca_device.c **** 
1772:Middlewares/Decawave/decadriver/deca_device.c ****     // WAIT for status to flag PRGM OK..
1773:Middlewares/Decawave/decadriver/deca_device.c ****     otp_done = 0;
 4091              		.loc 1 1773 14
 4092 0080 0023     		movs	r3, #0
 4093 0082 FB73     		strb	r3, [r7, #15]
1774:Middlewares/Decawave/decadriver/deca_device.c ****     while(otp_done == 0)
 4094              		.loc 1 1774 10
 4095 0084 10E0     		b	.L167
 4096              	.L168:
1775:Middlewares/Decawave/decadriver/deca_device.c ****     {
1776:Middlewares/Decawave/decadriver/deca_device.c ****         deca_sleep(1);
 4097              		.loc 1 1776 9
 4098 0086 0120     		movs	r0, #1
 4099 0088 FFF7FEFF 		bl	deca_sleep
1777:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_readfromdevice(OTP_IF_ID, OTP_STAT, 1, rd_buf);
 4100              		.loc 1 1777 9
 4101 008c 07F10C03 		add	r3, r7, #12
 4102 0090 0122     		movs	r2, #1
 4103 0092 0821     		movs	r1, #8
 4104 0094 2D20     		movs	r0, #45
 4105 0096 FFF7FEFF 		bl	dwt_readfromdevice
1778:Middlewares/Decawave/decadriver/deca_device.c **** 
1779:Middlewares/Decawave/decadriver/deca_device.c ****         if((rd_buf[0] & 0x01) == 0x01)
 4106              		.loc 1 1779 19
 4107 009a 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 4108              		.loc 1 1779 23
 4109 009c 03F00103 		and	r3, r3, #1
 4110              		.loc 1 1779 11
 4111 00a0 002B     		cmp	r3, #0
 4112 00a2 01D0     		beq	.L167
1780:Middlewares/Decawave/decadriver/deca_device.c ****         {
1781:Middlewares/Decawave/decadriver/deca_device.c ****             otp_done = 1;
 4113              		.loc 1 1781 22
 4114 00a4 0123     		movs	r3, #1
 4115 00a6 FB73     		strb	r3, [r7, #15]
 4116              	.L167:
1774:Middlewares/Decawave/decadriver/deca_device.c ****     {
ARM GAS  /tmp/cc0TY0Fa.s 			page 103


 4117              		.loc 1 1774 10
 4118 00a8 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 4119 00aa 002B     		cmp	r3, #0
 4120 00ac EBD0     		beq	.L168
1782:Middlewares/Decawave/decadriver/deca_device.c ****         }
1783:Middlewares/Decawave/decadriver/deca_device.c ****     }
1784:Middlewares/Decawave/decadriver/deca_device.c **** 
1785:Middlewares/Decawave/decadriver/deca_device.c ****     return DWT_SUCCESS;
 4121              		.loc 1 1785 12
 4122 00ae 0023     		movs	r3, #0
1786:Middlewares/Decawave/decadriver/deca_device.c **** }
 4123              		.loc 1 1786 1
 4124 00b0 1846     		mov	r0, r3
 4125 00b2 1037     		adds	r7, r7, #16
 4126              	.LCFI230:
 4127              		.cfi_def_cfa_offset 8
 4128 00b4 BD46     		mov	sp, r7
 4129              	.LCFI231:
 4130              		.cfi_def_cfa_register 13
 4131              		@ sp needed
 4132 00b6 80BD     		pop	{r7, pc}
 4133              		.cfi_endproc
 4134              	.LFE50:
 4136              		.section	.text.dwt_otpwriteandverify,"ax",%progbits
 4137              		.align	1
 4138              		.global	dwt_otpwriteandverify
 4139              		.syntax unified
 4140              		.thumb
 4141              		.thumb_func
 4142              		.fpu fpv4-sp-d16
 4144              	dwt_otpwriteandverify:
 4145              	.LFB51:
1787:Middlewares/Decawave/decadriver/deca_device.c **** 
1788:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1789:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_otpwriteandverify()
1790:Middlewares/Decawave/decadriver/deca_device.c ****  *
1791:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to program 32-bit value into the DW1000 OTP memory.
1792:Middlewares/Decawave/decadriver/deca_device.c ****  *
1793:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1794:Middlewares/Decawave/decadriver/deca_device.c ****  * @param value - this is the 32-bit value to be programmed into OTP
1795:Middlewares/Decawave/decadriver/deca_device.c ****  * @param address - this is the 16-bit OTP address into which the 32-bit value is programmed
1796:Middlewares/Decawave/decadriver/deca_device.c ****  *
1797:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1798:Middlewares/Decawave/decadriver/deca_device.c ****  *
1799:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
1800:Middlewares/Decawave/decadriver/deca_device.c ****  */
1801:Middlewares/Decawave/decadriver/deca_device.c **** int dwt_otpwriteandverify(uint32 value, uint16 address)
1802:Middlewares/Decawave/decadriver/deca_device.c **** {
 4146              		.loc 1 1802 1
 4147              		.cfi_startproc
 4148              		@ args = 0, pretend = 0, frame = 16
 4149              		@ frame_needed = 1, uses_anonymous_args = 0
 4150 0000 80B5     		push	{r7, lr}
 4151              	.LCFI232:
 4152              		.cfi_def_cfa_offset 8
 4153              		.cfi_offset 7, -8
 4154              		.cfi_offset 14, -4
ARM GAS  /tmp/cc0TY0Fa.s 			page 104


 4155 0002 84B0     		sub	sp, sp, #16
 4156              	.LCFI233:
 4157              		.cfi_def_cfa_offset 24
 4158 0004 00AF     		add	r7, sp, #0
 4159              	.LCFI234:
 4160              		.cfi_def_cfa_register 7
 4161 0006 7860     		str	r0, [r7, #4]
 4162 0008 0B46     		mov	r3, r1
 4163 000a 7B80     		strh	r3, [r7, #2]	@ movhi
1803:Middlewares/Decawave/decadriver/deca_device.c ****     int prog_ok = DWT_SUCCESS;
 4164              		.loc 1 1803 9
 4165 000c 0023     		movs	r3, #0
 4166 000e FB60     		str	r3, [r7, #12]
1804:Middlewares/Decawave/decadriver/deca_device.c ****     int retry = 0;
 4167              		.loc 1 1804 9
 4168 0010 0023     		movs	r3, #0
 4169 0012 BB60     		str	r3, [r7, #8]
1805:Middlewares/Decawave/decadriver/deca_device.c ****     // Firstly set the system clock to crystal
1806:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI); //set system clock to XTI
 4170              		.loc 1 1806 5
 4171 0014 0020     		movs	r0, #0
 4172 0016 FFF7FEFF 		bl	_dwt_enableclocks
1807:Middlewares/Decawave/decadriver/deca_device.c **** 
1808:Middlewares/Decawave/decadriver/deca_device.c ****     //
1809:Middlewares/Decawave/decadriver/deca_device.c ****     //!!!!!!!!!!!!!! NOTE !!!!!!!!!!!!!!!!!!!!!
1810:Middlewares/Decawave/decadriver/deca_device.c ****     //Set the supply to 3.7V
1811:Middlewares/Decawave/decadriver/deca_device.c ****     //
1812:Middlewares/Decawave/decadriver/deca_device.c **** 
1813:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_otpsetmrregs(1); // Set mode for programming
 4173              		.loc 1 1813 5
 4174 001a 0120     		movs	r0, #1
 4175 001c FFF7FEFF 		bl	_dwt_otpsetmrregs
 4176              	.L174:
1814:Middlewares/Decawave/decadriver/deca_device.c **** 
1815:Middlewares/Decawave/decadriver/deca_device.c ****     // For each value to program - the readback/check is done couple of times to verify it has prog
1816:Middlewares/Decawave/decadriver/deca_device.c ****     while(1)
1817:Middlewares/Decawave/decadriver/deca_device.c ****     {
1818:Middlewares/Decawave/decadriver/deca_device.c ****         _dwt_otpprogword32(value, address);
 4177              		.loc 1 1818 9
 4178 0020 7B88     		ldrh	r3, [r7, #2]
 4179 0022 1946     		mov	r1, r3
 4180 0024 7868     		ldr	r0, [r7, #4]
 4181 0026 FFF7FEFF 		bl	_dwt_otpprogword32
1819:Middlewares/Decawave/decadriver/deca_device.c **** 
1820:Middlewares/Decawave/decadriver/deca_device.c ****         if(_dwt_otpread(address) == value)
 4182              		.loc 1 1820 12
 4183 002a 7B88     		ldrh	r3, [r7, #2]
 4184 002c 1846     		mov	r0, r3
 4185 002e FFF7FEFF 		bl	_dwt_otpread
 4186 0032 0246     		mov	r2, r0
 4187              		.loc 1 1820 11
 4188 0034 7B68     		ldr	r3, [r7, #4]
 4189 0036 9342     		cmp	r3, r2
 4190 0038 06D0     		beq	.L177
1821:Middlewares/Decawave/decadriver/deca_device.c ****         {
1822:Middlewares/Decawave/decadriver/deca_device.c ****             break;
1823:Middlewares/Decawave/decadriver/deca_device.c ****         }
ARM GAS  /tmp/cc0TY0Fa.s 			page 105


1824:Middlewares/Decawave/decadriver/deca_device.c ****         retry++;
 4191              		.loc 1 1824 14
 4192 003a BB68     		ldr	r3, [r7, #8]
 4193 003c 0133     		adds	r3, r3, #1
 4194 003e BB60     		str	r3, [r7, #8]
1825:Middlewares/Decawave/decadriver/deca_device.c ****         if(retry==10)
 4195              		.loc 1 1825 11
 4196 0040 BB68     		ldr	r3, [r7, #8]
 4197 0042 0A2B     		cmp	r3, #10
 4198 0044 02D0     		beq	.L178
1818:Middlewares/Decawave/decadriver/deca_device.c **** 
 4199              		.loc 1 1818 9
 4200 0046 EBE7     		b	.L174
 4201              	.L177:
1822:Middlewares/Decawave/decadriver/deca_device.c ****         }
 4202              		.loc 1 1822 13
 4203 0048 00BF     		nop
 4204 004a 00E0     		b	.L172
 4205              	.L178:
1826:Middlewares/Decawave/decadriver/deca_device.c ****         {
1827:Middlewares/Decawave/decadriver/deca_device.c ****             break;
 4206              		.loc 1 1827 13
 4207 004c 00BF     		nop
 4208              	.L172:
1828:Middlewares/Decawave/decadriver/deca_device.c ****         }
1829:Middlewares/Decawave/decadriver/deca_device.c ****     }
1830:Middlewares/Decawave/decadriver/deca_device.c **** 
1831:Middlewares/Decawave/decadriver/deca_device.c ****     // Even if the above does not exit before retry reaches 10, the programming has probably been s
1832:Middlewares/Decawave/decadriver/deca_device.c **** 
1833:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_otpsetmrregs(4); // Set mode for reading
 4209              		.loc 1 1833 5
 4210 004e 0420     		movs	r0, #4
 4211 0050 FFF7FEFF 		bl	_dwt_otpsetmrregs
1834:Middlewares/Decawave/decadriver/deca_device.c **** 
1835:Middlewares/Decawave/decadriver/deca_device.c ****     if(_dwt_otpread(address) != value) // If this does not pass please check voltage supply on VDDI
 4212              		.loc 1 1835 8
 4213 0054 7B88     		ldrh	r3, [r7, #2]
 4214 0056 1846     		mov	r0, r3
 4215 0058 FFF7FEFF 		bl	_dwt_otpread
 4216 005c 0246     		mov	r2, r0
 4217              		.loc 1 1835 7
 4218 005e 7B68     		ldr	r3, [r7, #4]
 4219 0060 9342     		cmp	r3, r2
 4220 0062 02D0     		beq	.L175
1836:Middlewares/Decawave/decadriver/deca_device.c ****     {
1837:Middlewares/Decawave/decadriver/deca_device.c ****         prog_ok = DWT_ERROR;
 4221              		.loc 1 1837 17
 4222 0064 4FF0FF33 		mov	r3, #-1
 4223 0068 FB60     		str	r3, [r7, #12]
 4224              	.L175:
1838:Middlewares/Decawave/decadriver/deca_device.c ****     }
1839:Middlewares/Decawave/decadriver/deca_device.c **** 
1840:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_otpsetmrregs(0); // Setting OTP mode register for low RM read - resetting the device would
 4225              		.loc 1 1840 5
 4226 006a 0020     		movs	r0, #0
 4227 006c FFF7FEFF 		bl	_dwt_otpsetmrregs
1841:Middlewares/Decawave/decadriver/deca_device.c **** 
ARM GAS  /tmp/cc0TY0Fa.s 			page 106


1842:Middlewares/Decawave/decadriver/deca_device.c ****     return prog_ok;
 4228              		.loc 1 1842 12
 4229 0070 FB68     		ldr	r3, [r7, #12]
1843:Middlewares/Decawave/decadriver/deca_device.c **** }
 4230              		.loc 1 1843 1
 4231 0072 1846     		mov	r0, r3
 4232 0074 1037     		adds	r7, r7, #16
 4233              	.LCFI235:
 4234              		.cfi_def_cfa_offset 8
 4235 0076 BD46     		mov	sp, r7
 4236              	.LCFI236:
 4237              		.cfi_def_cfa_register 13
 4238              		@ sp needed
 4239 0078 80BD     		pop	{r7, pc}
 4240              		.cfi_endproc
 4241              	.LFE51:
 4243              		.section	.text._dwt_aonconfigupload,"ax",%progbits
 4244              		.align	1
 4245              		.global	_dwt_aonconfigupload
 4246              		.syntax unified
 4247              		.thumb
 4248              		.thumb_func
 4249              		.fpu fpv4-sp-d16
 4251              	_dwt_aonconfigupload:
 4252              	.LFB52:
1844:Middlewares/Decawave/decadriver/deca_device.c **** 
1845:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1846:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_aonconfigupload()
1847:Middlewares/Decawave/decadriver/deca_device.c ****  *
1848:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function uploads always on (AON) configuration, as set in the AON_CFG0_OFFSET regist
1849:Middlewares/Decawave/decadriver/deca_device.c ****  *
1850:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1851:Middlewares/Decawave/decadriver/deca_device.c ****  *
1852:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1853:Middlewares/Decawave/decadriver/deca_device.c ****  *
1854:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1855:Middlewares/Decawave/decadriver/deca_device.c ****  */
1856:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_aonconfigupload(void)
1857:Middlewares/Decawave/decadriver/deca_device.c **** {
 4253              		.loc 1 1857 1
 4254              		.cfi_startproc
 4255              		@ args = 0, pretend = 0, frame = 0
 4256              		@ frame_needed = 1, uses_anonymous_args = 0
 4257 0000 80B5     		push	{r7, lr}
 4258              	.LCFI237:
 4259              		.cfi_def_cfa_offset 8
 4260              		.cfi_offset 7, -8
 4261              		.cfi_offset 14, -4
 4262 0002 00AF     		add	r7, sp, #0
 4263              	.LCFI238:
 4264              		.cfi_def_cfa_register 7
1858:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_UPL_CFG);
 4265              		.loc 1 1858 5
 4266 0004 0422     		movs	r2, #4
 4267 0006 0221     		movs	r1, #2
 4268 0008 2C20     		movs	r0, #44
 4269 000a FFF7FEFF 		bl	dwt_write8bitoffsetreg
ARM GAS  /tmp/cc0TY0Fa.s 			page 107


1859:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, 0x00); // Clear the register
 4270              		.loc 1 1859 5
 4271 000e 0022     		movs	r2, #0
 4272 0010 0221     		movs	r1, #2
 4273 0012 2C20     		movs	r0, #44
 4274 0014 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1860:Middlewares/Decawave/decadriver/deca_device.c **** }
 4275              		.loc 1 1860 1
 4276 0018 00BF     		nop
 4277 001a 80BD     		pop	{r7, pc}
 4278              		.cfi_endproc
 4279              	.LFE52:
 4281              		.section	.text._dwt_aonarrayupload,"ax",%progbits
 4282              		.align	1
 4283              		.global	_dwt_aonarrayupload
 4284              		.syntax unified
 4285              		.thumb
 4286              		.thumb_func
 4287              		.fpu fpv4-sp-d16
 4289              	_dwt_aonarrayupload:
 4290              	.LFB53:
1861:Middlewares/Decawave/decadriver/deca_device.c **** 
1862:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1863:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_aonarrayupload()
1864:Middlewares/Decawave/decadriver/deca_device.c ****  *
1865:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function uploads always on (AON) data array and configuration. Thus if this function
1866:Middlewares/Decawave/decadriver/deca_device.c ****  * is not necessary. The DW1000 will go so SLEEP straight after this if the DWT_SLP_EN has been set
1867:Middlewares/Decawave/decadriver/deca_device.c ****  *
1868:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1869:Middlewares/Decawave/decadriver/deca_device.c ****  *
1870:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1871:Middlewares/Decawave/decadriver/deca_device.c ****  *
1872:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1873:Middlewares/Decawave/decadriver/deca_device.c ****  */
1874:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_aonarrayupload(void)
1875:Middlewares/Decawave/decadriver/deca_device.c **** {
 4291              		.loc 1 1875 1
 4292              		.cfi_startproc
 4293              		@ args = 0, pretend = 0, frame = 0
 4294              		@ frame_needed = 1, uses_anonymous_args = 0
 4295 0000 80B5     		push	{r7, lr}
 4296              	.LCFI239:
 4297              		.cfi_def_cfa_offset 8
 4298              		.cfi_offset 7, -8
 4299              		.cfi_offset 14, -4
 4300 0002 00AF     		add	r7, sp, #0
 4301              	.LCFI240:
 4302              		.cfi_def_cfa_register 7
1876:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, 0x00); // Clear the register
 4303              		.loc 1 1876 5
 4304 0004 0022     		movs	r2, #0
 4305 0006 0221     		movs	r1, #2
 4306 0008 2C20     		movs	r0, #44
 4307 000a FFF7FEFF 		bl	dwt_write8bitoffsetreg
1877:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_SAVE);
 4308              		.loc 1 1877 5
 4309 000e 0222     		movs	r2, #2
ARM GAS  /tmp/cc0TY0Fa.s 			page 108


 4310 0010 0221     		movs	r1, #2
 4311 0012 2C20     		movs	r0, #44
 4312 0014 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1878:Middlewares/Decawave/decadriver/deca_device.c **** }
 4313              		.loc 1 1878 1
 4314 0018 00BF     		nop
 4315 001a 80BD     		pop	{r7, pc}
 4316              		.cfi_endproc
 4317              	.LFE53:
 4319              		.section	.text.dwt_entersleep,"ax",%progbits
 4320              		.align	1
 4321              		.global	dwt_entersleep
 4322              		.syntax unified
 4323              		.thumb
 4324              		.thumb_func
 4325              		.fpu fpv4-sp-d16
 4327              	dwt_entersleep:
 4328              	.LFB54:
1879:Middlewares/Decawave/decadriver/deca_device.c **** 
1880:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1881:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_entersleep()
1882:Middlewares/Decawave/decadriver/deca_device.c ****  *
1883:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function puts the device into deep sleep or sleep. dwt_configuresleep() should be ca
1884:Middlewares/Decawave/decadriver/deca_device.c ****  * to configure the sleep and on-wake/wake-up parameters
1885:Middlewares/Decawave/decadriver/deca_device.c ****  *
1886:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1887:Middlewares/Decawave/decadriver/deca_device.c ****  *
1888:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1889:Middlewares/Decawave/decadriver/deca_device.c ****  *
1890:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1891:Middlewares/Decawave/decadriver/deca_device.c ****  */
1892:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_entersleep(void)
1893:Middlewares/Decawave/decadriver/deca_device.c **** {
 4329              		.loc 1 1893 1
 4330              		.cfi_startproc
 4331              		@ args = 0, pretend = 0, frame = 0
 4332              		@ frame_needed = 1, uses_anonymous_args = 0
 4333 0000 80B5     		push	{r7, lr}
 4334              	.LCFI241:
 4335              		.cfi_def_cfa_offset 8
 4336              		.cfi_offset 7, -8
 4337              		.cfi_offset 14, -4
 4338 0002 00AF     		add	r7, sp, #0
 4339              	.LCFI242:
 4340              		.cfi_def_cfa_register 7
1894:Middlewares/Decawave/decadriver/deca_device.c ****     // Copy config to AON - upload the new configuration
1895:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_aonarrayupload();
 4341              		.loc 1 1895 5
 4342 0004 FFF7FEFF 		bl	_dwt_aonarrayupload
1896:Middlewares/Decawave/decadriver/deca_device.c **** }
 4343              		.loc 1 1896 1
 4344 0008 00BF     		nop
 4345 000a 80BD     		pop	{r7, pc}
 4346              		.cfi_endproc
 4347              	.LFE54:
 4349              		.section	.text.dwt_configuresleepcnt,"ax",%progbits
 4350              		.align	1
ARM GAS  /tmp/cc0TY0Fa.s 			page 109


 4351              		.global	dwt_configuresleepcnt
 4352              		.syntax unified
 4353              		.thumb
 4354              		.thumb_func
 4355              		.fpu fpv4-sp-d16
 4357              	dwt_configuresleepcnt:
 4358              	.LFB55:
1897:Middlewares/Decawave/decadriver/deca_device.c **** 
1898:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1899:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_configuresleepcnt()
1900:Middlewares/Decawave/decadriver/deca_device.c ****  *
1901:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief sets the sleep counter to new value, this function programs the high 16-bits of the 28-bi
1902:Middlewares/Decawave/decadriver/deca_device.c ****  *
1903:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: this function needs to be run before dwt_configuresleep, also the SPI frequency has to be 
1904:Middlewares/Decawave/decadriver/deca_device.c ****  *
1905:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1906:Middlewares/Decawave/decadriver/deca_device.c ****  * @param sleepcnt - this it value of the sleep counter to program
1907:Middlewares/Decawave/decadriver/deca_device.c ****  *
1908:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1909:Middlewares/Decawave/decadriver/deca_device.c ****  *
1910:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
1911:Middlewares/Decawave/decadriver/deca_device.c ****  */
1912:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_configuresleepcnt(uint16 sleepcnt)
1913:Middlewares/Decawave/decadriver/deca_device.c **** {
 4359              		.loc 1 1913 1
 4360              		.cfi_startproc
 4361              		@ args = 0, pretend = 0, frame = 8
 4362              		@ frame_needed = 1, uses_anonymous_args = 0
 4363 0000 80B5     		push	{r7, lr}
 4364              	.LCFI243:
 4365              		.cfi_def_cfa_offset 8
 4366              		.cfi_offset 7, -8
 4367              		.cfi_offset 14, -4
 4368 0002 82B0     		sub	sp, sp, #8
 4369              	.LCFI244:
 4370              		.cfi_def_cfa_offset 16
 4371 0004 00AF     		add	r7, sp, #0
 4372              	.LCFI245:
 4373              		.cfi_def_cfa_register 7
 4374 0006 0346     		mov	r3, r0
 4375 0008 FB80     		strh	r3, [r7, #6]	@ movhi
1914:Middlewares/Decawave/decadriver/deca_device.c ****     // Force system clock to crystal
1915:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI);
 4376              		.loc 1 1915 5
 4377 000a 0020     		movs	r0, #0
 4378 000c FFF7FEFF 		bl	_dwt_enableclocks
1916:Middlewares/Decawave/decadriver/deca_device.c **** 
1917:Middlewares/Decawave/decadriver/deca_device.c ****     // Reset sleep configuration to make sure we don't accidentally go to sleep
1918:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG0_OFFSET, 0x00); // NB: this write change the default LPC
 4379              		.loc 1 1918 5
 4380 0010 0022     		movs	r2, #0
 4381 0012 0621     		movs	r1, #6
 4382 0014 2C20     		movs	r0, #44
 4383 0016 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1919:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, 0x00);
 4384              		.loc 1 1919 5
 4385 001a 0022     		movs	r2, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 110


 4386 001c 0A21     		movs	r1, #10
 4387 001e 2C20     		movs	r0, #44
 4388 0020 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1920:Middlewares/Decawave/decadriver/deca_device.c **** 
1921:Middlewares/Decawave/decadriver/deca_device.c ****     // Disable the sleep counter
1922:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_aonconfigupload();
 4389              		.loc 1 1922 5
 4390 0024 FFF7FEFF 		bl	_dwt_aonconfigupload
1923:Middlewares/Decawave/decadriver/deca_device.c **** 
1924:Middlewares/Decawave/decadriver/deca_device.c ****     // Set new value
1925:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(AON_ID, AON_CFG0_OFFSET + AON_CFG0_SLEEP_TIM_OFFSET, sleepcnt);
 4391              		.loc 1 1925 5
 4392 0028 FB88     		ldrh	r3, [r7, #6]
 4393 002a 1A46     		mov	r2, r3
 4394 002c 0821     		movs	r1, #8
 4395 002e 2C20     		movs	r0, #44
 4396 0030 FFF7FEFF 		bl	dwt_write16bitoffsetreg
1926:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_aonconfigupload();
 4397              		.loc 1 1926 5
 4398 0034 FFF7FEFF 		bl	_dwt_aonconfigupload
1927:Middlewares/Decawave/decadriver/deca_device.c **** 
1928:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable the sleep counter
1929:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, AON_CFG1_SLEEP_CEN);
 4399              		.loc 1 1929 5
 4400 0038 0122     		movs	r2, #1
 4401 003a 0A21     		movs	r1, #10
 4402 003c 2C20     		movs	r0, #44
 4403 003e FFF7FEFF 		bl	dwt_write8bitoffsetreg
1930:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_aonconfigupload();
 4404              		.loc 1 1930 5
 4405 0042 FFF7FEFF 		bl	_dwt_aonconfigupload
1931:Middlewares/Decawave/decadriver/deca_device.c **** 
1932:Middlewares/Decawave/decadriver/deca_device.c ****     // Put system PLL back on
1933:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ);
 4406              		.loc 1 1933 5
 4407 0046 0120     		movs	r0, #1
 4408 0048 FFF7FEFF 		bl	_dwt_enableclocks
1934:Middlewares/Decawave/decadriver/deca_device.c **** }
 4409              		.loc 1 1934 1
 4410 004c 00BF     		nop
 4411 004e 0837     		adds	r7, r7, #8
 4412              	.LCFI246:
 4413              		.cfi_def_cfa_offset 8
 4414 0050 BD46     		mov	sp, r7
 4415              	.LCFI247:
 4416              		.cfi_def_cfa_register 13
 4417              		@ sp needed
 4418 0052 80BD     		pop	{r7, pc}
 4419              		.cfi_endproc
 4420              	.LFE55:
 4422              		.section	.text.dwt_calibratesleepcnt,"ax",%progbits
 4423              		.align	1
 4424              		.global	dwt_calibratesleepcnt
 4425              		.syntax unified
 4426              		.thumb
 4427              		.thumb_func
 4428              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc0TY0Fa.s 			page 111


 4430              	dwt_calibratesleepcnt:
 4431              	.LFB56:
1935:Middlewares/Decawave/decadriver/deca_device.c **** 
1936:Middlewares/Decawave/decadriver/deca_device.c **** 
1937:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1938:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_calibratesleepcnt()
1939:Middlewares/Decawave/decadriver/deca_device.c ****  *
1940:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief calibrates the local oscillator as its frequency can vary between 7 and 13kHz depending o
1941:Middlewares/Decawave/decadriver/deca_device.c ****  *
1942:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: this function needs to be run before dwt_configuresleepcnt, so that we know what the count
1943:Middlewares/Decawave/decadriver/deca_device.c ****  *
1944:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
1945:Middlewares/Decawave/decadriver/deca_device.c ****  *
1946:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
1947:Middlewares/Decawave/decadriver/deca_device.c ****  *
1948:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the number of XTAL/2 cycles per low-power oscillator cycle. LP OSC frequency = 19.2 MHz/
1949:Middlewares/Decawave/decadriver/deca_device.c ****  */
1950:Middlewares/Decawave/decadriver/deca_device.c **** uint16 dwt_calibratesleepcnt(void)
1951:Middlewares/Decawave/decadriver/deca_device.c **** {
 4432              		.loc 1 1951 1
 4433              		.cfi_startproc
 4434              		@ args = 0, pretend = 0, frame = 8
 4435              		@ frame_needed = 1, uses_anonymous_args = 0
 4436 0000 80B5     		push	{r7, lr}
 4437              	.LCFI248:
 4438              		.cfi_def_cfa_offset 8
 4439              		.cfi_offset 7, -8
 4440              		.cfi_offset 14, -4
 4441 0002 82B0     		sub	sp, sp, #8
 4442              	.LCFI249:
 4443              		.cfi_def_cfa_offset 16
 4444 0004 00AF     		add	r7, sp, #0
 4445              	.LCFI250:
 4446              		.cfi_def_cfa_register 7
1952:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 result;
1953:Middlewares/Decawave/decadriver/deca_device.c **** 
1954:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable calibration of the sleep counter
1955:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, AON_CFG1_LPOSC_CAL);
 4447              		.loc 1 1955 5
 4448 0006 0422     		movs	r2, #4
 4449 0008 0A21     		movs	r1, #10
 4450 000a 2C20     		movs	r0, #44
 4451 000c FFF7FEFF 		bl	dwt_write8bitoffsetreg
1956:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_aonconfigupload();
 4452              		.loc 1 1956 5
 4453 0010 FFF7FEFF 		bl	_dwt_aonconfigupload
1957:Middlewares/Decawave/decadriver/deca_device.c **** 
1958:Middlewares/Decawave/decadriver/deca_device.c ****     // Disable calibration of the sleep counter
1959:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, 0x00);
 4454              		.loc 1 1959 5
 4455 0014 0022     		movs	r2, #0
 4456 0016 0A21     		movs	r1, #10
 4457 0018 2C20     		movs	r0, #44
 4458 001a FFF7FEFF 		bl	dwt_write8bitoffsetreg
1960:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_aonconfigupload();
 4459              		.loc 1 1960 5
 4460 001e FFF7FEFF 		bl	_dwt_aonconfigupload
ARM GAS  /tmp/cc0TY0Fa.s 			page 112


1961:Middlewares/Decawave/decadriver/deca_device.c **** 
1962:Middlewares/Decawave/decadriver/deca_device.c ****     // Force system clock to crystal
1963:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI);
 4461              		.loc 1 1963 5
 4462 0022 0020     		movs	r0, #0
 4463 0024 FFF7FEFF 		bl	_dwt_enableclocks
1964:Middlewares/Decawave/decadriver/deca_device.c **** 
1965:Middlewares/Decawave/decadriver/deca_device.c ****     deca_sleep(1);
 4464              		.loc 1 1965 5
 4465 0028 0120     		movs	r0, #1
 4466 002a FFF7FEFF 		bl	deca_sleep
1966:Middlewares/Decawave/decadriver/deca_device.c **** 
1967:Middlewares/Decawave/decadriver/deca_device.c ****     // Read the number of XTAL/2 cycles one LP oscillator cycle took.
1968:Middlewares/Decawave/decadriver/deca_device.c ****     // Set up address - Read upper byte first
1969:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_ADDR_OFFSET, AON_ADDR_LPOSC_CAL_1);
 4467              		.loc 1 1969 5
 4468 002e 7622     		movs	r2, #118
 4469 0030 0421     		movs	r1, #4
 4470 0032 2C20     		movs	r0, #44
 4471 0034 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1970:Middlewares/Decawave/decadriver/deca_device.c **** 
1971:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable manual override
1972:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_DCA_ENAB);
 4472              		.loc 1 1972 5
 4473 0038 8022     		movs	r2, #128
 4474 003a 0221     		movs	r1, #2
 4475 003c 2C20     		movs	r0, #44
 4476 003e FFF7FEFF 		bl	dwt_write8bitoffsetreg
1973:Middlewares/Decawave/decadriver/deca_device.c **** 
1974:Middlewares/Decawave/decadriver/deca_device.c ****     // Read confirm data that was written
1975:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_DCA_ENAB | AON_CTRL_DCA_READ);
 4477              		.loc 1 1975 5
 4478 0042 8822     		movs	r2, #136
 4479 0044 0221     		movs	r1, #2
 4480 0046 2C20     		movs	r0, #44
 4481 0048 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1976:Middlewares/Decawave/decadriver/deca_device.c **** 
1977:Middlewares/Decawave/decadriver/deca_device.c ****     // Read back byte from AON
1978:Middlewares/Decawave/decadriver/deca_device.c ****     result = dwt_read8bitoffsetreg(AON_ID, AON_RDAT_OFFSET);
 4482              		.loc 1 1978 14
 4483 004c 0321     		movs	r1, #3
 4484 004e 2C20     		movs	r0, #44
 4485 0050 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 4486 0054 0346     		mov	r3, r0
 4487              		.loc 1 1978 12
 4488 0056 FB80     		strh	r3, [r7, #6]	@ movhi
1979:Middlewares/Decawave/decadriver/deca_device.c ****     result <<= 8;
 4489              		.loc 1 1979 12
 4490 0058 FB88     		ldrh	r3, [r7, #6]	@ movhi
 4491 005a 1B02     		lsls	r3, r3, #8
 4492 005c FB80     		strh	r3, [r7, #6]	@ movhi
1980:Middlewares/Decawave/decadriver/deca_device.c **** 
1981:Middlewares/Decawave/decadriver/deca_device.c ****     // Set up address - Read lower byte
1982:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_ADDR_OFFSET, AON_ADDR_LPOSC_CAL_0);
 4493              		.loc 1 1982 5
 4494 005e 7522     		movs	r2, #117
 4495 0060 0421     		movs	r1, #4
ARM GAS  /tmp/cc0TY0Fa.s 			page 113


 4496 0062 2C20     		movs	r0, #44
 4497 0064 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1983:Middlewares/Decawave/decadriver/deca_device.c **** 
1984:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable manual override
1985:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_DCA_ENAB);
 4498              		.loc 1 1985 5
 4499 0068 8022     		movs	r2, #128
 4500 006a 0221     		movs	r1, #2
 4501 006c 2C20     		movs	r0, #44
 4502 006e FFF7FEFF 		bl	dwt_write8bitoffsetreg
1986:Middlewares/Decawave/decadriver/deca_device.c **** 
1987:Middlewares/Decawave/decadriver/deca_device.c ****     // Read confirm data that was written
1988:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_DCA_ENAB | AON_CTRL_DCA_READ);
 4503              		.loc 1 1988 5
 4504 0072 8822     		movs	r2, #136
 4505 0074 0221     		movs	r1, #2
 4506 0076 2C20     		movs	r0, #44
 4507 0078 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1989:Middlewares/Decawave/decadriver/deca_device.c **** 
1990:Middlewares/Decawave/decadriver/deca_device.c ****     // Read back byte from AON
1991:Middlewares/Decawave/decadriver/deca_device.c ****     result |= dwt_read8bitoffsetreg(AON_ID, AON_RDAT_OFFSET);
 4508              		.loc 1 1991 15
 4509 007c 0321     		movs	r1, #3
 4510 007e 2C20     		movs	r0, #44
 4511 0080 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 4512 0084 0346     		mov	r3, r0
 4513 0086 9AB2     		uxth	r2, r3
 4514              		.loc 1 1991 12
 4515 0088 FB88     		ldrh	r3, [r7, #6]	@ movhi
 4516 008a 1343     		orrs	r3, r3, r2
 4517 008c FB80     		strh	r3, [r7, #6]	@ movhi
1992:Middlewares/Decawave/decadriver/deca_device.c **** 
1993:Middlewares/Decawave/decadriver/deca_device.c ****     // Disable manual override
1994:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, 0x00);
 4518              		.loc 1 1994 5
 4519 008e 0022     		movs	r2, #0
 4520 0090 0221     		movs	r1, #2
 4521 0092 2C20     		movs	r0, #44
 4522 0094 FFF7FEFF 		bl	dwt_write8bitoffsetreg
1995:Middlewares/Decawave/decadriver/deca_device.c **** 
1996:Middlewares/Decawave/decadriver/deca_device.c ****     // Put system PLL back on
1997:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ);
 4523              		.loc 1 1997 5
 4524 0098 0120     		movs	r0, #1
 4525 009a FFF7FEFF 		bl	_dwt_enableclocks
1998:Middlewares/Decawave/decadriver/deca_device.c **** 
1999:Middlewares/Decawave/decadriver/deca_device.c ****     // Returns the number of XTAL/2 cycles per one LP OSC cycle
2000:Middlewares/Decawave/decadriver/deca_device.c ****     // This can be converted into LP OSC frequency by 19.2 MHz/result
2001:Middlewares/Decawave/decadriver/deca_device.c ****     return result;
 4526              		.loc 1 2001 12
 4527 009e FB88     		ldrh	r3, [r7, #6]
2002:Middlewares/Decawave/decadriver/deca_device.c **** }
 4528              		.loc 1 2002 1
 4529 00a0 1846     		mov	r0, r3
 4530 00a2 0837     		adds	r7, r7, #8
 4531              	.LCFI251:
 4532              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc0TY0Fa.s 			page 114


 4533 00a4 BD46     		mov	sp, r7
 4534              	.LCFI252:
 4535              		.cfi_def_cfa_register 13
 4536              		@ sp needed
 4537 00a6 80BD     		pop	{r7, pc}
 4538              		.cfi_endproc
 4539              	.LFE56:
 4541              		.section	.text.dwt_configuresleep,"ax",%progbits
 4542              		.align	1
 4543              		.global	dwt_configuresleep
 4544              		.syntax unified
 4545              		.thumb
 4546              		.thumb_func
 4547              		.fpu fpv4-sp-d16
 4549              	dwt_configuresleep:
 4550              	.LFB57:
2003:Middlewares/Decawave/decadriver/deca_device.c **** 
2004:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2005:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_configuresleep()
2006:Middlewares/Decawave/decadriver/deca_device.c ****  *
2007:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief configures the device for both DEEP_SLEEP and SLEEP modes, and on-wake mode
2008:Middlewares/Decawave/decadriver/deca_device.c ****  * i.e. before entering the sleep, the device should be programmed for TX or RX, then upon "waking 
2009:Middlewares/Decawave/decadriver/deca_device.c ****  * will be preserved and the device can immediately perform the desired action TX/RX
2010:Middlewares/Decawave/decadriver/deca_device.c ****  *
2011:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: e.g. Tag operation - after deep sleep, the device needs to just load the TX buffer and sen
2012:Middlewares/Decawave/decadriver/deca_device.c ****  *
2013:Middlewares/Decawave/decadriver/deca_device.c ****  *
2014:Middlewares/Decawave/decadriver/deca_device.c ****  *      mode: the array and LDE code (OTP/ROM) and LDO tune, and set sleep persist
2015:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_PRESRV_SLEEP 0x0100 - preserve sleep
2016:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_LOADOPSET    0x0080 - load operating parameter set on wakeup
2017:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_CONFIG       0x0040 - download the AON array into the HIF (configuration download)
2018:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_LOADEUI      0x0008
2019:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_GOTORX       0x0002
2020:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_TANDV        0x0001
2021:Middlewares/Decawave/decadriver/deca_device.c ****  *
2022:Middlewares/Decawave/decadriver/deca_device.c ****  *      wake: wake up parameters
2023:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_XTAL_EN      0x10 - keep XTAL running during sleep
2024:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_WAKE_SLPCNT  0x8 - wake up after sleep count
2025:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_WAKE_CS      0x4 - wake up on chip select
2026:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_WAKE_WK      0x2 - wake up on WAKEUP PIN
2027:Middlewares/Decawave/decadriver/deca_device.c ****  *      DWT_SLP_EN       0x1 - enable sleep/deep sleep functionality
2028:Middlewares/Decawave/decadriver/deca_device.c ****  *
2029:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2030:Middlewares/Decawave/decadriver/deca_device.c ****  * @param mode - config on-wake parameters
2031:Middlewares/Decawave/decadriver/deca_device.c ****  * @param wake - config wake up parameters
2032:Middlewares/Decawave/decadriver/deca_device.c ****  *
2033:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2034:Middlewares/Decawave/decadriver/deca_device.c ****  *
2035:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2036:Middlewares/Decawave/decadriver/deca_device.c ****  */
2037:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_configuresleep(uint16 mode, uint8 wake)
2038:Middlewares/Decawave/decadriver/deca_device.c **** {
 4551              		.loc 1 2038 1
 4552              		.cfi_startproc
 4553              		@ args = 0, pretend = 0, frame = 8
 4554              		@ frame_needed = 1, uses_anonymous_args = 0
 4555 0000 80B5     		push	{r7, lr}
ARM GAS  /tmp/cc0TY0Fa.s 			page 115


 4556              	.LCFI253:
 4557              		.cfi_def_cfa_offset 8
 4558              		.cfi_offset 7, -8
 4559              		.cfi_offset 14, -4
 4560 0002 82B0     		sub	sp, sp, #8
 4561              	.LCFI254:
 4562              		.cfi_def_cfa_offset 16
 4563 0004 00AF     		add	r7, sp, #0
 4564              	.LCFI255:
 4565              		.cfi_def_cfa_register 7
 4566 0006 0346     		mov	r3, r0
 4567 0008 0A46     		mov	r2, r1
 4568 000a FB80     		strh	r3, [r7, #6]	@ movhi
 4569 000c 1346     		mov	r3, r2
 4570 000e 7B71     		strb	r3, [r7, #5]
2039:Middlewares/Decawave/decadriver/deca_device.c ****     // Add predefined sleep settings before writing the mode
2040:Middlewares/Decawave/decadriver/deca_device.c ****     mode |= pdw1000local->sleep_mode;
 4571              		.loc 1 2040 25
 4572 0010 0A4B     		ldr	r3, .L186
 4573 0012 1B68     		ldr	r3, [r3]
 4574 0014 DA8A     		ldrh	r2, [r3, #22]
 4575              		.loc 1 2040 10
 4576 0016 FB88     		ldrh	r3, [r7, #6]	@ movhi
 4577 0018 1343     		orrs	r3, r3, r2
 4578 001a FB80     		strh	r3, [r7, #6]	@ movhi
2041:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(AON_ID, AON_WCFG_OFFSET, mode);
 4579              		.loc 1 2041 5
 4580 001c FB88     		ldrh	r3, [r7, #6]
 4581 001e 1A46     		mov	r2, r3
 4582 0020 0021     		movs	r1, #0
 4583 0022 2C20     		movs	r0, #44
 4584 0024 FFF7FEFF 		bl	dwt_write16bitoffsetreg
2042:Middlewares/Decawave/decadriver/deca_device.c **** 
2043:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG0_OFFSET, wake);
 4585              		.loc 1 2043 5
 4586 0028 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 4587 002a 1A46     		mov	r2, r3
 4588 002c 0621     		movs	r1, #6
 4589 002e 2C20     		movs	r0, #44
 4590 0030 FFF7FEFF 		bl	dwt_write8bitoffsetreg
2044:Middlewares/Decawave/decadriver/deca_device.c **** }
 4591              		.loc 1 2044 1
 4592 0034 00BF     		nop
 4593 0036 0837     		adds	r7, r7, #8
 4594              	.LCFI256:
 4595              		.cfi_def_cfa_offset 8
 4596 0038 BD46     		mov	sp, r7
 4597              	.LCFI257:
 4598              		.cfi_def_cfa_register 13
 4599              		@ sp needed
 4600 003a 80BD     		pop	{r7, pc}
 4601              	.L187:
 4602              		.align	2
 4603              	.L186:
 4604 003c 00000000 		.word	pdw1000local
 4605              		.cfi_endproc
 4606              	.LFE57:
ARM GAS  /tmp/cc0TY0Fa.s 			page 116


 4608              		.section	.text.dwt_entersleepaftertx,"ax",%progbits
 4609              		.align	1
 4610              		.global	dwt_entersleepaftertx
 4611              		.syntax unified
 4612              		.thumb
 4613              		.thumb_func
 4614              		.fpu fpv4-sp-d16
 4616              	dwt_entersleepaftertx:
 4617              	.LFB58:
2045:Middlewares/Decawave/decadriver/deca_device.c **** 
2046:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2047:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_entersleepaftertx(int enable)
2048:Middlewares/Decawave/decadriver/deca_device.c ****  *
2049:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief sets the auto TX to sleep bit. This means that after a frame
2050:Middlewares/Decawave/decadriver/deca_device.c ****  * transmission the device will enter deep sleep mode. The dwt_configuresleep() function
2051:Middlewares/Decawave/decadriver/deca_device.c ****  * needs to be called before this to configure the on-wake settings
2052:Middlewares/Decawave/decadriver/deca_device.c ****  *
2053:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: the IRQ line has to be low/inactive (i.e. no pending events)
2054:Middlewares/Decawave/decadriver/deca_device.c ****  *
2055:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2056:Middlewares/Decawave/decadriver/deca_device.c ****  * @param enable - 1 to configure the device to enter deep sleep after TX, 0 - disables the configu
2057:Middlewares/Decawave/decadriver/deca_device.c ****  *
2058:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2059:Middlewares/Decawave/decadriver/deca_device.c ****  *
2060:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2061:Middlewares/Decawave/decadriver/deca_device.c ****  */
2062:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_entersleepaftertx(int enable)
2063:Middlewares/Decawave/decadriver/deca_device.c **** {
 4618              		.loc 1 2063 1
 4619              		.cfi_startproc
 4620              		@ args = 0, pretend = 0, frame = 16
 4621              		@ frame_needed = 1, uses_anonymous_args = 0
 4622 0000 80B5     		push	{r7, lr}
 4623              	.LCFI258:
 4624              		.cfi_def_cfa_offset 8
 4625              		.cfi_offset 7, -8
 4626              		.cfi_offset 14, -4
 4627 0002 84B0     		sub	sp, sp, #16
 4628              	.LCFI259:
 4629              		.cfi_def_cfa_offset 24
 4630 0004 00AF     		add	r7, sp, #0
 4631              	.LCFI260:
 4632              		.cfi_def_cfa_register 7
 4633 0006 7860     		str	r0, [r7, #4]
2064:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET);
 4634              		.loc 1 2064 18
 4635 0008 0421     		movs	r1, #4
 4636 000a 3620     		movs	r0, #54
 4637 000c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 4638 0010 F860     		str	r0, [r7, #12]
2065:Middlewares/Decawave/decadriver/deca_device.c ****     // Set the auto TX -> sleep bit
2066:Middlewares/Decawave/decadriver/deca_device.c ****     if(enable)
 4639              		.loc 1 2066 7
 4640 0012 7B68     		ldr	r3, [r7, #4]
 4641 0014 002B     		cmp	r3, #0
 4642 0016 04D0     		beq	.L189
2067:Middlewares/Decawave/decadriver/deca_device.c ****     {
ARM GAS  /tmp/cc0TY0Fa.s 			page 117


2068:Middlewares/Decawave/decadriver/deca_device.c ****         reg |= PMSC_CTRL1_ATXSLP;
 4643              		.loc 1 2068 13
 4644 0018 FB68     		ldr	r3, [r7, #12]
 4645 001a 43F40063 		orr	r3, r3, #2048
 4646 001e FB60     		str	r3, [r7, #12]
 4647 0020 03E0     		b	.L190
 4648              	.L189:
2069:Middlewares/Decawave/decadriver/deca_device.c ****     }
2070:Middlewares/Decawave/decadriver/deca_device.c ****     else
2071:Middlewares/Decawave/decadriver/deca_device.c ****     {
2072:Middlewares/Decawave/decadriver/deca_device.c ****         reg &= ~(PMSC_CTRL1_ATXSLP);
 4649              		.loc 1 2072 13
 4650 0022 FB68     		ldr	r3, [r7, #12]
 4651 0024 23F40063 		bic	r3, r3, #2048
 4652 0028 FB60     		str	r3, [r7, #12]
 4653              	.L190:
2073:Middlewares/Decawave/decadriver/deca_device.c ****     }
2074:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, reg);
 4654              		.loc 1 2074 5
 4655 002a FA68     		ldr	r2, [r7, #12]
 4656 002c 0421     		movs	r1, #4
 4657 002e 3620     		movs	r0, #54
 4658 0030 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2075:Middlewares/Decawave/decadriver/deca_device.c **** }
 4659              		.loc 1 2075 1
 4660 0034 00BF     		nop
 4661 0036 1037     		adds	r7, r7, #16
 4662              	.LCFI261:
 4663              		.cfi_def_cfa_offset 8
 4664 0038 BD46     		mov	sp, r7
 4665              	.LCFI262:
 4666              		.cfi_def_cfa_register 13
 4667              		@ sp needed
 4668 003a 80BD     		pop	{r7, pc}
 4669              		.cfi_endproc
 4670              	.LFE58:
 4672              		.section	.text.dwt_spicswakeup,"ax",%progbits
 4673              		.align	1
 4674              		.global	dwt_spicswakeup
 4675              		.syntax unified
 4676              		.thumb
 4677              		.thumb_func
 4678              		.fpu fpv4-sp-d16
 4680              	dwt_spicswakeup:
 4681              	.LFB59:
2076:Middlewares/Decawave/decadriver/deca_device.c **** 
2077:Middlewares/Decawave/decadriver/deca_device.c **** 
2078:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2079:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_spicswakeup()
2080:Middlewares/Decawave/decadriver/deca_device.c ****  *
2081:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief wake up the device from sleep mode using the SPI read,
2082:Middlewares/Decawave/decadriver/deca_device.c ****  * the device will wake up on chip select line going low if the line is held low for at least 500us
2083:Middlewares/Decawave/decadriver/deca_device.c ****  * To define the length depending on the time one wants to hold
2084:Middlewares/Decawave/decadriver/deca_device.c ****  * the chip select line low, use the following formula:
2085:Middlewares/Decawave/decadriver/deca_device.c ****  *
2086:Middlewares/Decawave/decadriver/deca_device.c ****  *      length (bytes) = time (s) * byte_rate (Hz)
2087:Middlewares/Decawave/decadriver/deca_device.c ****  *
ARM GAS  /tmp/cc0TY0Fa.s 			page 118


2088:Middlewares/Decawave/decadriver/deca_device.c ****  * where fastest byte_rate is spi_rate (Hz) / 8 if the SPI is sending the bytes back-to-back.
2089:Middlewares/Decawave/decadriver/deca_device.c ****  * To save time and power, a system designer could determine byte_rate value more precisely.
2090:Middlewares/Decawave/decadriver/deca_device.c ****  *
2091:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: Alternatively the device can be waken up with WAKE_UP pin if configured for that operation
2092:Middlewares/Decawave/decadriver/deca_device.c ****  *
2093:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2094:Middlewares/Decawave/decadriver/deca_device.c ****  * @param buff   - this is a pointer to the dummy buffer which will be used in the SPI read transac
2095:Middlewares/Decawave/decadriver/deca_device.c ****  * @param length - this is the length of the dummy buffer
2096:Middlewares/Decawave/decadriver/deca_device.c ****  *
2097:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2098:Middlewares/Decawave/decadriver/deca_device.c ****  *
2099:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
2100:Middlewares/Decawave/decadriver/deca_device.c ****  */
2101:Middlewares/Decawave/decadriver/deca_device.c **** int dwt_spicswakeup(uint8 *buff, uint16 length)
2102:Middlewares/Decawave/decadriver/deca_device.c **** {
 4682              		.loc 1 2102 1
 4683              		.cfi_startproc
 4684              		@ args = 0, pretend = 0, frame = 8
 4685              		@ frame_needed = 1, uses_anonymous_args = 0
 4686 0000 80B5     		push	{r7, lr}
 4687              	.LCFI263:
 4688              		.cfi_def_cfa_offset 8
 4689              		.cfi_offset 7, -8
 4690              		.cfi_offset 14, -4
 4691 0002 82B0     		sub	sp, sp, #8
 4692              	.LCFI264:
 4693              		.cfi_def_cfa_offset 16
 4694 0004 00AF     		add	r7, sp, #0
 4695              	.LCFI265:
 4696              		.cfi_def_cfa_register 7
 4697 0006 7860     		str	r0, [r7, #4]
 4698 0008 0B46     		mov	r3, r1
 4699 000a 7B80     		strh	r3, [r7, #2]	@ movhi
2103:Middlewares/Decawave/decadriver/deca_device.c ****     if(dwt_readdevid() != DWT_DEVICE_ID) // Device was in deep sleep (the first read fails)
 4700              		.loc 1 2103 8
 4701 000c FFF7FEFF 		bl	dwt_readdevid
 4702 0010 0346     		mov	r3, r0
 4703              		.loc 1 2103 7
 4704 0012 0E4A     		ldr	r2, .L197
 4705 0014 9342     		cmp	r3, r2
 4706 0016 0FD0     		beq	.L192
2104:Middlewares/Decawave/decadriver/deca_device.c ****     {
2105:Middlewares/Decawave/decadriver/deca_device.c ****         // Need to keep chip select line low for at least 500us
2106:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_readfromdevice(0x0, 0x0, length, buff); // Do a long read to wake up the chip (hold the
 4707              		.loc 1 2106 9
 4708 0018 7A88     		ldrh	r2, [r7, #2]
 4709 001a 7B68     		ldr	r3, [r7, #4]
 4710 001c 0021     		movs	r1, #0
 4711 001e 0020     		movs	r0, #0
 4712 0020 FFF7FEFF 		bl	dwt_readfromdevice
2107:Middlewares/Decawave/decadriver/deca_device.c **** 
2108:Middlewares/Decawave/decadriver/deca_device.c ****         // Need 5ms for XTAL to start and stabilise (could wait for PLL lock IRQ status bit !!!)
2109:Middlewares/Decawave/decadriver/deca_device.c ****         // NOTE: Polling of the STATUS register is not possible unless frequency is < 3MHz
2110:Middlewares/Decawave/decadriver/deca_device.c ****         deca_sleep(5);
 4713              		.loc 1 2110 9
 4714 0024 0520     		movs	r0, #5
 4715 0026 FFF7FEFF 		bl	deca_sleep
ARM GAS  /tmp/cc0TY0Fa.s 			page 119


2111:Middlewares/Decawave/decadriver/deca_device.c ****     }
2112:Middlewares/Decawave/decadriver/deca_device.c ****     else
2113:Middlewares/Decawave/decadriver/deca_device.c ****     {
2114:Middlewares/Decawave/decadriver/deca_device.c ****         return DWT_SUCCESS;
2115:Middlewares/Decawave/decadriver/deca_device.c ****     }
2116:Middlewares/Decawave/decadriver/deca_device.c ****     // DEBUG - check if still in sleep mode
2117:Middlewares/Decawave/decadriver/deca_device.c ****     if(dwt_readdevid() != DWT_DEVICE_ID)
 4716              		.loc 1 2117 8
 4717 002a FFF7FEFF 		bl	dwt_readdevid
 4718 002e 0346     		mov	r3, r0
 4719              		.loc 1 2117 7
 4720 0030 064A     		ldr	r2, .L197
 4721 0032 9342     		cmp	r3, r2
 4722 0034 05D0     		beq	.L195
 4723 0036 01E0     		b	.L196
 4724              	.L192:
2114:Middlewares/Decawave/decadriver/deca_device.c ****     }
 4725              		.loc 1 2114 16
 4726 0038 0023     		movs	r3, #0
 4727 003a 03E0     		b	.L194
 4728              	.L196:
2118:Middlewares/Decawave/decadriver/deca_device.c ****     {
2119:Middlewares/Decawave/decadriver/deca_device.c ****         return DWT_ERROR;
 4729              		.loc 1 2119 16
 4730 003c 4FF0FF33 		mov	r3, #-1
 4731 0040 00E0     		b	.L194
 4732              	.L195:
2120:Middlewares/Decawave/decadriver/deca_device.c ****     }
2121:Middlewares/Decawave/decadriver/deca_device.c **** 
2122:Middlewares/Decawave/decadriver/deca_device.c ****     return DWT_SUCCESS;
 4733              		.loc 1 2122 12
 4734 0042 0023     		movs	r3, #0
 4735              	.L194:
2123:Middlewares/Decawave/decadriver/deca_device.c **** }
 4736              		.loc 1 2123 1
 4737 0044 1846     		mov	r0, r3
 4738 0046 0837     		adds	r7, r7, #8
 4739              	.LCFI266:
 4740              		.cfi_def_cfa_offset 8
 4741 0048 BD46     		mov	sp, r7
 4742              	.LCFI267:
 4743              		.cfi_def_cfa_register 13
 4744              		@ sp needed
 4745 004a 80BD     		pop	{r7, pc}
 4746              	.L198:
 4747              		.align	2
 4748              	.L197:
 4749 004c 3001CADE 		.word	-557186768
 4750              		.cfi_endproc
 4751              	.LFE59:
 4753              		.section	.text._dwt_configlde,"ax",%progbits
 4754              		.align	1
 4755              		.global	_dwt_configlde
 4756              		.syntax unified
 4757              		.thumb
 4758              		.thumb_func
 4759              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc0TY0Fa.s 			page 120


 4761              	_dwt_configlde:
 4762              	.LFB60:
2124:Middlewares/Decawave/decadriver/deca_device.c **** 
2125:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2126:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_configlde()
2127:Middlewares/Decawave/decadriver/deca_device.c ****  *
2128:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief configure LDE algorithm parameters
2129:Middlewares/Decawave/decadriver/deca_device.c ****  *
2130:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2131:Middlewares/Decawave/decadriver/deca_device.c ****  * @param prf   -   this is the PRF index (0 or 1) 0 corresponds to 16 and 1 to 64 PRF
2132:Middlewares/Decawave/decadriver/deca_device.c ****  *
2133:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2134:Middlewares/Decawave/decadriver/deca_device.c ****  *
2135:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2136:Middlewares/Decawave/decadriver/deca_device.c ****  */
2137:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_configlde(int prfIndex)
2138:Middlewares/Decawave/decadriver/deca_device.c **** {
 4763              		.loc 1 2138 1
 4764              		.cfi_startproc
 4765              		@ args = 0, pretend = 0, frame = 8
 4766              		@ frame_needed = 1, uses_anonymous_args = 0
 4767 0000 80B5     		push	{r7, lr}
 4768              	.LCFI268:
 4769              		.cfi_def_cfa_offset 8
 4770              		.cfi_offset 7, -8
 4771              		.cfi_offset 14, -4
 4772 0002 82B0     		sub	sp, sp, #8
 4773              	.LCFI269:
 4774              		.cfi_def_cfa_offset 16
 4775 0004 00AF     		add	r7, sp, #0
 4776              	.LCFI270:
 4777              		.cfi_def_cfa_register 7
 4778 0006 7860     		str	r0, [r7, #4]
2139:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(LDE_IF_ID, LDE_CFG1_OFFSET, LDE_PARAM1); // 8-bit configuration register
 4779              		.loc 1 2139 5
 4780 0008 6D22     		movs	r2, #109
 4781 000a 40F60601 		movw	r1, #2054
 4782 000e 2E20     		movs	r0, #46
 4783 0010 FFF7FEFF 		bl	dwt_write8bitoffsetreg
2140:Middlewares/Decawave/decadriver/deca_device.c **** 
2141:Middlewares/Decawave/decadriver/deca_device.c ****     if(prfIndex)
 4784              		.loc 1 2141 7
 4785 0014 7B68     		ldr	r3, [r7, #4]
 4786 0016 002B     		cmp	r3, #0
 4787 0018 07D0     		beq	.L200
2142:Middlewares/Decawave/decadriver/deca_device.c ****     {
2143:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write16bitoffsetreg( LDE_IF_ID, LDE_CFG2_OFFSET, (uint16) LDE_PARAM3_64); // 16-bit LDE
 4788              		.loc 1 2143 9
 4789 001a 40F20762 		movw	r2, #1543
 4790 001e 41F60601 		movw	r1, #6150
 4791 0022 2E20     		movs	r0, #46
 4792 0024 FFF7FEFF 		bl	dwt_write16bitoffsetreg
2144:Middlewares/Decawave/decadriver/deca_device.c ****     }
2145:Middlewares/Decawave/decadriver/deca_device.c ****     else
2146:Middlewares/Decawave/decadriver/deca_device.c ****     {
2147:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write16bitoffsetreg( LDE_IF_ID, LDE_CFG2_OFFSET, (uint16) LDE_PARAM3_16);
2148:Middlewares/Decawave/decadriver/deca_device.c ****     }
ARM GAS  /tmp/cc0TY0Fa.s 			page 121


2149:Middlewares/Decawave/decadriver/deca_device.c **** }
 4793              		.loc 1 2149 1
 4794 0028 06E0     		b	.L202
 4795              	.L200:
2147:Middlewares/Decawave/decadriver/deca_device.c ****     }
 4796              		.loc 1 2147 9
 4797 002a 41F20762 		movw	r2, #5639
 4798 002e 41F60601 		movw	r1, #6150
 4799 0032 2E20     		movs	r0, #46
 4800 0034 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 4801              	.L202:
 4802              		.loc 1 2149 1
 4803 0038 00BF     		nop
 4804 003a 0837     		adds	r7, r7, #8
 4805              	.LCFI271:
 4806              		.cfi_def_cfa_offset 8
 4807 003c BD46     		mov	sp, r7
 4808              	.LCFI272:
 4809              		.cfi_def_cfa_register 13
 4810              		@ sp needed
 4811 003e 80BD     		pop	{r7, pc}
 4812              		.cfi_endproc
 4813              	.LFE60:
 4815              		.section	.text._dwt_loaducodefromrom,"ax",%progbits
 4816              		.align	1
 4817              		.global	_dwt_loaducodefromrom
 4818              		.syntax unified
 4819              		.thumb
 4820              		.thumb_func
 4821              		.fpu fpv4-sp-d16
 4823              	_dwt_loaducodefromrom:
 4824              	.LFB61:
2150:Middlewares/Decawave/decadriver/deca_device.c **** 
2151:Middlewares/Decawave/decadriver/deca_device.c **** 
2152:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2153:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_loaducodefromrom()
2154:Middlewares/Decawave/decadriver/deca_device.c ****  *
2155:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  load ucode from OTP MEMORY or ROM
2156:Middlewares/Decawave/decadriver/deca_device.c ****  *
2157:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2158:Middlewares/Decawave/decadriver/deca_device.c ****  *
2159:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2160:Middlewares/Decawave/decadriver/deca_device.c ****  *
2161:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2162:Middlewares/Decawave/decadriver/deca_device.c ****  */
2163:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_loaducodefromrom(void)
2164:Middlewares/Decawave/decadriver/deca_device.c **** {
 4825              		.loc 1 2164 1
 4826              		.cfi_startproc
 4827              		@ args = 0, pretend = 0, frame = 0
 4828              		@ frame_needed = 1, uses_anonymous_args = 0
 4829 0000 80B5     		push	{r7, lr}
 4830              	.LCFI273:
 4831              		.cfi_def_cfa_offset 8
 4832              		.cfi_offset 7, -8
 4833              		.cfi_offset 14, -4
 4834 0002 00AF     		add	r7, sp, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 122


 4835              	.LCFI274:
 4836              		.cfi_def_cfa_register 7
2165:Middlewares/Decawave/decadriver/deca_device.c ****     // Set up clocks
2166:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_LDE);
 4837              		.loc 1 2166 5
 4838 0004 0E20     		movs	r0, #14
 4839 0006 FFF7FEFF 		bl	_dwt_enableclocks
2167:Middlewares/Decawave/decadriver/deca_device.c **** 
2168:Middlewares/Decawave/decadriver/deca_device.c ****     // Kick off the LDE load
2169:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(OTP_IF_ID, OTP_CTRL, OTP_CTRL_LDELOAD); // Set load LDE kick bit
 4840              		.loc 1 2169 5
 4841 000a 4FF40042 		mov	r2, #32768
 4842 000e 0621     		movs	r1, #6
 4843 0010 2D20     		movs	r0, #45
 4844 0012 FFF7FEFF 		bl	dwt_write16bitoffsetreg
2170:Middlewares/Decawave/decadriver/deca_device.c **** 
2171:Middlewares/Decawave/decadriver/deca_device.c ****     deca_sleep(1); // Allow time for code to upload (should take up to 120 us)
 4845              		.loc 1 2171 5
 4846 0016 0120     		movs	r0, #1
 4847 0018 FFF7FEFF 		bl	deca_sleep
2172:Middlewares/Decawave/decadriver/deca_device.c **** 
2173:Middlewares/Decawave/decadriver/deca_device.c ****     // Default clocks (ENABLE_ALL_SEQ)
2174:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ); // Enable clocks for sequencing
 4848              		.loc 1 2174 5
 4849 001c 0120     		movs	r0, #1
 4850 001e FFF7FEFF 		bl	_dwt_enableclocks
2175:Middlewares/Decawave/decadriver/deca_device.c **** }
 4851              		.loc 1 2175 1
 4852 0022 00BF     		nop
 4853 0024 80BD     		pop	{r7, pc}
 4854              		.cfi_endproc
 4855              	.LFE61:
 4857              		.section	.text.dwt_loadopsettabfromotp,"ax",%progbits
 4858              		.align	1
 4859              		.global	dwt_loadopsettabfromotp
 4860              		.syntax unified
 4861              		.thumb
 4862              		.thumb_func
 4863              		.fpu fpv4-sp-d16
 4865              	dwt_loadopsettabfromotp:
 4866              	.LFB62:
2176:Middlewares/Decawave/decadriver/deca_device.c **** 
2177:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2178:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_loadopsettabfromotp()
2179:Middlewares/Decawave/decadriver/deca_device.c ****  *
2180:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to select which Operational Parameter Set table to load from OTP memory
2181:Middlewares/Decawave/decadriver/deca_device.c ****  *
2182:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2183:Middlewares/Decawave/decadriver/deca_device.c ****  * @param ops_sel - Operational Parameter Set table to load:
2184:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_OPSET_64LEN = 0x0 - load the operational parameter set table for 64 length 
2185:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_OPSET_TIGHT = 0x1 - load the operational parameter set table for tight xtal
2186:Middlewares/Decawave/decadriver/deca_device.c ****  *                  DWT_OPSET_DEFLT = 0x2 - load the default operational parameter set table (this 
2187:Middlewares/Decawave/decadriver/deca_device.c ****  *
2188:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2189:Middlewares/Decawave/decadriver/deca_device.c ****  *
2190:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2191:Middlewares/Decawave/decadriver/deca_device.c ****  */
ARM GAS  /tmp/cc0TY0Fa.s 			page 123


2192:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_loadopsettabfromotp(uint8 ops_sel)
2193:Middlewares/Decawave/decadriver/deca_device.c **** {
 4867              		.loc 1 2193 1
 4868              		.cfi_startproc
 4869              		@ args = 0, pretend = 0, frame = 16
 4870              		@ frame_needed = 1, uses_anonymous_args = 0
 4871 0000 80B5     		push	{r7, lr}
 4872              	.LCFI275:
 4873              		.cfi_def_cfa_offset 8
 4874              		.cfi_offset 7, -8
 4875              		.cfi_offset 14, -4
 4876 0002 84B0     		sub	sp, sp, #16
 4877              	.LCFI276:
 4878              		.cfi_def_cfa_offset 24
 4879 0004 00AF     		add	r7, sp, #0
 4880              	.LCFI277:
 4881              		.cfi_def_cfa_register 7
 4882 0006 0346     		mov	r3, r0
 4883 0008 FB71     		strb	r3, [r7, #7]
2194:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 reg = ((ops_sel << OTP_SF_OPS_SEL_SHFT) & OTP_SF_OPS_SEL_MASK) | OTP_SF_OPS_KICK; // Sel
 4884              		.loc 1 2194 28
 4885 000a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 4886 000c 5B01     		lsls	r3, r3, #5
 4887              		.loc 1 2194 52
 4888 000e 1BB2     		sxth	r3, r3
 4889 0010 03F06003 		and	r3, r3, #96
 4890 0014 1BB2     		sxth	r3, r3
 4891              		.loc 1 2194 75
 4892 0016 43F00103 		orr	r3, r3, #1
 4893 001a 1BB2     		sxth	r3, r3
 4894              		.loc 1 2194 12
 4895 001c FB81     		strh	r3, [r7, #14]	@ movhi
2195:Middlewares/Decawave/decadriver/deca_device.c **** 
2196:Middlewares/Decawave/decadriver/deca_device.c ****     // Set up clocks
2197:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_LDE);
 4896              		.loc 1 2197 5
 4897 001e 0E20     		movs	r0, #14
 4898 0020 FFF7FEFF 		bl	_dwt_enableclocks
2198:Middlewares/Decawave/decadriver/deca_device.c **** 
2199:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(OTP_IF_ID, OTP_SF, reg);
 4899              		.loc 1 2199 5
 4900 0024 FB89     		ldrh	r3, [r7, #14]
 4901 0026 1A46     		mov	r2, r3
 4902 0028 1221     		movs	r1, #18
 4903 002a 2D20     		movs	r0, #45
 4904 002c FFF7FEFF 		bl	dwt_write16bitoffsetreg
2200:Middlewares/Decawave/decadriver/deca_device.c **** 
2201:Middlewares/Decawave/decadriver/deca_device.c ****     // Default clocks (ENABLE_ALL_SEQ)
2202:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ); // Enable clocks for sequencing
 4905              		.loc 1 2202 5
 4906 0030 0120     		movs	r0, #1
 4907 0032 FFF7FEFF 		bl	_dwt_enableclocks
2203:Middlewares/Decawave/decadriver/deca_device.c **** 
2204:Middlewares/Decawave/decadriver/deca_device.c **** }
 4908              		.loc 1 2204 1
 4909 0036 00BF     		nop
 4910 0038 1037     		adds	r7, r7, #16
ARM GAS  /tmp/cc0TY0Fa.s 			page 124


 4911              	.LCFI278:
 4912              		.cfi_def_cfa_offset 8
 4913 003a BD46     		mov	sp, r7
 4914              	.LCFI279:
 4915              		.cfi_def_cfa_register 13
 4916              		@ sp needed
 4917 003c 80BD     		pop	{r7, pc}
 4918              		.cfi_endproc
 4919              	.LFE62:
 4921              		.section	.text.dwt_setsmarttxpower,"ax",%progbits
 4922              		.align	1
 4923              		.global	dwt_setsmarttxpower
 4924              		.syntax unified
 4925              		.thumb
 4926              		.thumb_func
 4927              		.fpu fpv4-sp-d16
 4929              	dwt_setsmarttxpower:
 4930              	.LFB63:
2205:Middlewares/Decawave/decadriver/deca_device.c **** 
2206:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2207:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setsmarttxpower()
2208:Middlewares/Decawave/decadriver/deca_device.c ****  *
2209:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This call enables or disables the smart TX power feature.
2210:Middlewares/Decawave/decadriver/deca_device.c ****  *
2211:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2212:Middlewares/Decawave/decadriver/deca_device.c ****  * @param enable - this enables or disables the TX smart power (1 = enable, 0 = disable)
2213:Middlewares/Decawave/decadriver/deca_device.c ****  *
2214:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2215:Middlewares/Decawave/decadriver/deca_device.c ****  *
2216:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2217:Middlewares/Decawave/decadriver/deca_device.c ****  */
2218:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setsmarttxpower(int enable)
2219:Middlewares/Decawave/decadriver/deca_device.c **** {
 4931              		.loc 1 2219 1
 4932              		.cfi_startproc
 4933              		@ args = 0, pretend = 0, frame = 8
 4934              		@ frame_needed = 1, uses_anonymous_args = 0
 4935 0000 90B5     		push	{r4, r7, lr}
 4936              	.LCFI280:
 4937              		.cfi_def_cfa_offset 12
 4938              		.cfi_offset 4, -12
 4939              		.cfi_offset 7, -8
 4940              		.cfi_offset 14, -4
 4941 0002 83B0     		sub	sp, sp, #12
 4942              	.LCFI281:
 4943              		.cfi_def_cfa_offset 24
 4944 0004 00AF     		add	r7, sp, #0
 4945              	.LCFI282:
 4946              		.cfi_def_cfa_register 7
 4947 0006 7860     		str	r0, [r7, #4]
2220:Middlewares/Decawave/decadriver/deca_device.c ****     // Config system register
2221:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->sysCFGreg = dwt_read32bitreg(SYS_CFG_ID) ; // Read sysconfig register
 4948              		.loc 1 2221 17
 4949 0008 134B     		ldr	r3, .L208
 4950 000a 1C68     		ldr	r4, [r3]
 4951              		.loc 1 2221 31
 4952 000c 0021     		movs	r1, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 125


 4953 000e 0420     		movs	r0, #4
 4954 0010 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 4955 0014 0346     		mov	r3, r0
 4956              		.loc 1 2221 29
 4957 0016 2361     		str	r3, [r4, #16]
2222:Middlewares/Decawave/decadriver/deca_device.c **** 
2223:Middlewares/Decawave/decadriver/deca_device.c ****     // Disable smart power configuration
2224:Middlewares/Decawave/decadriver/deca_device.c ****     if(enable)
 4958              		.loc 1 2224 7
 4959 0018 7B68     		ldr	r3, [r7, #4]
 4960 001a 002B     		cmp	r3, #0
 4961 001c 08D0     		beq	.L206
2225:Middlewares/Decawave/decadriver/deca_device.c ****     {
2226:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->sysCFGreg &= ~(SYS_CFG_DIS_STXP) ;
 4962              		.loc 1 2226 33
 4963 001e 0E4B     		ldr	r3, .L208
 4964 0020 1B68     		ldr	r3, [r3]
 4965 0022 1A69     		ldr	r2, [r3, #16]
 4966 0024 0C4B     		ldr	r3, .L208
 4967 0026 1B68     		ldr	r3, [r3]
 4968 0028 22F48022 		bic	r2, r2, #262144
 4969 002c 1A61     		str	r2, [r3, #16]
 4970 002e 07E0     		b	.L207
 4971              	.L206:
2227:Middlewares/Decawave/decadriver/deca_device.c ****     }
2228:Middlewares/Decawave/decadriver/deca_device.c ****     else
2229:Middlewares/Decawave/decadriver/deca_device.c ****     {
2230:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->sysCFGreg |= SYS_CFG_DIS_STXP ;
 4972              		.loc 1 2230 33
 4973 0030 094B     		ldr	r3, .L208
 4974 0032 1B68     		ldr	r3, [r3]
 4975 0034 1A69     		ldr	r2, [r3, #16]
 4976 0036 084B     		ldr	r3, .L208
 4977 0038 1B68     		ldr	r3, [r3]
 4978 003a 42F48022 		orr	r2, r2, #262144
 4979 003e 1A61     		str	r2, [r3, #16]
 4980              	.L207:
2231:Middlewares/Decawave/decadriver/deca_device.c ****     }
2232:Middlewares/Decawave/decadriver/deca_device.c **** 
2233:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,pdw1000local->sysCFGreg) ;
 4981              		.loc 1 2233 5
 4982 0040 054B     		ldr	r3, .L208
 4983 0042 1B68     		ldr	r3, [r3]
 4984 0044 1B69     		ldr	r3, [r3, #16]
 4985 0046 1A46     		mov	r2, r3
 4986 0048 0021     		movs	r1, #0
 4987 004a 0420     		movs	r0, #4
 4988 004c FFF7FEFF 		bl	dwt_write32bitoffsetreg
2234:Middlewares/Decawave/decadriver/deca_device.c **** }
 4989              		.loc 1 2234 1
 4990 0050 00BF     		nop
 4991 0052 0C37     		adds	r7, r7, #12
 4992              	.LCFI283:
 4993              		.cfi_def_cfa_offset 12
 4994 0054 BD46     		mov	sp, r7
 4995              	.LCFI284:
 4996              		.cfi_def_cfa_register 13
ARM GAS  /tmp/cc0TY0Fa.s 			page 126


 4997              		@ sp needed
 4998 0056 90BD     		pop	{r4, r7, pc}
 4999              	.L209:
 5000              		.align	2
 5001              	.L208:
 5002 0058 00000000 		.word	pdw1000local
 5003              		.cfi_endproc
 5004              	.LFE63:
 5006              		.section	.text.dwt_enableautoack,"ax",%progbits
 5007              		.align	1
 5008              		.global	dwt_enableautoack
 5009              		.syntax unified
 5010              		.thumb
 5011              		.thumb_func
 5012              		.fpu fpv4-sp-d16
 5014              	dwt_enableautoack:
 5015              	.LFB64:
2235:Middlewares/Decawave/decadriver/deca_device.c **** 
2236:Middlewares/Decawave/decadriver/deca_device.c **** 
2237:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2238:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_enableautoack()
2239:Middlewares/Decawave/decadriver/deca_device.c ****  *
2240:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This call enables the auto-ACK feature. If the responseDelayTime (parameter) is 0, the AC
2241:Middlewares/Decawave/decadriver/deca_device.c ****  * otherwise it will be sent with a programmed delay (in symbols), max is 255.
2242:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: needs to have frame filtering enabled as well
2243:Middlewares/Decawave/decadriver/deca_device.c ****  *
2244:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2245:Middlewares/Decawave/decadriver/deca_device.c ****  * @param responseDelayTime - if non-zero the ACK is sent after this delay, max is 255.
2246:Middlewares/Decawave/decadriver/deca_device.c ****  *
2247:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2248:Middlewares/Decawave/decadriver/deca_device.c ****  *
2249:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2250:Middlewares/Decawave/decadriver/deca_device.c ****  */
2251:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_enableautoack(uint8 responseDelayTime)
2252:Middlewares/Decawave/decadriver/deca_device.c **** {
 5016              		.loc 1 2252 1
 5017              		.cfi_startproc
 5018              		@ args = 0, pretend = 0, frame = 8
 5019              		@ frame_needed = 1, uses_anonymous_args = 0
 5020 0000 80B5     		push	{r7, lr}
 5021              	.LCFI285:
 5022              		.cfi_def_cfa_offset 8
 5023              		.cfi_offset 7, -8
 5024              		.cfi_offset 14, -4
 5025 0002 82B0     		sub	sp, sp, #8
 5026              	.LCFI286:
 5027              		.cfi_def_cfa_offset 16
 5028 0004 00AF     		add	r7, sp, #0
 5029              	.LCFI287:
 5030              		.cfi_def_cfa_register 7
 5031 0006 0346     		mov	r3, r0
 5032 0008 FB71     		strb	r3, [r7, #7]
2253:Middlewares/Decawave/decadriver/deca_device.c ****     // Set auto ACK reply delay
2254:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(ACK_RESP_T_ID, ACK_RESP_T_ACK_TIM_OFFSET, responseDelayTime); // In symb
 5033              		.loc 1 2254 5
 5034 000a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5035 000c 1A46     		mov	r2, r3
ARM GAS  /tmp/cc0TY0Fa.s 			page 127


 5036 000e 0321     		movs	r1, #3
 5037 0010 1A20     		movs	r0, #26
 5038 0012 FFF7FEFF 		bl	dwt_write8bitoffsetreg
2255:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable auto ACK
2256:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->sysCFGreg |= SYS_CFG_AUTOACK;
 5039              		.loc 1 2256 29
 5040 0016 0A4B     		ldr	r3, .L211
 5041 0018 1B68     		ldr	r3, [r3]
 5042 001a 1A69     		ldr	r2, [r3, #16]
 5043 001c 084B     		ldr	r3, .L211
 5044 001e 1B68     		ldr	r3, [r3]
 5045 0020 42F08042 		orr	r2, r2, #1073741824
 5046 0024 1A61     		str	r2, [r3, #16]
2257:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,pdw1000local->sysCFGreg) ;
 5047              		.loc 1 2257 5
 5048 0026 064B     		ldr	r3, .L211
 5049 0028 1B68     		ldr	r3, [r3]
 5050 002a 1B69     		ldr	r3, [r3, #16]
 5051 002c 1A46     		mov	r2, r3
 5052 002e 0021     		movs	r1, #0
 5053 0030 0420     		movs	r0, #4
 5054 0032 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2258:Middlewares/Decawave/decadriver/deca_device.c **** }
 5055              		.loc 1 2258 1
 5056 0036 00BF     		nop
 5057 0038 0837     		adds	r7, r7, #8
 5058              	.LCFI288:
 5059              		.cfi_def_cfa_offset 8
 5060 003a BD46     		mov	sp, r7
 5061              	.LCFI289:
 5062              		.cfi_def_cfa_register 13
 5063              		@ sp needed
 5064 003c 80BD     		pop	{r7, pc}
 5065              	.L212:
 5066 003e 00BF     		.align	2
 5067              	.L211:
 5068 0040 00000000 		.word	pdw1000local
 5069              		.cfi_endproc
 5070              	.LFE64:
 5072              		.section	.text.dwt_setdblrxbuffmode,"ax",%progbits
 5073              		.align	1
 5074              		.global	dwt_setdblrxbuffmode
 5075              		.syntax unified
 5076              		.thumb
 5077              		.thumb_func
 5078              		.fpu fpv4-sp-d16
 5080              	dwt_setdblrxbuffmode:
 5081              	.LFB65:
2259:Middlewares/Decawave/decadriver/deca_device.c **** 
2260:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2261:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setdblrxbuffmode()
2262:Middlewares/Decawave/decadriver/deca_device.c ****  *
2263:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This call enables the double receive buffer mode
2264:Middlewares/Decawave/decadriver/deca_device.c ****  *
2265:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2266:Middlewares/Decawave/decadriver/deca_device.c ****  * @param enable - 1 to enable, 0 to disable the double buffer mode
2267:Middlewares/Decawave/decadriver/deca_device.c ****  *
ARM GAS  /tmp/cc0TY0Fa.s 			page 128


2268:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2269:Middlewares/Decawave/decadriver/deca_device.c ****  *
2270:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2271:Middlewares/Decawave/decadriver/deca_device.c ****  */
2272:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setdblrxbuffmode(int enable)
2273:Middlewares/Decawave/decadriver/deca_device.c **** {
 5082              		.loc 1 2273 1
 5083              		.cfi_startproc
 5084              		@ args = 0, pretend = 0, frame = 8
 5085              		@ frame_needed = 1, uses_anonymous_args = 0
 5086 0000 80B5     		push	{r7, lr}
 5087              	.LCFI290:
 5088              		.cfi_def_cfa_offset 8
 5089              		.cfi_offset 7, -8
 5090              		.cfi_offset 14, -4
 5091 0002 82B0     		sub	sp, sp, #8
 5092              	.LCFI291:
 5093              		.cfi_def_cfa_offset 16
 5094 0004 00AF     		add	r7, sp, #0
 5095              	.LCFI292:
 5096              		.cfi_def_cfa_register 7
 5097 0006 7860     		str	r0, [r7, #4]
2274:Middlewares/Decawave/decadriver/deca_device.c ****     if(enable)
 5098              		.loc 1 2274 7
 5099 0008 7B68     		ldr	r3, [r7, #4]
 5100 000a 002B     		cmp	r3, #0
 5101 000c 0CD0     		beq	.L214
2275:Middlewares/Decawave/decadriver/deca_device.c ****     {
2276:Middlewares/Decawave/decadriver/deca_device.c ****         // Enable double RX buffer mode
2277:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->sysCFGreg &= ~SYS_CFG_DIS_DRXB;
 5102              		.loc 1 2277 33
 5103 000e 124B     		ldr	r3, .L216
 5104 0010 1B68     		ldr	r3, [r3]
 5105 0012 1A69     		ldr	r2, [r3, #16]
 5106 0014 104B     		ldr	r3, .L216
 5107 0016 1B68     		ldr	r3, [r3]
 5108 0018 22F48052 		bic	r2, r2, #4096
 5109 001c 1A61     		str	r2, [r3, #16]
2278:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->dblbuffon = 1;
 5110              		.loc 1 2278 21
 5111 001e 0E4B     		ldr	r3, .L216
 5112 0020 1B68     		ldr	r3, [r3]
 5113              		.loc 1 2278 33
 5114 0022 0122     		movs	r2, #1
 5115 0024 1A75     		strb	r2, [r3, #20]
 5116 0026 0BE0     		b	.L215
 5117              	.L214:
2279:Middlewares/Decawave/decadriver/deca_device.c ****     }
2280:Middlewares/Decawave/decadriver/deca_device.c ****     else
2281:Middlewares/Decawave/decadriver/deca_device.c ****     {
2282:Middlewares/Decawave/decadriver/deca_device.c ****         // Disable double RX buffer mode
2283:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->sysCFGreg |= SYS_CFG_DIS_DRXB;
 5118              		.loc 1 2283 33
 5119 0028 0B4B     		ldr	r3, .L216
 5120 002a 1B68     		ldr	r3, [r3]
 5121 002c 1A69     		ldr	r2, [r3, #16]
 5122 002e 0A4B     		ldr	r3, .L216
ARM GAS  /tmp/cc0TY0Fa.s 			page 129


 5123 0030 1B68     		ldr	r3, [r3]
 5124 0032 42F48052 		orr	r2, r2, #4096
 5125 0036 1A61     		str	r2, [r3, #16]
2284:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->dblbuffon = 0;
 5126              		.loc 1 2284 21
 5127 0038 074B     		ldr	r3, .L216
 5128 003a 1B68     		ldr	r3, [r3]
 5129              		.loc 1 2284 33
 5130 003c 0022     		movs	r2, #0
 5131 003e 1A75     		strb	r2, [r3, #20]
 5132              	.L215:
2285:Middlewares/Decawave/decadriver/deca_device.c ****     }
2286:Middlewares/Decawave/decadriver/deca_device.c **** 
2287:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,pdw1000local->sysCFGreg) ;
 5133              		.loc 1 2287 5
 5134 0040 054B     		ldr	r3, .L216
 5135 0042 1B68     		ldr	r3, [r3]
 5136 0044 1B69     		ldr	r3, [r3, #16]
 5137 0046 1A46     		mov	r2, r3
 5138 0048 0021     		movs	r1, #0
 5139 004a 0420     		movs	r0, #4
 5140 004c FFF7FEFF 		bl	dwt_write32bitoffsetreg
2288:Middlewares/Decawave/decadriver/deca_device.c **** }
 5141              		.loc 1 2288 1
 5142 0050 00BF     		nop
 5143 0052 0837     		adds	r7, r7, #8
 5144              	.LCFI293:
 5145              		.cfi_def_cfa_offset 8
 5146 0054 BD46     		mov	sp, r7
 5147              	.LCFI294:
 5148              		.cfi_def_cfa_register 13
 5149              		@ sp needed
 5150 0056 80BD     		pop	{r7, pc}
 5151              	.L217:
 5152              		.align	2
 5153              	.L216:
 5154 0058 00000000 		.word	pdw1000local
 5155              		.cfi_endproc
 5156              	.LFE65:
 5158              		.section	.text.dwt_setrxaftertxdelay,"ax",%progbits
 5159              		.align	1
 5160              		.global	dwt_setrxaftertxdelay
 5161              		.syntax unified
 5162              		.thumb
 5163              		.thumb_func
 5164              		.fpu fpv4-sp-d16
 5166              	dwt_setrxaftertxdelay:
 5167              	.LFB66:
2289:Middlewares/Decawave/decadriver/deca_device.c **** 
2290:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2291:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setrxaftertxdelay()
2292:Middlewares/Decawave/decadriver/deca_device.c ****  *
2293:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This sets the receiver turn on delay time after a transmission of a frame
2294:Middlewares/Decawave/decadriver/deca_device.c ****  *
2295:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2296:Middlewares/Decawave/decadriver/deca_device.c ****  * @param rxDelayTime - (20 bits) - the delay is in UWB microseconds
2297:Middlewares/Decawave/decadriver/deca_device.c ****  *
ARM GAS  /tmp/cc0TY0Fa.s 			page 130


2298:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2299:Middlewares/Decawave/decadriver/deca_device.c ****  *
2300:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2301:Middlewares/Decawave/decadriver/deca_device.c ****  */
2302:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setrxaftertxdelay(uint32 rxDelayTime)
2303:Middlewares/Decawave/decadriver/deca_device.c **** {
 5168              		.loc 1 2303 1
 5169              		.cfi_startproc
 5170              		@ args = 0, pretend = 0, frame = 16
 5171              		@ frame_needed = 1, uses_anonymous_args = 0
 5172 0000 80B5     		push	{r7, lr}
 5173              	.LCFI295:
 5174              		.cfi_def_cfa_offset 8
 5175              		.cfi_offset 7, -8
 5176              		.cfi_offset 14, -4
 5177 0002 84B0     		sub	sp, sp, #16
 5178              	.LCFI296:
 5179              		.cfi_def_cfa_offset 24
 5180 0004 00AF     		add	r7, sp, #0
 5181              	.LCFI297:
 5182              		.cfi_def_cfa_register 7
 5183 0006 7860     		str	r0, [r7, #4]
2304:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 val = dwt_read32bitreg(ACK_RESP_T_ID) ; // Read ACK_RESP_T_ID register
 5184              		.loc 1 2304 18
 5185 0008 0021     		movs	r1, #0
 5186 000a 1A20     		movs	r0, #26
 5187 000c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5188 0010 F860     		str	r0, [r7, #12]
2305:Middlewares/Decawave/decadriver/deca_device.c **** 
2306:Middlewares/Decawave/decadriver/deca_device.c ****     val &= ~(ACK_RESP_T_W4R_TIM_MASK) ; // Clear the timer (19:0)
 5189              		.loc 1 2306 9
 5190 0012 FB68     		ldr	r3, [r7, #12]
 5191 0014 1B0D     		lsrs	r3, r3, #20
 5192 0016 1B05     		lsls	r3, r3, #20
 5193 0018 FB60     		str	r3, [r7, #12]
2307:Middlewares/Decawave/decadriver/deca_device.c **** 
2308:Middlewares/Decawave/decadriver/deca_device.c ****     val |= (rxDelayTime & ACK_RESP_T_W4R_TIM_MASK) ; // In UWB microseconds (e.g. turn the receiver
 5194              		.loc 1 2308 25
 5195 001a 7B68     		ldr	r3, [r7, #4]
 5196 001c C3F31303 		ubfx	r3, r3, #0, #20
 5197              		.loc 1 2308 9
 5198 0020 FA68     		ldr	r2, [r7, #12]
 5199 0022 1343     		orrs	r3, r3, r2
 5200 0024 FB60     		str	r3, [r7, #12]
2309:Middlewares/Decawave/decadriver/deca_device.c **** 
2310:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(ACK_RESP_T_ID, val) ;
 5201              		.loc 1 2310 5
 5202 0026 FA68     		ldr	r2, [r7, #12]
 5203 0028 0021     		movs	r1, #0
 5204 002a 1A20     		movs	r0, #26
 5205 002c FFF7FEFF 		bl	dwt_write32bitoffsetreg
2311:Middlewares/Decawave/decadriver/deca_device.c **** }
 5206              		.loc 1 2311 1
 5207 0030 00BF     		nop
 5208 0032 1037     		adds	r7, r7, #16
 5209              	.LCFI298:
 5210              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc0TY0Fa.s 			page 131


 5211 0034 BD46     		mov	sp, r7
 5212              	.LCFI299:
 5213              		.cfi_def_cfa_register 13
 5214              		@ sp needed
 5215 0036 80BD     		pop	{r7, pc}
 5216              		.cfi_endproc
 5217              	.LFE66:
 5219              		.section	.text.dwt_setcallbacks,"ax",%progbits
 5220              		.align	1
 5221              		.global	dwt_setcallbacks
 5222              		.syntax unified
 5223              		.thumb
 5224              		.thumb_func
 5225              		.fpu fpv4-sp-d16
 5227              	dwt_setcallbacks:
 5228              	.LFB67:
2312:Middlewares/Decawave/decadriver/deca_device.c **** 
2313:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2314:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setcallbacks()
2315:Middlewares/Decawave/decadriver/deca_device.c ****  *
2316:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function is used to register the different callbacks called when one of the correspo
2317:Middlewares/Decawave/decadriver/deca_device.c ****  *
2318:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: Callbacks can be undefined (set to NULL). In this case, dwt_isr() will process the event a
2319:Middlewares/Decawave/decadriver/deca_device.c ****  * callback will not be called.
2320:Middlewares/Decawave/decadriver/deca_device.c ****  *
2321:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2322:Middlewares/Decawave/decadriver/deca_device.c ****  * @param cbTxDone - the pointer to the TX confirmation event callback function
2323:Middlewares/Decawave/decadriver/deca_device.c ****  * @param cbRxOk - the pointer to the RX good frame event callback function
2324:Middlewares/Decawave/decadriver/deca_device.c ****  * @param cbRxTo - the pointer to the RX timeout events callback function
2325:Middlewares/Decawave/decadriver/deca_device.c ****  * @param cbRxErr - the pointer to the RX error events callback function
2326:Middlewares/Decawave/decadriver/deca_device.c ****  *
2327:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2328:Middlewares/Decawave/decadriver/deca_device.c ****  *
2329:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2330:Middlewares/Decawave/decadriver/deca_device.c ****  */
2331:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setcallbacks(dwt_cb_t cbTxDone, dwt_cb_t cbRxOk, dwt_cb_t cbRxTo, dwt_cb_t cbRxErr)
2332:Middlewares/Decawave/decadriver/deca_device.c **** {
 5229              		.loc 1 2332 1
 5230              		.cfi_startproc
 5231              		@ args = 0, pretend = 0, frame = 16
 5232              		@ frame_needed = 1, uses_anonymous_args = 0
 5233              		@ link register save eliminated.
 5234 0000 80B4     		push	{r7}
 5235              	.LCFI300:
 5236              		.cfi_def_cfa_offset 4
 5237              		.cfi_offset 7, -4
 5238 0002 85B0     		sub	sp, sp, #20
 5239              	.LCFI301:
 5240              		.cfi_def_cfa_offset 24
 5241 0004 00AF     		add	r7, sp, #0
 5242              	.LCFI302:
 5243              		.cfi_def_cfa_register 7
 5244 0006 F860     		str	r0, [r7, #12]
 5245 0008 B960     		str	r1, [r7, #8]
 5246 000a 7A60     		str	r2, [r7, #4]
 5247 000c 3B60     		str	r3, [r7]
2333:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbTxDone = cbTxDone;
ARM GAS  /tmp/cc0TY0Fa.s 			page 132


 5248              		.loc 1 2333 17
 5249 000e 0B4B     		ldr	r3, .L220
 5250 0010 1B68     		ldr	r3, [r3]
 5251              		.loc 1 2333 28
 5252 0012 FA68     		ldr	r2, [r7, #12]
 5253 0014 9A62     		str	r2, [r3, #40]
2334:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbRxOk = cbRxOk;
 5254              		.loc 1 2334 17
 5255 0016 094B     		ldr	r3, .L220
 5256 0018 1B68     		ldr	r3, [r3]
 5257              		.loc 1 2334 26
 5258 001a BA68     		ldr	r2, [r7, #8]
 5259 001c DA62     		str	r2, [r3, #44]
2335:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbRxTo = cbRxTo;
 5260              		.loc 1 2335 17
 5261 001e 074B     		ldr	r3, .L220
 5262 0020 1B68     		ldr	r3, [r3]
 5263              		.loc 1 2335 26
 5264 0022 7A68     		ldr	r2, [r7, #4]
 5265 0024 1A63     		str	r2, [r3, #48]
2336:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbRxErr = cbRxErr;
 5266              		.loc 1 2336 17
 5267 0026 054B     		ldr	r3, .L220
 5268 0028 1B68     		ldr	r3, [r3]
 5269              		.loc 1 2336 27
 5270 002a 3A68     		ldr	r2, [r7]
 5271 002c 5A63     		str	r2, [r3, #52]
2337:Middlewares/Decawave/decadriver/deca_device.c **** }
 5272              		.loc 1 2337 1
 5273 002e 00BF     		nop
 5274 0030 1437     		adds	r7, r7, #20
 5275              	.LCFI303:
 5276              		.cfi_def_cfa_offset 4
 5277 0032 BD46     		mov	sp, r7
 5278              	.LCFI304:
 5279              		.cfi_def_cfa_register 13
 5280              		@ sp needed
 5281 0034 5DF8047B 		ldr	r7, [sp], #4
 5282              	.LCFI305:
 5283              		.cfi_restore 7
 5284              		.cfi_def_cfa_offset 0
 5285 0038 7047     		bx	lr
 5286              	.L221:
 5287 003a 00BF     		.align	2
 5288              	.L220:
 5289 003c 00000000 		.word	pdw1000local
 5290              		.cfi_endproc
 5291              	.LFE67:
 5293              		.section	.text.dwt_checkirq,"ax",%progbits
 5294              		.align	1
 5295              		.global	dwt_checkirq
 5296              		.syntax unified
 5297              		.thumb
 5298              		.thumb_func
 5299              		.fpu fpv4-sp-d16
 5301              	dwt_checkirq:
 5302              	.LFB68:
ARM GAS  /tmp/cc0TY0Fa.s 			page 133


2338:Middlewares/Decawave/decadriver/deca_device.c **** 
2339:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2340:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_checkirq()
2341:Middlewares/Decawave/decadriver/deca_device.c ****  *
2342:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function checks if the IRQ line is active - this is used instead of interrupt handle
2343:Middlewares/Decawave/decadriver/deca_device.c ****  *
2344:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2345:Middlewares/Decawave/decadriver/deca_device.c ****  *
2346:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2347:Middlewares/Decawave/decadriver/deca_device.c ****  *
2348:Middlewares/Decawave/decadriver/deca_device.c ****  * return value is 1 if the IRQS bit is set and 0 otherwise
2349:Middlewares/Decawave/decadriver/deca_device.c ****  */
2350:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_checkirq(void)
2351:Middlewares/Decawave/decadriver/deca_device.c **** {
 5303              		.loc 1 2351 1
 5304              		.cfi_startproc
 5305              		@ args = 0, pretend = 0, frame = 0
 5306              		@ frame_needed = 1, uses_anonymous_args = 0
 5307 0000 80B5     		push	{r7, lr}
 5308              	.LCFI306:
 5309              		.cfi_def_cfa_offset 8
 5310              		.cfi_offset 7, -8
 5311              		.cfi_offset 14, -4
 5312 0002 00AF     		add	r7, sp, #0
 5313              	.LCFI307:
 5314              		.cfi_def_cfa_register 7
2352:Middlewares/Decawave/decadriver/deca_device.c ****     return (dwt_read8bitoffsetreg(SYS_STATUS_ID, SYS_STATUS_OFFSET) & SYS_STATUS_IRQS); // Reading 
 5315              		.loc 1 2352 13
 5316 0004 0021     		movs	r1, #0
 5317 0006 0F20     		movs	r0, #15
 5318 0008 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 5319 000c 0346     		mov	r3, r0
 5320              		.loc 1 2352 69
 5321 000e 03F00103 		and	r3, r3, #1
 5322 0012 DBB2     		uxtb	r3, r3
2353:Middlewares/Decawave/decadriver/deca_device.c **** }
 5323              		.loc 1 2353 1
 5324 0014 1846     		mov	r0, r3
 5325 0016 80BD     		pop	{r7, pc}
 5326              		.cfi_endproc
 5327              	.LFE68:
 5329              		.section	.text.dwt_isr,"ax",%progbits
 5330              		.align	1
 5331              		.global	dwt_isr
 5332              		.syntax unified
 5333              		.thumb
 5334              		.thumb_func
 5335              		.fpu fpv4-sp-d16
 5337              	dwt_isr:
 5338              	.LFB69:
2354:Middlewares/Decawave/decadriver/deca_device.c **** 
2355:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2356:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_isr()
2357:Middlewares/Decawave/decadriver/deca_device.c ****  *
2358:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is the DW1000's general Interrupt Service Routine. It will process/report the follow
2359:Middlewares/Decawave/decadriver/deca_device.c ****  *          - RXFCG (through cbRxOk callback)
2360:Middlewares/Decawave/decadriver/deca_device.c ****  *          - TXFRS (through cbTxDone callback)
ARM GAS  /tmp/cc0TY0Fa.s 			page 134


2361:Middlewares/Decawave/decadriver/deca_device.c ****  *          - RXRFTO/RXPTO (through cbRxTo callback)
2362:Middlewares/Decawave/decadriver/deca_device.c ****  *          - RXPHE/RXFCE/RXRFSL/RXSFDTO/AFFREJ/LDEERR (through cbRxTo cbRxErr)
2363:Middlewares/Decawave/decadriver/deca_device.c ****  *        For all events, corresponding interrupts are cleared and necessary resets are performed. 
2364:Middlewares/Decawave/decadriver/deca_device.c ****  *        received frame information and frame control are read before calling the callback. If dou
2365:Middlewares/Decawave/decadriver/deca_device.c ****  *        will also toggle between reception buffers once the reception callback processing has end
2366:Middlewares/Decawave/decadriver/deca_device.c ****  *
2367:Middlewares/Decawave/decadriver/deca_device.c ****  *        /!\ This version of the ISR supports double buffering but does not support automatic RX r
2368:Middlewares/Decawave/decadriver/deca_device.c ****  *
2369:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE:  In PC based system using (Cheetah or ARM) USB to SPI converter there can be no interrupts
2370:Middlewares/Decawave/decadriver/deca_device.c ****  *        to take the place of it and operate in a polled way. In an embedded system this function 
2371:Middlewares/Decawave/decadriver/deca_device.c ****  *        on any of the interrupts described above.
2372:Middlewares/Decawave/decadriver/deca_device.c **** 
2373:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2374:Middlewares/Decawave/decadriver/deca_device.c ****  *
2375:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2376:Middlewares/Decawave/decadriver/deca_device.c ****  *
2377:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2378:Middlewares/Decawave/decadriver/deca_device.c ****  */
2379:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_isr(void)
2380:Middlewares/Decawave/decadriver/deca_device.c **** {
 5339              		.loc 1 2380 1
 5340              		.cfi_startproc
 5341              		@ args = 0, pretend = 0, frame = 16
 5342              		@ frame_needed = 1, uses_anonymous_args = 0
 5343 0000 90B5     		push	{r4, r7, lr}
 5344              	.LCFI308:
 5345              		.cfi_def_cfa_offset 12
 5346              		.cfi_offset 4, -12
 5347              		.cfi_offset 7, -8
 5348              		.cfi_offset 14, -4
 5349 0002 85B0     		sub	sp, sp, #20
 5350              	.LCFI309:
 5351              		.cfi_def_cfa_offset 32
 5352 0004 00AF     		add	r7, sp, #0
 5353              	.LCFI310:
 5354              		.cfi_def_cfa_register 7
2381:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 status = pdw1000local->cbData.status = dwt_read32bitreg(SYS_STATUS_ID); // Read status r
 5355              		.loc 1 2381 33
 5356 0006 724B     		ldr	r3, .L235
 5357 0008 1C68     		ldr	r4, [r3]
 5358              		.loc 1 2381 51
 5359 000a 0021     		movs	r1, #0
 5360 000c 0F20     		movs	r0, #15
 5361 000e FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5362 0012 0346     		mov	r3, r0
 5363              		.loc 1 2381 49
 5364 0014 E361     		str	r3, [r4, #28]
 5365              		.loc 1 2381 12
 5366 0016 E369     		ldr	r3, [r4, #28]
 5367 0018 BB60     		str	r3, [r7, #8]
2382:Middlewares/Decawave/decadriver/deca_device.c **** 
2383:Middlewares/Decawave/decadriver/deca_device.c ****     // Handle RX good frame event
2384:Middlewares/Decawave/decadriver/deca_device.c ****     if(status & SYS_STATUS_RXFCG)
 5368              		.loc 1 2384 15
 5369 001a BB68     		ldr	r3, [r7, #8]
 5370 001c 03F48043 		and	r3, r3, #16384
 5371              		.loc 1 2384 7
ARM GAS  /tmp/cc0TY0Fa.s 			page 135


 5372 0020 002B     		cmp	r3, #0
 5373 0022 6DD0     		beq	.L225
 5374              	.LBB3:
2385:Middlewares/Decawave/decadriver/deca_device.c ****     {
2386:Middlewares/Decawave/decadriver/deca_device.c ****         uint16 finfo16;
2387:Middlewares/Decawave/decadriver/deca_device.c ****         uint16 len;
2388:Middlewares/Decawave/decadriver/deca_device.c **** 
2389:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_GOOD); // Clear all receive status bits
 5375              		.loc 1 2389 9
 5376 0024 4FF4DE42 		mov	r2, #28416
 5377 0028 0021     		movs	r1, #0
 5378 002a 0F20     		movs	r0, #15
 5379 002c FFF7FEFF 		bl	dwt_write32bitoffsetreg
2390:Middlewares/Decawave/decadriver/deca_device.c **** 
2391:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->cbData.rx_flags = 0;
 5380              		.loc 1 2391 21
 5381 0030 674B     		ldr	r3, .L235
 5382 0032 1B68     		ldr	r3, [r3]
 5383              		.loc 1 2391 39
 5384 0034 0022     		movs	r2, #0
 5385 0036 83F82420 		strb	r2, [r3, #36]
2392:Middlewares/Decawave/decadriver/deca_device.c **** 
2393:Middlewares/Decawave/decadriver/deca_device.c ****         // Read frame info - Only the first two bytes of the register are used here.
2394:Middlewares/Decawave/decadriver/deca_device.c ****         finfo16 = dwt_read16bitoffsetreg(RX_FINFO_ID, RX_FINFO_OFFSET);
 5386              		.loc 1 2394 19
 5387 003a 0021     		movs	r1, #0
 5388 003c 1020     		movs	r0, #16
 5389 003e FFF7FEFF 		bl	dwt_read16bitoffsetreg
 5390 0042 0346     		mov	r3, r0
 5391 0044 FB80     		strh	r3, [r7, #6]	@ movhi
2395:Middlewares/Decawave/decadriver/deca_device.c **** 
2396:Middlewares/Decawave/decadriver/deca_device.c ****         // Report frame length - Standard frame length up to 127, extended frame length up to 1023 
2397:Middlewares/Decawave/decadriver/deca_device.c ****         len = finfo16 & RX_FINFO_RXFL_MASK_1023;
 5392              		.loc 1 2397 13
 5393 0046 FB88     		ldrh	r3, [r7, #6]	@ movhi
 5394 0048 C3F30903 		ubfx	r3, r3, #0, #10
 5395 004c FB81     		strh	r3, [r7, #14]	@ movhi
2398:Middlewares/Decawave/decadriver/deca_device.c ****         if(pdw1000local->longFrames == 0)
 5396              		.loc 1 2398 24
 5397 004e 604B     		ldr	r3, .L235
 5398 0050 1B68     		ldr	r3, [r3]
 5399 0052 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 5400              		.loc 1 2398 11
 5401 0054 002B     		cmp	r3, #0
 5402 0056 03D1     		bne	.L226
2399:Middlewares/Decawave/decadriver/deca_device.c ****         {
2400:Middlewares/Decawave/decadriver/deca_device.c ****             len &= RX_FINFO_RXFLEN_MASK;
 5403              		.loc 1 2400 17
 5404 0058 FB89     		ldrh	r3, [r7, #14]	@ movhi
 5405 005a 03F07F03 		and	r3, r3, #127
 5406 005e FB81     		strh	r3, [r7, #14]	@ movhi
 5407              	.L226:
2401:Middlewares/Decawave/decadriver/deca_device.c ****         }
2402:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->cbData.datalength = len;
 5408              		.loc 1 2402 21
 5409 0060 5B4B     		ldr	r3, .L235
 5410 0062 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cc0TY0Fa.s 			page 136


 5411              		.loc 1 2402 41
 5412 0064 FA89     		ldrh	r2, [r7, #14]	@ movhi
 5413 0066 1A84     		strh	r2, [r3, #32]	@ movhi
2403:Middlewares/Decawave/decadriver/deca_device.c **** 
2404:Middlewares/Decawave/decadriver/deca_device.c ****         // Report ranging bit
2405:Middlewares/Decawave/decadriver/deca_device.c ****         if(finfo16 & RX_FINFO_RNG)
 5414              		.loc 1 2405 12
 5415 0068 B7F90630 		ldrsh	r3, [r7, #6]
 5416              		.loc 1 2405 11
 5417 006c 002B     		cmp	r3, #0
 5418 006e 0ADA     		bge	.L227
2406:Middlewares/Decawave/decadriver/deca_device.c ****         {
2407:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->cbData.rx_flags |= DWT_CB_DATA_RX_FLAG_RNG;
 5419              		.loc 1 2407 43
 5420 0070 574B     		ldr	r3, .L235
 5421 0072 1B68     		ldr	r3, [r3]
 5422 0074 93F82420 		ldrb	r2, [r3, #36]	@ zero_extendqisi2
 5423 0078 554B     		ldr	r3, .L235
 5424 007a 1B68     		ldr	r3, [r3]
 5425 007c 42F00102 		orr	r2, r2, #1
 5426 0080 D2B2     		uxtb	r2, r2
 5427 0082 83F82420 		strb	r2, [r3, #36]
 5428              	.L227:
2408:Middlewares/Decawave/decadriver/deca_device.c ****         }
2409:Middlewares/Decawave/decadriver/deca_device.c **** 
2410:Middlewares/Decawave/decadriver/deca_device.c ****         // Report frame control - First bytes of the received frame.
2411:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_readfromdevice(RX_BUFFER_ID, 0, FCTRL_LEN_MAX, pdw1000local->cbData.fctrl);
 5429              		.loc 1 2411 72
 5430 0086 524B     		ldr	r3, .L235
 5431 0088 1B68     		ldr	r3, [r3]
 5432              		.loc 1 2411 80
 5433 008a 2233     		adds	r3, r3, #34
 5434              		.loc 1 2411 9
 5435 008c 0222     		movs	r2, #2
 5436 008e 0021     		movs	r1, #0
 5437 0090 1120     		movs	r0, #17
 5438 0092 FFF7FEFF 		bl	dwt_readfromdevice
2412:Middlewares/Decawave/decadriver/deca_device.c **** 
2413:Middlewares/Decawave/decadriver/deca_device.c ****         // Because of a previous frame not being received properly, AAT bit can be set upon the pro
2414:Middlewares/Decawave/decadriver/deca_device.c ****         // acknowledgement (ACK frame is not actually sent though). If the AAT bit is set, check AC
2415:Middlewares/Decawave/decadriver/deca_device.c ****         // implementation works only for IEEE802.15.4-2011 compliant frames).
2416:Middlewares/Decawave/decadriver/deca_device.c ****         // This issue is not documented at the time of writing this code. It should be in next rele
2417:Middlewares/Decawave/decadriver/deca_device.c ****         if((status & SYS_STATUS_AAT) && ((pdw1000local->cbData.fctrl[0] & FCTRL_ACK_REQ_MASK) == 0)
 5439              		.loc 1 2417 20
 5440 0096 BB68     		ldr	r3, [r7, #8]
 5441 0098 03F00803 		and	r3, r3, #8
 5442              		.loc 1 2417 11
 5443 009c 002B     		cmp	r3, #0
 5444 009e 18D0     		beq	.L228
 5445              		.loc 1 2417 55 discriminator 1
 5446 00a0 4B4B     		ldr	r3, .L235
 5447 00a2 1B68     		ldr	r3, [r3]
 5448              		.loc 1 2417 69 discriminator 1
 5449 00a4 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
 5450              		.loc 1 2417 73 discriminator 1
 5451 00a8 03F02003 		and	r3, r3, #32
 5452              		.loc 1 2417 38 discriminator 1
ARM GAS  /tmp/cc0TY0Fa.s 			page 137


 5453 00ac 002B     		cmp	r3, #0
 5454 00ae 10D1     		bne	.L228
2418:Middlewares/Decawave/decadriver/deca_device.c ****         {
2419:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_AAT); // Clear AAT status bit in register
 5455              		.loc 1 2419 13
 5456 00b0 0822     		movs	r2, #8
 5457 00b2 0021     		movs	r1, #0
 5458 00b4 0F20     		movs	r0, #15
 5459 00b6 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2420:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->cbData.status &= ~SYS_STATUS_AAT; // Clear AAT status bit in callback dat
 5460              		.loc 1 2420 41
 5461 00ba 454B     		ldr	r3, .L235
 5462 00bc 1B68     		ldr	r3, [r3]
 5463 00be DA69     		ldr	r2, [r3, #28]
 5464 00c0 434B     		ldr	r3, .L235
 5465 00c2 1B68     		ldr	r3, [r3]
 5466 00c4 22F00802 		bic	r2, r2, #8
 5467 00c8 DA61     		str	r2, [r3, #28]
2421:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->wait4resp = 0;
 5468              		.loc 1 2421 25
 5469 00ca 414B     		ldr	r3, .L235
 5470 00cc 1B68     		ldr	r3, [r3]
 5471              		.loc 1 2421 37
 5472 00ce 0022     		movs	r2, #0
 5473 00d0 5A75     		strb	r2, [r3, #21]
 5474              	.L228:
2422:Middlewares/Decawave/decadriver/deca_device.c ****         }
2423:Middlewares/Decawave/decadriver/deca_device.c **** 
2424:Middlewares/Decawave/decadriver/deca_device.c ****         // Call the corresponding callback if present
2425:Middlewares/Decawave/decadriver/deca_device.c ****         if(pdw1000local->cbRxOk != NULL)
 5475              		.loc 1 2425 24
 5476 00d2 3F4B     		ldr	r3, .L235
 5477 00d4 1B68     		ldr	r3, [r3]
 5478 00d6 DB6A     		ldr	r3, [r3, #44]
 5479              		.loc 1 2425 11
 5480 00d8 002B     		cmp	r3, #0
 5481 00da 07D0     		beq	.L229
2426:Middlewares/Decawave/decadriver/deca_device.c ****         {
2427:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->cbRxOk(&pdw1000local->cbData);
 5482              		.loc 1 2427 25
 5483 00dc 3C4B     		ldr	r3, .L235
 5484 00de 1B68     		ldr	r3, [r3]
 5485 00e0 DB6A     		ldr	r3, [r3, #44]
 5486              		.loc 1 2427 47
 5487 00e2 3B4A     		ldr	r2, .L235
 5488 00e4 1268     		ldr	r2, [r2]
 5489              		.loc 1 2427 34
 5490 00e6 1C32     		adds	r2, r2, #28
 5491              		.loc 1 2427 13
 5492 00e8 1046     		mov	r0, r2
 5493 00ea 9847     		blx	r3
 5494              	.LVL0:
 5495              	.L229:
2428:Middlewares/Decawave/decadriver/deca_device.c ****         }
2429:Middlewares/Decawave/decadriver/deca_device.c **** 
2430:Middlewares/Decawave/decadriver/deca_device.c ****         if (pdw1000local->dblbuffon)
 5496              		.loc 1 2430 25
ARM GAS  /tmp/cc0TY0Fa.s 			page 138


 5497 00ec 384B     		ldr	r3, .L235
 5498 00ee 1B68     		ldr	r3, [r3]
 5499 00f0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 5500              		.loc 1 2430 12
 5501 00f2 002B     		cmp	r3, #0
 5502 00f4 04D0     		beq	.L225
2431:Middlewares/Decawave/decadriver/deca_device.c ****         {
2432:Middlewares/Decawave/decadriver/deca_device.c ****             // Toggle the Host side Receive Buffer Pointer
2433:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_HRBT_OFFSET, 1);
 5503              		.loc 1 2433 13
 5504 00f6 0122     		movs	r2, #1
 5505 00f8 0321     		movs	r1, #3
 5506 00fa 0D20     		movs	r0, #13
 5507 00fc FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5508              	.L225:
 5509              	.LBE3:
2434:Middlewares/Decawave/decadriver/deca_device.c ****         }
2435:Middlewares/Decawave/decadriver/deca_device.c ****     }
2436:Middlewares/Decawave/decadriver/deca_device.c **** 
2437:Middlewares/Decawave/decadriver/deca_device.c ****     // Handle TX confirmation event
2438:Middlewares/Decawave/decadriver/deca_device.c ****     if(status & SYS_STATUS_TXFRS)
 5510              		.loc 1 2438 15
 5511 0100 BB68     		ldr	r3, [r7, #8]
 5512 0102 03F08003 		and	r3, r3, #128
 5513              		.loc 1 2438 7
 5514 0106 002B     		cmp	r3, #0
 5515 0108 1FD0     		beq	.L230
2439:Middlewares/Decawave/decadriver/deca_device.c ****     {
2440:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_TX); // Clear TX event bits
 5516              		.loc 1 2440 9
 5517 010a F822     		movs	r2, #248
 5518 010c 0021     		movs	r1, #0
 5519 010e 0F20     		movs	r0, #15
 5520 0110 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2441:Middlewares/Decawave/decadriver/deca_device.c **** 
2442:Middlewares/Decawave/decadriver/deca_device.c ****         // In the case where this TXFRS interrupt is due to the automatic transmission of an ACK so
2443:Middlewares/Decawave/decadriver/deca_device.c ****         // that we receive through using wait4resp to a previous TX (and assuming that the IRQ proc
2444:Middlewares/Decawave/decadriver/deca_device.c ****         // we need to handle the IC issue which turns on the RX again in this situation (i.e. becau
2445:Middlewares/Decawave/decadriver/deca_device.c ****         // ACK TX).
2446:Middlewares/Decawave/decadriver/deca_device.c ****         // See section "Transmit and automatically wait for response" in DW1000 User Manual
2447:Middlewares/Decawave/decadriver/deca_device.c ****         if((status & SYS_STATUS_AAT) && pdw1000local->wait4resp)
 5521              		.loc 1 2447 20
 5522 0114 BB68     		ldr	r3, [r7, #8]
 5523 0116 03F00803 		and	r3, r3, #8
 5524              		.loc 1 2447 11
 5525 011a 002B     		cmp	r3, #0
 5526 011c 08D0     		beq	.L231
 5527              		.loc 1 2447 53 discriminator 1
 5528 011e 2C4B     		ldr	r3, .L235
 5529 0120 1B68     		ldr	r3, [r3]
 5530 0122 5B7D     		ldrb	r3, [r3, #21]	@ zero_extendqisi2
 5531              		.loc 1 2447 38 discriminator 1
 5532 0124 002B     		cmp	r3, #0
 5533 0126 03D0     		beq	.L231
2448:Middlewares/Decawave/decadriver/deca_device.c ****         {
2449:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_forcetrxoff(); // Turn the RX off
 5534              		.loc 1 2449 13
ARM GAS  /tmp/cc0TY0Fa.s 			page 139


 5535 0128 FFF7FEFF 		bl	dwt_forcetrxoff
2450:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_rxreset(); // Reset in case we were late and a frame was already being received
 5536              		.loc 1 2450 13
 5537 012c FFF7FEFF 		bl	dwt_rxreset
 5538              	.L231:
2451:Middlewares/Decawave/decadriver/deca_device.c ****         }
2452:Middlewares/Decawave/decadriver/deca_device.c **** 
2453:Middlewares/Decawave/decadriver/deca_device.c ****         // Call the corresponding callback if present
2454:Middlewares/Decawave/decadriver/deca_device.c ****         if(pdw1000local->cbTxDone != NULL)
 5539              		.loc 1 2454 24
 5540 0130 274B     		ldr	r3, .L235
 5541 0132 1B68     		ldr	r3, [r3]
 5542 0134 9B6A     		ldr	r3, [r3, #40]
 5543              		.loc 1 2454 11
 5544 0136 002B     		cmp	r3, #0
 5545 0138 07D0     		beq	.L230
2455:Middlewares/Decawave/decadriver/deca_device.c ****         {
2456:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->cbTxDone(&pdw1000local->cbData);
 5546              		.loc 1 2456 25
 5547 013a 254B     		ldr	r3, .L235
 5548 013c 1B68     		ldr	r3, [r3]
 5549 013e 9B6A     		ldr	r3, [r3, #40]
 5550              		.loc 1 2456 49
 5551 0140 234A     		ldr	r2, .L235
 5552 0142 1268     		ldr	r2, [r2]
 5553              		.loc 1 2456 36
 5554 0144 1C32     		adds	r2, r2, #28
 5555              		.loc 1 2456 13
 5556 0146 1046     		mov	r0, r2
 5557 0148 9847     		blx	r3
 5558              	.LVL1:
 5559              	.L230:
2457:Middlewares/Decawave/decadriver/deca_device.c ****         }
2458:Middlewares/Decawave/decadriver/deca_device.c ****     }
2459:Middlewares/Decawave/decadriver/deca_device.c **** 
2460:Middlewares/Decawave/decadriver/deca_device.c ****     // Handle frame reception/preamble detect timeout events
2461:Middlewares/Decawave/decadriver/deca_device.c ****     if(status & SYS_STATUS_ALL_RX_TO)
 5560              		.loc 1 2461 15
 5561 014a BB68     		ldr	r3, [r7, #8]
 5562 014c 03F40813 		and	r3, r3, #2228224
 5563              		.loc 1 2461 7
 5564 0150 002B     		cmp	r3, #0
 5565 0152 1AD0     		beq	.L232
2462:Middlewares/Decawave/decadriver/deca_device.c ****     {
2463:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_RXRFTO); // Clear RX timeout event bits
 5566              		.loc 1 2463 9
 5567 0154 4FF40032 		mov	r2, #131072
 5568 0158 0021     		movs	r1, #0
 5569 015a 0F20     		movs	r0, #15
 5570 015c FFF7FEFF 		bl	dwt_write32bitoffsetreg
2464:Middlewares/Decawave/decadriver/deca_device.c **** 
2465:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->wait4resp = 0;
 5571              		.loc 1 2465 21
 5572 0160 1B4B     		ldr	r3, .L235
 5573 0162 1B68     		ldr	r3, [r3]
 5574              		.loc 1 2465 33
 5575 0164 0022     		movs	r2, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 140


 5576 0166 5A75     		strb	r2, [r3, #21]
2466:Middlewares/Decawave/decadriver/deca_device.c **** 
2467:Middlewares/Decawave/decadriver/deca_device.c ****         // Because of an issue with receiver restart after error conditions, an RX reset must be ap
2468:Middlewares/Decawave/decadriver/deca_device.c ****         // the next good frame's timestamp is computed correctly.
2469:Middlewares/Decawave/decadriver/deca_device.c ****         // See section "RX Message timestamp" in DW1000 User Manual.
2470:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_forcetrxoff();
 5577              		.loc 1 2470 9
 5578 0168 FFF7FEFF 		bl	dwt_forcetrxoff
2471:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_rxreset();
 5579              		.loc 1 2471 9
 5580 016c FFF7FEFF 		bl	dwt_rxreset
2472:Middlewares/Decawave/decadriver/deca_device.c **** 
2473:Middlewares/Decawave/decadriver/deca_device.c ****         // Call the corresponding callback if present
2474:Middlewares/Decawave/decadriver/deca_device.c ****         if(pdw1000local->cbRxTo != NULL)
 5581              		.loc 1 2474 24
 5582 0170 174B     		ldr	r3, .L235
 5583 0172 1B68     		ldr	r3, [r3]
 5584 0174 1B6B     		ldr	r3, [r3, #48]
 5585              		.loc 1 2474 11
 5586 0176 002B     		cmp	r3, #0
 5587 0178 07D0     		beq	.L232
2475:Middlewares/Decawave/decadriver/deca_device.c ****         {
2476:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->cbRxTo(&pdw1000local->cbData);
 5588              		.loc 1 2476 25
 5589 017a 154B     		ldr	r3, .L235
 5590 017c 1B68     		ldr	r3, [r3]
 5591 017e 1B6B     		ldr	r3, [r3, #48]
 5592              		.loc 1 2476 47
 5593 0180 134A     		ldr	r2, .L235
 5594 0182 1268     		ldr	r2, [r2]
 5595              		.loc 1 2476 34
 5596 0184 1C32     		adds	r2, r2, #28
 5597              		.loc 1 2476 13
 5598 0186 1046     		mov	r0, r2
 5599 0188 9847     		blx	r3
 5600              	.LVL2:
 5601              	.L232:
2477:Middlewares/Decawave/decadriver/deca_device.c ****         }
2478:Middlewares/Decawave/decadriver/deca_device.c ****     }
2479:Middlewares/Decawave/decadriver/deca_device.c **** 
2480:Middlewares/Decawave/decadriver/deca_device.c ****     // Handle RX errors events
2481:Middlewares/Decawave/decadriver/deca_device.c ****     if(status & SYS_STATUS_ALL_RX_ERR)
 5602              		.loc 1 2481 15
 5603 018a BA68     		ldr	r2, [r7, #8]
 5604 018c 114B     		ldr	r3, .L235+4
 5605 018e 1340     		ands	r3, r3, r2
 5606              		.loc 1 2481 7
 5607 0190 002B     		cmp	r3, #0
 5608 0192 19D0     		beq	.L234
2482:Middlewares/Decawave/decadriver/deca_device.c ****     {
2483:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_ERR); // Clear RX error event bits
 5609              		.loc 1 2483 9
 5610 0194 0F4A     		ldr	r2, .L235+4
 5611 0196 0021     		movs	r1, #0
 5612 0198 0F20     		movs	r0, #15
 5613 019a FFF7FEFF 		bl	dwt_write32bitoffsetreg
2484:Middlewares/Decawave/decadriver/deca_device.c **** 
ARM GAS  /tmp/cc0TY0Fa.s 			page 141


2485:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->wait4resp = 0;
 5614              		.loc 1 2485 21
 5615 019e 0C4B     		ldr	r3, .L235
 5616 01a0 1B68     		ldr	r3, [r3]
 5617              		.loc 1 2485 33
 5618 01a2 0022     		movs	r2, #0
 5619 01a4 5A75     		strb	r2, [r3, #21]
2486:Middlewares/Decawave/decadriver/deca_device.c **** 
2487:Middlewares/Decawave/decadriver/deca_device.c ****         // Because of an issue with receiver restart after error conditions, an RX reset must be ap
2488:Middlewares/Decawave/decadriver/deca_device.c ****         // the next good frame's timestamp is computed correctly.
2489:Middlewares/Decawave/decadriver/deca_device.c ****         // See section "RX Message timestamp" in DW1000 User Manual.
2490:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_forcetrxoff();
 5620              		.loc 1 2490 9
 5621 01a6 FFF7FEFF 		bl	dwt_forcetrxoff
2491:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_rxreset();
 5622              		.loc 1 2491 9
 5623 01aa FFF7FEFF 		bl	dwt_rxreset
2492:Middlewares/Decawave/decadriver/deca_device.c **** 
2493:Middlewares/Decawave/decadriver/deca_device.c ****         // Call the corresponding callback if present
2494:Middlewares/Decawave/decadriver/deca_device.c ****         if(pdw1000local->cbRxErr != NULL)
 5624              		.loc 1 2494 24
 5625 01ae 084B     		ldr	r3, .L235
 5626 01b0 1B68     		ldr	r3, [r3]
 5627 01b2 5B6B     		ldr	r3, [r3, #52]
 5628              		.loc 1 2494 11
 5629 01b4 002B     		cmp	r3, #0
 5630 01b6 07D0     		beq	.L234
2495:Middlewares/Decawave/decadriver/deca_device.c ****         {
2496:Middlewares/Decawave/decadriver/deca_device.c ****             pdw1000local->cbRxErr(&pdw1000local->cbData);
 5631              		.loc 1 2496 25
 5632 01b8 054B     		ldr	r3, .L235
 5633 01ba 1B68     		ldr	r3, [r3]
 5634 01bc 5B6B     		ldr	r3, [r3, #52]
 5635              		.loc 1 2496 48
 5636 01be 044A     		ldr	r2, .L235
 5637 01c0 1268     		ldr	r2, [r2]
 5638              		.loc 1 2496 35
 5639 01c2 1C32     		adds	r2, r2, #28
 5640              		.loc 1 2496 13
 5641 01c4 1046     		mov	r0, r2
 5642 01c6 9847     		blx	r3
 5643              	.LVL3:
 5644              	.L234:
2497:Middlewares/Decawave/decadriver/deca_device.c ****         }
2498:Middlewares/Decawave/decadriver/deca_device.c ****     }
2499:Middlewares/Decawave/decadriver/deca_device.c **** }
 5645              		.loc 1 2499 1
 5646 01c8 00BF     		nop
 5647 01ca 1437     		adds	r7, r7, #20
 5648              	.LCFI311:
 5649              		.cfi_def_cfa_offset 12
 5650 01cc BD46     		mov	sp, r7
 5651              	.LCFI312:
 5652              		.cfi_def_cfa_register 13
 5653              		@ sp needed
 5654 01ce 90BD     		pop	{r4, r7, pc}
 5655              	.L236:
ARM GAS  /tmp/cc0TY0Fa.s 			page 142


 5656              		.align	2
 5657              	.L235:
 5658 01d0 00000000 		.word	pdw1000local
 5659 01d4 00900524 		.word	604344320
 5660              		.cfi_endproc
 5661              	.LFE69:
 5663              		.section	.text.dwt_lowpowerlistenisr,"ax",%progbits
 5664              		.align	1
 5665              		.global	dwt_lowpowerlistenisr
 5666              		.syntax unified
 5667              		.thumb
 5668              		.thumb_func
 5669              		.fpu fpv4-sp-d16
 5671              	dwt_lowpowerlistenisr:
 5672              	.LFB70:
2500:Middlewares/Decawave/decadriver/deca_device.c **** 
2501:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2502:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_isr_lplisten()
2503:Middlewares/Decawave/decadriver/deca_device.c ****  *
2504:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is the DW1000's Interrupt Service Routine to use when low-power listening scheme is 
2505:Middlewares/Decawave/decadriver/deca_device.c ****  *        only process/report the RXFCG event (through cbRxOk callback).
2506:Middlewares/Decawave/decadriver/deca_device.c ****  *        It clears RXFCG interrupt and reads received frame information and frame control before c
2507:Middlewares/Decawave/decadriver/deca_device.c ****  *
2508:Middlewares/Decawave/decadriver/deca_device.c ****  *        /!\ This version of the ISR is designed for single buffering case only!
2509:Middlewares/Decawave/decadriver/deca_device.c ****  *
2510:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2511:Middlewares/Decawave/decadriver/deca_device.c ****  *
2512:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2513:Middlewares/Decawave/decadriver/deca_device.c ****  *
2514:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2515:Middlewares/Decawave/decadriver/deca_device.c ****  */
2516:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_lowpowerlistenisr(void)
2517:Middlewares/Decawave/decadriver/deca_device.c **** {
 5673              		.loc 1 2517 1
 5674              		.cfi_startproc
 5675              		@ args = 0, pretend = 0, frame = 16
 5676              		@ frame_needed = 1, uses_anonymous_args = 0
 5677 0000 90B5     		push	{r4, r7, lr}
 5678              	.LCFI313:
 5679              		.cfi_def_cfa_offset 12
 5680              		.cfi_offset 4, -12
 5681              		.cfi_offset 7, -8
 5682              		.cfi_offset 14, -4
 5683 0002 85B0     		sub	sp, sp, #20
 5684              	.LCFI314:
 5685              		.cfi_def_cfa_offset 32
 5686 0004 00AF     		add	r7, sp, #0
 5687              	.LCFI315:
 5688              		.cfi_def_cfa_register 7
2518:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 status = pdw1000local->cbData.status = dwt_read32bitreg(SYS_STATUS_ID); // Read status r
 5689              		.loc 1 2518 33
 5690 0006 3A4B     		ldr	r3, .L243
 5691 0008 1C68     		ldr	r4, [r3]
 5692              		.loc 1 2518 51
 5693 000a 0021     		movs	r1, #0
 5694 000c 0F20     		movs	r0, #15
 5695 000e FFF7FEFF 		bl	dwt_read32bitoffsetreg
ARM GAS  /tmp/cc0TY0Fa.s 			page 143


 5696 0012 0346     		mov	r3, r0
 5697              		.loc 1 2518 49
 5698 0014 E361     		str	r3, [r4, #28]
 5699              		.loc 1 2518 12
 5700 0016 E369     		ldr	r3, [r4, #28]
 5701 0018 BB60     		str	r3, [r7, #8]
2519:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 finfo16;
2520:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 len;
2521:Middlewares/Decawave/decadriver/deca_device.c **** 
2522:Middlewares/Decawave/decadriver/deca_device.c ****     // The only interrupt handled when in low-power listening mode is RX good frame so proceed dire
2523:Middlewares/Decawave/decadriver/deca_device.c **** 
2524:Middlewares/Decawave/decadriver/deca_device.c ****     // Deactivate low-power listening before clearing the interrupt. If not, the DW1000 will go bac
2525:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_setlowpowerlistening(0);
 5702              		.loc 1 2525 5
 5703 001a 0020     		movs	r0, #0
 5704 001c FFF7FEFF 		bl	dwt_setlowpowerlistening
2526:Middlewares/Decawave/decadriver/deca_device.c **** 
2527:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_GOOD); // Clear all receive status bits
 5705              		.loc 1 2527 5
 5706 0020 4FF4DE42 		mov	r2, #28416
 5707 0024 0021     		movs	r1, #0
 5708 0026 0F20     		movs	r0, #15
 5709 0028 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2528:Middlewares/Decawave/decadriver/deca_device.c **** 
2529:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbData.rx_flags = 0;
 5710              		.loc 1 2529 17
 5711 002c 304B     		ldr	r3, .L243
 5712 002e 1B68     		ldr	r3, [r3]
 5713              		.loc 1 2529 35
 5714 0030 0022     		movs	r2, #0
 5715 0032 83F82420 		strb	r2, [r3, #36]
2530:Middlewares/Decawave/decadriver/deca_device.c **** 
2531:Middlewares/Decawave/decadriver/deca_device.c ****     // Read frame info - Only the first two bytes of the register are used here.
2532:Middlewares/Decawave/decadriver/deca_device.c ****     finfo16 = dwt_read16bitoffsetreg(RX_FINFO_ID, 0);
 5716              		.loc 1 2532 15
 5717 0036 0021     		movs	r1, #0
 5718 0038 1020     		movs	r0, #16
 5719 003a FFF7FEFF 		bl	dwt_read16bitoffsetreg
 5720 003e 0346     		mov	r3, r0
 5721 0040 FB80     		strh	r3, [r7, #6]	@ movhi
2533:Middlewares/Decawave/decadriver/deca_device.c **** 
2534:Middlewares/Decawave/decadriver/deca_device.c ****     // Report frame length - Standard frame length up to 127, extended frame length up to 1023 byte
2535:Middlewares/Decawave/decadriver/deca_device.c ****     len = finfo16 & RX_FINFO_RXFL_MASK_1023;
 5722              		.loc 1 2535 9
 5723 0042 FB88     		ldrh	r3, [r7, #6]	@ movhi
 5724 0044 C3F30903 		ubfx	r3, r3, #0, #10
 5725 0048 FB81     		strh	r3, [r7, #14]	@ movhi
2536:Middlewares/Decawave/decadriver/deca_device.c ****     if(pdw1000local->longFrames == 0)
 5726              		.loc 1 2536 20
 5727 004a 294B     		ldr	r3, .L243
 5728 004c 1B68     		ldr	r3, [r3]
 5729 004e 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 5730              		.loc 1 2536 7
 5731 0050 002B     		cmp	r3, #0
 5732 0052 03D1     		bne	.L238
2537:Middlewares/Decawave/decadriver/deca_device.c ****     {
2538:Middlewares/Decawave/decadriver/deca_device.c ****         len &= RX_FINFO_RXFLEN_MASK;
ARM GAS  /tmp/cc0TY0Fa.s 			page 144


 5733              		.loc 1 2538 13
 5734 0054 FB89     		ldrh	r3, [r7, #14]	@ movhi
 5735 0056 03F07F03 		and	r3, r3, #127
 5736 005a FB81     		strh	r3, [r7, #14]	@ movhi
 5737              	.L238:
2539:Middlewares/Decawave/decadriver/deca_device.c ****     }
2540:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->cbData.datalength = len;
 5738              		.loc 1 2540 17
 5739 005c 244B     		ldr	r3, .L243
 5740 005e 1B68     		ldr	r3, [r3]
 5741              		.loc 1 2540 37
 5742 0060 FA89     		ldrh	r2, [r7, #14]	@ movhi
 5743 0062 1A84     		strh	r2, [r3, #32]	@ movhi
2541:Middlewares/Decawave/decadriver/deca_device.c **** 
2542:Middlewares/Decawave/decadriver/deca_device.c ****     // Report ranging bit
2543:Middlewares/Decawave/decadriver/deca_device.c ****     if(finfo16 & RX_FINFO_RNG)
 5744              		.loc 1 2543 8
 5745 0064 B7F90630 		ldrsh	r3, [r7, #6]
 5746              		.loc 1 2543 7
 5747 0068 002B     		cmp	r3, #0
 5748 006a 0ADA     		bge	.L239
2544:Middlewares/Decawave/decadriver/deca_device.c ****     {
2545:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->cbData.rx_flags |= DWT_CB_DATA_RX_FLAG_RNG;
 5749              		.loc 1 2545 39
 5750 006c 204B     		ldr	r3, .L243
 5751 006e 1B68     		ldr	r3, [r3]
 5752 0070 93F82420 		ldrb	r2, [r3, #36]	@ zero_extendqisi2
 5753 0074 1E4B     		ldr	r3, .L243
 5754 0076 1B68     		ldr	r3, [r3]
 5755 0078 42F00102 		orr	r2, r2, #1
 5756 007c D2B2     		uxtb	r2, r2
 5757 007e 83F82420 		strb	r2, [r3, #36]
 5758              	.L239:
2546:Middlewares/Decawave/decadriver/deca_device.c ****     }
2547:Middlewares/Decawave/decadriver/deca_device.c **** 
2548:Middlewares/Decawave/decadriver/deca_device.c ****     // Report frame control - First bytes of the received frame.
2549:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(RX_BUFFER_ID, 0, FCTRL_LEN_MAX, pdw1000local->cbData.fctrl);
 5759              		.loc 1 2549 68
 5760 0082 1B4B     		ldr	r3, .L243
 5761 0084 1B68     		ldr	r3, [r3]
 5762              		.loc 1 2549 76
 5763 0086 2233     		adds	r3, r3, #34
 5764              		.loc 1 2549 5
 5765 0088 0222     		movs	r2, #2
 5766 008a 0021     		movs	r1, #0
 5767 008c 1120     		movs	r0, #17
 5768 008e FFF7FEFF 		bl	dwt_readfromdevice
2550:Middlewares/Decawave/decadriver/deca_device.c **** 
2551:Middlewares/Decawave/decadriver/deca_device.c ****     // Because of a previous frame not being received properly, AAT bit can be set upon the proper 
2552:Middlewares/Decawave/decadriver/deca_device.c ****     // acknowledgement (ACK frame is not actually sent though). If the AAT bit is set, check ACK re
2553:Middlewares/Decawave/decadriver/deca_device.c ****     // implementation works only for IEEE802.15.4-2011 compliant frames).
2554:Middlewares/Decawave/decadriver/deca_device.c ****     // This issue is not documented at the time of writing this code. It should be in next release 
2555:Middlewares/Decawave/decadriver/deca_device.c ****     if((status & SYS_STATUS_AAT) && ((pdw1000local->cbData.fctrl[0] & FCTRL_ACK_REQ_MASK) == 0))
 5769              		.loc 1 2555 16
 5770 0092 BB68     		ldr	r3, [r7, #8]
 5771 0094 03F00803 		and	r3, r3, #8
 5772              		.loc 1 2555 7
ARM GAS  /tmp/cc0TY0Fa.s 			page 145


 5773 0098 002B     		cmp	r3, #0
 5774 009a 18D0     		beq	.L240
 5775              		.loc 1 2555 51 discriminator 1
 5776 009c 144B     		ldr	r3, .L243
 5777 009e 1B68     		ldr	r3, [r3]
 5778              		.loc 1 2555 65 discriminator 1
 5779 00a0 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
 5780              		.loc 1 2555 69 discriminator 1
 5781 00a4 03F02003 		and	r3, r3, #32
 5782              		.loc 1 2555 34 discriminator 1
 5783 00a8 002B     		cmp	r3, #0
 5784 00aa 10D1     		bne	.L240
2556:Middlewares/Decawave/decadriver/deca_device.c ****     {
2557:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_AAT); // Clear AAT status bit in register
 5785              		.loc 1 2557 9
 5786 00ac 0822     		movs	r2, #8
 5787 00ae 0021     		movs	r1, #0
 5788 00b0 0F20     		movs	r0, #15
 5789 00b2 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2558:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->cbData.status &= ~SYS_STATUS_AAT; // Clear AAT status bit in callback data re
 5790              		.loc 1 2558 37
 5791 00b6 0E4B     		ldr	r3, .L243
 5792 00b8 1B68     		ldr	r3, [r3]
 5793 00ba DA69     		ldr	r2, [r3, #28]
 5794 00bc 0C4B     		ldr	r3, .L243
 5795 00be 1B68     		ldr	r3, [r3]
 5796 00c0 22F00802 		bic	r2, r2, #8
 5797 00c4 DA61     		str	r2, [r3, #28]
2559:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->wait4resp = 0;
 5798              		.loc 1 2559 21
 5799 00c6 0A4B     		ldr	r3, .L243
 5800 00c8 1B68     		ldr	r3, [r3]
 5801              		.loc 1 2559 33
 5802 00ca 0022     		movs	r2, #0
 5803 00cc 5A75     		strb	r2, [r3, #21]
 5804              	.L240:
2560:Middlewares/Decawave/decadriver/deca_device.c ****     }
2561:Middlewares/Decawave/decadriver/deca_device.c **** 
2562:Middlewares/Decawave/decadriver/deca_device.c ****     // Call the corresponding callback if present
2563:Middlewares/Decawave/decadriver/deca_device.c ****     if(pdw1000local->cbRxOk != NULL)
 5805              		.loc 1 2563 20
 5806 00ce 084B     		ldr	r3, .L243
 5807 00d0 1B68     		ldr	r3, [r3]
 5808 00d2 DB6A     		ldr	r3, [r3, #44]
 5809              		.loc 1 2563 7
 5810 00d4 002B     		cmp	r3, #0
 5811 00d6 07D0     		beq	.L242
2564:Middlewares/Decawave/decadriver/deca_device.c ****     {
2565:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->cbRxOk(&pdw1000local->cbData);
 5812              		.loc 1 2565 21
 5813 00d8 054B     		ldr	r3, .L243
 5814 00da 1B68     		ldr	r3, [r3]
 5815 00dc DB6A     		ldr	r3, [r3, #44]
 5816              		.loc 1 2565 43
 5817 00de 044A     		ldr	r2, .L243
 5818 00e0 1268     		ldr	r2, [r2]
 5819              		.loc 1 2565 30
ARM GAS  /tmp/cc0TY0Fa.s 			page 146


 5820 00e2 1C32     		adds	r2, r2, #28
 5821              		.loc 1 2565 9
 5822 00e4 1046     		mov	r0, r2
 5823 00e6 9847     		blx	r3
 5824              	.LVL4:
 5825              	.L242:
2566:Middlewares/Decawave/decadriver/deca_device.c ****     }
2567:Middlewares/Decawave/decadriver/deca_device.c **** }
 5826              		.loc 1 2567 1
 5827 00e8 00BF     		nop
 5828 00ea 1437     		adds	r7, r7, #20
 5829              	.LCFI316:
 5830              		.cfi_def_cfa_offset 12
 5831 00ec BD46     		mov	sp, r7
 5832              	.LCFI317:
 5833              		.cfi_def_cfa_register 13
 5834              		@ sp needed
 5835 00ee 90BD     		pop	{r4, r7, pc}
 5836              	.L244:
 5837              		.align	2
 5838              	.L243:
 5839 00f0 00000000 		.word	pdw1000local
 5840              		.cfi_endproc
 5841              	.LFE70:
 5843              		.section	.text.dwt_setleds,"ax",%progbits
 5844              		.align	1
 5845              		.global	dwt_setleds
 5846              		.syntax unified
 5847              		.thumb
 5848              		.thumb_func
 5849              		.fpu fpv4-sp-d16
 5851              	dwt_setleds:
 5852              	.LFB71:
2568:Middlewares/Decawave/decadriver/deca_device.c **** 
2569:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2570:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setleds()
2571:Middlewares/Decawave/decadriver/deca_device.c ****  *
2572:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to set up Tx/Rx GPIOs which could be used to control LEDs
2573:Middlewares/Decawave/decadriver/deca_device.c ****  * Note: not completely IC dependent, also needs board with LEDS fitted on right I/O lines
2574:Middlewares/Decawave/decadriver/deca_device.c ****  *       this function enables GPIOs 2 and 3 which are connected to LED3 and LED4 on EVB1000
2575:Middlewares/Decawave/decadriver/deca_device.c ****  *
2576:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2577:Middlewares/Decawave/decadriver/deca_device.c ****  * @param mode - this is a bit field interpreted as follows:
2578:Middlewares/Decawave/decadriver/deca_device.c ****  *          - bit 0: 1 to enable LEDs, 0 to disable them
2579:Middlewares/Decawave/decadriver/deca_device.c ****  *          - bit 1: 1 to make LEDs blink once on init. Only valid if bit 0 is set (enable LEDs)
2580:Middlewares/Decawave/decadriver/deca_device.c ****  *          - bit 2 to 7: reserved
2581:Middlewares/Decawave/decadriver/deca_device.c ****  *
2582:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters none
2583:Middlewares/Decawave/decadriver/deca_device.c ****  *
2584:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2585:Middlewares/Decawave/decadriver/deca_device.c ****  */
2586:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setleds(uint8 mode)
2587:Middlewares/Decawave/decadriver/deca_device.c **** {
 5853              		.loc 1 2587 1
 5854              		.cfi_startproc
 5855              		@ args = 0, pretend = 0, frame = 16
 5856              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/cc0TY0Fa.s 			page 147


 5857 0000 80B5     		push	{r7, lr}
 5858              	.LCFI318:
 5859              		.cfi_def_cfa_offset 8
 5860              		.cfi_offset 7, -8
 5861              		.cfi_offset 14, -4
 5862 0002 84B0     		sub	sp, sp, #16
 5863              	.LCFI319:
 5864              		.cfi_def_cfa_offset 24
 5865 0004 00AF     		add	r7, sp, #0
 5866              	.LCFI320:
 5867              		.cfi_def_cfa_register 7
 5868 0006 0346     		mov	r3, r0
 5869 0008 FB71     		strb	r3, [r7, #7]
2588:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 reg;
2589:Middlewares/Decawave/decadriver/deca_device.c **** 
2590:Middlewares/Decawave/decadriver/deca_device.c ****     if (mode & DWT_LEDS_ENABLE)
 5870              		.loc 1 2590 14
 5871 000a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5872 000c 03F00103 		and	r3, r3, #1
 5873              		.loc 1 2590 8
 5874 0010 002B     		cmp	r3, #0
 5875 0012 3FD0     		beq	.L246
2591:Middlewares/Decawave/decadriver/deca_device.c ****     {
2592:Middlewares/Decawave/decadriver/deca_device.c ****         // Set up MFIO for LED output.
2593:Middlewares/Decawave/decadriver/deca_device.c ****         reg = dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET);
 5876              		.loc 1 2593 15
 5877 0014 0021     		movs	r1, #0
 5878 0016 2620     		movs	r0, #38
 5879 0018 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5880 001c F860     		str	r0, [r7, #12]
2594:Middlewares/Decawave/decadriver/deca_device.c ****         reg &= ~(GPIO_MSGP2_MASK | GPIO_MSGP3_MASK);
 5881              		.loc 1 2594 13
 5882 001e FB68     		ldr	r3, [r7, #12]
 5883 0020 23F47053 		bic	r3, r3, #15360
 5884 0024 FB60     		str	r3, [r7, #12]
2595:Middlewares/Decawave/decadriver/deca_device.c ****         reg |= (GPIO_PIN2_RXLED | GPIO_PIN3_TXLED);
 5885              		.loc 1 2595 13
 5886 0026 FB68     		ldr	r3, [r7, #12]
 5887 0028 43F4A053 		orr	r3, r3, #5120
 5888 002c FB60     		str	r3, [r7, #12]
2596:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET, reg);
 5889              		.loc 1 2596 9
 5890 002e FA68     		ldr	r2, [r7, #12]
 5891 0030 0021     		movs	r1, #0
 5892 0032 2620     		movs	r0, #38
 5893 0034 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2597:Middlewares/Decawave/decadriver/deca_device.c **** 
2598:Middlewares/Decawave/decadriver/deca_device.c ****         // Enable LP Oscillator to run from counter and turn on de-bounce clock.
2599:Middlewares/Decawave/decadriver/deca_device.c ****         reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 5894              		.loc 1 2599 15
 5895 0038 0021     		movs	r1, #0
 5896 003a 3620     		movs	r0, #54
 5897 003c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5898 0040 F860     		str	r0, [r7, #12]
2600:Middlewares/Decawave/decadriver/deca_device.c ****         reg |= (PMSC_CTRL0_GPDCE | PMSC_CTRL0_KHZCLEN);
 5899              		.loc 1 2600 13
 5900 0042 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cc0TY0Fa.s 			page 148


 5901 0044 43F40403 		orr	r3, r3, #8650752
 5902 0048 FB60     		str	r3, [r7, #12]
2601:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, reg);
 5903              		.loc 1 2601 9
 5904 004a FA68     		ldr	r2, [r7, #12]
 5905 004c 0021     		movs	r1, #0
 5906 004e 3620     		movs	r0, #54
 5907 0050 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2602:Middlewares/Decawave/decadriver/deca_device.c **** 
2603:Middlewares/Decawave/decadriver/deca_device.c ****         // Enable LEDs to blink and set default blink time.
2604:Middlewares/Decawave/decadriver/deca_device.c ****         reg = PMSC_LEDC_BLNKEN | PMSC_LEDC_BLINK_TIME_DEF;
 5908              		.loc 1 2604 13
 5909 0054 4FF48873 		mov	r3, #272
 5910 0058 FB60     		str	r3, [r7, #12]
2605:Middlewares/Decawave/decadriver/deca_device.c ****         // Make LEDs blink once if requested.
2606:Middlewares/Decawave/decadriver/deca_device.c ****         if (mode & DWT_LEDS_INIT_BLINK)
 5911              		.loc 1 2606 18
 5912 005a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5913 005c 03F00203 		and	r3, r3, #2
 5914              		.loc 1 2606 12
 5915 0060 002B     		cmp	r3, #0
 5916 0062 03D0     		beq	.L247
2607:Middlewares/Decawave/decadriver/deca_device.c ****         {
2608:Middlewares/Decawave/decadriver/deca_device.c ****             reg |= PMSC_LEDC_BLINK_NOW_ALL;
 5917              		.loc 1 2608 17
 5918 0064 FB68     		ldr	r3, [r7, #12]
 5919 0066 43F47023 		orr	r3, r3, #983040
 5920 006a FB60     		str	r3, [r7, #12]
 5921              	.L247:
2609:Middlewares/Decawave/decadriver/deca_device.c ****         }
2610:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_LEDC_OFFSET, reg);
 5922              		.loc 1 2610 9
 5923 006c FA68     		ldr	r2, [r7, #12]
 5924 006e 2821     		movs	r1, #40
 5925 0070 3620     		movs	r0, #54
 5926 0072 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2611:Middlewares/Decawave/decadriver/deca_device.c ****         // Clear force blink bits if needed.
2612:Middlewares/Decawave/decadriver/deca_device.c ****         if(mode & DWT_LEDS_INIT_BLINK)
 5927              		.loc 1 2612 17
 5928 0076 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5929 0078 03F00203 		and	r3, r3, #2
 5930              		.loc 1 2612 11
 5931 007c 002B     		cmp	r3, #0
 5932 007e 17D0     		beq	.L249
2613:Middlewares/Decawave/decadriver/deca_device.c ****         {
2614:Middlewares/Decawave/decadriver/deca_device.c ****             reg &= ~PMSC_LEDC_BLINK_NOW_ALL;
 5933              		.loc 1 2614 17
 5934 0080 FB68     		ldr	r3, [r7, #12]
 5935 0082 23F47023 		bic	r3, r3, #983040
 5936 0086 FB60     		str	r3, [r7, #12]
2615:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write32bitoffsetreg(PMSC_ID, PMSC_LEDC_OFFSET, reg);
 5937              		.loc 1 2615 13
 5938 0088 FA68     		ldr	r2, [r7, #12]
 5939 008a 2821     		movs	r1, #40
 5940 008c 3620     		movs	r0, #54
 5941 008e FFF7FEFF 		bl	dwt_write32bitoffsetreg
2616:Middlewares/Decawave/decadriver/deca_device.c ****         }
ARM GAS  /tmp/cc0TY0Fa.s 			page 149


2617:Middlewares/Decawave/decadriver/deca_device.c ****     }
2618:Middlewares/Decawave/decadriver/deca_device.c ****     else
2619:Middlewares/Decawave/decadriver/deca_device.c ****     {
2620:Middlewares/Decawave/decadriver/deca_device.c ****         // Clear the GPIO bits that are used for LED control.
2621:Middlewares/Decawave/decadriver/deca_device.c ****         reg = dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET);
2622:Middlewares/Decawave/decadriver/deca_device.c ****         reg &= ~(GPIO_MSGP2_MASK | GPIO_MSGP3_MASK);
2623:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET, reg);
2624:Middlewares/Decawave/decadriver/deca_device.c ****     }
2625:Middlewares/Decawave/decadriver/deca_device.c **** }
 5942              		.loc 1 2625 1
 5943 0092 0DE0     		b	.L249
 5944              	.L246:
2621:Middlewares/Decawave/decadriver/deca_device.c ****         reg &= ~(GPIO_MSGP2_MASK | GPIO_MSGP3_MASK);
 5945              		.loc 1 2621 15
 5946 0094 0021     		movs	r1, #0
 5947 0096 2620     		movs	r0, #38
 5948 0098 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5949 009c F860     		str	r0, [r7, #12]
2622:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET, reg);
 5950              		.loc 1 2622 13
 5951 009e FB68     		ldr	r3, [r7, #12]
 5952 00a0 23F47053 		bic	r3, r3, #15360
 5953 00a4 FB60     		str	r3, [r7, #12]
2623:Middlewares/Decawave/decadriver/deca_device.c ****     }
 5954              		.loc 1 2623 9
 5955 00a6 FA68     		ldr	r2, [r7, #12]
 5956 00a8 0021     		movs	r1, #0
 5957 00aa 2620     		movs	r0, #38
 5958 00ac FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5959              	.L249:
 5960              		.loc 1 2625 1
 5961 00b0 00BF     		nop
 5962 00b2 1037     		adds	r7, r7, #16
 5963              	.LCFI321:
 5964              		.cfi_def_cfa_offset 8
 5965 00b4 BD46     		mov	sp, r7
 5966              	.LCFI322:
 5967              		.cfi_def_cfa_register 13
 5968              		@ sp needed
 5969 00b6 80BD     		pop	{r7, pc}
 5970              		.cfi_endproc
 5971              	.LFE71:
 5973              		.section	.text._dwt_enableclocks,"ax",%progbits
 5974              		.align	1
 5975              		.global	_dwt_enableclocks
 5976              		.syntax unified
 5977              		.thumb
 5978              		.thumb_func
 5979              		.fpu fpv4-sp-d16
 5981              	_dwt_enableclocks:
 5982              	.LFB72:
2626:Middlewares/Decawave/decadriver/deca_device.c **** 
2627:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2628:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_enableclocks()
2629:Middlewares/Decawave/decadriver/deca_device.c ****  *
2630:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief function to enable/disable clocks to particular digital blocks/system
2631:Middlewares/Decawave/decadriver/deca_device.c ****  *
ARM GAS  /tmp/cc0TY0Fa.s 			page 150


2632:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2633:Middlewares/Decawave/decadriver/deca_device.c ****  * @param clocks - set of clocks to enable/disable
2634:Middlewares/Decawave/decadriver/deca_device.c ****  *
2635:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters none
2636:Middlewares/Decawave/decadriver/deca_device.c ****  *
2637:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2638:Middlewares/Decawave/decadriver/deca_device.c ****  */
2639:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_enableclocks(int clocks)
2640:Middlewares/Decawave/decadriver/deca_device.c **** {
 5983              		.loc 1 2640 1
 5984              		.cfi_startproc
 5985              		@ args = 0, pretend = 0, frame = 16
 5986              		@ frame_needed = 1, uses_anonymous_args = 0
 5987 0000 80B5     		push	{r7, lr}
 5988              	.LCFI323:
 5989              		.cfi_def_cfa_offset 8
 5990              		.cfi_offset 7, -8
 5991              		.cfi_offset 14, -4
 5992 0002 84B0     		sub	sp, sp, #16
 5993              	.LCFI324:
 5994              		.cfi_def_cfa_offset 24
 5995 0004 00AF     		add	r7, sp, #0
 5996              	.LCFI325:
 5997              		.cfi_def_cfa_register 7
 5998 0006 7860     		str	r0, [r7, #4]
2641:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 reg[2];
2642:Middlewares/Decawave/decadriver/deca_device.c **** 
2643:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_readfromdevice(PMSC_ID, PMSC_CTRL0_OFFSET, 2, reg);
 5999              		.loc 1 2643 5
 6000 0008 07F10C03 		add	r3, r7, #12
 6001 000c 0222     		movs	r2, #2
 6002 000e 0021     		movs	r1, #0
 6003 0010 3620     		movs	r0, #54
 6004 0012 FFF7FEFF 		bl	dwt_readfromdevice
 6005 0016 7B68     		ldr	r3, [r7, #4]
 6006 0018 0E2B     		cmp	r3, #14
 6007 001a 76D8     		bhi	.L263
 6008 001c 01A2     		adr	r2, .L253
 6009 001e 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 6010 0022 00BF     		.p2align 2
 6011              	.L253:
 6012 0024 71000000 		.word	.L261+1
 6013 0028 61000000 		.word	.L260+1
 6014 002c 87000000 		.word	.L259+1
 6015 0030 0B010000 		.word	.L263+1
 6016 0034 0B010000 		.word	.L263+1
 6017 0038 0B010000 		.word	.L263+1
 6018 003c 0B010000 		.word	.L263+1
 6019 0040 9D000000 		.word	.L258+1
 6020 0044 BD000000 		.word	.L257+1
 6021 0048 0B010000 		.word	.L263+1
 6022 004c 0B010000 		.word	.L263+1
 6023 0050 D3000000 		.word	.L256+1
 6024 0054 DF000000 		.word	.L255+1
 6025 0058 EB000000 		.word	.L254+1
 6026 005c 01010000 		.word	.L252+1
 6027              		.p2align 1
ARM GAS  /tmp/cc0TY0Fa.s 			page 151


 6028              	.L260:
2644:Middlewares/Decawave/decadriver/deca_device.c ****     switch(clocks)
2645:Middlewares/Decawave/decadriver/deca_device.c ****     {
2646:Middlewares/Decawave/decadriver/deca_device.c ****         case ENABLE_ALL_SEQ:
2647:Middlewares/Decawave/decadriver/deca_device.c ****         {
2648:Middlewares/Decawave/decadriver/deca_device.c ****             reg[0] = 0x00 ;
 6029              		.loc 1 2648 20
 6030 0060 0023     		movs	r3, #0
 6031 0062 3B73     		strb	r3, [r7, #12]
2649:Middlewares/Decawave/decadriver/deca_device.c ****             reg[1] = reg[1] & 0xfe;
 6032              		.loc 1 2649 25
 6033 0064 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 6034              		.loc 1 2649 29
 6035 0066 23F00103 		bic	r3, r3, #1
 6036 006a DBB2     		uxtb	r3, r3
 6037              		.loc 1 2649 20
 6038 006c 7B73     		strb	r3, [r7, #13]
2650:Middlewares/Decawave/decadriver/deca_device.c ****         }
2651:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6039              		.loc 1 2651 9
 6040 006e 4DE0     		b	.L262
 6041              	.L261:
2652:Middlewares/Decawave/decadriver/deca_device.c ****         case FORCE_SYS_XTI:
2653:Middlewares/Decawave/decadriver/deca_device.c ****         {
2654:Middlewares/Decawave/decadriver/deca_device.c ****             // System and RX
2655:Middlewares/Decawave/decadriver/deca_device.c ****             reg[0] = 0x01 | (reg[0] & 0xfc);
 6042              		.loc 1 2655 33
 6043 0070 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 6044 0072 5BB2     		sxtb	r3, r3
 6045              		.loc 1 2655 37
 6046 0074 23F00303 		bic	r3, r3, #3
 6047 0078 5BB2     		sxtb	r3, r3
 6048              		.loc 1 2655 27
 6049 007a 43F00103 		orr	r3, r3, #1
 6050 007e 5BB2     		sxtb	r3, r3
 6051 0080 DBB2     		uxtb	r3, r3
 6052              		.loc 1 2655 20
 6053 0082 3B73     		strb	r3, [r7, #12]
2656:Middlewares/Decawave/decadriver/deca_device.c ****         }
2657:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6054              		.loc 1 2657 9
 6055 0084 42E0     		b	.L262
 6056              	.L259:
2658:Middlewares/Decawave/decadriver/deca_device.c ****         case FORCE_SYS_PLL:
2659:Middlewares/Decawave/decadriver/deca_device.c ****         {
2660:Middlewares/Decawave/decadriver/deca_device.c ****             // System
2661:Middlewares/Decawave/decadriver/deca_device.c ****             reg[0] = 0x02 | (reg[0] & 0xfc);
 6057              		.loc 1 2661 33
 6058 0086 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 6059 0088 5BB2     		sxtb	r3, r3
 6060              		.loc 1 2661 37
 6061 008a 23F00303 		bic	r3, r3, #3
 6062 008e 5BB2     		sxtb	r3, r3
 6063              		.loc 1 2661 27
 6064 0090 43F00203 		orr	r3, r3, #2
 6065 0094 5BB2     		sxtb	r3, r3
 6066 0096 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/cc0TY0Fa.s 			page 152


 6067              		.loc 1 2661 20
 6068 0098 3B73     		strb	r3, [r7, #12]
2662:Middlewares/Decawave/decadriver/deca_device.c ****         }
2663:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6069              		.loc 1 2663 9
 6070 009a 37E0     		b	.L262
 6071              	.L258:
2664:Middlewares/Decawave/decadriver/deca_device.c ****         case READ_ACC_ON:
2665:Middlewares/Decawave/decadriver/deca_device.c ****         {
2666:Middlewares/Decawave/decadriver/deca_device.c ****             reg[0] = 0x48 | (reg[0] & 0xb3);
 6072              		.loc 1 2666 33
 6073 009c 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 6074 009e 5BB2     		sxtb	r3, r3
 6075              		.loc 1 2666 37
 6076 00a0 23F04C03 		bic	r3, r3, #76
 6077 00a4 5BB2     		sxtb	r3, r3
 6078              		.loc 1 2666 27
 6079 00a6 43F04803 		orr	r3, r3, #72
 6080 00aa 5BB2     		sxtb	r3, r3
 6081 00ac DBB2     		uxtb	r3, r3
 6082              		.loc 1 2666 20
 6083 00ae 3B73     		strb	r3, [r7, #12]
2667:Middlewares/Decawave/decadriver/deca_device.c ****             reg[1] = 0x80 | reg[1];
 6084              		.loc 1 2667 32
 6085 00b0 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 6086              		.loc 1 2667 20
 6087 00b2 63F07F03 		orn	r3, r3, #127
 6088 00b6 DBB2     		uxtb	r3, r3
 6089 00b8 7B73     		strb	r3, [r7, #13]
2668:Middlewares/Decawave/decadriver/deca_device.c ****         }
2669:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6090              		.loc 1 2669 9
 6091 00ba 27E0     		b	.L262
 6092              	.L257:
2670:Middlewares/Decawave/decadriver/deca_device.c ****         case READ_ACC_OFF:
2671:Middlewares/Decawave/decadriver/deca_device.c ****         {
2672:Middlewares/Decawave/decadriver/deca_device.c ****             reg[0] = reg[0] & 0xb3;
 6093              		.loc 1 2672 25
 6094 00bc 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 6095              		.loc 1 2672 29
 6096 00be 23F04C03 		bic	r3, r3, #76
 6097 00c2 DBB2     		uxtb	r3, r3
 6098              		.loc 1 2672 20
 6099 00c4 3B73     		strb	r3, [r7, #12]
2673:Middlewares/Decawave/decadriver/deca_device.c ****             reg[1] = 0x7f & reg[1];
 6100              		.loc 1 2673 32
 6101 00c6 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 6102              		.loc 1 2673 27
 6103 00c8 03F07F03 		and	r3, r3, #127
 6104 00cc DBB2     		uxtb	r3, r3
 6105              		.loc 1 2673 20
 6106 00ce 7B73     		strb	r3, [r7, #13]
2674:Middlewares/Decawave/decadriver/deca_device.c ****         }
2675:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6107              		.loc 1 2675 9
 6108 00d0 1CE0     		b	.L262
 6109              	.L256:
ARM GAS  /tmp/cc0TY0Fa.s 			page 153


2676:Middlewares/Decawave/decadriver/deca_device.c ****         case FORCE_OTP_ON:
2677:Middlewares/Decawave/decadriver/deca_device.c ****         {
2678:Middlewares/Decawave/decadriver/deca_device.c ****             reg[1] = 0x02 | reg[1];
 6110              		.loc 1 2678 32
 6111 00d2 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 6112              		.loc 1 2678 20
 6113 00d4 43F00203 		orr	r3, r3, #2
 6114 00d8 DBB2     		uxtb	r3, r3
 6115 00da 7B73     		strb	r3, [r7, #13]
2679:Middlewares/Decawave/decadriver/deca_device.c ****         }
2680:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6116              		.loc 1 2680 9
 6117 00dc 16E0     		b	.L262
 6118              	.L255:
2681:Middlewares/Decawave/decadriver/deca_device.c ****         case FORCE_OTP_OFF:
2682:Middlewares/Decawave/decadriver/deca_device.c ****         {
2683:Middlewares/Decawave/decadriver/deca_device.c ****             reg[1] = reg[1] & 0xfd;
 6119              		.loc 1 2683 25
 6120 00de 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 6121              		.loc 1 2683 29
 6122 00e0 23F00203 		bic	r3, r3, #2
 6123 00e4 DBB2     		uxtb	r3, r3
 6124              		.loc 1 2683 20
 6125 00e6 7B73     		strb	r3, [r7, #13]
2684:Middlewares/Decawave/decadriver/deca_device.c ****         }
2685:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6126              		.loc 1 2685 9
 6127 00e8 10E0     		b	.L262
 6128              	.L254:
2686:Middlewares/Decawave/decadriver/deca_device.c ****         case FORCE_TX_PLL:
2687:Middlewares/Decawave/decadriver/deca_device.c ****         {
2688:Middlewares/Decawave/decadriver/deca_device.c ****             reg[0] = 0x20 | (reg[0] & 0xcf);
 6129              		.loc 1 2688 33
 6130 00ea 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 6131 00ec 5BB2     		sxtb	r3, r3
 6132              		.loc 1 2688 37
 6133 00ee 23F03003 		bic	r3, r3, #48
 6134 00f2 5BB2     		sxtb	r3, r3
 6135              		.loc 1 2688 27
 6136 00f4 43F02003 		orr	r3, r3, #32
 6137 00f8 5BB2     		sxtb	r3, r3
 6138 00fa DBB2     		uxtb	r3, r3
 6139              		.loc 1 2688 20
 6140 00fc 3B73     		strb	r3, [r7, #12]
2689:Middlewares/Decawave/decadriver/deca_device.c ****         }
2690:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6141              		.loc 1 2690 9
 6142 00fe 05E0     		b	.L262
 6143              	.L252:
2691:Middlewares/Decawave/decadriver/deca_device.c ****         case FORCE_LDE:
2692:Middlewares/Decawave/decadriver/deca_device.c ****         {
2693:Middlewares/Decawave/decadriver/deca_device.c ****             reg[0] = 0x01;
 6144              		.loc 1 2693 20
 6145 0100 0123     		movs	r3, #1
 6146 0102 3B73     		strb	r3, [r7, #12]
2694:Middlewares/Decawave/decadriver/deca_device.c ****             reg[1] = 0x03;
 6147              		.loc 1 2694 20
ARM GAS  /tmp/cc0TY0Fa.s 			page 154


 6148 0104 0323     		movs	r3, #3
 6149 0106 7B73     		strb	r3, [r7, #13]
2695:Middlewares/Decawave/decadriver/deca_device.c ****         }
2696:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6150              		.loc 1 2696 9
 6151 0108 00E0     		b	.L262
 6152              	.L263:
2697:Middlewares/Decawave/decadriver/deca_device.c ****         default:
2698:Middlewares/Decawave/decadriver/deca_device.c ****         break;
 6153              		.loc 1 2698 9
 6154 010a 00BF     		nop
 6155              	.L262:
2699:Middlewares/Decawave/decadriver/deca_device.c ****     }
2700:Middlewares/Decawave/decadriver/deca_device.c **** 
2701:Middlewares/Decawave/decadriver/deca_device.c **** 
2702:Middlewares/Decawave/decadriver/deca_device.c ****     // Need to write lower byte separately before setting the higher byte(s)
2703:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(PMSC_ID, PMSC_CTRL0_OFFSET, 1, &reg[0]);
 6156              		.loc 1 2703 5
 6157 010c 07F10C03 		add	r3, r7, #12
 6158 0110 0122     		movs	r2, #1
 6159 0112 0021     		movs	r1, #0
 6160 0114 3620     		movs	r0, #54
 6161 0116 FFF7FEFF 		bl	dwt_writetodevice
2704:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(PMSC_ID, 0x1, 1, &reg[1]);
 6162              		.loc 1 2704 5
 6163 011a 07F10C03 		add	r3, r7, #12
 6164 011e 0133     		adds	r3, r3, #1
 6165 0120 0122     		movs	r2, #1
 6166 0122 0121     		movs	r1, #1
 6167 0124 3620     		movs	r0, #54
 6168 0126 FFF7FEFF 		bl	dwt_writetodevice
2705:Middlewares/Decawave/decadriver/deca_device.c **** 
2706:Middlewares/Decawave/decadriver/deca_device.c **** } // end _dwt_enableclocks()
 6169              		.loc 1 2706 1
 6170 012a 00BF     		nop
 6171 012c 1037     		adds	r7, r7, #16
 6172              	.LCFI326:
 6173              		.cfi_def_cfa_offset 8
 6174 012e BD46     		mov	sp, r7
 6175              	.LCFI327:
 6176              		.cfi_def_cfa_register 13
 6177              		@ sp needed
 6178 0130 80BD     		pop	{r7, pc}
 6179              		.cfi_endproc
 6180              	.LFE72:
 6182 0132 00BF     		.section	.text._dwt_disablesequencing,"ax",%progbits
 6183              		.align	1
 6184              		.global	_dwt_disablesequencing
 6185              		.syntax unified
 6186              		.thumb
 6187              		.thumb_func
 6188              		.fpu fpv4-sp-d16
 6190              	_dwt_disablesequencing:
 6191              	.LFB73:
2707:Middlewares/Decawave/decadriver/deca_device.c **** 
2708:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2709:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_disablesequencing()
ARM GAS  /tmp/cc0TY0Fa.s 			page 155


2710:Middlewares/Decawave/decadriver/deca_device.c ****  *
2711:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function disables the TX blocks sequencing, it disables PMSC control of RF blocks, s
2712:Middlewares/Decawave/decadriver/deca_device.c ****  *
2713:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters none
2714:Middlewares/Decawave/decadriver/deca_device.c ****  *
2715:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters none
2716:Middlewares/Decawave/decadriver/deca_device.c ****  *
2717:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2718:Middlewares/Decawave/decadriver/deca_device.c ****  */
2719:Middlewares/Decawave/decadriver/deca_device.c **** void _dwt_disablesequencing(void) // Disable sequencing and go to state "INIT"
2720:Middlewares/Decawave/decadriver/deca_device.c **** {
 6192              		.loc 1 2720 1
 6193              		.cfi_startproc
 6194              		@ args = 0, pretend = 0, frame = 0
 6195              		@ frame_needed = 1, uses_anonymous_args = 0
 6196 0000 80B5     		push	{r7, lr}
 6197              	.LCFI328:
 6198              		.cfi_def_cfa_offset 8
 6199              		.cfi_offset 7, -8
 6200              		.cfi_offset 14, -4
 6201 0002 00AF     		add	r7, sp, #0
 6202              	.LCFI329:
 6203              		.cfi_def_cfa_register 7
2721:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI); // Set system clock to XTI
 6204              		.loc 1 2721 5
 6205 0004 0020     		movs	r0, #0
 6206 0006 FFF7FEFF 		bl	_dwt_enableclocks
2722:Middlewares/Decawave/decadriver/deca_device.c **** 
2723:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, PMSC_CTRL1_PKTSEQ_DISABLE); // Disable PMSC
 6207              		.loc 1 2723 5
 6208 000a 0022     		movs	r2, #0
 6209 000c 0421     		movs	r1, #4
 6210 000e 3620     		movs	r0, #54
 6211 0010 FFF7FEFF 		bl	dwt_write16bitoffsetreg
2724:Middlewares/Decawave/decadriver/deca_device.c **** }
 6212              		.loc 1 2724 1
 6213 0014 00BF     		nop
 6214 0016 80BD     		pop	{r7, pc}
 6215              		.cfi_endproc
 6216              	.LFE73:
 6218              		.section	.text.dwt_setdelayedtrxtime,"ax",%progbits
 6219              		.align	1
 6220              		.global	dwt_setdelayedtrxtime
 6221              		.syntax unified
 6222              		.thumb
 6223              		.thumb_func
 6224              		.fpu fpv4-sp-d16
 6226              	dwt_setdelayedtrxtime:
 6227              	.LFB74:
2725:Middlewares/Decawave/decadriver/deca_device.c **** 
2726:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2727:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setdelayedtrxtime()
2728:Middlewares/Decawave/decadriver/deca_device.c ****  *
2729:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This API function configures the delayed transmit time or the delayed RX on time
2730:Middlewares/Decawave/decadriver/deca_device.c ****  *
2731:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2732:Middlewares/Decawave/decadriver/deca_device.c ****  * @param starttime - the TX/RX start time (the 32 bits should be the high 32 bits of the system ti
ARM GAS  /tmp/cc0TY0Fa.s 			page 156


2733:Middlewares/Decawave/decadriver/deca_device.c ****  * or at which to turn on the receiver)
2734:Middlewares/Decawave/decadriver/deca_device.c ****  *
2735:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters none
2736:Middlewares/Decawave/decadriver/deca_device.c ****  *
2737:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2738:Middlewares/Decawave/decadriver/deca_device.c ****  */
2739:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setdelayedtrxtime(uint32 starttime)
2740:Middlewares/Decawave/decadriver/deca_device.c **** {
 6228              		.loc 1 2740 1
 6229              		.cfi_startproc
 6230              		@ args = 0, pretend = 0, frame = 8
 6231              		@ frame_needed = 1, uses_anonymous_args = 0
 6232 0000 80B5     		push	{r7, lr}
 6233              	.LCFI330:
 6234              		.cfi_def_cfa_offset 8
 6235              		.cfi_offset 7, -8
 6236              		.cfi_offset 14, -4
 6237 0002 82B0     		sub	sp, sp, #8
 6238              	.LCFI331:
 6239              		.cfi_def_cfa_offset 16
 6240 0004 00AF     		add	r7, sp, #0
 6241              	.LCFI332:
 6242              		.cfi_def_cfa_register 7
 6243 0006 7860     		str	r0, [r7, #4]
2741:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(DX_TIME_ID, 1, starttime); // Write at offset 1 as the lower 9 bits of 
 6244              		.loc 1 2741 5
 6245 0008 7A68     		ldr	r2, [r7, #4]
 6246 000a 0121     		movs	r1, #1
 6247 000c 0A20     		movs	r0, #10
 6248 000e FFF7FEFF 		bl	dwt_write32bitoffsetreg
2742:Middlewares/Decawave/decadriver/deca_device.c **** 
2743:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_setdelayedtrxtime()
 6249              		.loc 1 2743 1
 6250 0012 00BF     		nop
 6251 0014 0837     		adds	r7, r7, #8
 6252              	.LCFI333:
 6253              		.cfi_def_cfa_offset 8
 6254 0016 BD46     		mov	sp, r7
 6255              	.LCFI334:
 6256              		.cfi_def_cfa_register 13
 6257              		@ sp needed
 6258 0018 80BD     		pop	{r7, pc}
 6259              		.cfi_endproc
 6260              	.LFE74:
 6262              		.section	.text.dwt_starttx,"ax",%progbits
 6263              		.align	1
 6264              		.global	dwt_starttx
 6265              		.syntax unified
 6266              		.thumb
 6267              		.thumb_func
 6268              		.fpu fpv4-sp-d16
 6270              	dwt_starttx:
 6271              	.LFB75:
2744:Middlewares/Decawave/decadriver/deca_device.c **** 
2745:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2746:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_starttx()
2747:Middlewares/Decawave/decadriver/deca_device.c ****  *
ARM GAS  /tmp/cc0TY0Fa.s 			page 157


2748:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This call initiates the transmission, input parameter indicates which TX mode is used see
2749:Middlewares/Decawave/decadriver/deca_device.c ****  *
2750:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
2751:Middlewares/Decawave/decadriver/deca_device.c ****  * @param mode - if mode = DWT_START_TX_IMMEDIATE - immediate TX (no response expected)
2752:Middlewares/Decawave/decadriver/deca_device.c ****  *               if mode = DWT_START_TX_DELAYED - delayed TX (no response expected)
2753:Middlewares/Decawave/decadriver/deca_device.c ****  *               if mode = DWT_START_TX_IMMEDIATE | DWT_RESPONSE_EXPECTED - immediate TX (response 
2754:Middlewares/Decawave/decadriver/deca_device.c ****  *               if mode = DWT_START_TX_DELAYED | DWT_RESPONSE_EXPECTED - delayed TX (response expe
2755:Middlewares/Decawave/decadriver/deca_device.c ****  *
2756:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2757:Middlewares/Decawave/decadriver/deca_device.c ****  *
2758:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error (e.g. a delayed transmission will be can
2759:Middlewares/Decawave/decadriver/deca_device.c ****  */
2760:Middlewares/Decawave/decadriver/deca_device.c **** 
2761:Middlewares/Decawave/decadriver/deca_device.c **** int dwt_starttx(uint8 mode)
2762:Middlewares/Decawave/decadriver/deca_device.c **** {
 6272              		.loc 1 2762 1
 6273              		.cfi_startproc
 6274              		@ args = 0, pretend = 0, frame = 16
 6275              		@ frame_needed = 1, uses_anonymous_args = 0
 6276 0000 80B5     		push	{r7, lr}
 6277              	.LCFI335:
 6278              		.cfi_def_cfa_offset 8
 6279              		.cfi_offset 7, -8
 6280              		.cfi_offset 14, -4
 6281 0002 84B0     		sub	sp, sp, #16
 6282              	.LCFI336:
 6283              		.cfi_def_cfa_offset 24
 6284 0004 00AF     		add	r7, sp, #0
 6285              	.LCFI337:
 6286              		.cfi_def_cfa_register 7
 6287 0006 0346     		mov	r3, r0
 6288 0008 FB71     		strb	r3, [r7, #7]
2763:Middlewares/Decawave/decadriver/deca_device.c ****     int retval = DWT_SUCCESS ;
 6289              		.loc 1 2763 9
 6290 000a 0023     		movs	r3, #0
 6291 000c FB60     		str	r3, [r7, #12]
2764:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 temp  = 0x00;
 6292              		.loc 1 2764 11
 6293 000e 0023     		movs	r3, #0
 6294 0010 FB72     		strb	r3, [r7, #11]
2765:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 checkTxOK = 0 ;
 6295              		.loc 1 2765 12
 6296 0012 0023     		movs	r3, #0
 6297 0014 3B81     		strh	r3, [r7, #8]	@ movhi
2766:Middlewares/Decawave/decadriver/deca_device.c **** 
2767:Middlewares/Decawave/decadriver/deca_device.c ****     if(mode & DWT_RESPONSE_EXPECTED)
 6298              		.loc 1 2767 13
 6299 0016 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6300 0018 03F00203 		and	r3, r3, #2
 6301              		.loc 1 2767 7
 6302 001c 002B     		cmp	r3, #0
 6303 001e 05D0     		beq	.L267
2768:Middlewares/Decawave/decadriver/deca_device.c ****     {
2769:Middlewares/Decawave/decadriver/deca_device.c ****         temp = (uint8)SYS_CTRL_WAIT4RESP ; // Set wait4response bit
 6304              		.loc 1 2769 14
 6305 0020 8023     		movs	r3, #128
 6306 0022 FB72     		strb	r3, [r7, #11]
ARM GAS  /tmp/cc0TY0Fa.s 			page 158


2770:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->wait4resp = 1;
 6307              		.loc 1 2770 21
 6308 0024 1C4B     		ldr	r3, .L272
 6309 0026 1B68     		ldr	r3, [r3]
 6310              		.loc 1 2770 33
 6311 0028 0122     		movs	r2, #1
 6312 002a 5A75     		strb	r2, [r3, #21]
 6313              	.L267:
2771:Middlewares/Decawave/decadriver/deca_device.c ****     }
2772:Middlewares/Decawave/decadriver/deca_device.c **** 
2773:Middlewares/Decawave/decadriver/deca_device.c ****     if (mode & DWT_START_TX_DELAYED)
 6314              		.loc 1 2773 14
 6315 002c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6316 002e 03F00103 		and	r3, r3, #1
 6317              		.loc 1 2773 8
 6318 0032 002B     		cmp	r3, #0
 6319 0034 20D0     		beq	.L268
2774:Middlewares/Decawave/decadriver/deca_device.c ****     {
2775:Middlewares/Decawave/decadriver/deca_device.c ****         // Both SYS_CTRL_TXSTRT and SYS_CTRL_TXDLYS to correctly enable TX
2776:Middlewares/Decawave/decadriver/deca_device.c ****         temp |= (uint8)(SYS_CTRL_TXDLYS | SYS_CTRL_TXSTRT) ;
 6320              		.loc 1 2776 14
 6321 0036 FB7A     		ldrb	r3, [r7, #11]
 6322 0038 43F00603 		orr	r3, r3, #6
 6323 003c FB72     		strb	r3, [r7, #11]
2777:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, temp);
 6324              		.loc 1 2777 9
 6325 003e FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 6326 0040 1A46     		mov	r2, r3
 6327 0042 0021     		movs	r1, #0
 6328 0044 0D20     		movs	r0, #13
 6329 0046 FFF7FEFF 		bl	dwt_write8bitoffsetreg
2778:Middlewares/Decawave/decadriver/deca_device.c ****         checkTxOK = dwt_read16bitoffsetreg(SYS_STATUS_ID, 3); // Read at offset 3 to get the upper 
 6330              		.loc 1 2778 21
 6331 004a 0321     		movs	r1, #3
 6332 004c 0F20     		movs	r0, #15
 6333 004e FFF7FEFF 		bl	dwt_read16bitoffsetreg
 6334 0052 0346     		mov	r3, r0
 6335 0054 3B81     		strh	r3, [r7, #8]	@ movhi
2779:Middlewares/Decawave/decadriver/deca_device.c ****         if ((checkTxOK & SYS_STATUS_TXERR) == 0) // Transmit Delayed Send set over Half a Period aw
 6336              		.loc 1 2779 24
 6337 0056 3B89     		ldrh	r3, [r7, #8]
 6338 0058 03F48163 		and	r3, r3, #1032
 6339              		.loc 1 2779 12
 6340 005c 002B     		cmp	r3, #0
 6341 005e 02D1     		bne	.L269
2780:Middlewares/Decawave/decadriver/deca_device.c ****         {
2781:Middlewares/Decawave/decadriver/deca_device.c ****             retval = DWT_SUCCESS ; // All okay
 6342              		.loc 1 2781 20
 6343 0060 0023     		movs	r3, #0
 6344 0062 FB60     		str	r3, [r7, #12]
 6345 0064 12E0     		b	.L270
 6346              	.L269:
2782:Middlewares/Decawave/decadriver/deca_device.c ****         }
2783:Middlewares/Decawave/decadriver/deca_device.c ****         else
2784:Middlewares/Decawave/decadriver/deca_device.c ****         {
2785:Middlewares/Decawave/decadriver/deca_device.c ****             // If HPDWARN or TXPUTE are set this indicates that the TXDLYS was set too late for the
2786:Middlewares/Decawave/decadriver/deca_device.c ****             // remedial action is to cancel delayed send and report error
ARM GAS  /tmp/cc0TY0Fa.s 			page 159


2787:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, (uint8)SYS_CTRL_TRXOFF);
 6347              		.loc 1 2787 13
 6348 0066 4022     		movs	r2, #64
 6349 0068 0021     		movs	r1, #0
 6350 006a 0D20     		movs	r0, #13
 6351 006c FFF7FEFF 		bl	dwt_write8bitoffsetreg
2788:Middlewares/Decawave/decadriver/deca_device.c ****             retval = DWT_ERROR ; // Failed !
 6352              		.loc 1 2788 20
 6353 0070 4FF0FF33 		mov	r3, #-1
 6354 0074 FB60     		str	r3, [r7, #12]
 6355 0076 09E0     		b	.L270
 6356              	.L268:
2789:Middlewares/Decawave/decadriver/deca_device.c ****         }
2790:Middlewares/Decawave/decadriver/deca_device.c ****     }
2791:Middlewares/Decawave/decadriver/deca_device.c ****     else
2792:Middlewares/Decawave/decadriver/deca_device.c ****     {
2793:Middlewares/Decawave/decadriver/deca_device.c ****         temp |= (uint8)SYS_CTRL_TXSTRT ;
 6357              		.loc 1 2793 14
 6358 0078 FB7A     		ldrb	r3, [r7, #11]
 6359 007a 43F00203 		orr	r3, r3, #2
 6360 007e FB72     		strb	r3, [r7, #11]
2794:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, temp);
 6361              		.loc 1 2794 9
 6362 0080 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 6363 0082 1A46     		mov	r2, r3
 6364 0084 0021     		movs	r1, #0
 6365 0086 0D20     		movs	r0, #13
 6366 0088 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6367              	.L270:
2795:Middlewares/Decawave/decadriver/deca_device.c ****     }
2796:Middlewares/Decawave/decadriver/deca_device.c **** 
2797:Middlewares/Decawave/decadriver/deca_device.c ****     return retval;
 6368              		.loc 1 2797 12
 6369 008c FB68     		ldr	r3, [r7, #12]
2798:Middlewares/Decawave/decadriver/deca_device.c **** 
2799:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_starttx()
 6370              		.loc 1 2799 1
 6371 008e 1846     		mov	r0, r3
 6372 0090 1037     		adds	r7, r7, #16
 6373              	.LCFI338:
 6374              		.cfi_def_cfa_offset 8
 6375 0092 BD46     		mov	sp, r7
 6376              	.LCFI339:
 6377              		.cfi_def_cfa_register 13
 6378              		@ sp needed
 6379 0094 80BD     		pop	{r7, pc}
 6380              	.L273:
 6381 0096 00BF     		.align	2
 6382              	.L272:
 6383 0098 00000000 		.word	pdw1000local
 6384              		.cfi_endproc
 6385              	.LFE75:
 6387              		.section	.text.dwt_forcetrxoff,"ax",%progbits
 6388              		.align	1
 6389              		.global	dwt_forcetrxoff
 6390              		.syntax unified
 6391              		.thumb
ARM GAS  /tmp/cc0TY0Fa.s 			page 160


 6392              		.thumb_func
 6393              		.fpu fpv4-sp-d16
 6395              	dwt_forcetrxoff:
 6396              	.LFB76:
2800:Middlewares/Decawave/decadriver/deca_device.c **** 
2801:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2802:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_forcetrxoff()
2803:Middlewares/Decawave/decadriver/deca_device.c ****  *
2804:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to turn off the transceiver
2805:Middlewares/Decawave/decadriver/deca_device.c ****  *
2806:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2807:Middlewares/Decawave/decadriver/deca_device.c ****  *
2808:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2809:Middlewares/Decawave/decadriver/deca_device.c ****  *
2810:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2811:Middlewares/Decawave/decadriver/deca_device.c ****  */
2812:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_forcetrxoff(void)
2813:Middlewares/Decawave/decadriver/deca_device.c **** {
 6397              		.loc 1 2813 1
 6398              		.cfi_startproc
 6399              		@ args = 0, pretend = 0, frame = 8
 6400              		@ frame_needed = 1, uses_anonymous_args = 0
 6401 0000 80B5     		push	{r7, lr}
 6402              	.LCFI340:
 6403              		.cfi_def_cfa_offset 8
 6404              		.cfi_offset 7, -8
 6405              		.cfi_offset 14, -4
 6406 0002 82B0     		sub	sp, sp, #8
 6407              	.LCFI341:
 6408              		.cfi_def_cfa_offset 16
 6409 0004 00AF     		add	r7, sp, #0
 6410              	.LCFI342:
 6411              		.cfi_def_cfa_register 7
2814:Middlewares/Decawave/decadriver/deca_device.c ****     decaIrqStatus_t stat ;
2815:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 mask;
2816:Middlewares/Decawave/decadriver/deca_device.c **** 
2817:Middlewares/Decawave/decadriver/deca_device.c ****     mask = dwt_read32bitreg(SYS_MASK_ID) ; // Read set interrupt mask
 6412              		.loc 1 2817 12
 6413 0006 0021     		movs	r1, #0
 6414 0008 0E20     		movs	r0, #14
 6415 000a FFF7FEFF 		bl	dwt_read32bitoffsetreg
 6416 000e 7860     		str	r0, [r7, #4]
2818:Middlewares/Decawave/decadriver/deca_device.c **** 
2819:Middlewares/Decawave/decadriver/deca_device.c ****     // Need to beware of interrupts occurring in the middle of following read modify write cycle
2820:Middlewares/Decawave/decadriver/deca_device.c ****     // We can disable the radio, but before the status is cleared an interrupt can be set (e.g. the
2821:Middlewares/Decawave/decadriver/deca_device.c ****     // event has just happened before the radio was disabled)
2822:Middlewares/Decawave/decadriver/deca_device.c ****     // thus we need to disable interrupt during this operation
2823:Middlewares/Decawave/decadriver/deca_device.c ****     stat = decamutexon() ;
 6417              		.loc 1 2823 12
 6418 0010 FFF7FEFF 		bl	decamutexon
 6419 0014 3860     		str	r0, [r7]
2824:Middlewares/Decawave/decadriver/deca_device.c **** 
2825:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_MASK_ID, 0) ; // Clear interrupt mask - so we don't get any unwanted even
 6420              		.loc 1 2825 5
 6421 0016 0022     		movs	r2, #0
 6422 0018 0021     		movs	r1, #0
 6423 001a 0E20     		movs	r0, #14
ARM GAS  /tmp/cc0TY0Fa.s 			page 161


 6424 001c FFF7FEFF 		bl	dwt_write32bitoffsetreg
2826:Middlewares/Decawave/decadriver/deca_device.c **** 
2827:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, (uint8)SYS_CTRL_TRXOFF) ; // Disable the r
 6425              		.loc 1 2827 5
 6426 0020 4022     		movs	r2, #64
 6427 0022 0021     		movs	r1, #0
 6428 0024 0D20     		movs	r0, #13
 6429 0026 FFF7FEFF 		bl	dwt_write8bitoffsetreg
2828:Middlewares/Decawave/decadriver/deca_device.c **** 
2829:Middlewares/Decawave/decadriver/deca_device.c ****     // Forcing Transceiver off - so we do not want to see any new events that may have happened
2830:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_STATUS_ID, (SYS_STATUS_ALL_TX | SYS_STATUS_ALL_RX_ERR | SYS_STATUS_ALL_RX
 6430              		.loc 1 2830 5
 6431 002a 0B4A     		ldr	r2, .L275
 6432 002c 0021     		movs	r1, #0
 6433 002e 0F20     		movs	r0, #15
 6434 0030 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2831:Middlewares/Decawave/decadriver/deca_device.c **** 
2832:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_syncrxbufptrs();
 6435              		.loc 1 2832 5
 6436 0034 FFF7FEFF 		bl	dwt_syncrxbufptrs
2833:Middlewares/Decawave/decadriver/deca_device.c **** 
2834:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(SYS_MASK_ID, mask) ; // Set interrupt mask to what it was
 6437              		.loc 1 2834 5
 6438 0038 7A68     		ldr	r2, [r7, #4]
 6439 003a 0021     		movs	r1, #0
 6440 003c 0E20     		movs	r0, #14
 6441 003e FFF7FEFF 		bl	dwt_write32bitoffsetreg
2835:Middlewares/Decawave/decadriver/deca_device.c **** 
2836:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable/restore interrupts again...
2837:Middlewares/Decawave/decadriver/deca_device.c ****     decamutexoff(stat) ;
 6442              		.loc 1 2837 5
 6443 0042 3868     		ldr	r0, [r7]
 6444 0044 FFF7FEFF 		bl	decamutexoff
2838:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->wait4resp = 0;
 6445              		.loc 1 2838 17
 6446 0048 044B     		ldr	r3, .L275+4
 6447 004a 1B68     		ldr	r3, [r3]
 6448              		.loc 1 2838 29
 6449 004c 0022     		movs	r2, #0
 6450 004e 5A75     		strb	r2, [r3, #21]
2839:Middlewares/Decawave/decadriver/deca_device.c **** 
2840:Middlewares/Decawave/decadriver/deca_device.c **** } // end deviceforcetrxoff()
 6451              		.loc 1 2840 1
 6452 0050 00BF     		nop
 6453 0052 0837     		adds	r7, r7, #8
 6454              	.LCFI343:
 6455              		.cfi_def_cfa_offset 8
 6456 0054 BD46     		mov	sp, r7
 6457              	.LCFI344:
 6458              		.cfi_def_cfa_register 13
 6459              		@ sp needed
 6460 0056 80BD     		pop	{r7, pc}
 6461              	.L276:
 6462              		.align	2
 6463              	.L275:
 6464 0058 F8FF2724 		.word	606601208
 6465 005c 00000000 		.word	pdw1000local
ARM GAS  /tmp/cc0TY0Fa.s 			page 162


 6466              		.cfi_endproc
 6467              	.LFE76:
 6469              		.section	.text.dwt_syncrxbufptrs,"ax",%progbits
 6470              		.align	1
 6471              		.global	dwt_syncrxbufptrs
 6472              		.syntax unified
 6473              		.thumb
 6474              		.thumb_func
 6475              		.fpu fpv4-sp-d16
 6477              	dwt_syncrxbufptrs:
 6478              	.LFB77:
2841:Middlewares/Decawave/decadriver/deca_device.c **** 
2842:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2843:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_syncrxbufptrs()
2844:Middlewares/Decawave/decadriver/deca_device.c ****  *
2845:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function synchronizes rx buffer pointers
2846:Middlewares/Decawave/decadriver/deca_device.c ****  * need to make sure that the host/IC buffer pointers are aligned before starting RX
2847:Middlewares/Decawave/decadriver/deca_device.c ****  *
2848:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
2849:Middlewares/Decawave/decadriver/deca_device.c ****  *
2850:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2851:Middlewares/Decawave/decadriver/deca_device.c ****  *
2852:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2853:Middlewares/Decawave/decadriver/deca_device.c ****  */
2854:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_syncrxbufptrs(void)
2855:Middlewares/Decawave/decadriver/deca_device.c **** {
 6479              		.loc 1 2855 1
 6480              		.cfi_startproc
 6481              		@ args = 0, pretend = 0, frame = 8
 6482              		@ frame_needed = 1, uses_anonymous_args = 0
 6483 0000 80B5     		push	{r7, lr}
 6484              	.LCFI345:
 6485              		.cfi_def_cfa_offset 8
 6486              		.cfi_offset 7, -8
 6487              		.cfi_offset 14, -4
 6488 0002 82B0     		sub	sp, sp, #8
 6489              	.LCFI346:
 6490              		.cfi_def_cfa_offset 16
 6491 0004 00AF     		add	r7, sp, #0
 6492              	.LCFI347:
 6493              		.cfi_def_cfa_register 7
2856:Middlewares/Decawave/decadriver/deca_device.c ****     uint8  buff ;
2857:Middlewares/Decawave/decadriver/deca_device.c ****     // Need to make sure that the host/IC buffer pointers are aligned before starting RX
2858:Middlewares/Decawave/decadriver/deca_device.c ****     buff = dwt_read8bitoffsetreg(SYS_STATUS_ID, 3); // Read 1 byte at offset 3 to get the 4th byte 
 6494              		.loc 1 2858 12
 6495 0006 0321     		movs	r1, #3
 6496 0008 0F20     		movs	r0, #15
 6497 000a FFF7FEFF 		bl	dwt_read8bitoffsetreg
 6498 000e 0346     		mov	r3, r0
 6499 0010 FB71     		strb	r3, [r7, #7]
2859:Middlewares/Decawave/decadriver/deca_device.c **** 
2860:Middlewares/Decawave/decadriver/deca_device.c ****     if((buff & (SYS_STATUS_ICRBP >> 24)) !=     // IC side Receive Buffer Pointer
 6500              		.loc 1 2860 42
 6501 0012 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
2861:Middlewares/Decawave/decadriver/deca_device.c ****        ((buff & (SYS_STATUS_HSRBP>>24)) << 1) ) // Host Side Receive Buffer Pointer
 6502              		.loc 1 2861 41
 6503 0014 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
ARM GAS  /tmp/cc0TY0Fa.s 			page 163


 6504 0016 5B00     		lsls	r3, r3, #1
2860:Middlewares/Decawave/decadriver/deca_device.c ****        ((buff & (SYS_STATUS_HSRBP>>24)) << 1) ) // Host Side Receive Buffer Pointer
 6505              		.loc 1 2860 42
 6506 0018 5340     		eors	r3, r3, r2
 6507 001a 03F08003 		and	r3, r3, #128
2860:Middlewares/Decawave/decadriver/deca_device.c ****        ((buff & (SYS_STATUS_HSRBP>>24)) << 1) ) // Host Side Receive Buffer Pointer
 6508              		.loc 1 2860 7
 6509 001e 002B     		cmp	r3, #0
 6510 0020 04D0     		beq	.L279
2862:Middlewares/Decawave/decadriver/deca_device.c ****     {
2863:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_HRBT_OFFSET , 0x01) ; // We need to swap RX bu
 6511              		.loc 1 2863 9
 6512 0022 0122     		movs	r2, #1
 6513 0024 0321     		movs	r1, #3
 6514 0026 0D20     		movs	r0, #13
 6515 0028 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6516              	.L279:
2864:Middlewares/Decawave/decadriver/deca_device.c ****     }
2865:Middlewares/Decawave/decadriver/deca_device.c **** }
 6517              		.loc 1 2865 1
 6518 002c 00BF     		nop
 6519 002e 0837     		adds	r7, r7, #8
 6520              	.LCFI348:
 6521              		.cfi_def_cfa_offset 8
 6522 0030 BD46     		mov	sp, r7
 6523              	.LCFI349:
 6524              		.cfi_def_cfa_register 13
 6525              		@ sp needed
 6526 0032 80BD     		pop	{r7, pc}
 6527              		.cfi_endproc
 6528              	.LFE77:
 6530              		.section	.text.dwt_setsniffmode,"ax",%progbits
 6531              		.align	1
 6532              		.global	dwt_setsniffmode
 6533              		.syntax unified
 6534              		.thumb
 6535              		.thumb_func
 6536              		.fpu fpv4-sp-d16
 6538              	dwt_setsniffmode:
 6539              	.LFB78:
2866:Middlewares/Decawave/decadriver/deca_device.c **** 
2867:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2868:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setsniffmode()
2869:Middlewares/Decawave/decadriver/deca_device.c ****  *
2870:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief enable/disable and configure SNIFF mode.
2871:Middlewares/Decawave/decadriver/deca_device.c ****  *
2872:Middlewares/Decawave/decadriver/deca_device.c ****  * SNIFF mode is a low-power reception mode where the receiver is sequenced on and off instead of b
2873:Middlewares/Decawave/decadriver/deca_device.c ****  * The time spent in each state (on/off) is specified through the parameters below.
2874:Middlewares/Decawave/decadriver/deca_device.c ****  * See DW1000 User Manual section 4.5 "Low-Power SNIFF mode" for more details.
2875:Middlewares/Decawave/decadriver/deca_device.c ****  *
2876:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
2877:Middlewares/Decawave/decadriver/deca_device.c ****  * @param enable - 1 to enable SNIFF mode, 0 to disable. When 0, all other parameters are not taken
2878:Middlewares/Decawave/decadriver/deca_device.c ****  * @param timeOn - duration of receiver ON phase, expressed in multiples of PAC size. The counter a
2879:Middlewares/Decawave/decadriver/deca_device.c ****  *                 size to the value set. Min value that can be set is 1 (i.e. an ON time of 2 PAC 
2880:Middlewares/Decawave/decadriver/deca_device.c ****  * @param timeOff - duration of receiver OFF phase, expressed in multiples of 128/125 s (~1 s
2881:Middlewares/Decawave/decadriver/deca_device.c ****  *
2882:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
ARM GAS  /tmp/cc0TY0Fa.s 			page 164


2883:Middlewares/Decawave/decadriver/deca_device.c ****  *
2884:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2885:Middlewares/Decawave/decadriver/deca_device.c ****  */
2886:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setsniffmode(int enable, uint8 timeOn, uint8 timeOff)
2887:Middlewares/Decawave/decadriver/deca_device.c **** {
 6540              		.loc 1 2887 1
 6541              		.cfi_startproc
 6542              		@ args = 0, pretend = 0, frame = 16
 6543              		@ frame_needed = 1, uses_anonymous_args = 0
 6544 0000 80B5     		push	{r7, lr}
 6545              	.LCFI350:
 6546              		.cfi_def_cfa_offset 8
 6547              		.cfi_offset 7, -8
 6548              		.cfi_offset 14, -4
 6549 0002 84B0     		sub	sp, sp, #16
 6550              	.LCFI351:
 6551              		.cfi_def_cfa_offset 24
 6552 0004 00AF     		add	r7, sp, #0
 6553              	.LCFI352:
 6554              		.cfi_def_cfa_register 7
 6555 0006 7860     		str	r0, [r7, #4]
 6556 0008 0B46     		mov	r3, r1
 6557 000a FB70     		strb	r3, [r7, #3]
 6558 000c 1346     		mov	r3, r2
 6559 000e BB70     		strb	r3, [r7, #2]
2888:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 pmsc_reg;
2889:Middlewares/Decawave/decadriver/deca_device.c ****     if (enable)
 6560              		.loc 1 2889 8
 6561 0010 7B68     		ldr	r3, [r7, #4]
 6562 0012 002B     		cmp	r3, #0
 6563 0014 1FD0     		beq	.L281
 6564              	.LBB4:
2890:Middlewares/Decawave/decadriver/deca_device.c ****     {
2891:Middlewares/Decawave/decadriver/deca_device.c ****         /* Configure ON/OFF times and enable PLL2 on/off sequencing by SNIFF mode. */
2892:Middlewares/Decawave/decadriver/deca_device.c ****         uint16 sniff_reg = (((uint16)timeOff << 8) | timeOn) & RX_SNIFF_MASK;
 6565              		.loc 1 2892 30
 6566 0016 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 6567              		.loc 1 2892 46
 6568 0018 1B02     		lsls	r3, r3, #8
 6569              		.loc 1 2892 52
 6570 001a 1AB2     		sxth	r2, r3
 6571 001c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 6572 001e 1BB2     		sxth	r3, r3
 6573 0020 1343     		orrs	r3, r3, r2
 6574 0022 1BB2     		sxth	r3, r3
 6575 0024 9BB2     		uxth	r3, r3
 6576              		.loc 1 2892 16
 6577 0026 23F0F003 		bic	r3, r3, #240
 6578 002a 7B81     		strh	r3, [r7, #10]	@ movhi
2893:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write16bitoffsetreg(RX_SNIFF_ID, RX_SNIFF_OFFSET, sniff_reg);
 6579              		.loc 1 2893 9
 6580 002c 7B89     		ldrh	r3, [r7, #10]
 6581 002e 1A46     		mov	r2, r3
 6582 0030 0021     		movs	r1, #0
 6583 0032 1D20     		movs	r0, #29
 6584 0034 FFF7FEFF 		bl	dwt_write16bitoffsetreg
2894:Middlewares/Decawave/decadriver/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
ARM GAS  /tmp/cc0TY0Fa.s 			page 165


 6585              		.loc 1 2894 20
 6586 0038 0021     		movs	r1, #0
 6587 003a 3620     		movs	r0, #54
 6588 003c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 6589 0040 F860     		str	r0, [r7, #12]
2895:Middlewares/Decawave/decadriver/deca_device.c ****         pmsc_reg |= PMSC_CTRL0_PLL2_SEQ_EN;
 6590              		.loc 1 2895 18
 6591 0042 FB68     		ldr	r3, [r7, #12]
 6592 0044 43F08073 		orr	r3, r3, #16777216
 6593 0048 FB60     		str	r3, [r7, #12]
2896:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, pmsc_reg);
 6594              		.loc 1 2896 9
 6595 004a FA68     		ldr	r2, [r7, #12]
 6596 004c 0021     		movs	r1, #0
 6597 004e 3620     		movs	r0, #54
 6598 0050 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6599              	.LBE4:
2897:Middlewares/Decawave/decadriver/deca_device.c ****     }
2898:Middlewares/Decawave/decadriver/deca_device.c ****     else
2899:Middlewares/Decawave/decadriver/deca_device.c ****     {
2900:Middlewares/Decawave/decadriver/deca_device.c ****         /* Clear ON/OFF times and disable PLL2 on/off sequencing by SNIFF mode. */
2901:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write16bitoffsetreg(RX_SNIFF_ID, RX_SNIFF_OFFSET, 0x0000);
2902:Middlewares/Decawave/decadriver/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
2903:Middlewares/Decawave/decadriver/deca_device.c ****         pmsc_reg &= ~PMSC_CTRL0_PLL2_SEQ_EN;
2904:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, pmsc_reg);
2905:Middlewares/Decawave/decadriver/deca_device.c ****     }
2906:Middlewares/Decawave/decadriver/deca_device.c **** }
 6600              		.loc 1 2906 1
 6601 0054 12E0     		b	.L283
 6602              	.L281:
2901:Middlewares/Decawave/decadriver/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 6603              		.loc 1 2901 9
 6604 0056 0022     		movs	r2, #0
 6605 0058 0021     		movs	r1, #0
 6606 005a 1D20     		movs	r0, #29
 6607 005c FFF7FEFF 		bl	dwt_write16bitoffsetreg
2902:Middlewares/Decawave/decadriver/deca_device.c ****         pmsc_reg &= ~PMSC_CTRL0_PLL2_SEQ_EN;
 6608              		.loc 1 2902 20
 6609 0060 0021     		movs	r1, #0
 6610 0062 3620     		movs	r0, #54
 6611 0064 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 6612 0068 F860     		str	r0, [r7, #12]
2903:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, pmsc_reg);
 6613              		.loc 1 2903 18
 6614 006a FB68     		ldr	r3, [r7, #12]
 6615 006c 23F08073 		bic	r3, r3, #16777216
 6616 0070 FB60     		str	r3, [r7, #12]
2904:Middlewares/Decawave/decadriver/deca_device.c ****     }
 6617              		.loc 1 2904 9
 6618 0072 FA68     		ldr	r2, [r7, #12]
 6619 0074 0021     		movs	r1, #0
 6620 0076 3620     		movs	r0, #54
 6621 0078 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6622              	.L283:
 6623              		.loc 1 2906 1
 6624 007c 00BF     		nop
 6625 007e 1037     		adds	r7, r7, #16
ARM GAS  /tmp/cc0TY0Fa.s 			page 166


 6626              	.LCFI353:
 6627              		.cfi_def_cfa_offset 8
 6628 0080 BD46     		mov	sp, r7
 6629              	.LCFI354:
 6630              		.cfi_def_cfa_register 13
 6631              		@ sp needed
 6632 0082 80BD     		pop	{r7, pc}
 6633              		.cfi_endproc
 6634              	.LFE78:
 6636              		.section	.text.dwt_setlowpowerlistening,"ax",%progbits
 6637              		.align	1
 6638              		.global	dwt_setlowpowerlistening
 6639              		.syntax unified
 6640              		.thumb
 6641              		.thumb_func
 6642              		.fpu fpv4-sp-d16
 6644              	dwt_setlowpowerlistening:
 6645              	.LFB79:
2907:Middlewares/Decawave/decadriver/deca_device.c **** 
2908:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2909:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setlowpowerlistening()
2910:Middlewares/Decawave/decadriver/deca_device.c ****  *
2911:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief enable/disable low-power listening mode.
2912:Middlewares/Decawave/decadriver/deca_device.c ****  *
2913:Middlewares/Decawave/decadriver/deca_device.c ****  * Low-power listening is a feature whereby the DW1000 is predominantly in the SLEEP state but wake
2914:Middlewares/Decawave/decadriver/deca_device.c ****  * this "long sleep"), for a very short time to sample the air for a preamble sequence. This preamb
2915:Middlewares/Decawave/decadriver/deca_device.c ****  * phase is actually two reception phases separated by a "short sleep" time. See DW1000 User Manual
2916:Middlewares/Decawave/decadriver/deca_device.c ****  * Listening" for more details.
2917:Middlewares/Decawave/decadriver/deca_device.c ****  *
2918:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE: Before enabling low-power listening, the following functions have to be called to fully co
2919:Middlewares/Decawave/decadriver/deca_device.c ****  *           - dwt_configuresleep() to configure long sleep phase. "mode" parameter should at least
2920:Middlewares/Decawave/decadriver/deca_device.c ****  *             DWT_CONFIG and DWT_RX_EN set and "wake" parameter should at least have both DWT_WAKE
2921:Middlewares/Decawave/decadriver/deca_device.c ****  *           - dwt_calibratesleepcnt() and dwt_configuresleepcnt() to define the "long sleep" phase
2922:Middlewares/Decawave/decadriver/deca_device.c ****  *           - dwt_setsnoozetime() to define the "short sleep" phase duration.
2923:Middlewares/Decawave/decadriver/deca_device.c ****  *           - dwt_setpreambledetecttimeout() to define the reception phases duration.
2924:Middlewares/Decawave/decadriver/deca_device.c ****  *           - dwt_setinterrupt() to activate RX good frame interrupt (DWT_INT_RFCG) only.
2925:Middlewares/Decawave/decadriver/deca_device.c ****  *       When configured, low-power listening mode can be triggered either by putting the DW1000 to
2926:Middlewares/Decawave/decadriver/deca_device.c ****  *       dwt_entersleep()) or by activating reception (using dwt_rxenable()).
2927:Middlewares/Decawave/decadriver/deca_device.c ****  *
2928:Middlewares/Decawave/decadriver/deca_device.c ****  *       Please refer to the low-power listening examples (examples 8a/8b accompanying the API dist
2929:Middlewares/Decawave/decadriver/deca_device.c ****  *       website). They form a working example code that shows how to use low-power listening corre
2930:Middlewares/Decawave/decadriver/deca_device.c ****  *
2931:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
2932:Middlewares/Decawave/decadriver/deca_device.c ****  * @param enable - 1 to enable low-power listening, 0 to disable.
2933:Middlewares/Decawave/decadriver/deca_device.c ****  *
2934:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2935:Middlewares/Decawave/decadriver/deca_device.c ****  *
2936:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2937:Middlewares/Decawave/decadriver/deca_device.c ****  */
2938:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setlowpowerlistening(int enable)
2939:Middlewares/Decawave/decadriver/deca_device.c **** {
 6646              		.loc 1 2939 1
 6647              		.cfi_startproc
 6648              		@ args = 0, pretend = 0, frame = 16
 6649              		@ frame_needed = 1, uses_anonymous_args = 0
 6650 0000 80B5     		push	{r7, lr}
 6651              	.LCFI355:
ARM GAS  /tmp/cc0TY0Fa.s 			page 167


 6652              		.cfi_def_cfa_offset 8
 6653              		.cfi_offset 7, -8
 6654              		.cfi_offset 14, -4
 6655 0002 84B0     		sub	sp, sp, #16
 6656              	.LCFI356:
 6657              		.cfi_def_cfa_offset 24
 6658 0004 00AF     		add	r7, sp, #0
 6659              	.LCFI357:
 6660              		.cfi_def_cfa_register 7
 6661 0006 7860     		str	r0, [r7, #4]
2940:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET);
 6662              		.loc 1 2940 23
 6663 0008 0421     		movs	r1, #4
 6664 000a 3620     		movs	r0, #54
 6665 000c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 6666 0010 F860     		str	r0, [r7, #12]
2941:Middlewares/Decawave/decadriver/deca_device.c ****     if (enable)
 6667              		.loc 1 2941 8
 6668 0012 7B68     		ldr	r3, [r7, #4]
 6669 0014 002B     		cmp	r3, #0
 6670 0016 04D0     		beq	.L285
2942:Middlewares/Decawave/decadriver/deca_device.c ****     {
2943:Middlewares/Decawave/decadriver/deca_device.c ****         /* Configure RX to sleep and snooze features. */
2944:Middlewares/Decawave/decadriver/deca_device.c ****         pmsc_reg |= (PMSC_CTRL1_ARXSLP | PMSC_CTRL1_SNOZE);
 6671              		.loc 1 2944 18
 6672 0018 FB68     		ldr	r3, [r7, #12]
 6673 001a 43F44053 		orr	r3, r3, #12288
 6674 001e FB60     		str	r3, [r7, #12]
 6675 0020 03E0     		b	.L286
 6676              	.L285:
2945:Middlewares/Decawave/decadriver/deca_device.c ****     }
2946:Middlewares/Decawave/decadriver/deca_device.c ****     else
2947:Middlewares/Decawave/decadriver/deca_device.c ****     {
2948:Middlewares/Decawave/decadriver/deca_device.c ****         /* Reset RX to sleep and snooze features. */
2949:Middlewares/Decawave/decadriver/deca_device.c ****         pmsc_reg &= ~(PMSC_CTRL1_ARXSLP | PMSC_CTRL1_SNOZE);
 6677              		.loc 1 2949 18
 6678 0022 FB68     		ldr	r3, [r7, #12]
 6679 0024 23F44053 		bic	r3, r3, #12288
 6680 0028 FB60     		str	r3, [r7, #12]
 6681              	.L286:
2950:Middlewares/Decawave/decadriver/deca_device.c ****     }
2951:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, pmsc_reg);
 6682              		.loc 1 2951 5
 6683 002a FA68     		ldr	r2, [r7, #12]
 6684 002c 0421     		movs	r1, #4
 6685 002e 3620     		movs	r0, #54
 6686 0030 FFF7FEFF 		bl	dwt_write32bitoffsetreg
2952:Middlewares/Decawave/decadriver/deca_device.c **** }
 6687              		.loc 1 2952 1
 6688 0034 00BF     		nop
 6689 0036 1037     		adds	r7, r7, #16
 6690              	.LCFI358:
 6691              		.cfi_def_cfa_offset 8
 6692 0038 BD46     		mov	sp, r7
 6693              	.LCFI359:
 6694              		.cfi_def_cfa_register 13
 6695              		@ sp needed
ARM GAS  /tmp/cc0TY0Fa.s 			page 168


 6696 003a 80BD     		pop	{r7, pc}
 6697              		.cfi_endproc
 6698              	.LFE79:
 6700              		.section	.text.dwt_setsnoozetime,"ax",%progbits
 6701              		.align	1
 6702              		.global	dwt_setsnoozetime
 6703              		.syntax unified
 6704              		.thumb
 6705              		.thumb_func
 6706              		.fpu fpv4-sp-d16
 6708              	dwt_setsnoozetime:
 6709              	.LFB80:
2953:Middlewares/Decawave/decadriver/deca_device.c **** 
2954:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2955:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setsnoozetime()
2956:Middlewares/Decawave/decadriver/deca_device.c ****  *
2957:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief Set duration of "short sleep" phase when in low-power listening mode.
2958:Middlewares/Decawave/decadriver/deca_device.c ****  *
2959:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
2960:Middlewares/Decawave/decadriver/deca_device.c ****  * @param snooze_time - "short sleep" phase duration, expressed in multiples of 512/19.2 s (~26.
2961:Middlewares/Decawave/decadriver/deca_device.c ****  *                      automatically adds 1 to the value set. The smallest working value that shou
2962:Middlewares/Decawave/decadriver/deca_device.c ****  *                      i.e. giving a snooze time of 2 units (or ~53 s).
2963:Middlewares/Decawave/decadriver/deca_device.c ****  *
2964:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
2965:Middlewares/Decawave/decadriver/deca_device.c ****  *
2966:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
2967:Middlewares/Decawave/decadriver/deca_device.c ****  */
2968:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setsnoozetime(uint8 snooze_time)
2969:Middlewares/Decawave/decadriver/deca_device.c **** {
 6710              		.loc 1 2969 1
 6711              		.cfi_startproc
 6712              		@ args = 0, pretend = 0, frame = 8
 6713              		@ frame_needed = 1, uses_anonymous_args = 0
 6714 0000 80B5     		push	{r7, lr}
 6715              	.LCFI360:
 6716              		.cfi_def_cfa_offset 8
 6717              		.cfi_offset 7, -8
 6718              		.cfi_offset 14, -4
 6719 0002 82B0     		sub	sp, sp, #8
 6720              	.LCFI361:
 6721              		.cfi_def_cfa_offset 16
 6722 0004 00AF     		add	r7, sp, #0
 6723              	.LCFI362:
 6724              		.cfi_def_cfa_register 7
 6725 0006 0346     		mov	r3, r0
 6726 0008 FB71     		strb	r3, [r7, #7]
2970:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_SNOZT_OFFSET, snooze_time);
 6727              		.loc 1 2970 5
 6728 000a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6729 000c 1A46     		mov	r2, r3
 6730 000e 0C21     		movs	r1, #12
 6731 0010 3620     		movs	r0, #54
 6732 0012 FFF7FEFF 		bl	dwt_write8bitoffsetreg
2971:Middlewares/Decawave/decadriver/deca_device.c **** }
 6733              		.loc 1 2971 1
 6734 0016 00BF     		nop
 6735 0018 0837     		adds	r7, r7, #8
ARM GAS  /tmp/cc0TY0Fa.s 			page 169


 6736              	.LCFI363:
 6737              		.cfi_def_cfa_offset 8
 6738 001a BD46     		mov	sp, r7
 6739              	.LCFI364:
 6740              		.cfi_def_cfa_register 13
 6741              		@ sp needed
 6742 001c 80BD     		pop	{r7, pc}
 6743              		.cfi_endproc
 6744              	.LFE80:
 6746              		.section	.text.dwt_rxenable,"ax",%progbits
 6747              		.align	1
 6748              		.global	dwt_rxenable
 6749              		.syntax unified
 6750              		.thumb
 6751              		.thumb_func
 6752              		.fpu fpv4-sp-d16
 6754              	dwt_rxenable:
 6755              	.LFB81:
2972:Middlewares/Decawave/decadriver/deca_device.c **** 
2973:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2974:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_rxenable()
2975:Middlewares/Decawave/decadriver/deca_device.c ****  *
2976:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This call turns on the receiver, can be immediate or delayed (depending on the mode param
2977:Middlewares/Decawave/decadriver/deca_device.c ****  * "late" error the receiver will only be turned on if the DWT_IDLE_ON_DLY_ERR is not set.
2978:Middlewares/Decawave/decadriver/deca_device.c ****  * The receiver will stay turned on, listening to any messages until
2979:Middlewares/Decawave/decadriver/deca_device.c ****  * it either receives a good frame, an error (CRC, PHY header, Reed Solomon) or  it times out (SFD,
2980:Middlewares/Decawave/decadriver/deca_device.c ****  *
2981:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
2982:Middlewares/Decawave/decadriver/deca_device.c ****  * @param mode - this can be one of the following allowed values:
2983:Middlewares/Decawave/decadriver/deca_device.c ****  *
2984:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_START_RX_IMMEDIATE      0 used to enbale receiver immediately
2985:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_START_RX_DELAYED        1 used to set up delayed RX, if "late" error triggers, then the RX w
2986:Middlewares/Decawave/decadriver/deca_device.c ****  * (DWT_START_RX_DELAYED | DWT_IDLE_ON_DLY_ERR) 3 used to disable re-enabling of receiver if delaye
2987:Middlewares/Decawave/decadriver/deca_device.c ****  * (DWT_START_RX_IMMEDIATE | DWT_NO_SYNC_PTRS) 4 used to re-enable RX without trying to sync IC and
2988:Middlewares/Decawave/decadriver/deca_device.c ****  *                                               performing manual RX re-enabling in double bufferi
2989:Middlewares/Decawave/decadriver/deca_device.c ****  *
2990:Middlewares/Decawave/decadriver/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error (e.g. a delayed receive enable will be t
2991:Middlewares/Decawave/decadriver/deca_device.c ****  */
2992:Middlewares/Decawave/decadriver/deca_device.c **** int dwt_rxenable(int mode)
2993:Middlewares/Decawave/decadriver/deca_device.c **** {
 6756              		.loc 1 2993 1
 6757              		.cfi_startproc
 6758              		@ args = 0, pretend = 0, frame = 16
 6759              		@ frame_needed = 1, uses_anonymous_args = 0
 6760 0000 80B5     		push	{r7, lr}
 6761              	.LCFI365:
 6762              		.cfi_def_cfa_offset 8
 6763              		.cfi_offset 7, -8
 6764              		.cfi_offset 14, -4
 6765 0002 84B0     		sub	sp, sp, #16
 6766              	.LCFI366:
 6767              		.cfi_def_cfa_offset 24
 6768 0004 00AF     		add	r7, sp, #0
 6769              	.LCFI367:
 6770              		.cfi_def_cfa_register 7
 6771 0006 7860     		str	r0, [r7, #4]
2994:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 temp ;
ARM GAS  /tmp/cc0TY0Fa.s 			page 170


2995:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 temp1 ;
2996:Middlewares/Decawave/decadriver/deca_device.c **** 
2997:Middlewares/Decawave/decadriver/deca_device.c ****     if ((mode & DWT_NO_SYNC_PTRS) == 0)
 6772              		.loc 1 2997 15
 6773 0008 7B68     		ldr	r3, [r7, #4]
 6774 000a 03F00403 		and	r3, r3, #4
 6775              		.loc 1 2997 8
 6776 000e 002B     		cmp	r3, #0
 6777 0010 01D1     		bne	.L289
2998:Middlewares/Decawave/decadriver/deca_device.c ****     {
2999:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_syncrxbufptrs();
 6778              		.loc 1 2999 9
 6779 0012 FFF7FEFF 		bl	dwt_syncrxbufptrs
 6780              	.L289:
3000:Middlewares/Decawave/decadriver/deca_device.c ****     }
3001:Middlewares/Decawave/decadriver/deca_device.c **** 
3002:Middlewares/Decawave/decadriver/deca_device.c ****     temp = (uint16)SYS_CTRL_RXENAB ;
 6781              		.loc 1 3002 10
 6782 0016 4FF48073 		mov	r3, #256
 6783 001a FB81     		strh	r3, [r7, #14]	@ movhi
3003:Middlewares/Decawave/decadriver/deca_device.c **** 
3004:Middlewares/Decawave/decadriver/deca_device.c ****     if (mode & DWT_START_RX_DELAYED)
 6784              		.loc 1 3004 14
 6785 001c 7B68     		ldr	r3, [r7, #4]
 6786 001e 03F00103 		and	r3, r3, #1
 6787              		.loc 1 3004 8
 6788 0022 002B     		cmp	r3, #0
 6789 0024 03D0     		beq	.L290
3005:Middlewares/Decawave/decadriver/deca_device.c ****     {
3006:Middlewares/Decawave/decadriver/deca_device.c ****         temp |= (uint16)SYS_CTRL_RXDLYE ;
 6790              		.loc 1 3006 14
 6791 0026 FB89     		ldrh	r3, [r7, #14]	@ movhi
 6792 0028 43F40073 		orr	r3, r3, #512
 6793 002c FB81     		strh	r3, [r7, #14]	@ movhi
 6794              	.L290:
3007:Middlewares/Decawave/decadriver/deca_device.c ****     }
3008:Middlewares/Decawave/decadriver/deca_device.c **** 
3009:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, temp);
 6795              		.loc 1 3009 5
 6796 002e FB89     		ldrh	r3, [r7, #14]
 6797 0030 1A46     		mov	r2, r3
 6798 0032 0021     		movs	r1, #0
 6799 0034 0D20     		movs	r0, #13
 6800 0036 FFF7FEFF 		bl	dwt_write16bitoffsetreg
3010:Middlewares/Decawave/decadriver/deca_device.c **** 
3011:Middlewares/Decawave/decadriver/deca_device.c ****     if (mode & DWT_START_RX_DELAYED) // check for errors
 6801              		.loc 1 3011 14
 6802 003a 7B68     		ldr	r3, [r7, #4]
 6803 003c 03F00103 		and	r3, r3, #1
 6804              		.loc 1 3011 8
 6805 0040 002B     		cmp	r3, #0
 6806 0042 1AD0     		beq	.L291
3012:Middlewares/Decawave/decadriver/deca_device.c ****     {
3013:Middlewares/Decawave/decadriver/deca_device.c ****         temp1 = dwt_read8bitoffsetreg(SYS_STATUS_ID, 3); // Read 1 byte at offset 3 to get the 4th 
 6807              		.loc 1 3013 17
 6808 0044 0321     		movs	r1, #3
 6809 0046 0F20     		movs	r0, #15
ARM GAS  /tmp/cc0TY0Fa.s 			page 171


 6810 0048 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 6811 004c 0346     		mov	r3, r0
 6812 004e 7B73     		strb	r3, [r7, #13]
3014:Middlewares/Decawave/decadriver/deca_device.c ****         if ((temp1 & (SYS_STATUS_HPDWARN >> 24)) != 0) // if delay has passed do immediate RX on un
 6813              		.loc 1 3014 20
 6814 0050 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 6815 0052 03F00803 		and	r3, r3, #8
 6816              		.loc 1 3014 12
 6817 0056 002B     		cmp	r3, #0
 6818 0058 0FD0     		beq	.L291
3015:Middlewares/Decawave/decadriver/deca_device.c ****         {
3016:Middlewares/Decawave/decadriver/deca_device.c ****             dwt_forcetrxoff(); // turn the delayed receive off
 6819              		.loc 1 3016 13
 6820 005a FFF7FEFF 		bl	dwt_forcetrxoff
3017:Middlewares/Decawave/decadriver/deca_device.c **** 
3018:Middlewares/Decawave/decadriver/deca_device.c ****             if((mode & DWT_IDLE_ON_DLY_ERR) == 0) // if DWT_IDLE_ON_DLY_ERR not set then re-enable 
 6821              		.loc 1 3018 22
 6822 005e 7B68     		ldr	r3, [r7, #4]
 6823 0060 03F00203 		and	r3, r3, #2
 6824              		.loc 1 3018 15
 6825 0064 002B     		cmp	r3, #0
 6826 0066 05D1     		bne	.L292
3019:Middlewares/Decawave/decadriver/deca_device.c ****             {
3020:Middlewares/Decawave/decadriver/deca_device.c ****                 dwt_write16bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, SYS_CTRL_RXENAB);
 6827              		.loc 1 3020 17
 6828 0068 4FF48072 		mov	r2, #256
 6829 006c 0021     		movs	r1, #0
 6830 006e 0D20     		movs	r0, #13
 6831 0070 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 6832              	.L292:
3021:Middlewares/Decawave/decadriver/deca_device.c ****             }
3022:Middlewares/Decawave/decadriver/deca_device.c ****             return DWT_ERROR; // return warning indication
 6833              		.loc 1 3022 20
 6834 0074 4FF0FF33 		mov	r3, #-1
 6835 0078 00E0     		b	.L293
 6836              	.L291:
3023:Middlewares/Decawave/decadriver/deca_device.c ****         }
3024:Middlewares/Decawave/decadriver/deca_device.c ****     }
3025:Middlewares/Decawave/decadriver/deca_device.c **** 
3026:Middlewares/Decawave/decadriver/deca_device.c ****     return DWT_SUCCESS;
 6837              		.loc 1 3026 12
 6838 007a 0023     		movs	r3, #0
 6839              	.L293:
3027:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_rxenable()
 6840              		.loc 1 3027 1
 6841 007c 1846     		mov	r0, r3
 6842 007e 1037     		adds	r7, r7, #16
 6843              	.LCFI368:
 6844              		.cfi_def_cfa_offset 8
 6845 0080 BD46     		mov	sp, r7
 6846              	.LCFI369:
 6847              		.cfi_def_cfa_register 13
 6848              		@ sp needed
 6849 0082 80BD     		pop	{r7, pc}
 6850              		.cfi_endproc
 6851              	.LFE81:
 6853              		.section	.text.dwt_setrxtimeout,"ax",%progbits
ARM GAS  /tmp/cc0TY0Fa.s 			page 172


 6854              		.align	1
 6855              		.global	dwt_setrxtimeout
 6856              		.syntax unified
 6857              		.thumb
 6858              		.thumb_func
 6859              		.fpu fpv4-sp-d16
 6861              	dwt_setrxtimeout:
 6862              	.LFB82:
3028:Middlewares/Decawave/decadriver/deca_device.c **** 
3029:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3030:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setrxtimeout()
3031:Middlewares/Decawave/decadriver/deca_device.c ****  *
3032:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This call enables RX timeout (SY_STAT_RFTO event)
3033:Middlewares/Decawave/decadriver/deca_device.c ****  *
3034:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
3035:Middlewares/Decawave/decadriver/deca_device.c ****  * @param time - how long the receiver remains on from the RX enable command
3036:Middlewares/Decawave/decadriver/deca_device.c ****  *               The time parameter used here is in 1.0256 us (512/499.2MHz) units
3037:Middlewares/Decawave/decadriver/deca_device.c ****  *               If set to 0 the timeout is disabled.
3038:Middlewares/Decawave/decadriver/deca_device.c ****  *
3039:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3040:Middlewares/Decawave/decadriver/deca_device.c ****  *
3041:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3042:Middlewares/Decawave/decadriver/deca_device.c ****  */
3043:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setrxtimeout(uint16 time)
3044:Middlewares/Decawave/decadriver/deca_device.c **** {
 6863              		.loc 1 3044 1
 6864              		.cfi_startproc
 6865              		@ args = 0, pretend = 0, frame = 16
 6866              		@ frame_needed = 1, uses_anonymous_args = 0
 6867 0000 80B5     		push	{r7, lr}
 6868              	.LCFI370:
 6869              		.cfi_def_cfa_offset 8
 6870              		.cfi_offset 7, -8
 6871              		.cfi_offset 14, -4
 6872 0002 84B0     		sub	sp, sp, #16
 6873              	.LCFI371:
 6874              		.cfi_def_cfa_offset 24
 6875 0004 00AF     		add	r7, sp, #0
 6876              	.LCFI372:
 6877              		.cfi_def_cfa_register 7
 6878 0006 0346     		mov	r3, r0
 6879 0008 FB80     		strh	r3, [r7, #6]	@ movhi
3045:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 temp ;
3046:Middlewares/Decawave/decadriver/deca_device.c **** 
3047:Middlewares/Decawave/decadriver/deca_device.c ****     temp = dwt_read8bitoffsetreg(SYS_CFG_ID, 3); // Read at offset 3 to get the upper byte only
 6880              		.loc 1 3047 12
 6881 000a 0321     		movs	r1, #3
 6882 000c 0420     		movs	r0, #4
 6883 000e FFF7FEFF 		bl	dwt_read8bitoffsetreg
 6884 0012 0346     		mov	r3, r0
 6885 0014 FB73     		strb	r3, [r7, #15]
3048:Middlewares/Decawave/decadriver/deca_device.c **** 
3049:Middlewares/Decawave/decadriver/deca_device.c ****     if(time > 0)
 6886              		.loc 1 3049 7
 6887 0016 FB88     		ldrh	r3, [r7, #6]
 6888 0018 002B     		cmp	r3, #0
 6889 001a 18D0     		beq	.L295
ARM GAS  /tmp/cc0TY0Fa.s 			page 173


3050:Middlewares/Decawave/decadriver/deca_device.c ****     {
3051:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write16bitoffsetreg(RX_FWTO_ID, RX_FWTO_OFFSET, time) ;
 6890              		.loc 1 3051 9
 6891 001c FB88     		ldrh	r3, [r7, #6]
 6892 001e 1A46     		mov	r2, r3
 6893 0020 0021     		movs	r1, #0
 6894 0022 0C20     		movs	r0, #12
 6895 0024 FFF7FEFF 		bl	dwt_write16bitoffsetreg
3052:Middlewares/Decawave/decadriver/deca_device.c **** 
3053:Middlewares/Decawave/decadriver/deca_device.c ****         temp |= (uint8)(SYS_CFG_RXWTOE>>24); // Shift RXWTOE mask as we read the upper byte only
 6896              		.loc 1 3053 14
 6897 0028 FB7B     		ldrb	r3, [r7, #15]
 6898 002a 43F01003 		orr	r3, r3, #16
 6899 002e FB73     		strb	r3, [r7, #15]
3054:Middlewares/Decawave/decadriver/deca_device.c ****         // OR in 32bit value (1 bit set), I know this is in high byte.
3055:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->sysCFGreg |= SYS_CFG_RXWTOE;
 6900              		.loc 1 3055 33
 6901 0030 124B     		ldr	r3, .L298
 6902 0032 1B68     		ldr	r3, [r3]
 6903 0034 1A69     		ldr	r2, [r3, #16]
 6904 0036 114B     		ldr	r3, .L298
 6905 0038 1B68     		ldr	r3, [r3]
 6906 003a 42F08052 		orr	r2, r2, #268435456
 6907 003e 1A61     		str	r2, [r3, #16]
3056:Middlewares/Decawave/decadriver/deca_device.c **** 
3057:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CFG_ID, 3, temp); // Write at offset 3 to write the upper byte o
 6908              		.loc 1 3057 9
 6909 0040 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 6910 0042 1A46     		mov	r2, r3
 6911 0044 0321     		movs	r1, #3
 6912 0046 0420     		movs	r0, #4
 6913 0048 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3058:Middlewares/Decawave/decadriver/deca_device.c ****     }
3059:Middlewares/Decawave/decadriver/deca_device.c ****     else
3060:Middlewares/Decawave/decadriver/deca_device.c ****     {
3061:Middlewares/Decawave/decadriver/deca_device.c ****         temp &= ~((uint8)(SYS_CFG_RXWTOE>>24)); // Shift RXWTOE mask as we read the upper byte only
3062:Middlewares/Decawave/decadriver/deca_device.c ****         // AND in inverted 32bit value (1 bit clear), I know this is in high byte.
3063:Middlewares/Decawave/decadriver/deca_device.c ****         pdw1000local->sysCFGreg &= ~(SYS_CFG_RXWTOE);
3064:Middlewares/Decawave/decadriver/deca_device.c **** 
3065:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CFG_ID, 3, temp); // Write at offset 3 to write the upper byte o
3066:Middlewares/Decawave/decadriver/deca_device.c ****     }
3067:Middlewares/Decawave/decadriver/deca_device.c **** 
3068:Middlewares/Decawave/decadriver/deca_device.c **** } // end dwt_setrxtimeout()
 6914              		.loc 1 3068 1
 6915 004c 11E0     		b	.L297
 6916              	.L295:
3061:Middlewares/Decawave/decadriver/deca_device.c ****         // AND in inverted 32bit value (1 bit clear), I know this is in high byte.
 6917              		.loc 1 3061 14
 6918 004e FB7B     		ldrb	r3, [r7, #15]
 6919 0050 23F01003 		bic	r3, r3, #16
 6920 0054 FB73     		strb	r3, [r7, #15]
3063:Middlewares/Decawave/decadriver/deca_device.c **** 
 6921              		.loc 1 3063 33
 6922 0056 094B     		ldr	r3, .L298
 6923 0058 1B68     		ldr	r3, [r3]
 6924 005a 1A69     		ldr	r2, [r3, #16]
 6925 005c 074B     		ldr	r3, .L298
ARM GAS  /tmp/cc0TY0Fa.s 			page 174


 6926 005e 1B68     		ldr	r3, [r3]
 6927 0060 22F08052 		bic	r2, r2, #268435456
 6928 0064 1A61     		str	r2, [r3, #16]
3065:Middlewares/Decawave/decadriver/deca_device.c ****     }
 6929              		.loc 1 3065 9
 6930 0066 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 6931 0068 1A46     		mov	r2, r3
 6932 006a 0321     		movs	r1, #3
 6933 006c 0420     		movs	r0, #4
 6934 006e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6935              	.L297:
 6936              		.loc 1 3068 1
 6937 0072 00BF     		nop
 6938 0074 1037     		adds	r7, r7, #16
 6939              	.LCFI373:
 6940              		.cfi_def_cfa_offset 8
 6941 0076 BD46     		mov	sp, r7
 6942              	.LCFI374:
 6943              		.cfi_def_cfa_register 13
 6944              		@ sp needed
 6945 0078 80BD     		pop	{r7, pc}
 6946              	.L299:
 6947 007a 00BF     		.align	2
 6948              	.L298:
 6949 007c 00000000 		.word	pdw1000local
 6950              		.cfi_endproc
 6951              	.LFE82:
 6953              		.section	.text.dwt_setpreambledetecttimeout,"ax",%progbits
 6954              		.align	1
 6955              		.global	dwt_setpreambledetecttimeout
 6956              		.syntax unified
 6957              		.thumb
 6958              		.thumb_func
 6959              		.fpu fpv4-sp-d16
 6961              	dwt_setpreambledetecttimeout:
 6962              	.LFB83:
3069:Middlewares/Decawave/decadriver/deca_device.c **** 
3070:Middlewares/Decawave/decadriver/deca_device.c **** 
3071:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3072:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setpreambledetecttimeout()
3073:Middlewares/Decawave/decadriver/deca_device.c ****  *
3074:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This call enables preamble timeout (SY_STAT_RXPTO event)
3075:Middlewares/Decawave/decadriver/deca_device.c ****  *
3076:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
3077:Middlewares/Decawave/decadriver/deca_device.c ****  * @param  timeout - Preamble detection timeout, expressed in multiples of PAC size. The counter au
3078:Middlewares/Decawave/decadriver/deca_device.c ****  *                   size to the value set. Min value that can be set is 1 (i.e. a timeout of 2 PAC
3079:Middlewares/Decawave/decadriver/deca_device.c ****  *
3080:Middlewares/Decawave/decadriver/deca_device.c ****  *                   Note: value of 0 disables the preamble timeout
3081:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3082:Middlewares/Decawave/decadriver/deca_device.c ****  *
3083:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3084:Middlewares/Decawave/decadriver/deca_device.c ****  */
3085:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setpreambledetecttimeout(uint16 timeout)
3086:Middlewares/Decawave/decadriver/deca_device.c **** {
 6963              		.loc 1 3086 1
 6964              		.cfi_startproc
 6965              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /tmp/cc0TY0Fa.s 			page 175


 6966              		@ frame_needed = 1, uses_anonymous_args = 0
 6967 0000 80B5     		push	{r7, lr}
 6968              	.LCFI375:
 6969              		.cfi_def_cfa_offset 8
 6970              		.cfi_offset 7, -8
 6971              		.cfi_offset 14, -4
 6972 0002 82B0     		sub	sp, sp, #8
 6973              	.LCFI376:
 6974              		.cfi_def_cfa_offset 16
 6975 0004 00AF     		add	r7, sp, #0
 6976              	.LCFI377:
 6977              		.cfi_def_cfa_register 7
 6978 0006 0346     		mov	r3, r0
 6979 0008 FB80     		strh	r3, [r7, #6]	@ movhi
3087:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_PRETOC_OFFSET, timeout);
 6980              		.loc 1 3087 5
 6981 000a FB88     		ldrh	r3, [r7, #6]
 6982 000c 1A46     		mov	r2, r3
 6983 000e 2421     		movs	r1, #36
 6984 0010 2720     		movs	r0, #39
 6985 0012 FFF7FEFF 		bl	dwt_write16bitoffsetreg
3088:Middlewares/Decawave/decadriver/deca_device.c **** }
 6986              		.loc 1 3088 1
 6987 0016 00BF     		nop
 6988 0018 0837     		adds	r7, r7, #8
 6989              	.LCFI378:
 6990              		.cfi_def_cfa_offset 8
 6991 001a BD46     		mov	sp, r7
 6992              	.LCFI379:
 6993              		.cfi_def_cfa_register 13
 6994              		@ sp needed
 6995 001c 80BD     		pop	{r7, pc}
 6996              		.cfi_endproc
 6997              	.LFE83:
 6999              		.section	.text.dwt_setinterrupt,"ax",%progbits
 7000              		.align	1
 7001              		.global	dwt_setinterrupt
 7002              		.syntax unified
 7003              		.thumb
 7004              		.thumb_func
 7005              		.fpu fpv4-sp-d16
 7007              	dwt_setinterrupt:
 7008              	.LFB84:
3089:Middlewares/Decawave/decadriver/deca_device.c **** 
3090:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3091:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn void dwt_setinterrupt()
3092:Middlewares/Decawave/decadriver/deca_device.c ****  *
3093:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function enables the specified events to trigger an interrupt.
3094:Middlewares/Decawave/decadriver/deca_device.c ****  * The following events can be enabled:
3095:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_TFRS         0x00000080          // frame sent
3096:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_RFCG         0x00004000          // frame received with good CRC
3097:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_RPHE         0x00001000          // receiver PHY header error
3098:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_RFCE         0x00008000          // receiver CRC error
3099:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_RFSL         0x00010000          // receiver sync loss error
3100:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_RFTO         0x00020000          // frame wait timeout
3101:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_RXPTO        0x00200000          // preamble detect timeout
3102:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_SFDT         0x04000000          // SFD timeout
ARM GAS  /tmp/cc0TY0Fa.s 			page 176


3103:Middlewares/Decawave/decadriver/deca_device.c ****  * DWT_INT_ARFE         0x20000000          // frame rejected (due to frame filtering configuration
3104:Middlewares/Decawave/decadriver/deca_device.c ****  *
3105:Middlewares/Decawave/decadriver/deca_device.c ****  *
3106:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3107:Middlewares/Decawave/decadriver/deca_device.c ****  * @param bitmask - sets the events which will generate interrupt
3108:Middlewares/Decawave/decadriver/deca_device.c ****  * @param operation - if set to 1 the interrupts (only the ones selected in the bitmask) are enable
3109:Middlewares/Decawave/decadriver/deca_device.c ****  *                  - if set to 2 the interrupts in the bitmask are forced to selected state - i.e.
3110:Middlewares/Decawave/decadriver/deca_device.c ****  *
3111:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3112:Middlewares/Decawave/decadriver/deca_device.c ****  *
3113:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3114:Middlewares/Decawave/decadriver/deca_device.c ****  */
3115:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setinterrupt(uint32 bitmask, uint8 operation)
3116:Middlewares/Decawave/decadriver/deca_device.c **** {
 7009              		.loc 1 3116 1
 7010              		.cfi_startproc
 7011              		@ args = 0, pretend = 0, frame = 16
 7012              		@ frame_needed = 1, uses_anonymous_args = 0
 7013 0000 80B5     		push	{r7, lr}
 7014              	.LCFI380:
 7015              		.cfi_def_cfa_offset 8
 7016              		.cfi_offset 7, -8
 7017              		.cfi_offset 14, -4
 7018 0002 84B0     		sub	sp, sp, #16
 7019              	.LCFI381:
 7020              		.cfi_def_cfa_offset 24
 7021 0004 00AF     		add	r7, sp, #0
 7022              	.LCFI382:
 7023              		.cfi_def_cfa_register 7
 7024 0006 7860     		str	r0, [r7, #4]
 7025 0008 0B46     		mov	r3, r1
 7026 000a FB70     		strb	r3, [r7, #3]
3117:Middlewares/Decawave/decadriver/deca_device.c ****     decaIrqStatus_t stat ;
3118:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 mask ;
3119:Middlewares/Decawave/decadriver/deca_device.c **** 
3120:Middlewares/Decawave/decadriver/deca_device.c ****     // Need to beware of interrupts occurring in the middle of following read modify write cycle
3121:Middlewares/Decawave/decadriver/deca_device.c ****     stat = decamutexon() ;
 7027              		.loc 1 3121 12
 7028 000c FFF7FEFF 		bl	decamutexon
 7029 0010 B860     		str	r0, [r7, #8]
3122:Middlewares/Decawave/decadriver/deca_device.c **** 
3123:Middlewares/Decawave/decadriver/deca_device.c ****     if(operation == 2)
 7030              		.loc 1 3123 7
 7031 0012 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 7032 0014 022B     		cmp	r3, #2
 7033 0016 05D1     		bne	.L302
3124:Middlewares/Decawave/decadriver/deca_device.c ****     {
3125:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitreg(SYS_MASK_ID, bitmask) ; // New value
 7034              		.loc 1 3125 9
 7035 0018 7A68     		ldr	r2, [r7, #4]
 7036 001a 0021     		movs	r1, #0
 7037 001c 0E20     		movs	r0, #14
 7038 001e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 7039 0022 16E0     		b	.L303
 7040              	.L302:
3126:Middlewares/Decawave/decadriver/deca_device.c ****     }
3127:Middlewares/Decawave/decadriver/deca_device.c ****     else
ARM GAS  /tmp/cc0TY0Fa.s 			page 177


3128:Middlewares/Decawave/decadriver/deca_device.c ****     {
3129:Middlewares/Decawave/decadriver/deca_device.c ****         mask = dwt_read32bitreg(SYS_MASK_ID) ; // Read register
 7041              		.loc 1 3129 16
 7042 0024 0021     		movs	r1, #0
 7043 0026 0E20     		movs	r0, #14
 7044 0028 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7045 002c F860     		str	r0, [r7, #12]
3130:Middlewares/Decawave/decadriver/deca_device.c ****         if(operation == 1)
 7046              		.loc 1 3130 11
 7047 002e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 7048 0030 012B     		cmp	r3, #1
 7049 0032 04D1     		bne	.L304
3131:Middlewares/Decawave/decadriver/deca_device.c ****         {
3132:Middlewares/Decawave/decadriver/deca_device.c ****             mask |= bitmask ;
 7050              		.loc 1 3132 18
 7051 0034 FA68     		ldr	r2, [r7, #12]
 7052 0036 7B68     		ldr	r3, [r7, #4]
 7053 0038 1343     		orrs	r3, r3, r2
 7054 003a FB60     		str	r3, [r7, #12]
 7055 003c 04E0     		b	.L305
 7056              	.L304:
3133:Middlewares/Decawave/decadriver/deca_device.c ****         }
3134:Middlewares/Decawave/decadriver/deca_device.c ****         else
3135:Middlewares/Decawave/decadriver/deca_device.c ****         {
3136:Middlewares/Decawave/decadriver/deca_device.c ****             mask &= ~bitmask ; // Clear the bit
 7057              		.loc 1 3136 21
 7058 003e 7B68     		ldr	r3, [r7, #4]
 7059 0040 DB43     		mvns	r3, r3
 7060              		.loc 1 3136 18
 7061 0042 FA68     		ldr	r2, [r7, #12]
 7062 0044 1340     		ands	r3, r3, r2
 7063 0046 FB60     		str	r3, [r7, #12]
 7064              	.L305:
3137:Middlewares/Decawave/decadriver/deca_device.c ****         }
3138:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write32bitreg(SYS_MASK_ID, mask) ; // New value
 7065              		.loc 1 3138 9
 7066 0048 FA68     		ldr	r2, [r7, #12]
 7067 004a 0021     		movs	r1, #0
 7068 004c 0E20     		movs	r0, #14
 7069 004e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 7070              	.L303:
3139:Middlewares/Decawave/decadriver/deca_device.c ****     }
3140:Middlewares/Decawave/decadriver/deca_device.c **** 
3141:Middlewares/Decawave/decadriver/deca_device.c ****     decamutexoff(stat) ;
 7071              		.loc 1 3141 5
 7072 0052 B868     		ldr	r0, [r7, #8]
 7073 0054 FFF7FEFF 		bl	decamutexoff
3142:Middlewares/Decawave/decadriver/deca_device.c **** }
 7074              		.loc 1 3142 1
 7075 0058 00BF     		nop
 7076 005a 1037     		adds	r7, r7, #16
 7077              	.LCFI383:
 7078              		.cfi_def_cfa_offset 8
 7079 005c BD46     		mov	sp, r7
 7080              	.LCFI384:
 7081              		.cfi_def_cfa_register 13
 7082              		@ sp needed
ARM GAS  /tmp/cc0TY0Fa.s 			page 178


 7083 005e 80BD     		pop	{r7, pc}
 7084              		.cfi_endproc
 7085              	.LFE84:
 7087              		.section	.text.dwt_configeventcounters,"ax",%progbits
 7088              		.align	1
 7089              		.global	dwt_configeventcounters
 7090              		.syntax unified
 7091              		.thumb
 7092              		.thumb_func
 7093              		.fpu fpv4-sp-d16
 7095              	dwt_configeventcounters:
 7096              	.LFB85:
3143:Middlewares/Decawave/decadriver/deca_device.c **** 
3144:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3145:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_configeventcounters()
3146:Middlewares/Decawave/decadriver/deca_device.c ****  *
3147:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to enable/disable the event counter in the IC
3148:Middlewares/Decawave/decadriver/deca_device.c ****  *
3149:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
3150:Middlewares/Decawave/decadriver/deca_device.c ****  * @param - enable - 1 enables (and reset), 0 disables the event counters
3151:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3152:Middlewares/Decawave/decadriver/deca_device.c ****  *
3153:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3154:Middlewares/Decawave/decadriver/deca_device.c ****  */
3155:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_configeventcounters(int enable)
3156:Middlewares/Decawave/decadriver/deca_device.c **** {
 7097              		.loc 1 3156 1
 7098              		.cfi_startproc
 7099              		@ args = 0, pretend = 0, frame = 8
 7100              		@ frame_needed = 1, uses_anonymous_args = 0
 7101 0000 80B5     		push	{r7, lr}
 7102              	.LCFI385:
 7103              		.cfi_def_cfa_offset 8
 7104              		.cfi_offset 7, -8
 7105              		.cfi_offset 14, -4
 7106 0002 82B0     		sub	sp, sp, #8
 7107              	.LCFI386:
 7108              		.cfi_def_cfa_offset 16
 7109 0004 00AF     		add	r7, sp, #0
 7110              	.LCFI387:
 7111              		.cfi_def_cfa_register 7
 7112 0006 7860     		str	r0, [r7, #4]
3157:Middlewares/Decawave/decadriver/deca_device.c ****     // Need to clear and disable, can't just clear
3158:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(DIG_DIAG_ID, EVC_CTRL_OFFSET, (uint8)(EVC_CLR));
 7113              		.loc 1 3158 5
 7114 0008 0222     		movs	r2, #2
 7115 000a 0021     		movs	r1, #0
 7116 000c 2F20     		movs	r0, #47
 7117 000e FFF7FEFF 		bl	dwt_write8bitoffsetreg
3159:Middlewares/Decawave/decadriver/deca_device.c **** 
3160:Middlewares/Decawave/decadriver/deca_device.c ****     if(enable)
 7118              		.loc 1 3160 7
 7119 0012 7B68     		ldr	r3, [r7, #4]
 7120 0014 002B     		cmp	r3, #0
 7121 0016 04D0     		beq	.L308
3161:Middlewares/Decawave/decadriver/deca_device.c ****     {
3162:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(DIG_DIAG_ID, EVC_CTRL_OFFSET, (uint8)(EVC_EN)); // Enable
ARM GAS  /tmp/cc0TY0Fa.s 			page 179


 7122              		.loc 1 3162 9
 7123 0018 0122     		movs	r2, #1
 7124 001a 0021     		movs	r1, #0
 7125 001c 2F20     		movs	r0, #47
 7126 001e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7127              	.L308:
3163:Middlewares/Decawave/decadriver/deca_device.c ****     }
3164:Middlewares/Decawave/decadriver/deca_device.c **** }
 7128              		.loc 1 3164 1
 7129 0022 00BF     		nop
 7130 0024 0837     		adds	r7, r7, #8
 7131              	.LCFI388:
 7132              		.cfi_def_cfa_offset 8
 7133 0026 BD46     		mov	sp, r7
 7134              	.LCFI389:
 7135              		.cfi_def_cfa_register 13
 7136              		@ sp needed
 7137 0028 80BD     		pop	{r7, pc}
 7138              		.cfi_endproc
 7139              	.LFE85:
 7141              		.section	.text.dwt_readeventcounters,"ax",%progbits
 7142              		.align	1
 7143              		.global	dwt_readeventcounters
 7144              		.syntax unified
 7145              		.thumb
 7146              		.thumb_func
 7147              		.fpu fpv4-sp-d16
 7149              	dwt_readeventcounters:
 7150              	.LFB86:
3165:Middlewares/Decawave/decadriver/deca_device.c **** 
3166:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3167:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readeventcounters()
3168:Middlewares/Decawave/decadriver/deca_device.c ****  *
3169:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to read the event counters in the IC
3170:Middlewares/Decawave/decadriver/deca_device.c ****  *
3171:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
3172:Middlewares/Decawave/decadriver/deca_device.c ****  * @param counters - pointer to the dwt_deviceentcnts_t structure which will hold the read data
3173:Middlewares/Decawave/decadriver/deca_device.c ****  *
3174:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3175:Middlewares/Decawave/decadriver/deca_device.c ****  *
3176:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3177:Middlewares/Decawave/decadriver/deca_device.c ****  */
3178:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_readeventcounters(dwt_deviceentcnts_t *counters)
3179:Middlewares/Decawave/decadriver/deca_device.c **** {
 7151              		.loc 1 3179 1
 7152              		.cfi_startproc
 7153              		@ args = 0, pretend = 0, frame = 16
 7154              		@ frame_needed = 1, uses_anonymous_args = 0
 7155 0000 80B5     		push	{r7, lr}
 7156              	.LCFI390:
 7157              		.cfi_def_cfa_offset 8
 7158              		.cfi_offset 7, -8
 7159              		.cfi_offset 14, -4
 7160 0002 84B0     		sub	sp, sp, #16
 7161              	.LCFI391:
 7162              		.cfi_def_cfa_offset 24
 7163 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 180


 7164              	.LCFI392:
 7165              		.cfi_def_cfa_register 7
 7166 0006 7860     		str	r0, [r7, #4]
3180:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 temp;
3181:Middlewares/Decawave/decadriver/deca_device.c **** 
3182:Middlewares/Decawave/decadriver/deca_device.c ****     temp= dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_PHE_OFFSET); // Read sync loss (31-16), PHE (15-0
 7167              		.loc 1 3182 11
 7168 0008 0421     		movs	r1, #4
 7169 000a 2F20     		movs	r0, #47
 7170 000c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7171 0010 F860     		str	r0, [r7, #12]
3183:Middlewares/Decawave/decadriver/deca_device.c ****     counters->PHE = temp & 0xFFF;
 7172              		.loc 1 3183 26
 7173 0012 FB68     		ldr	r3, [r7, #12]
 7174 0014 9BB2     		uxth	r3, r3
 7175 0016 C3F30B03 		ubfx	r3, r3, #0, #12
 7176 001a 9AB2     		uxth	r2, r3
 7177              		.loc 1 3183 19
 7178 001c 7B68     		ldr	r3, [r7, #4]
 7179 001e 1A80     		strh	r2, [r3]	@ movhi
3184:Middlewares/Decawave/decadriver/deca_device.c ****     counters->RSL = (temp >> 16) & 0xFFF;
 7180              		.loc 1 3184 27
 7181 0020 FB68     		ldr	r3, [r7, #12]
 7182 0022 1B0C     		lsrs	r3, r3, #16
 7183              		.loc 1 3184 34
 7184 0024 9BB2     		uxth	r3, r3
 7185 0026 C3F30B03 		ubfx	r3, r3, #0, #12
 7186 002a 9AB2     		uxth	r2, r3
 7187              		.loc 1 3184 19
 7188 002c 7B68     		ldr	r3, [r7, #4]
 7189 002e 5A80     		strh	r2, [r3, #2]	@ movhi
3185:Middlewares/Decawave/decadriver/deca_device.c **** 
3186:Middlewares/Decawave/decadriver/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_FCG_OFFSET); // Read CRC bad (31-16), CRC good (
 7190              		.loc 1 3186 12
 7191 0030 0821     		movs	r1, #8
 7192 0032 2F20     		movs	r0, #47
 7193 0034 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7194 0038 F860     		str	r0, [r7, #12]
3187:Middlewares/Decawave/decadriver/deca_device.c ****     counters->CRCG = temp & 0xFFF;
 7195              		.loc 1 3187 27
 7196 003a FB68     		ldr	r3, [r7, #12]
 7197 003c 9BB2     		uxth	r3, r3
 7198 003e C3F30B03 		ubfx	r3, r3, #0, #12
 7199 0042 9AB2     		uxth	r2, r3
 7200              		.loc 1 3187 20
 7201 0044 7B68     		ldr	r3, [r7, #4]
 7202 0046 9A80     		strh	r2, [r3, #4]	@ movhi
3188:Middlewares/Decawave/decadriver/deca_device.c ****     counters->CRCB = (temp >> 16) & 0xFFF;
 7203              		.loc 1 3188 28
 7204 0048 FB68     		ldr	r3, [r7, #12]
 7205 004a 1B0C     		lsrs	r3, r3, #16
 7206              		.loc 1 3188 35
 7207 004c 9BB2     		uxth	r3, r3
 7208 004e C3F30B03 		ubfx	r3, r3, #0, #12
 7209 0052 9AB2     		uxth	r2, r3
 7210              		.loc 1 3188 20
 7211 0054 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc0TY0Fa.s 			page 181


 7212 0056 DA80     		strh	r2, [r3, #6]	@ movhi
3189:Middlewares/Decawave/decadriver/deca_device.c **** 
3190:Middlewares/Decawave/decadriver/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_FFR_OFFSET); // Overruns (31-16), address errors
 7213              		.loc 1 3190 12
 7214 0058 0C21     		movs	r1, #12
 7215 005a 2F20     		movs	r0, #47
 7216 005c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7217 0060 F860     		str	r0, [r7, #12]
3191:Middlewares/Decawave/decadriver/deca_device.c ****     counters->ARFE = temp & 0xFFF;
 7218              		.loc 1 3191 27
 7219 0062 FB68     		ldr	r3, [r7, #12]
 7220 0064 9BB2     		uxth	r3, r3
 7221 0066 C3F30B03 		ubfx	r3, r3, #0, #12
 7222 006a 9AB2     		uxth	r2, r3
 7223              		.loc 1 3191 20
 7224 006c 7B68     		ldr	r3, [r7, #4]
 7225 006e 1A81     		strh	r2, [r3, #8]	@ movhi
3192:Middlewares/Decawave/decadriver/deca_device.c ****     counters->OVER = (temp >> 16) & 0xFFF;
 7226              		.loc 1 3192 28
 7227 0070 FB68     		ldr	r3, [r7, #12]
 7228 0072 1B0C     		lsrs	r3, r3, #16
 7229              		.loc 1 3192 35
 7230 0074 9BB2     		uxth	r3, r3
 7231 0076 C3F30B03 		ubfx	r3, r3, #0, #12
 7232 007a 9AB2     		uxth	r2, r3
 7233              		.loc 1 3192 20
 7234 007c 7B68     		ldr	r3, [r7, #4]
 7235 007e 5A81     		strh	r2, [r3, #10]	@ movhi
3193:Middlewares/Decawave/decadriver/deca_device.c **** 
3194:Middlewares/Decawave/decadriver/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_STO_OFFSET); // Read PTO (31-16), SFDTO (15-0)
 7236              		.loc 1 3194 12
 7237 0080 1021     		movs	r1, #16
 7238 0082 2F20     		movs	r0, #47
 7239 0084 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7240 0088 F860     		str	r0, [r7, #12]
3195:Middlewares/Decawave/decadriver/deca_device.c ****     counters->PTO = (temp >> 16) & 0xFFF;
 7241              		.loc 1 3195 27
 7242 008a FB68     		ldr	r3, [r7, #12]
 7243 008c 1B0C     		lsrs	r3, r3, #16
 7244              		.loc 1 3195 34
 7245 008e 9BB2     		uxth	r3, r3
 7246 0090 C3F30B03 		ubfx	r3, r3, #0, #12
 7247 0094 9AB2     		uxth	r2, r3
 7248              		.loc 1 3195 19
 7249 0096 7B68     		ldr	r3, [r7, #4]
 7250 0098 DA81     		strh	r2, [r3, #14]	@ movhi
3196:Middlewares/Decawave/decadriver/deca_device.c ****     counters->SFDTO = temp & 0xFFF;
 7251              		.loc 1 3196 28
 7252 009a FB68     		ldr	r3, [r7, #12]
 7253 009c 9BB2     		uxth	r3, r3
 7254 009e C3F30B03 		ubfx	r3, r3, #0, #12
 7255 00a2 9AB2     		uxth	r2, r3
 7256              		.loc 1 3196 21
 7257 00a4 7B68     		ldr	r3, [r7, #4]
 7258 00a6 9A81     		strh	r2, [r3, #12]	@ movhi
3197:Middlewares/Decawave/decadriver/deca_device.c **** 
3198:Middlewares/Decawave/decadriver/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_FWTO_OFFSET); // Read RX TO (31-16), TXFRAME (15
ARM GAS  /tmp/cc0TY0Fa.s 			page 182


 7259              		.loc 1 3198 12
 7260 00a8 1421     		movs	r1, #20
 7261 00aa 2F20     		movs	r0, #47
 7262 00ac FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7263 00b0 F860     		str	r0, [r7, #12]
3199:Middlewares/Decawave/decadriver/deca_device.c ****     counters->TXF = (temp >> 16) & 0xFFF;
 7264              		.loc 1 3199 27
 7265 00b2 FB68     		ldr	r3, [r7, #12]
 7266 00b4 1B0C     		lsrs	r3, r3, #16
 7267              		.loc 1 3199 34
 7268 00b6 9BB2     		uxth	r3, r3
 7269 00b8 C3F30B03 		ubfx	r3, r3, #0, #12
 7270 00bc 9AB2     		uxth	r2, r3
 7271              		.loc 1 3199 19
 7272 00be 7B68     		ldr	r3, [r7, #4]
 7273 00c0 5A82     		strh	r2, [r3, #18]	@ movhi
3200:Middlewares/Decawave/decadriver/deca_device.c ****     counters->RTO = temp & 0xFFF;
 7274              		.loc 1 3200 26
 7275 00c2 FB68     		ldr	r3, [r7, #12]
 7276 00c4 9BB2     		uxth	r3, r3
 7277 00c6 C3F30B03 		ubfx	r3, r3, #0, #12
 7278 00ca 9AB2     		uxth	r2, r3
 7279              		.loc 1 3200 19
 7280 00cc 7B68     		ldr	r3, [r7, #4]
 7281 00ce 1A82     		strh	r2, [r3, #16]	@ movhi
3201:Middlewares/Decawave/decadriver/deca_device.c **** 
3202:Middlewares/Decawave/decadriver/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_HPW_OFFSET); // Read half period warning events
 7282              		.loc 1 3202 12
 7283 00d0 1821     		movs	r1, #24
 7284 00d2 2F20     		movs	r0, #47
 7285 00d4 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7286 00d8 F860     		str	r0, [r7, #12]
3203:Middlewares/Decawave/decadriver/deca_device.c ****     counters->HPW = temp & 0xFFF;
 7287              		.loc 1 3203 26
 7288 00da FB68     		ldr	r3, [r7, #12]
 7289 00dc 9BB2     		uxth	r3, r3
 7290 00de C3F30B03 		ubfx	r3, r3, #0, #12
 7291 00e2 9AB2     		uxth	r2, r3
 7292              		.loc 1 3203 19
 7293 00e4 7B68     		ldr	r3, [r7, #4]
 7294 00e6 9A82     		strh	r2, [r3, #20]	@ movhi
3204:Middlewares/Decawave/decadriver/deca_device.c ****     counters->TXW = (temp >> 16) & 0xFFF;                       // Power-up warning events
 7295              		.loc 1 3204 27
 7296 00e8 FB68     		ldr	r3, [r7, #12]
 7297 00ea 1B0C     		lsrs	r3, r3, #16
 7298              		.loc 1 3204 34
 7299 00ec 9BB2     		uxth	r3, r3
 7300 00ee C3F30B03 		ubfx	r3, r3, #0, #12
 7301 00f2 9AB2     		uxth	r2, r3
 7302              		.loc 1 3204 19
 7303 00f4 7B68     		ldr	r3, [r7, #4]
 7304 00f6 DA82     		strh	r2, [r3, #22]	@ movhi
3205:Middlewares/Decawave/decadriver/deca_device.c **** 
3206:Middlewares/Decawave/decadriver/deca_device.c **** }
 7305              		.loc 1 3206 1
 7306 00f8 00BF     		nop
 7307 00fa 1037     		adds	r7, r7, #16
ARM GAS  /tmp/cc0TY0Fa.s 			page 183


 7308              	.LCFI393:
 7309              		.cfi_def_cfa_offset 8
 7310 00fc BD46     		mov	sp, r7
 7311              	.LCFI394:
 7312              		.cfi_def_cfa_register 13
 7313              		@ sp needed
 7314 00fe 80BD     		pop	{r7, pc}
 7315              		.cfi_endproc
 7316              	.LFE86:
 7318              		.section	.text.dwt_rxreset,"ax",%progbits
 7319              		.align	1
 7320              		.global	dwt_rxreset
 7321              		.syntax unified
 7322              		.thumb
 7323              		.thumb_func
 7324              		.fpu fpv4-sp-d16
 7326              	dwt_rxreset:
 7327              	.LFB87:
3207:Middlewares/Decawave/decadriver/deca_device.c **** 
3208:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3209:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_rxreset()
3210:Middlewares/Decawave/decadriver/deca_device.c ****  *
3211:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function resets the receiver of the DW1000
3212:Middlewares/Decawave/decadriver/deca_device.c ****  *
3213:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3214:Middlewares/Decawave/decadriver/deca_device.c ****  *
3215:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3216:Middlewares/Decawave/decadriver/deca_device.c ****  *
3217:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3218:Middlewares/Decawave/decadriver/deca_device.c ****  */
3219:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_rxreset(void)
3220:Middlewares/Decawave/decadriver/deca_device.c **** {
 7328              		.loc 1 3220 1
 7329              		.cfi_startproc
 7330              		@ args = 0, pretend = 0, frame = 0
 7331              		@ frame_needed = 1, uses_anonymous_args = 0
 7332 0000 80B5     		push	{r7, lr}
 7333              	.LCFI395:
 7334              		.cfi_def_cfa_offset 8
 7335              		.cfi_offset 7, -8
 7336              		.cfi_offset 14, -4
 7337 0002 00AF     		add	r7, sp, #0
 7338              	.LCFI396:
 7339              		.cfi_def_cfa_register 7
3221:Middlewares/Decawave/decadriver/deca_device.c ****     // Set RX reset
3222:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_SOFTRESET_OFFSET, PMSC_CTRL0_RESET_RX);
 7340              		.loc 1 3222 5
 7341 0004 E022     		movs	r2, #224
 7342 0006 0321     		movs	r1, #3
 7343 0008 3620     		movs	r0, #54
 7344 000a FFF7FEFF 		bl	dwt_write8bitoffsetreg
3223:Middlewares/Decawave/decadriver/deca_device.c **** 
3224:Middlewares/Decawave/decadriver/deca_device.c ****     // Clear RX reset
3225:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_SOFTRESET_OFFSET, PMSC_CTRL0_RESET_CLEAR);
 7345              		.loc 1 3225 5
 7346 000e F022     		movs	r2, #240
 7347 0010 0321     		movs	r1, #3
ARM GAS  /tmp/cc0TY0Fa.s 			page 184


 7348 0012 3620     		movs	r0, #54
 7349 0014 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3226:Middlewares/Decawave/decadriver/deca_device.c **** }
 7350              		.loc 1 3226 1
 7351 0018 00BF     		nop
 7352 001a 80BD     		pop	{r7, pc}
 7353              		.cfi_endproc
 7354              	.LFE87:
 7356              		.section	.text.dwt_softreset,"ax",%progbits
 7357              		.align	1
 7358              		.global	dwt_softreset
 7359              		.syntax unified
 7360              		.thumb
 7361              		.thumb_func
 7362              		.fpu fpv4-sp-d16
 7364              	dwt_softreset:
 7365              	.LFB88:
3227:Middlewares/Decawave/decadriver/deca_device.c **** 
3228:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3229:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_softreset()
3230:Middlewares/Decawave/decadriver/deca_device.c ****  *
3231:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function resets the DW1000
3232:Middlewares/Decawave/decadriver/deca_device.c ****  *
3233:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3234:Middlewares/Decawave/decadriver/deca_device.c ****  *
3235:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3236:Middlewares/Decawave/decadriver/deca_device.c ****  *
3237:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3238:Middlewares/Decawave/decadriver/deca_device.c ****  */
3239:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_softreset(void)
3240:Middlewares/Decawave/decadriver/deca_device.c **** {
 7366              		.loc 1 3240 1
 7367              		.cfi_startproc
 7368              		@ args = 0, pretend = 0, frame = 0
 7369              		@ frame_needed = 1, uses_anonymous_args = 0
 7370 0000 80B5     		push	{r7, lr}
 7371              	.LCFI397:
 7372              		.cfi_def_cfa_offset 8
 7373              		.cfi_offset 7, -8
 7374              		.cfi_offset 14, -4
 7375 0002 00AF     		add	r7, sp, #0
 7376              	.LCFI398:
 7377              		.cfi_def_cfa_register 7
3241:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_disablesequencing();
 7378              		.loc 1 3241 5
 7379 0004 FFF7FEFF 		bl	_dwt_disablesequencing
3242:Middlewares/Decawave/decadriver/deca_device.c **** 
3243:Middlewares/Decawave/decadriver/deca_device.c ****     // Clear any AON auto download bits (as reset will trigger AON download)
3244:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(AON_ID, AON_WCFG_OFFSET, 0x00);
 7380              		.loc 1 3244 5
 7381 0008 0022     		movs	r2, #0
 7382 000a 0021     		movs	r1, #0
 7383 000c 2C20     		movs	r0, #44
 7384 000e FFF7FEFF 		bl	dwt_write16bitoffsetreg
3245:Middlewares/Decawave/decadriver/deca_device.c ****     // Clear the wake-up configuration
3246:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG0_OFFSET, 0x00);
 7385              		.loc 1 3246 5
ARM GAS  /tmp/cc0TY0Fa.s 			page 185


 7386 0012 0022     		movs	r2, #0
 7387 0014 0621     		movs	r1, #6
 7388 0016 2C20     		movs	r0, #44
 7389 0018 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3247:Middlewares/Decawave/decadriver/deca_device.c ****     // Upload the new configuration
3248:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_aonarrayupload();
 7390              		.loc 1 3248 5
 7391 001c FFF7FEFF 		bl	_dwt_aonarrayupload
3249:Middlewares/Decawave/decadriver/deca_device.c **** 
3250:Middlewares/Decawave/decadriver/deca_device.c ****     // Reset HIF, TX, RX and PMSC (set the reset bits)
3251:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_SOFTRESET_OFFSET, PMSC_CTRL0_RESET_ALL);
 7392              		.loc 1 3251 5
 7393 0020 0022     		movs	r2, #0
 7394 0022 0321     		movs	r1, #3
 7395 0024 3620     		movs	r0, #54
 7396 0026 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3252:Middlewares/Decawave/decadriver/deca_device.c **** 
3253:Middlewares/Decawave/decadriver/deca_device.c ****     // DW1000 needs a 10us sleep to let clk PLL lock after reset - the PLL will automatically lock 
3254:Middlewares/Decawave/decadriver/deca_device.c ****     // Could also have polled the PLL lock flag, but then the SPI needs to be < 3MHz !! So a simple
3255:Middlewares/Decawave/decadriver/deca_device.c ****     deca_sleep(1);
 7397              		.loc 1 3255 5
 7398 002a 0120     		movs	r0, #1
 7399 002c FFF7FEFF 		bl	deca_sleep
3256:Middlewares/Decawave/decadriver/deca_device.c **** 
3257:Middlewares/Decawave/decadriver/deca_device.c ****     // Clear the reset bits
3258:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_SOFTRESET_OFFSET, PMSC_CTRL0_RESET_CLEAR);
 7400              		.loc 1 3258 5
 7401 0030 F022     		movs	r2, #240
 7402 0032 0321     		movs	r1, #3
 7403 0034 3620     		movs	r0, #54
 7404 0036 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3259:Middlewares/Decawave/decadriver/deca_device.c **** 
3260:Middlewares/Decawave/decadriver/deca_device.c ****     pdw1000local->wait4resp = 0;
 7405              		.loc 1 3260 17
 7406 003a 034B     		ldr	r3, .L312
 7407 003c 1B68     		ldr	r3, [r3]
 7408              		.loc 1 3260 29
 7409 003e 0022     		movs	r2, #0
 7410 0040 5A75     		strb	r2, [r3, #21]
3261:Middlewares/Decawave/decadriver/deca_device.c **** }
 7411              		.loc 1 3261 1
 7412 0042 00BF     		nop
 7413 0044 80BD     		pop	{r7, pc}
 7414              	.L313:
 7415 0046 00BF     		.align	2
 7416              	.L312:
 7417 0048 00000000 		.word	pdw1000local
 7418              		.cfi_endproc
 7419              	.LFE88:
 7421              		.section	.text.dwt_setxtaltrim,"ax",%progbits
 7422              		.align	1
 7423              		.global	dwt_setxtaltrim
 7424              		.syntax unified
 7425              		.thumb
 7426              		.thumb_func
 7427              		.fpu fpv4-sp-d16
 7429              	dwt_setxtaltrim:
ARM GAS  /tmp/cc0TY0Fa.s 			page 186


 7430              	.LFB89:
3262:Middlewares/Decawave/decadriver/deca_device.c **** 
3263:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3264:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_setxtaltrim()
3265:Middlewares/Decawave/decadriver/deca_device.c ****  *
3266:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This is used to adjust the crystal frequency
3267:Middlewares/Decawave/decadriver/deca_device.c ****  *
3268:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3269:Middlewares/Decawave/decadriver/deca_device.c ****  * @param   value - crystal trim value (in range 0x0 to 0x1F) 31 steps (~1.5ppm per step)
3270:Middlewares/Decawave/decadriver/deca_device.c ****  *
3271:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3272:Middlewares/Decawave/decadriver/deca_device.c ****  *
3273:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3274:Middlewares/Decawave/decadriver/deca_device.c ****  */
3275:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_setxtaltrim(uint8 value)
3276:Middlewares/Decawave/decadriver/deca_device.c **** {
 7431              		.loc 1 3276 1
 7432              		.cfi_startproc
 7433              		@ args = 0, pretend = 0, frame = 16
 7434              		@ frame_needed = 1, uses_anonymous_args = 0
 7435 0000 80B5     		push	{r7, lr}
 7436              	.LCFI399:
 7437              		.cfi_def_cfa_offset 8
 7438              		.cfi_offset 7, -8
 7439              		.cfi_offset 14, -4
 7440 0002 84B0     		sub	sp, sp, #16
 7441              	.LCFI400:
 7442              		.cfi_def_cfa_offset 24
 7443 0004 00AF     		add	r7, sp, #0
 7444              	.LCFI401:
 7445              		.cfi_def_cfa_register 7
 7446 0006 0346     		mov	r3, r0
 7447 0008 FB71     		strb	r3, [r7, #7]
3277:Middlewares/Decawave/decadriver/deca_device.c ****     // The 3 MSb in this 8-bit register must be kept to 0b011 to avoid any malfunction.
3278:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 reg_val = (3 << 5) | (value & FS_XTALT_MASK);
 7448              		.loc 1 3278 39
 7449 000a 97F90730 		ldrsb	r3, [r7, #7]
 7450 000e 03F01F03 		and	r3, r3, #31
 7451 0012 5BB2     		sxtb	r3, r3
 7452              		.loc 1 3278 30
 7453 0014 43F06003 		orr	r3, r3, #96
 7454 0018 5BB2     		sxtb	r3, r3
 7455              		.loc 1 3278 11
 7456 001a FB73     		strb	r3, [r7, #15]
3279:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_XTALT_OFFSET, reg_val);
 7457              		.loc 1 3279 5
 7458 001c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 7459 001e 1A46     		mov	r2, r3
 7460 0020 0E21     		movs	r1, #14
 7461 0022 2B20     		movs	r0, #43
 7462 0024 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3280:Middlewares/Decawave/decadriver/deca_device.c **** }
 7463              		.loc 1 3280 1
 7464 0028 00BF     		nop
 7465 002a 1037     		adds	r7, r7, #16
 7466              	.LCFI402:
 7467              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc0TY0Fa.s 			page 187


 7468 002c BD46     		mov	sp, r7
 7469              	.LCFI403:
 7470              		.cfi_def_cfa_register 13
 7471              		@ sp needed
 7472 002e 80BD     		pop	{r7, pc}
 7473              		.cfi_endproc
 7474              	.LFE89:
 7476              		.section	.text.dwt_getxtaltrim,"ax",%progbits
 7477              		.align	1
 7478              		.global	dwt_getxtaltrim
 7479              		.syntax unified
 7480              		.thumb
 7481              		.thumb_func
 7482              		.fpu fpv4-sp-d16
 7484              	dwt_getxtaltrim:
 7485              	.LFB90:
3281:Middlewares/Decawave/decadriver/deca_device.c **** 
3282:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3283:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_getxtaltrim()
3284:Middlewares/Decawave/decadriver/deca_device.c ****  *
3285:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief This function returns current value of XTAL trim. If this is called after dwt_initalise i
3286:Middlewares/Decawave/decadriver/deca_device.c ****  * if OTP value is non-zero or FS_XTALT_MIDRANGE if OTP value is zero (not programmed).
3287:Middlewares/Decawave/decadriver/deca_device.c ****  *
3288:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters
3289:Middlewares/Decawave/decadriver/deca_device.c ****  *
3290:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3291:Middlewares/Decawave/decadriver/deca_device.c ****  *
3292:Middlewares/Decawave/decadriver/deca_device.c ****  * returns the current XTAL trim value
3293:Middlewares/Decawave/decadriver/deca_device.c ****  */
3294:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_getxtaltrim(void)
3295:Middlewares/Decawave/decadriver/deca_device.c **** {
 7486              		.loc 1 3295 1
 7487              		.cfi_startproc
 7488              		@ args = 0, pretend = 0, frame = 0
 7489              		@ frame_needed = 1, uses_anonymous_args = 0
 7490 0000 80B5     		push	{r7, lr}
 7491              	.LCFI404:
 7492              		.cfi_def_cfa_offset 8
 7493              		.cfi_offset 7, -8
 7494              		.cfi_offset 14, -4
 7495 0002 00AF     		add	r7, sp, #0
 7496              	.LCFI405:
 7497              		.cfi_def_cfa_register 7
3296:Middlewares/Decawave/decadriver/deca_device.c ****     return (dwt_read8bitoffsetreg(FS_CTRL_ID, FS_XTALT_OFFSET) & FS_XTALT_MASK);
 7498              		.loc 1 3296 13
 7499 0004 0E21     		movs	r1, #14
 7500 0006 2B20     		movs	r0, #43
 7501 0008 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 7502 000c 0346     		mov	r3, r0
 7503              		.loc 1 3296 64
 7504 000e 03F01F03 		and	r3, r3, #31
 7505 0012 DBB2     		uxtb	r3, r3
3297:Middlewares/Decawave/decadriver/deca_device.c **** }
 7506              		.loc 1 3297 1
 7507 0014 1846     		mov	r0, r3
 7508 0016 80BD     		pop	{r7, pc}
 7509              		.cfi_endproc
ARM GAS  /tmp/cc0TY0Fa.s 			page 188


 7510              	.LFE90:
 7512              		.section	.text.dwt_configcwmode,"ax",%progbits
 7513              		.align	1
 7514              		.global	dwt_configcwmode
 7515              		.syntax unified
 7516              		.thumb
 7517              		.thumb_func
 7518              		.fpu fpv4-sp-d16
 7520              	dwt_configcwmode:
 7521              	.LFB91:
3298:Middlewares/Decawave/decadriver/deca_device.c **** 
3299:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3300:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_configcwmode()
3301:Middlewares/Decawave/decadriver/deca_device.c ****  *
3302:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function sets the DW1000 to transmit cw signal at specific channel frequency
3303:Middlewares/Decawave/decadriver/deca_device.c ****  *
3304:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3305:Middlewares/Decawave/decadriver/deca_device.c ****  * @param chan - specifies the operating channel (e.g. 1, 2, 3, 4, 5, 6 or 7)
3306:Middlewares/Decawave/decadriver/deca_device.c ****  *
3307:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3308:Middlewares/Decawave/decadriver/deca_device.c ****  *
3309:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3310:Middlewares/Decawave/decadriver/deca_device.c ****  */
3311:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_configcwmode(uint8 chan)
3312:Middlewares/Decawave/decadriver/deca_device.c **** {
 7522              		.loc 1 3312 1
 7523              		.cfi_startproc
 7524              		@ args = 0, pretend = 0, frame = 8
 7525              		@ frame_needed = 1, uses_anonymous_args = 0
 7526 0000 80B5     		push	{r7, lr}
 7527              	.LCFI406:
 7528              		.cfi_def_cfa_offset 8
 7529              		.cfi_offset 7, -8
 7530              		.cfi_offset 14, -4
 7531 0002 82B0     		sub	sp, sp, #8
 7532              	.LCFI407:
 7533              		.cfi_def_cfa_offset 16
 7534 0004 00AF     		add	r7, sp, #0
 7535              	.LCFI408:
 7536              		.cfi_def_cfa_register 7
 7537 0006 0346     		mov	r3, r0
 7538 0008 FB71     		strb	r3, [r7, #7]
3313:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3314:Middlewares/Decawave/decadriver/deca_device.c ****     assert((chan >= 1) && (chan <= 7) && (chan != 6));
3315:Middlewares/Decawave/decadriver/deca_device.c **** #endif
3316:Middlewares/Decawave/decadriver/deca_device.c **** 
3317:Middlewares/Decawave/decadriver/deca_device.c ****     //
3318:Middlewares/Decawave/decadriver/deca_device.c ****     // Disable TX/RX RF block sequencing (needed for cw frame mode)
3319:Middlewares/Decawave/decadriver/deca_device.c ****     //
3320:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_disablesequencing();
 7539              		.loc 1 3320 5
 7540 000a FFF7FEFF 		bl	_dwt_disablesequencing
3321:Middlewares/Decawave/decadriver/deca_device.c **** 
3322:Middlewares/Decawave/decadriver/deca_device.c ****     // Config RF pll (for a given channel)
3323:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure PLL2/RF PLL block CFG/TUNE
3324:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(FS_CTRL_ID, FS_PLLCFG_OFFSET, fs_pll_cfg[chan_idx[chan]]);
 7541              		.loc 1 3324 78
ARM GAS  /tmp/cc0TY0Fa.s 			page 189


 7542 000e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7543 0010 214A     		ldr	r2, .L318
 7544 0012 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 7545 0014 1A46     		mov	r2, r3
 7546              		.loc 1 3324 5
 7547 0016 214B     		ldr	r3, .L318+4
 7548 0018 53F82230 		ldr	r3, [r3, r2, lsl #2]
 7549 001c 1A46     		mov	r2, r3
 7550 001e 0721     		movs	r1, #7
 7551 0020 2B20     		movs	r0, #43
 7552 0022 FFF7FEFF 		bl	dwt_write32bitoffsetreg
3325:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_PLLTUNE_OFFSET, fs_pll_tune[chan_idx[chan]]);
 7553              		.loc 1 3325 79
 7554 0026 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7555 0028 1B4A     		ldr	r2, .L318
 7556 002a D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 7557 002c 1A46     		mov	r2, r3
 7558              		.loc 1 3325 5
 7559 002e 1C4B     		ldr	r3, .L318+8
 7560 0030 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 7561 0032 1A46     		mov	r2, r3
 7562 0034 0B21     		movs	r1, #11
 7563 0036 2B20     		movs	r0, #43
 7564 0038 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3326:Middlewares/Decawave/decadriver/deca_device.c ****     // PLL wont be enabled until a TX/RX enable is issued later on
3327:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure RF TX blocks (for specified channel and prf)
3328:Middlewares/Decawave/decadriver/deca_device.c ****     // Config RF TX control
3329:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitoffsetreg(RF_CONF_ID, RF_TXCTRL_OFFSET, tx_config[chan_idx[chan]]);
 7565              		.loc 1 3329 77
 7566 003c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7567 003e 164A     		ldr	r2, .L318
 7568 0040 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 7569 0042 1A46     		mov	r2, r3
 7570              		.loc 1 3329 5
 7571 0044 174B     		ldr	r3, .L318+12
 7572 0046 53F82230 		ldr	r3, [r3, r2, lsl #2]
 7573 004a 1A46     		mov	r2, r3
 7574 004c 0C21     		movs	r1, #12
 7575 004e 2820     		movs	r0, #40
 7576 0050 FFF7FEFF 		bl	dwt_write32bitoffsetreg
3330:Middlewares/Decawave/decadriver/deca_device.c **** 
3331:Middlewares/Decawave/decadriver/deca_device.c ****     //
3332:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable RF PLL
3333:Middlewares/Decawave/decadriver/deca_device.c ****     //
3334:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXPLLPOWEN_MASK); // Enable LDO and RF PLL blocks
 7577              		.loc 1 3334 5
 7578 0054 4FF4FF12 		mov	r2, #2088960
 7579 0058 0021     		movs	r1, #0
 7580 005a 2820     		movs	r0, #40
 7581 005c FFF7FEFF 		bl	dwt_write32bitoffsetreg
3335:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXALLEN_MASK); // Enable the rest of TX blocks
 7582              		.loc 1 3335 5
 7583 0060 114A     		ldr	r2, .L318+16
 7584 0062 0021     		movs	r1, #0
 7585 0064 2820     		movs	r0, #40
 7586 0066 FFF7FEFF 		bl	dwt_write32bitoffsetreg
3336:Middlewares/Decawave/decadriver/deca_device.c **** 
ARM GAS  /tmp/cc0TY0Fa.s 			page 190


3337:Middlewares/Decawave/decadriver/deca_device.c ****     //
3338:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure TX clocks
3339:Middlewares/Decawave/decadriver/deca_device.c ****     //
3340:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, 0x22);
 7587              		.loc 1 3340 5
 7588 006a 2222     		movs	r2, #34
 7589 006c 0021     		movs	r1, #0
 7590 006e 3620     		movs	r0, #54
 7591 0070 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3341:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, 0x1, 0x07);
 7592              		.loc 1 3341 5
 7593 0074 0722     		movs	r2, #7
 7594 0076 0121     		movs	r1, #1
 7595 0078 3620     		movs	r0, #54
 7596 007a FFF7FEFF 		bl	dwt_write8bitoffsetreg
3342:Middlewares/Decawave/decadriver/deca_device.c **** 
3343:Middlewares/Decawave/decadriver/deca_device.c ****     // Disable fine grain TX sequencing
3344:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_setfinegraintxseq(0);
 7597              		.loc 1 3344 5
 7598 007e 0020     		movs	r0, #0
 7599 0080 FFF7FEFF 		bl	dwt_setfinegraintxseq
3345:Middlewares/Decawave/decadriver/deca_device.c **** 
3346:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure CW mode
3347:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGTEST_OFFSET, TC_PGTEST_CW);
 7600              		.loc 1 3347 5
 7601 0084 1322     		movs	r2, #19
 7602 0086 0C21     		movs	r1, #12
 7603 0088 2A20     		movs	r0, #42
 7604 008a FFF7FEFF 		bl	dwt_write8bitoffsetreg
3348:Middlewares/Decawave/decadriver/deca_device.c **** }
 7605              		.loc 1 3348 1
 7606 008e 00BF     		nop
 7607 0090 0837     		adds	r7, r7, #8
 7608              	.LCFI409:
 7609              		.cfi_def_cfa_offset 8
 7610 0092 BD46     		mov	sp, r7
 7611              	.LCFI410:
 7612              		.cfi_def_cfa_register 13
 7613              		@ sp needed
 7614 0094 80BD     		pop	{r7, pc}
 7615              	.L319:
 7616 0096 00BF     		.align	2
 7617              	.L318:
 7618 0098 00000000 		.word	chan_idx
 7619 009c 00000000 		.word	fs_pll_cfg
 7620 00a0 00000000 		.word	fs_pll_tune
 7621 00a4 00000000 		.word	tx_config
 7622 00a8 00FF5F00 		.word	6291200
 7623              		.cfi_endproc
 7624              	.LFE91:
 7626              		.section	.text.dwt_configcontinuousframemode,"ax",%progbits
 7627              		.align	1
 7628              		.global	dwt_configcontinuousframemode
 7629              		.syntax unified
 7630              		.thumb
 7631              		.thumb_func
 7632              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc0TY0Fa.s 			page 191


 7634              	dwt_configcontinuousframemode:
 7635              	.LFB92:
3349:Middlewares/Decawave/decadriver/deca_device.c **** 
3350:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3351:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_configcontinuousframemode()
3352:Middlewares/Decawave/decadriver/deca_device.c ****  *
3353:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function sets the DW1000 to continuous tx frame mode for regulatory approvals testin
3354:Middlewares/Decawave/decadriver/deca_device.c ****  *
3355:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3356:Middlewares/Decawave/decadriver/deca_device.c ****  * @param framerepetitionrate - This is a 32-bit value that is used to set the interval between tra
3357:Middlewares/Decawave/decadriver/deca_device.c **** *  The minimum value is 4. The units are approximately 8 ns. (or more precisely 512/(499.2e6*128) s
3358:Middlewares/Decawave/decadriver/deca_device.c ****  *
3359:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3360:Middlewares/Decawave/decadriver/deca_device.c ****  *
3361:Middlewares/Decawave/decadriver/deca_device.c ****  * no return value
3362:Middlewares/Decawave/decadriver/deca_device.c ****  */
3363:Middlewares/Decawave/decadriver/deca_device.c **** void dwt_configcontinuousframemode(uint32 framerepetitionrate)
3364:Middlewares/Decawave/decadriver/deca_device.c **** {
 7636              		.loc 1 3364 1
 7637              		.cfi_startproc
 7638              		@ args = 0, pretend = 0, frame = 8
 7639              		@ frame_needed = 1, uses_anonymous_args = 0
 7640 0000 80B5     		push	{r7, lr}
 7641              	.LCFI411:
 7642              		.cfi_def_cfa_offset 8
 7643              		.cfi_offset 7, -8
 7644              		.cfi_offset 14, -4
 7645 0002 82B0     		sub	sp, sp, #8
 7646              	.LCFI412:
 7647              		.cfi_def_cfa_offset 16
 7648 0004 00AF     		add	r7, sp, #0
 7649              	.LCFI413:
 7650              		.cfi_def_cfa_register 7
 7651 0006 7860     		str	r0, [r7, #4]
3365:Middlewares/Decawave/decadriver/deca_device.c ****     //
3366:Middlewares/Decawave/decadriver/deca_device.c ****     // Disable TX/RX RF block sequencing (needed for continuous frame mode)
3367:Middlewares/Decawave/decadriver/deca_device.c ****     //
3368:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_disablesequencing();
 7652              		.loc 1 3368 5
 7653 0008 FFF7FEFF 		bl	_dwt_disablesequencing
3369:Middlewares/Decawave/decadriver/deca_device.c **** 
3370:Middlewares/Decawave/decadriver/deca_device.c ****     //
3371:Middlewares/Decawave/decadriver/deca_device.c ****     // Enable RF PLL and TX blocks
3372:Middlewares/Decawave/decadriver/deca_device.c ****     //
3373:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXPLLPOWEN_MASK); // Enable LDO and RF PLL blocks
 7654              		.loc 1 3373 5
 7655 000c 4FF4FF12 		mov	r2, #2088960
 7656 0010 0021     		movs	r1, #0
 7657 0012 2820     		movs	r0, #40
 7658 0014 FFF7FEFF 		bl	dwt_write32bitoffsetreg
3374:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXALLEN_MASK); // Enable the rest of TX blocks
 7659              		.loc 1 3374 5
 7660 0018 0E4A     		ldr	r2, .L322
 7661 001a 0021     		movs	r1, #0
 7662 001c 2820     		movs	r0, #40
 7663 001e FFF7FEFF 		bl	dwt_write32bitoffsetreg
3375:Middlewares/Decawave/decadriver/deca_device.c **** 
ARM GAS  /tmp/cc0TY0Fa.s 			page 192


3376:Middlewares/Decawave/decadriver/deca_device.c ****     //
3377:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure TX clocks
3378:Middlewares/Decawave/decadriver/deca_device.c ****     //
3379:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_PLL);
 7664              		.loc 1 3379 5
 7665 0022 0220     		movs	r0, #2
 7666 0024 FFF7FEFF 		bl	_dwt_enableclocks
3380:Middlewares/Decawave/decadriver/deca_device.c ****     _dwt_enableclocks(FORCE_TX_PLL);
 7667              		.loc 1 3380 5
 7668 0028 0D20     		movs	r0, #13
 7669 002a FFF7FEFF 		bl	_dwt_enableclocks
3381:Middlewares/Decawave/decadriver/deca_device.c **** 
3382:Middlewares/Decawave/decadriver/deca_device.c ****     // Set the frame repetition rate
3383:Middlewares/Decawave/decadriver/deca_device.c ****     if(framerepetitionrate < 4)
 7670              		.loc 1 3383 7
 7671 002e 7B68     		ldr	r3, [r7, #4]
 7672 0030 032B     		cmp	r3, #3
 7673 0032 01D8     		bhi	.L321
3384:Middlewares/Decawave/decadriver/deca_device.c ****     {
3385:Middlewares/Decawave/decadriver/deca_device.c ****         framerepetitionrate = 4;
 7674              		.loc 1 3385 29
 7675 0034 0423     		movs	r3, #4
 7676 0036 7B60     		str	r3, [r7, #4]
 7677              	.L321:
3386:Middlewares/Decawave/decadriver/deca_device.c ****     }
3387:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(DX_TIME_ID, framerepetitionrate);
 7678              		.loc 1 3387 5
 7679 0038 7A68     		ldr	r2, [r7, #4]
 7680 003a 0021     		movs	r1, #0
 7681 003c 0A20     		movs	r0, #10
 7682 003e FFF7FEFF 		bl	dwt_write32bitoffsetreg
3388:Middlewares/Decawave/decadriver/deca_device.c **** 
3389:Middlewares/Decawave/decadriver/deca_device.c ****     //
3390:Middlewares/Decawave/decadriver/deca_device.c ****     // Configure continuous frame TX
3391:Middlewares/Decawave/decadriver/deca_device.c ****     //
3392:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(DIG_DIAG_ID, DIAG_TMC_OFFSET, (uint8)(DIAG_TMC_TX_PSTM)); // Turn the tx
 7683              		.loc 1 3392 5
 7684 0042 1022     		movs	r2, #16
 7685 0044 2421     		movs	r1, #36
 7686 0046 2F20     		movs	r0, #47
 7687 0048 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3393:Middlewares/Decawave/decadriver/deca_device.c **** }
 7688              		.loc 1 3393 1
 7689 004c 00BF     		nop
 7690 004e 0837     		adds	r7, r7, #8
 7691              	.LCFI414:
 7692              		.cfi_def_cfa_offset 8
 7693 0050 BD46     		mov	sp, r7
 7694              	.LCFI415:
 7695              		.cfi_def_cfa_register 13
 7696              		@ sp needed
 7697 0052 80BD     		pop	{r7, pc}
 7698              	.L323:
 7699              		.align	2
 7700              	.L322:
 7701 0054 00FF5F00 		.word	6291200
 7702              		.cfi_endproc
ARM GAS  /tmp/cc0TY0Fa.s 			page 193


 7703              	.LFE92:
 7705              		.section	.text.dwt_readtempvbat,"ax",%progbits
 7706              		.align	1
 7707              		.global	dwt_readtempvbat
 7708              		.syntax unified
 7709              		.thumb
 7710              		.thumb_func
 7711              		.fpu fpv4-sp-d16
 7713              	dwt_readtempvbat:
 7714              	.LFB93:
3394:Middlewares/Decawave/decadriver/deca_device.c **** 
3395:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3396:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readtempvbat()
3397:Middlewares/Decawave/decadriver/deca_device.c ****  *
3398:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function reads the raw battery voltage and temperature values of the DW IC.
3399:Middlewares/Decawave/decadriver/deca_device.c ****  * The values read here will be the current values sampled by DW IC AtoD converters.
3400:Middlewares/Decawave/decadriver/deca_device.c ****  *
3401:Middlewares/Decawave/decadriver/deca_device.c ****  * NB: To correctly read the temperature this read should be done with xtal clock
3402:Middlewares/Decawave/decadriver/deca_device.c ****  * however that means that the receiver will be switched off, if receiver needs to be on then
3403:Middlewares/Decawave/decadriver/deca_device.c ****  * the timer is used to make sure the value is stable before reading
3404:Middlewares/Decawave/decadriver/deca_device.c ****  *
3405:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3406:Middlewares/Decawave/decadriver/deca_device.c ****  * @param fastSPI - set to 1 if SPI rate > than 3MHz is used
3407:Middlewares/Decawave/decadriver/deca_device.c ****  *
3408:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters
3409:Middlewares/Decawave/decadriver/deca_device.c ****  *
3410:Middlewares/Decawave/decadriver/deca_device.c ****  * returns  (temp_raw<<8)|(vbat_raw)
3411:Middlewares/Decawave/decadriver/deca_device.c ****  */
3412:Middlewares/Decawave/decadriver/deca_device.c **** uint16 dwt_readtempvbat(uint8 fastSPI)
3413:Middlewares/Decawave/decadriver/deca_device.c **** {
 7715              		.loc 1 3413 1
 7716              		.cfi_startproc
 7717              		@ args = 0, pretend = 0, frame = 16
 7718              		@ frame_needed = 1, uses_anonymous_args = 0
 7719 0000 80B5     		push	{r7, lr}
 7720              	.LCFI416:
 7721              		.cfi_def_cfa_offset 8
 7722              		.cfi_offset 7, -8
 7723              		.cfi_offset 14, -4
 7724 0002 84B0     		sub	sp, sp, #16
 7725              	.LCFI417:
 7726              		.cfi_def_cfa_offset 24
 7727 0004 00AF     		add	r7, sp, #0
 7728              	.LCFI418:
 7729              		.cfi_def_cfa_register 7
 7730 0006 0346     		mov	r3, r0
 7731 0008 FB71     		strb	r3, [r7, #7]
3414:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 wr_buf[2];
3415:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 vbat_raw;
3416:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 temp_raw;
3417:Middlewares/Decawave/decadriver/deca_device.c **** 
3418:Middlewares/Decawave/decadriver/deca_device.c ****     // These writes should be single writes and in sequence
3419:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x80; // Enable TLD Bias
 7732              		.loc 1 3419 15
 7733 000a 8023     		movs	r3, #128
 7734 000c 3B73     		strb	r3, [r7, #12]
3420:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(RF_CONF_ID,0x11,1,wr_buf);
ARM GAS  /tmp/cc0TY0Fa.s 			page 194


 7735              		.loc 1 3420 5
 7736 000e 07F10C03 		add	r3, r7, #12
 7737 0012 0122     		movs	r2, #1
 7738 0014 1121     		movs	r1, #17
 7739 0016 2820     		movs	r0, #40
 7740 0018 FFF7FEFF 		bl	dwt_writetodevice
3421:Middlewares/Decawave/decadriver/deca_device.c **** 
3422:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x0A; // Enable TLD Bias and ADC Bias
 7741              		.loc 1 3422 15
 7742 001c 0A23     		movs	r3, #10
 7743 001e 3B73     		strb	r3, [r7, #12]
3423:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(RF_CONF_ID,0x12,1,wr_buf);
 7744              		.loc 1 3423 5
 7745 0020 07F10C03 		add	r3, r7, #12
 7746 0024 0122     		movs	r2, #1
 7747 0026 1221     		movs	r1, #18
 7748 0028 2820     		movs	r0, #40
 7749 002a FFF7FEFF 		bl	dwt_writetodevice
3424:Middlewares/Decawave/decadriver/deca_device.c **** 
3425:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x0f; // Enable Outputs (only after Biases are up and running)
 7750              		.loc 1 3425 15
 7751 002e 0F23     		movs	r3, #15
 7752 0030 3B73     		strb	r3, [r7, #12]
3426:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(RF_CONF_ID,0x12,1,wr_buf);    //
 7753              		.loc 1 3426 5
 7754 0032 07F10C03 		add	r3, r7, #12
 7755 0036 0122     		movs	r2, #1
 7756 0038 1221     		movs	r1, #18
 7757 003a 2820     		movs	r0, #40
 7758 003c FFF7FEFF 		bl	dwt_writetodevice
3427:Middlewares/Decawave/decadriver/deca_device.c **** 
3428:Middlewares/Decawave/decadriver/deca_device.c ****     if(fastSPI == 1)
 7759              		.loc 1 3428 7
 7760 0040 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7761 0042 012B     		cmp	r3, #1
 7762 0044 1CD1     		bne	.L325
3429:Middlewares/Decawave/decadriver/deca_device.c ****     {
3430:Middlewares/Decawave/decadriver/deca_device.c ****         // Reading All SAR inputs
3431:Middlewares/Decawave/decadriver/deca_device.c ****         wr_buf[0] = 0x00;
 7763              		.loc 1 3431 19
 7764 0046 0023     		movs	r3, #0
 7765 0048 3B73     		strb	r3, [r7, #12]
3432:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 7766              		.loc 1 3432 9
 7767 004a 07F10C03 		add	r3, r7, #12
 7768 004e 0122     		movs	r2, #1
 7769 0050 0021     		movs	r1, #0
 7770 0052 2A20     		movs	r0, #42
 7771 0054 FFF7FEFF 		bl	dwt_writetodevice
3433:Middlewares/Decawave/decadriver/deca_device.c ****         wr_buf[0] = 0x01; // Set SAR enable
 7772              		.loc 1 3433 19
 7773 0058 0123     		movs	r3, #1
 7774 005a 3B73     		strb	r3, [r7, #12]
3434:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 7775              		.loc 1 3434 9
 7776 005c 07F10C03 		add	r3, r7, #12
 7777 0060 0122     		movs	r2, #1
ARM GAS  /tmp/cc0TY0Fa.s 			page 195


 7778 0062 0021     		movs	r1, #0
 7779 0064 2A20     		movs	r0, #42
 7780 0066 FFF7FEFF 		bl	dwt_writetodevice
3435:Middlewares/Decawave/decadriver/deca_device.c **** 
3436:Middlewares/Decawave/decadriver/deca_device.c ****         deca_sleep(1); // If using PLL clocks(and fast SPI rate) then this sleep is needed
 7781              		.loc 1 3436 9
 7782 006a 0120     		movs	r0, #1
 7783 006c FFF7FEFF 		bl	deca_sleep
3437:Middlewares/Decawave/decadriver/deca_device.c ****         // Read voltage and temperature.
3438:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_readfromdevice(TX_CAL_ID, TC_SARL_SAR_LVBAT_OFFSET,2,wr_buf);
 7784              		.loc 1 3438 9
 7785 0070 07F10C03 		add	r3, r7, #12
 7786 0074 0222     		movs	r2, #2
 7787 0076 0321     		movs	r1, #3
 7788 0078 2A20     		movs	r0, #42
 7789 007a FFF7FEFF 		bl	dwt_readfromdevice
 7790 007e 1EE0     		b	.L326
 7791              	.L325:
3439:Middlewares/Decawave/decadriver/deca_device.c ****     }
3440:Middlewares/Decawave/decadriver/deca_device.c ****     else //change to a slow clock
3441:Middlewares/Decawave/decadriver/deca_device.c ****     {
3442:Middlewares/Decawave/decadriver/deca_device.c ****         _dwt_enableclocks(FORCE_SYS_XTI); // NOTE: set system clock to XTI - this is necessary to m
 7792              		.loc 1 3442 9
 7793 0080 0020     		movs	r0, #0
 7794 0082 FFF7FEFF 		bl	_dwt_enableclocks
3443:Middlewares/Decawave/decadriver/deca_device.c ****         // Reading All SAR inputs
3444:Middlewares/Decawave/decadriver/deca_device.c ****         wr_buf[0] = 0x00;
 7795              		.loc 1 3444 19
 7796 0086 0023     		movs	r3, #0
 7797 0088 3B73     		strb	r3, [r7, #12]
3445:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 7798              		.loc 1 3445 9
 7799 008a 07F10C03 		add	r3, r7, #12
 7800 008e 0122     		movs	r2, #1
 7801 0090 0021     		movs	r1, #0
 7802 0092 2A20     		movs	r0, #42
 7803 0094 FFF7FEFF 		bl	dwt_writetodevice
3446:Middlewares/Decawave/decadriver/deca_device.c ****         wr_buf[0] = 0x01; // Set SAR enable
 7804              		.loc 1 3446 19
 7805 0098 0123     		movs	r3, #1
 7806 009a 3B73     		strb	r3, [r7, #12]
3447:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 7807              		.loc 1 3447 9
 7808 009c 07F10C03 		add	r3, r7, #12
 7809 00a0 0122     		movs	r2, #1
 7810 00a2 0021     		movs	r1, #0
 7811 00a4 2A20     		movs	r0, #42
 7812 00a6 FFF7FEFF 		bl	dwt_writetodevice
3448:Middlewares/Decawave/decadriver/deca_device.c **** 
3449:Middlewares/Decawave/decadriver/deca_device.c ****         // Read voltage and temperature.
3450:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_readfromdevice(TX_CAL_ID, TC_SARL_SAR_LVBAT_OFFSET,2,wr_buf);
 7813              		.loc 1 3450 9
 7814 00aa 07F10C03 		add	r3, r7, #12
 7815 00ae 0222     		movs	r2, #2
 7816 00b0 0321     		movs	r1, #3
 7817 00b2 2A20     		movs	r0, #42
 7818 00b4 FFF7FEFF 		bl	dwt_readfromdevice
ARM GAS  /tmp/cc0TY0Fa.s 			page 196


3451:Middlewares/Decawave/decadriver/deca_device.c ****         // Default clocks (ENABLE_ALL_SEQ)
3452:Middlewares/Decawave/decadriver/deca_device.c ****         _dwt_enableclocks(ENABLE_ALL_SEQ); // Enable clocks for sequencing
 7819              		.loc 1 3452 9
 7820 00b8 0120     		movs	r0, #1
 7821 00ba FFF7FEFF 		bl	_dwt_enableclocks
 7822              	.L326:
3453:Middlewares/Decawave/decadriver/deca_device.c ****     }
3454:Middlewares/Decawave/decadriver/deca_device.c **** 
3455:Middlewares/Decawave/decadriver/deca_device.c ****     vbat_raw = wr_buf[0];
 7823              		.loc 1 3455 14
 7824 00be 3B7B     		ldrb	r3, [r7, #12]
 7825 00c0 FB73     		strb	r3, [r7, #15]
3456:Middlewares/Decawave/decadriver/deca_device.c ****     temp_raw = wr_buf[1];
 7826              		.loc 1 3456 14
 7827 00c2 7B7B     		ldrb	r3, [r7, #13]
 7828 00c4 BB73     		strb	r3, [r7, #14]
3457:Middlewares/Decawave/decadriver/deca_device.c **** 
3458:Middlewares/Decawave/decadriver/deca_device.c ****     wr_buf[0] = 0x00; // Clear SAR enable
 7829              		.loc 1 3458 15
 7830 00c6 0023     		movs	r3, #0
 7831 00c8 3B73     		strb	r3, [r7, #12]
3459:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 7832              		.loc 1 3459 5
 7833 00ca 07F10C03 		add	r3, r7, #12
 7834 00ce 0122     		movs	r2, #1
 7835 00d0 0021     		movs	r1, #0
 7836 00d2 2A20     		movs	r0, #42
 7837 00d4 FFF7FEFF 		bl	dwt_writetodevice
3460:Middlewares/Decawave/decadriver/deca_device.c **** 
3461:Middlewares/Decawave/decadriver/deca_device.c ****     return (((uint16)temp_raw<<8)|(vbat_raw));
 7838              		.loc 1 3461 14
 7839 00d8 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 7840              		.loc 1 3461 30
 7841 00da 1B02     		lsls	r3, r3, #8
 7842              		.loc 1 3461 34
 7843 00dc 1AB2     		sxth	r2, r3
 7844 00de FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 7845 00e0 1BB2     		sxth	r3, r3
 7846 00e2 1343     		orrs	r3, r3, r2
 7847 00e4 1BB2     		sxth	r3, r3
 7848 00e6 9BB2     		uxth	r3, r3
3462:Middlewares/Decawave/decadriver/deca_device.c **** }
 7849              		.loc 1 3462 1
 7850 00e8 1846     		mov	r0, r3
 7851 00ea 1037     		adds	r7, r7, #16
 7852              	.LCFI419:
 7853              		.cfi_def_cfa_offset 8
 7854 00ec BD46     		mov	sp, r7
 7855              	.LCFI420:
 7856              		.cfi_def_cfa_register 13
 7857              		@ sp needed
 7858 00ee 80BD     		pop	{r7, pc}
 7859              		.cfi_endproc
 7860              	.LFE93:
 7862              		.global	__aeabi_i2d
 7863              		.global	__aeabi_dmul
 7864              		.global	__aeabi_dadd
ARM GAS  /tmp/cc0TY0Fa.s 			page 197


 7865              		.global	__aeabi_d2f
 7866              		.section	.text.dwt_convertrawtemperature,"ax",%progbits
 7867              		.align	1
 7868              		.global	dwt_convertrawtemperature
 7869              		.syntax unified
 7870              		.thumb
 7871              		.thumb_func
 7872              		.fpu fpv4-sp-d16
 7874              	dwt_convertrawtemperature:
 7875              	.LFB94:
3463:Middlewares/Decawave/decadriver/deca_device.c **** 
3464:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3465:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_convertrawtemperature()
3466:Middlewares/Decawave/decadriver/deca_device.c ****  *
3467:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function takes in a raw temperature value and applies the conversion factor
3468:Middlewares/Decawave/decadriver/deca_device.c ****  * to give true temperature. The dwt_initialise needs to be called before call to this to
3469:Middlewares/Decawave/decadriver/deca_device.c ****  * ensure pdw1000local->tempP contains the SAR_LTEMP value from OTP.
3470:Middlewares/Decawave/decadriver/deca_device.c ****  *
3471:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3472:Middlewares/Decawave/decadriver/deca_device.c ****  * @param raw_temp - this is the 8-bit raw temperature value as read by dwt_readtempvbat
3473:Middlewares/Decawave/decadriver/deca_device.c ****  *
3474:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters:
3475:Middlewares/Decawave/decadriver/deca_device.c ****  *
3476:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: temperature sensor value in degrees
3477:Middlewares/Decawave/decadriver/deca_device.c ****  */
3478:Middlewares/Decawave/decadriver/deca_device.c **** float dwt_convertrawtemperature(uint8 raw_temp)
3479:Middlewares/Decawave/decadriver/deca_device.c **** {
 7876              		.loc 1 3479 1
 7877              		.cfi_startproc
 7878              		@ args = 0, pretend = 0, frame = 16
 7879              		@ frame_needed = 1, uses_anonymous_args = 0
 7880 0000 80B5     		push	{r7, lr}
 7881              	.LCFI421:
 7882              		.cfi_def_cfa_offset 8
 7883              		.cfi_offset 7, -8
 7884              		.cfi_offset 14, -4
 7885 0002 84B0     		sub	sp, sp, #16
 7886              	.LCFI422:
 7887              		.cfi_def_cfa_offset 24
 7888 0004 00AF     		add	r7, sp, #0
 7889              	.LCFI423:
 7890              		.cfi_def_cfa_register 7
 7891 0006 0346     		mov	r3, r0
 7892 0008 FB71     		strb	r3, [r7, #7]
3480:Middlewares/Decawave/decadriver/deca_device.c ****     float realtemp;
3481:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3482:Middlewares/Decawave/decadriver/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_TMP);
3483:Middlewares/Decawave/decadriver/deca_device.c **** #endif
3484:Middlewares/Decawave/decadriver/deca_device.c ****     // the User Manual formula is: Temperature (C) = ( (SAR_LTEMP  OTP_READ(Vtemp @ 23C) )
3485:Middlewares/Decawave/decadriver/deca_device.c ****     realtemp = ((raw_temp - pdw1000local->tempP) * SAR_TEMP_TO_CELCIUS_CONV) + 23 ;
 7893              		.loc 1 3485 27
 7894 000a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7895              		.loc 1 3485 41
 7896 000c 144A     		ldr	r2, .L330+8
 7897 000e 1268     		ldr	r2, [r2]
 7898 0010 527A     		ldrb	r2, [r2, #9]	@ zero_extendqisi2
 7899              		.loc 1 3485 27
ARM GAS  /tmp/cc0TY0Fa.s 			page 198


 7900 0012 9B1A     		subs	r3, r3, r2
 7901              		.loc 1 3485 50
 7902 0014 1846     		mov	r0, r3
 7903 0016 FFF7FEFF 		bl	__aeabi_i2d
 7904              	.LVL5:
 7905 001a 0FA3     		adr	r3, .L330
 7906 001c D3E90023 		ldrd	r2, [r3]
 7907 0020 FFF7FEFF 		bl	__aeabi_dmul
 7908              	.LVL6:
 7909 0024 0246     		mov	r2, r0
 7910 0026 0B46     		mov	r3, r1
 7911 0028 1046     		mov	r0, r2
 7912 002a 1946     		mov	r1, r3
 7913              		.loc 1 3485 78
 7914 002c 4FF00002 		mov	r2, #0
 7915 0030 0C4B     		ldr	r3, .L330+12
 7916 0032 FFF7FEFF 		bl	__aeabi_dadd
 7917              	.LVL7:
 7918 0036 0246     		mov	r2, r0
 7919 0038 0B46     		mov	r3, r1
 7920              		.loc 1 3485 14
 7921 003a 1046     		mov	r0, r2
 7922 003c 1946     		mov	r1, r3
 7923 003e FFF7FEFF 		bl	__aeabi_d2f
 7924              	.LVL8:
 7925 0042 0346     		mov	r3, r0	@ float
 7926 0044 FB60     		str	r3, [r7, #12]	@ float
3486:Middlewares/Decawave/decadriver/deca_device.c **** 
3487:Middlewares/Decawave/decadriver/deca_device.c ****     return realtemp;
 7927              		.loc 1 3487 12
 7928 0046 FB68     		ldr	r3, [r7, #12]	@ float
 7929 0048 07EE903A 		vmov	s15, r3
3488:Middlewares/Decawave/decadriver/deca_device.c **** }
 7930              		.loc 1 3488 1
 7931 004c B0EE670A 		vmov.f32	s0, s15
 7932 0050 1037     		adds	r7, r7, #16
 7933              	.LCFI424:
 7934              		.cfi_def_cfa_offset 8
 7935 0052 BD46     		mov	sp, r7
 7936              	.LCFI425:
 7937              		.cfi_def_cfa_register 13
 7938              		@ sp needed
 7939 0054 80BD     		pop	{r7, pc}
 7940              	.L331:
 7941 0056 00BF     		.align	3
 7942              	.L330:
 7943 0058 3D0AD7A3 		.word	2748779069
 7944 005c 703DF23F 		.word	1072840048
 7945 0060 00000000 		.word	pdw1000local
 7946 0064 00003740 		.word	1077346304
 7947              		.cfi_endproc
 7948              	.LFE94:
 7950              		.section	.text.dwt_convertdegtemptoraw,"ax",%progbits
 7951              		.align	1
 7952              		.global	dwt_convertdegtemptoraw
 7953              		.syntax unified
 7954              		.thumb
ARM GAS  /tmp/cc0TY0Fa.s 			page 199


 7955              		.thumb_func
 7956              		.fpu fpv4-sp-d16
 7958              	dwt_convertdegtemptoraw:
 7959              	.LFB95:
3489:Middlewares/Decawave/decadriver/deca_device.c **** 
3490:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3491:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_convertdegtemptoraw()
3492:Middlewares/Decawave/decadriver/deca_device.c ****  *
3493:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function takes in an externally measured temperature in 10ths of degrees Celcius
3494:Middlewares/Decawave/decadriver/deca_device.c ****  * and applies the conversion factor to give a value in IC temperature units, as produced by the SA
3495:Middlewares/Decawave/decadriver/deca_device.c ****  * The dwt_initialise needs to be called before call to this to ensure pdw1000local->tempP contains
3496:Middlewares/Decawave/decadriver/deca_device.c ****  *
3497:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3498:Middlewares/Decawave/decadriver/deca_device.c ****  * @param externaltemp - this is the an externally measured temperature in 10ths of degrees Celcius
3499:Middlewares/Decawave/decadriver/deca_device.c ****  *
3500:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters:
3501:Middlewares/Decawave/decadriver/deca_device.c ****  *
3502:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: temperature sensor value in DW IC temperature units (1.14C steps)
3503:Middlewares/Decawave/decadriver/deca_device.c ****  */
3504:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_convertdegtemptoraw(int16 externaltemp)
3505:Middlewares/Decawave/decadriver/deca_device.c **** {
 7960              		.loc 1 3505 1
 7961              		.cfi_startproc
 7962              		@ args = 0, pretend = 0, frame = 16
 7963              		@ frame_needed = 1, uses_anonymous_args = 0
 7964              		@ link register save eliminated.
 7965 0000 80B4     		push	{r7}
 7966              	.LCFI426:
 7967              		.cfi_def_cfa_offset 4
 7968              		.cfi_offset 7, -4
 7969 0002 85B0     		sub	sp, sp, #20
 7970              	.LCFI427:
 7971              		.cfi_def_cfa_offset 24
 7972 0004 00AF     		add	r7, sp, #0
 7973              	.LCFI428:
 7974              		.cfi_def_cfa_register 7
 7975 0006 0346     		mov	r3, r0
 7976 0008 FB80     		strh	r3, [r7, #6]	@ movhi
3506:Middlewares/Decawave/decadriver/deca_device.c ****     int32 raw_temp;
3507:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3508:Middlewares/Decawave/decadriver/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_TMP);
3509:Middlewares/Decawave/decadriver/deca_device.c ****     assert((externaltemp > -800) && (externaltemp < 1500))
3510:Middlewares/Decawave/decadriver/deca_device.c **** #endif
3511:Middlewares/Decawave/decadriver/deca_device.c ****     // the User Manual formula is: Temperature (C) = ( (SAR_LTEMP  OTP_READ(Vtemp @ 23C) )
3512:Middlewares/Decawave/decadriver/deca_device.c ****     raw_temp = ((externaltemp - 230 + 5) * DCELCIUS_TO_SAR_TEMP_CONV) ; //+5 for better rounding
 7977              		.loc 1 3512 37
 7978 000a B7F90630 		ldrsh	r3, [r7, #6]
 7979 000e E13B     		subs	r3, r3, #225
 7980              		.loc 1 3512 14
 7981 0010 1622     		movs	r2, #22
 7982 0012 02FB03F3 		mul	r3, r2, r3
 7983 0016 FB60     		str	r3, [r7, #12]
3513:Middlewares/Decawave/decadriver/deca_device.c **** 
3514:Middlewares/Decawave/decadriver/deca_device.c ****     if(raw_temp < 0) //negative
 7984              		.loc 1 3514 7
 7985 0018 FB68     		ldr	r3, [r7, #12]
 7986 001a 002B     		cmp	r3, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 200


 7987 001c 07DA     		bge	.L333
3515:Middlewares/Decawave/decadriver/deca_device.c ****     {
3516:Middlewares/Decawave/decadriver/deca_device.c ****         raw_temp = (-raw_temp >> 8)  ;
 7988              		.loc 1 3516 21
 7989 001e FB68     		ldr	r3, [r7, #12]
 7990 0020 5B42     		rsbs	r3, r3, #0
 7991              		.loc 1 3516 18
 7992 0022 1B12     		asrs	r3, r3, #8
 7993 0024 FB60     		str	r3, [r7, #12]
3517:Middlewares/Decawave/decadriver/deca_device.c ****         raw_temp = -raw_temp ;
 7994              		.loc 1 3517 18
 7995 0026 FB68     		ldr	r3, [r7, #12]
 7996 0028 5B42     		rsbs	r3, r3, #0
 7997 002a FB60     		str	r3, [r7, #12]
 7998 002c 02E0     		b	.L334
 7999              	.L333:
3518:Middlewares/Decawave/decadriver/deca_device.c ****     }
3519:Middlewares/Decawave/decadriver/deca_device.c ****     else
3520:Middlewares/Decawave/decadriver/deca_device.c ****         raw_temp = raw_temp >> 8  ;
 8000              		.loc 1 3520 18
 8001 002e FB68     		ldr	r3, [r7, #12]
 8002 0030 1B12     		asrs	r3, r3, #8
 8003 0032 FB60     		str	r3, [r7, #12]
 8004              	.L334:
3521:Middlewares/Decawave/decadriver/deca_device.c **** 
3522:Middlewares/Decawave/decadriver/deca_device.c ****     return (uint8) (raw_temp + pdw1000local->tempP);
 8005              		.loc 1 3522 12
 8006 0034 FB68     		ldr	r3, [r7, #12]
 8007 0036 DAB2     		uxtb	r2, r3
 8008              		.loc 1 3522 44
 8009 0038 054B     		ldr	r3, .L336
 8010 003a 1B68     		ldr	r3, [r3]
 8011 003c 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 8012              		.loc 1 3522 12
 8013 003e 1344     		add	r3, r3, r2
 8014 0040 DBB2     		uxtb	r3, r3
3523:Middlewares/Decawave/decadriver/deca_device.c **** }
 8015              		.loc 1 3523 1
 8016 0042 1846     		mov	r0, r3
 8017 0044 1437     		adds	r7, r7, #20
 8018              	.LCFI429:
 8019              		.cfi_def_cfa_offset 4
 8020 0046 BD46     		mov	sp, r7
 8021              	.LCFI430:
 8022              		.cfi_def_cfa_register 13
 8023              		@ sp needed
 8024 0048 5DF8047B 		ldr	r7, [sp], #4
 8025              	.LCFI431:
 8026              		.cfi_restore 7
 8027              		.cfi_def_cfa_offset 0
 8028 004c 7047     		bx	lr
 8029              	.L337:
 8030 004e 00BF     		.align	2
 8031              	.L336:
 8032 0050 00000000 		.word	pdw1000local
 8033              		.cfi_endproc
 8034              	.LFE95:
ARM GAS  /tmp/cc0TY0Fa.s 			page 201


 8036              		.global	__aeabi_f2d
 8037              		.section	.text.dwt_convertrawvoltage,"ax",%progbits
 8038              		.align	1
 8039              		.global	dwt_convertrawvoltage
 8040              		.syntax unified
 8041              		.thumb
 8042              		.thumb_func
 8043              		.fpu fpv4-sp-d16
 8045              	dwt_convertrawvoltage:
 8046              	.LFB96:
3524:Middlewares/Decawave/decadriver/deca_device.c **** 
3525:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3526:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_convertrawvoltage()
3527:Middlewares/Decawave/decadriver/deca_device.c ****  *
3528:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function takes in a raw voltage value and applies the conversion factor
3529:Middlewares/Decawave/decadriver/deca_device.c ****  * to give true voltage. The dwt_initialise needs to be called before call to this to
3530:Middlewares/Decawave/decadriver/deca_device.c ****  * ensure pdw1000local->vBatP contains the SAR_LVBAT value from OTP
3531:Middlewares/Decawave/decadriver/deca_device.c ****  *
3532:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3533:Middlewares/Decawave/decadriver/deca_device.c ****  * @param raw_voltage - this is the 8-bit raw voltage value as read by dwt_readtempvbat
3534:Middlewares/Decawave/decadriver/deca_device.c ****  *
3535:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters:
3536:Middlewares/Decawave/decadriver/deca_device.c ****  *
3537:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: voltage sensor value in volts
3538:Middlewares/Decawave/decadriver/deca_device.c ****  */
3539:Middlewares/Decawave/decadriver/deca_device.c **** float dwt_convertrawvoltage(uint8 raw_voltage)
3540:Middlewares/Decawave/decadriver/deca_device.c **** {
 8047              		.loc 1 3540 1
 8048              		.cfi_startproc
 8049              		@ args = 0, pretend = 0, frame = 16
 8050              		@ frame_needed = 1, uses_anonymous_args = 0
 8051 0000 80B5     		push	{r7, lr}
 8052              	.LCFI432:
 8053              		.cfi_def_cfa_offset 8
 8054              		.cfi_offset 7, -8
 8055              		.cfi_offset 14, -4
 8056 0002 84B0     		sub	sp, sp, #16
 8057              	.LCFI433:
 8058              		.cfi_def_cfa_offset 24
 8059 0004 00AF     		add	r7, sp, #0
 8060              	.LCFI434:
 8061              		.cfi_def_cfa_register 7
 8062 0006 0346     		mov	r3, r0
 8063 0008 FB71     		strb	r3, [r7, #7]
3541:Middlewares/Decawave/decadriver/deca_device.c ****     float realvolt;
3542:Middlewares/Decawave/decadriver/deca_device.c **** 
3543:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3544:Middlewares/Decawave/decadriver/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_BAT);
3545:Middlewares/Decawave/decadriver/deca_device.c **** #endif
3546:Middlewares/Decawave/decadriver/deca_device.c ****     // the User Manual formula is: Voltage (V) = ( (SAR_LVBAT  OTP_READ(Vmeas @ 3.3 V) ) / 173 )
3547:Middlewares/Decawave/decadriver/deca_device.c ****     realvolt = ((float)(raw_voltage - pdw1000local->vBatP) * SAR_VBAT_TO_VOLT_CONV) + 3.3 ;
 8064              		.loc 1 3547 37
 8065 000a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 8066              		.loc 1 3547 51
 8067 000c 184A     		ldr	r2, .L340+16
 8068 000e 1268     		ldr	r2, [r2]
 8069 0010 127A     		ldrb	r2, [r2, #8]	@ zero_extendqisi2
ARM GAS  /tmp/cc0TY0Fa.s 			page 202


 8070              		.loc 1 3547 37
 8071 0012 9B1A     		subs	r3, r3, r2
 8072              		.loc 1 3547 17
 8073 0014 07EE903A 		vmov	s15, r3	@ int
 8074 0018 F8EEE77A 		vcvt.f32.s32	s15, s15
 8075 001c 17EE900A 		vmov	r0, s15
 8076 0020 FFF7FEFF 		bl	__aeabi_f2d
 8077              	.LVL9:
 8078              		.loc 1 3547 60
 8079 0024 0EA3     		adr	r3, .L340
 8080 0026 D3E90023 		ldrd	r2, [r3]
 8081 002a FFF7FEFF 		bl	__aeabi_dmul
 8082              	.LVL10:
 8083 002e 0246     		mov	r2, r0
 8084 0030 0B46     		mov	r3, r1
 8085 0032 1046     		mov	r0, r2
 8086 0034 1946     		mov	r1, r3
 8087              		.loc 1 3547 85
 8088 0036 0CA3     		adr	r3, .L340+8
 8089 0038 D3E90023 		ldrd	r2, [r3]
 8090 003c FFF7FEFF 		bl	__aeabi_dadd
 8091              	.LVL11:
 8092 0040 0246     		mov	r2, r0
 8093 0042 0B46     		mov	r3, r1
 8094              		.loc 1 3547 14
 8095 0044 1046     		mov	r0, r2
 8096 0046 1946     		mov	r1, r3
 8097 0048 FFF7FEFF 		bl	__aeabi_d2f
 8098              	.LVL12:
 8099 004c 0346     		mov	r3, r0	@ float
 8100 004e FB60     		str	r3, [r7, #12]	@ float
3548:Middlewares/Decawave/decadriver/deca_device.c **** 
3549:Middlewares/Decawave/decadriver/deca_device.c ****     return realvolt;
 8101              		.loc 1 3549 12
 8102 0050 FB68     		ldr	r3, [r7, #12]	@ float
 8103 0052 07EE903A 		vmov	s15, r3
3550:Middlewares/Decawave/decadriver/deca_device.c **** }
 8104              		.loc 1 3550 1
 8105 0056 B0EE670A 		vmov.f32	s0, s15
 8106 005a 1037     		adds	r7, r7, #16
 8107              	.LCFI435:
 8108              		.cfi_def_cfa_offset 8
 8109 005c BD46     		mov	sp, r7
 8110              	.LCFI436:
 8111              		.cfi_def_cfa_register 13
 8112              		@ sp needed
 8113 005e 80BD     		pop	{r7, pc}
 8114              	.L341:
 8115              		.align	3
 8116              	.L340:
 8117 0060 C3ECE008 		.word	148958403
 8118 0064 22AD773F 		.word	1064807714
 8119 0068 66666666 		.word	1717986918
 8120 006c 66660A40 		.word	1074423398
 8121 0070 00000000 		.word	pdw1000local
 8122              		.cfi_endproc
 8123              	.LFE96:
ARM GAS  /tmp/cc0TY0Fa.s 			page 203


 8125              		.global	__aeabi_d2uiz
 8126              		.section	.text.dwt_convertvoltstoraw,"ax",%progbits
 8127              		.align	1
 8128              		.global	dwt_convertvoltstoraw
 8129              		.syntax unified
 8130              		.thumb
 8131              		.thumb_func
 8132              		.fpu fpv4-sp-d16
 8134              	dwt_convertvoltstoraw:
 8135              	.LFB97:
3551:Middlewares/Decawave/decadriver/deca_device.c **** 
3552:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3553:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_convertvoltstoraw()
3554:Middlewares/Decawave/decadriver/deca_device.c ****  *
3555:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief  this function takes in a true voltage in millivolts and applies the conversion factor to
3556:Middlewares/Decawave/decadriver/deca_device.c ****  * give a raw DW IC value. The dwt_initialise needs to be called before call to this to
3557:Middlewares/Decawave/decadriver/deca_device.c ****  * ensure pdw1000local->vBatP contains the SAR_LVBAT value from OTP.
3558:Middlewares/Decawave/decadriver/deca_device.c ****  *
3559:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3560:Middlewares/Decawave/decadriver/deca_device.c ****  * @param realvolt - this is a true voltage in millivolts to convert
3561:Middlewares/Decawave/decadriver/deca_device.c ****  *
3562:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters:
3563:Middlewares/Decawave/decadriver/deca_device.c ****  *
3564:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: voltage sensor value in DW IC voltage units
3565:Middlewares/Decawave/decadriver/deca_device.c ****  */
3566:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_convertvoltstoraw(int32 externalmvolt)
3567:Middlewares/Decawave/decadriver/deca_device.c **** {
 8136              		.loc 1 3567 1
 8137              		.cfi_startproc
 8138              		@ args = 0, pretend = 0, frame = 16
 8139              		@ frame_needed = 1, uses_anonymous_args = 0
 8140 0000 B0B5     		push	{r4, r5, r7, lr}
 8141              	.LCFI437:
 8142              		.cfi_def_cfa_offset 16
 8143              		.cfi_offset 4, -16
 8144              		.cfi_offset 5, -12
 8145              		.cfi_offset 7, -8
 8146              		.cfi_offset 14, -4
 8147 0002 84B0     		sub	sp, sp, #16
 8148              	.LCFI438:
 8149              		.cfi_def_cfa_offset 32
 8150 0004 00AF     		add	r7, sp, #0
 8151              	.LCFI439:
 8152              		.cfi_def_cfa_register 7
 8153 0006 7860     		str	r0, [r7, #4]
3568:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 raw_voltage;
3569:Middlewares/Decawave/decadriver/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3570:Middlewares/Decawave/decadriver/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_BAT);
3571:Middlewares/Decawave/decadriver/deca_device.c **** #endif
3572:Middlewares/Decawave/decadriver/deca_device.c ****     // the User Manual formula is: Voltage (V) = ( (SAR_LVBAT  OTP_READ(Vmeas @ 3.3 V) ) / 173 )
3573:Middlewares/Decawave/decadriver/deca_device.c ****     raw_voltage = ((externalmvolt - 3300) * MVOLT_TO_SAR_VBAT_CONV) + pdw1000local->vBatP ;
 8154              		.loc 1 3573 35
 8155 0008 7B68     		ldr	r3, [r7, #4]
 8156 000a A3F6E443 		subw	r3, r3, #3300
 8157              		.loc 1 3573 43
 8158 000e 1846     		mov	r0, r3
 8159 0010 FFF7FEFF 		bl	__aeabi_i2d
ARM GAS  /tmp/cc0TY0Fa.s 			page 204


 8160              	.LVL13:
 8161 0014 13A3     		adr	r3, .L344+4
 8162 0016 D3E90023 		ldrd	r2, [r3]
 8163 001a FFF7FEFF 		bl	__aeabi_dmul
 8164              	.LVL14:
 8165 001e 0246     		mov	r2, r0
 8166 0020 0B46     		mov	r3, r1
 8167 0022 1446     		mov	r4, r2
 8168 0024 1D46     		mov	r5, r3
 8169              		.loc 1 3573 83
 8170 0026 0E4B     		ldr	r3, .L344
 8171 0028 1B68     		ldr	r3, [r3]
 8172 002a 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 8173              		.loc 1 3573 69
 8174 002c 1846     		mov	r0, r3
 8175 002e FFF7FEFF 		bl	__aeabi_i2d
 8176              	.LVL15:
 8177 0032 0246     		mov	r2, r0
 8178 0034 0B46     		mov	r3, r1
 8179 0036 2046     		mov	r0, r4
 8180 0038 2946     		mov	r1, r5
 8181 003a FFF7FEFF 		bl	__aeabi_dadd
 8182              	.LVL16:
 8183 003e 0246     		mov	r2, r0
 8184 0040 0B46     		mov	r3, r1
 8185              		.loc 1 3573 17
 8186 0042 1046     		mov	r0, r2
 8187 0044 1946     		mov	r1, r3
 8188 0046 FFF7FEFF 		bl	__aeabi_d2uiz
 8189              	.LVL17:
 8190 004a 0346     		mov	r3, r0
 8191 004c FB60     		str	r3, [r7, #12]
3574:Middlewares/Decawave/decadriver/deca_device.c **** 
3575:Middlewares/Decawave/decadriver/deca_device.c ****     return (uint8) raw_voltage;
 8192              		.loc 1 3575 12
 8193 004e FB68     		ldr	r3, [r7, #12]
 8194 0050 DBB2     		uxtb	r3, r3
3576:Middlewares/Decawave/decadriver/deca_device.c **** }
 8195              		.loc 1 3576 1
 8196 0052 1846     		mov	r0, r3
 8197 0054 1037     		adds	r7, r7, #16
 8198              	.LCFI440:
 8199              		.cfi_def_cfa_offset 16
 8200 0056 BD46     		mov	sp, r7
 8201              	.LCFI441:
 8202              		.cfi_def_cfa_register 13
 8203              		@ sp needed
 8204 0058 B0BD     		pop	{r4, r5, r7, pc}
 8205              	.L345:
 8206 005a 00BFAFF3 		.align	3
 8206      0080
 8207              	.L344:
 8208 0060 00000000 		.word	pdw1000local
 8209 0064 BE9F1A2F 		.word	790273982
 8210 0068 DD24C63F 		.word	1069950173
 8211              		.cfi_endproc
 8212              	.LFE97:
ARM GAS  /tmp/cc0TY0Fa.s 			page 205


 8214              		.section	.text.dwt_readwakeuptemp,"ax",%progbits
 8215              		.align	1
 8216              		.global	dwt_readwakeuptemp
 8217              		.syntax unified
 8218              		.thumb
 8219              		.thumb_func
 8220              		.fpu fpv4-sp-d16
 8222              	dwt_readwakeuptemp:
 8223              	.LFB98:
3577:Middlewares/Decawave/decadriver/deca_device.c **** 
3578:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3579:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readwakeuptemp()
3580:Middlewares/Decawave/decadriver/deca_device.c ****  *
3581:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function reads the temperature of the DW1000 that was sampled
3582:Middlewares/Decawave/decadriver/deca_device.c ****  * on waking from Sleep/Deepsleep. They are not current values, but read on last
3583:Middlewares/Decawave/decadriver/deca_device.c ****  * wakeup if DWT_TANDV bit is set in mode parameter of dwt_configuresleep
3584:Middlewares/Decawave/decadriver/deca_device.c ****  *
3585:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3586:Middlewares/Decawave/decadriver/deca_device.c ****  *
3587:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters:
3588:Middlewares/Decawave/decadriver/deca_device.c ****  *
3589:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: 8-bit raw temperature sensor value
3590:Middlewares/Decawave/decadriver/deca_device.c ****  */
3591:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_readwakeuptemp(void)
3592:Middlewares/Decawave/decadriver/deca_device.c **** {
 8224              		.loc 1 3592 1
 8225              		.cfi_startproc
 8226              		@ args = 0, pretend = 0, frame = 0
 8227              		@ frame_needed = 1, uses_anonymous_args = 0
 8228 0000 80B5     		push	{r7, lr}
 8229              	.LCFI442:
 8230              		.cfi_def_cfa_offset 8
 8231              		.cfi_offset 7, -8
 8232              		.cfi_offset 14, -4
 8233 0002 00AF     		add	r7, sp, #0
 8234              	.LCFI443:
 8235              		.cfi_def_cfa_register 7
3593:Middlewares/Decawave/decadriver/deca_device.c ****     return dwt_read8bitoffsetreg(TX_CAL_ID, TC_SARL_SAR_LTEMP_OFFSET);
 8236              		.loc 1 3593 12
 8237 0004 0421     		movs	r1, #4
 8238 0006 2A20     		movs	r0, #42
 8239 0008 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 8240 000c 0346     		mov	r3, r0
3594:Middlewares/Decawave/decadriver/deca_device.c **** }
 8241              		.loc 1 3594 1
 8242 000e 1846     		mov	r0, r3
 8243 0010 80BD     		pop	{r7, pc}
 8244              		.cfi_endproc
 8245              	.LFE98:
 8247              		.section	.text.dwt_readwakeupvbat,"ax",%progbits
 8248              		.align	1
 8249              		.global	dwt_readwakeupvbat
 8250              		.syntax unified
 8251              		.thumb
 8252              		.thumb_func
 8253              		.fpu fpv4-sp-d16
 8255              	dwt_readwakeupvbat:
ARM GAS  /tmp/cc0TY0Fa.s 			page 206


 8256              	.LFB99:
3595:Middlewares/Decawave/decadriver/deca_device.c **** 
3596:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3597:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_readwakeupvbat()
3598:Middlewares/Decawave/decadriver/deca_device.c ****  *
3599:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function reads the battery voltage of the DW1000 that was sampled
3600:Middlewares/Decawave/decadriver/deca_device.c ****  * on waking from Sleep/Deepsleep. They are not current values, but read on last
3601:Middlewares/Decawave/decadriver/deca_device.c ****  * wakeup if DWT_TANDV bit is set in mode parameter of dwt_configuresleep
3602:Middlewares/Decawave/decadriver/deca_device.c ****  *
3603:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3604:Middlewares/Decawave/decadriver/deca_device.c ****  *
3605:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters:
3606:Middlewares/Decawave/decadriver/deca_device.c ****  *
3607:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: 8-bit raw battery voltage sensor value
3608:Middlewares/Decawave/decadriver/deca_device.c ****  */
3609:Middlewares/Decawave/decadriver/deca_device.c **** uint8 dwt_readwakeupvbat(void)
3610:Middlewares/Decawave/decadriver/deca_device.c **** {
 8257              		.loc 1 3610 1
 8258              		.cfi_startproc
 8259              		@ args = 0, pretend = 0, frame = 0
 8260              		@ frame_needed = 1, uses_anonymous_args = 0
 8261 0000 80B5     		push	{r7, lr}
 8262              	.LCFI444:
 8263              		.cfi_def_cfa_offset 8
 8264              		.cfi_offset 7, -8
 8265              		.cfi_offset 14, -4
 8266 0002 00AF     		add	r7, sp, #0
 8267              	.LCFI445:
 8268              		.cfi_def_cfa_register 7
3611:Middlewares/Decawave/decadriver/deca_device.c ****     return dwt_read8bitoffsetreg(TX_CAL_ID, TC_SARL_SAR_LVBAT_OFFSET);
 8269              		.loc 1 3611 12
 8270 0004 0321     		movs	r1, #3
 8271 0006 2A20     		movs	r0, #42
 8272 0008 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 8273 000c 0346     		mov	r3, r0
3612:Middlewares/Decawave/decadriver/deca_device.c **** }
 8274              		.loc 1 3612 1
 8275 000e 1846     		mov	r0, r3
 8276 0010 80BD     		pop	{r7, pc}
 8277              		.cfi_endproc
 8278              	.LFE99:
 8280              		.section	.text.dwt_calcbandwidthtempadj,"ax",%progbits
 8281              		.align	1
 8282              		.global	dwt_calcbandwidthtempadj
 8283              		.syntax unified
 8284              		.thumb
 8285              		.thumb_func
 8286              		.fpu fpv4-sp-d16
 8288              	dwt_calcbandwidthtempadj:
 8289              	.LFB100:
3613:Middlewares/Decawave/decadriver/deca_device.c **** 
3614:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3615:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_calcbandwidthtempadj()
3616:Middlewares/Decawave/decadriver/deca_device.c ****  *
3617:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function determines the corrected bandwidth setting (PG_DELAY register setting)
3618:Middlewares/Decawave/decadriver/deca_device.c ****  * of the DW1000 which changes over temperature.
3619:Middlewares/Decawave/decadriver/deca_device.c ****  *
ARM GAS  /tmp/cc0TY0Fa.s 			page 207


3620:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE 1: SPI Frequency must be < 3MHz.
3621:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE 2: The sleep to allow the calibration to complete is set to 1ms here, but can be as low as 
3622:Middlewares/Decawave/decadriver/deca_device.c ****  *
3623:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3624:Middlewares/Decawave/decadriver/deca_device.c ****  * @param target_count - uint16 - the PG count target to reach in order to correct the bandwidth
3625:Middlewares/Decawave/decadriver/deca_device.c ****  *
3626:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters:
3627:Middlewares/Decawave/decadriver/deca_device.c ****  *
3628:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: (uint32) The setting to be programmed into the PG_DELAY value
3629:Middlewares/Decawave/decadriver/deca_device.c ****  */
3630:Middlewares/Decawave/decadriver/deca_device.c **** uint32 dwt_calcbandwidthtempadj(uint16 target_count)
3631:Middlewares/Decawave/decadriver/deca_device.c **** {
 8290              		.loc 1 3631 1
 8291              		.cfi_startproc
 8292              		@ args = 0, pretend = 0, frame = 40
 8293              		@ frame_needed = 1, uses_anonymous_args = 0
 8294 0000 80B5     		push	{r7, lr}
 8295              	.LCFI446:
 8296              		.cfi_def_cfa_offset 8
 8297              		.cfi_offset 7, -8
 8298              		.cfi_offset 14, -4
 8299 0002 8AB0     		sub	sp, sp, #40
 8300              	.LCFI447:
 8301              		.cfi_def_cfa_offset 48
 8302 0004 00AF     		add	r7, sp, #0
 8303              	.LCFI448:
 8304              		.cfi_def_cfa_register 7
 8305 0006 0346     		mov	r3, r0
 8306 0008 FB80     		strh	r3, [r7, #6]	@ movhi
3632:Middlewares/Decawave/decadriver/deca_device.c ****     int i;
3633:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 bit_field, curr_bw;
3634:Middlewares/Decawave/decadriver/deca_device.c ****     int32 delta_count = 0;
 8307              		.loc 1 3634 11
 8308 000a 0023     		movs	r3, #0
 8309 000c 7B61     		str	r3, [r7, #20]
3635:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 best_bw = 0;
 8310              		.loc 1 3635 12
 8311 000e 0023     		movs	r3, #0
 8312 0010 FB61     		str	r3, [r7, #28]
3636:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 raw_count = 0;
 8313              		.loc 1 3636 12
 8314 0012 0023     		movs	r3, #0
 8315 0014 7B82     		strh	r3, [r7, #18]	@ movhi
3637:Middlewares/Decawave/decadriver/deca_device.c ****     int32 delta_lowest;
3638:Middlewares/Decawave/decadriver/deca_device.c **** 
3639:Middlewares/Decawave/decadriver/deca_device.c ****     // Used to store the current values of the registers so that they can be restored after
3640:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 old_pmsc_ctrl0;
3641:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 old_pmsc_ctrl1;
3642:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 old_rf_conf_txpow_mask;
3643:Middlewares/Decawave/decadriver/deca_device.c **** 
3644:Middlewares/Decawave/decadriver/deca_device.c ****     // Record the current values of these registers, to restore later
3645:Middlewares/Decawave/decadriver/deca_device.c ****     old_pmsc_ctrl0 = dwt_read8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 8316              		.loc 1 3645 22
 8317 0016 0021     		movs	r1, #0
 8318 0018 3620     		movs	r0, #54
 8319 001a FFF7FEFF 		bl	dwt_read8bitoffsetreg
 8320 001e 0346     		mov	r3, r0
ARM GAS  /tmp/cc0TY0Fa.s 			page 208


 8321 0020 7B74     		strb	r3, [r7, #17]
3646:Middlewares/Decawave/decadriver/deca_device.c ****     old_pmsc_ctrl1 = dwt_read16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET);
 8322              		.loc 1 3646 22
 8323 0022 0421     		movs	r1, #4
 8324 0024 3620     		movs	r0, #54
 8325 0026 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 8326 002a 0346     		mov	r3, r0
 8327 002c FB81     		strh	r3, [r7, #14]	@ movhi
3647:Middlewares/Decawave/decadriver/deca_device.c ****     old_rf_conf_txpow_mask = dwt_read32bitreg(RF_CONF_ID);
 8328              		.loc 1 3647 30
 8329 002e 0021     		movs	r1, #0
 8330 0030 2820     		movs	r0, #40
 8331 0032 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 8332 0036 B860     		str	r0, [r7, #8]
3648:Middlewares/Decawave/decadriver/deca_device.c **** 
3649:Middlewares/Decawave/decadriver/deca_device.c ****     //  Set clock to XTAL
3650:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, PMSC_CTRL0_SYSCLKS_19M);
 8333              		.loc 1 3650 5
 8334 0038 0122     		movs	r2, #1
 8335 003a 0021     		movs	r1, #0
 8336 003c 3620     		movs	r0, #54
 8337 003e FFF7FEFF 		bl	dwt_write8bitoffsetreg
3651:Middlewares/Decawave/decadriver/deca_device.c **** 
3652:Middlewares/Decawave/decadriver/deca_device.c ****     //  Disable sequencing
3653:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, PMSC_CTRL1_PKTSEQ_DISABLE);
 8338              		.loc 1 3653 5
 8339 0042 0022     		movs	r2, #0
 8340 0044 0421     		movs	r1, #4
 8341 0046 3620     		movs	r0, #54
 8342 0048 FFF7FEFF 		bl	dwt_write16bitoffsetreg
3654:Middlewares/Decawave/decadriver/deca_device.c **** 
3655:Middlewares/Decawave/decadriver/deca_device.c ****     //  Turn on CLK PLL, Mix Bias and PG
3656:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXPOW_MASK | RF_CONF_PGMIXBIASEN_MASK);
 8343              		.loc 1 3656 5
 8344 004c 3F4A     		ldr	r2, .L357
 8345 004e 0021     		movs	r1, #0
 8346 0050 2820     		movs	r0, #40
 8347 0052 FFF7FEFF 		bl	dwt_write32bitoffsetreg
3657:Middlewares/Decawave/decadriver/deca_device.c **** 
3658:Middlewares/Decawave/decadriver/deca_device.c ****     //  Set sys and TX clock to PLL
3659:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, PMSC_CTRL0_SYSCLKS_125M | PMSC_CTRL0_TXCLKS_
 8348              		.loc 1 3659 5
 8349 0056 2222     		movs	r2, #34
 8350 0058 0021     		movs	r1, #0
 8351 005a 3620     		movs	r0, #54
 8352 005c FFF7FEFF 		bl	dwt_write8bitoffsetreg
3660:Middlewares/Decawave/decadriver/deca_device.c **** 
3661:Middlewares/Decawave/decadriver/deca_device.c ****     // Set the MSB high for first guess
3662:Middlewares/Decawave/decadriver/deca_device.c ****     curr_bw = 0x80;
 8353              		.loc 1 3662 13
 8354 0060 8023     		movs	r3, #128
 8355 0062 87F82230 		strb	r3, [r7, #34]
3663:Middlewares/Decawave/decadriver/deca_device.c ****     // Set starting bit
3664:Middlewares/Decawave/decadriver/deca_device.c ****     bit_field = 0x80;
 8356              		.loc 1 3664 15
 8357 0066 8023     		movs	r3, #128
 8358 0068 87F82330 		strb	r3, [r7, #35]
ARM GAS  /tmp/cc0TY0Fa.s 			page 209


3665:Middlewares/Decawave/decadriver/deca_device.c ****     // Initial lowest delta is the maximum difference that we should allow the count value to be fr
3666:Middlewares/Decawave/decadriver/deca_device.c ****     // If the algorithm is successful, it will be overwritten by a smaller value where the count va
3667:Middlewares/Decawave/decadriver/deca_device.c ****     // to the target
3668:Middlewares/Decawave/decadriver/deca_device.c ****     delta_lowest = 300;
 8359              		.loc 1 3668 18
 8360 006c 4FF49673 		mov	r3, #300
 8361 0070 BB61     		str	r3, [r7, #24]
3669:Middlewares/Decawave/decadriver/deca_device.c **** 
3670:Middlewares/Decawave/decadriver/deca_device.c ****     for (i = 0; i < 7; i++)
 8362              		.loc 1 3670 12
 8363 0072 0023     		movs	r3, #0
 8364 0074 7B62     		str	r3, [r7, #36]
 8365              		.loc 1 3670 5
 8366 0076 50E0     		b	.L351
 8367              	.L355:
3671:Middlewares/Decawave/decadriver/deca_device.c ****     {
3672:Middlewares/Decawave/decadriver/deca_device.c ****         // start with 0xc0 and test.
3673:Middlewares/Decawave/decadriver/deca_device.c ****         bit_field = bit_field >> 1;
 8368              		.loc 1 3673 19
 8369 0078 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 8370 007c 5B08     		lsrs	r3, r3, #1
 8371 007e 87F82330 		strb	r3, [r7, #35]
3674:Middlewares/Decawave/decadriver/deca_device.c ****         curr_bw = curr_bw | bit_field;
 8372              		.loc 1 3674 17
 8373 0082 97F82220 		ldrb	r2, [r7, #34]
 8374 0086 97F82330 		ldrb	r3, [r7, #35]
 8375 008a 1343     		orrs	r3, r3, r2
 8376 008c 87F82230 		strb	r3, [r7, #34]
3675:Middlewares/Decawave/decadriver/deca_device.c **** 
3676:Middlewares/Decawave/decadriver/deca_device.c ****         // Write bw setting to PG_DELAY register
3677:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGDELAY_OFFSET, curr_bw);
 8377              		.loc 1 3677 9
 8378 0090 97F82230 		ldrb	r3, [r7, #34]	@ zero_extendqisi2
 8379 0094 1A46     		mov	r2, r3
 8380 0096 0B21     		movs	r1, #11
 8381 0098 2A20     		movs	r0, #42
 8382 009a FFF7FEFF 		bl	dwt_write8bitoffsetreg
3678:Middlewares/Decawave/decadriver/deca_device.c **** 
3679:Middlewares/Decawave/decadriver/deca_device.c ****         // Set cal direction and time
3680:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGCCTRL_OFFSET, TC_PGCCTRL_DIR_CONV | TC_PGCCTRL_TMEAS
 8383              		.loc 1 3680 9
 8384 009e BC22     		movs	r2, #188
 8385 00a0 0821     		movs	r1, #8
 8386 00a2 2A20     		movs	r0, #42
 8387 00a4 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3681:Middlewares/Decawave/decadriver/deca_device.c **** 
3682:Middlewares/Decawave/decadriver/deca_device.c ****         // Start cal
3683:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGCCTRL_OFFSET, TC_PGCCTRL_DIR_CONV | TC_PGCCTRL_TMEAS
 8388              		.loc 1 3683 9
 8389 00a8 BD22     		movs	r2, #189
 8390 00aa 0821     		movs	r1, #8
 8391 00ac 2A20     		movs	r0, #42
 8392 00ae FFF7FEFF 		bl	dwt_write8bitoffsetreg
3684:Middlewares/Decawave/decadriver/deca_device.c ****         // Allow cal to complete
3685:Middlewares/Decawave/decadriver/deca_device.c ****         deca_sleep(1);
 8393              		.loc 1 3685 9
 8394 00b2 0120     		movs	r0, #1
ARM GAS  /tmp/cc0TY0Fa.s 			page 210


 8395 00b4 FFF7FEFF 		bl	deca_sleep
3686:Middlewares/Decawave/decadriver/deca_device.c **** 
3687:Middlewares/Decawave/decadriver/deca_device.c ****         // Read count value from the PG cal block
3688:Middlewares/Decawave/decadriver/deca_device.c ****         raw_count = dwt_read16bitoffsetreg(TX_CAL_ID, TC_PGCAL_STATUS_OFFSET) & TC_PGCAL_STATUS_DEL
 8396              		.loc 1 3688 21
 8397 00b8 0921     		movs	r1, #9
 8398 00ba 2A20     		movs	r0, #42
 8399 00bc FFF7FEFF 		bl	dwt_read16bitoffsetreg
 8400 00c0 0346     		mov	r3, r0
 8401              		.loc 1 3688 19
 8402 00c2 C3F30B03 		ubfx	r3, r3, #0, #12
 8403 00c6 7B82     		strh	r3, [r7, #18]	@ movhi
3689:Middlewares/Decawave/decadriver/deca_device.c **** 
3690:Middlewares/Decawave/decadriver/deca_device.c ****         // lets keep track of the closest value to the target in case we overshoot
3691:Middlewares/Decawave/decadriver/deca_device.c ****         delta_count = abs((int)raw_count - (int)target_count);
 8404              		.loc 1 3691 27
 8405 00c8 7A8A     		ldrh	r2, [r7, #18]
 8406              		.loc 1 3691 44
 8407 00ca FB88     		ldrh	r3, [r7, #6]
 8408              		.loc 1 3691 42
 8409 00cc D31A     		subs	r3, r2, r3
 8410              		.loc 1 3691 21
 8411 00ce 002B     		cmp	r3, #0
 8412 00d0 B8BF     		it	lt
 8413 00d2 5B42     		rsblt	r3, r3, #0
 8414 00d4 7B61     		str	r3, [r7, #20]
3692:Middlewares/Decawave/decadriver/deca_device.c ****         if (delta_count < delta_lowest)
 8415              		.loc 1 3692 12
 8416 00d6 7A69     		ldr	r2, [r7, #20]
 8417 00d8 BB69     		ldr	r3, [r7, #24]
 8418 00da 9A42     		cmp	r2, r3
 8419 00dc 04DA     		bge	.L352
3693:Middlewares/Decawave/decadriver/deca_device.c ****         {
3694:Middlewares/Decawave/decadriver/deca_device.c ****             delta_lowest = delta_count;
 8420              		.loc 1 3694 26
 8421 00de 7B69     		ldr	r3, [r7, #20]
 8422 00e0 BB61     		str	r3, [r7, #24]
3695:Middlewares/Decawave/decadriver/deca_device.c ****             best_bw = curr_bw;
 8423              		.loc 1 3695 21
 8424 00e2 97F82230 		ldrb	r3, [r7, #34]	@ zero_extendqisi2
 8425 00e6 FB61     		str	r3, [r7, #28]
 8426              	.L352:
3696:Middlewares/Decawave/decadriver/deca_device.c ****         }
3697:Middlewares/Decawave/decadriver/deca_device.c **** 
3698:Middlewares/Decawave/decadriver/deca_device.c ****         // Test the count results
3699:Middlewares/Decawave/decadriver/deca_device.c ****         if (raw_count > target_count)
 8427              		.loc 1 3699 12
 8428 00e8 7A8A     		ldrh	r2, [r7, #18]
 8429 00ea FB88     		ldrh	r3, [r7, #6]
 8430 00ec 9A42     		cmp	r2, r3
 8431 00ee 07D9     		bls	.L353
3700:Middlewares/Decawave/decadriver/deca_device.c ****             // Count was lower, BW was lower so increase PG DELAY
3701:Middlewares/Decawave/decadriver/deca_device.c ****             curr_bw = curr_bw | bit_field;
 8432              		.loc 1 3701 21
 8433 00f0 97F82220 		ldrb	r2, [r7, #34]
 8434 00f4 97F82330 		ldrb	r3, [r7, #35]
 8435 00f8 1343     		orrs	r3, r3, r2
ARM GAS  /tmp/cc0TY0Fa.s 			page 211


 8436 00fa 87F82230 		strb	r3, [r7, #34]
 8437 00fe 09E0     		b	.L354
 8438              	.L353:
3702:Middlewares/Decawave/decadriver/deca_device.c ****         else
3703:Middlewares/Decawave/decadriver/deca_device.c ****             // Count was higher
3704:Middlewares/Decawave/decadriver/deca_device.c ****             curr_bw = curr_bw & (~(bit_field));
 8439              		.loc 1 3704 31
 8440 0100 97F92330 		ldrsb	r3, [r7, #35]
 8441 0104 DB43     		mvns	r3, r3
 8442 0106 5AB2     		sxtb	r2, r3
 8443 0108 97F92230 		ldrsb	r3, [r7, #34]
 8444 010c 1340     		ands	r3, r3, r2
 8445 010e 5BB2     		sxtb	r3, r3
 8446              		.loc 1 3704 21
 8447 0110 87F82230 		strb	r3, [r7, #34]
 8448              	.L354:
3670:Middlewares/Decawave/decadriver/deca_device.c ****     {
 8449              		.loc 1 3670 25 discriminator 2
 8450 0114 7B6A     		ldr	r3, [r7, #36]
 8451 0116 0133     		adds	r3, r3, #1
 8452 0118 7B62     		str	r3, [r7, #36]
 8453              	.L351:
3670:Middlewares/Decawave/decadriver/deca_device.c ****     {
 8454              		.loc 1 3670 5 discriminator 1
 8455 011a 7B6A     		ldr	r3, [r7, #36]
 8456 011c 062B     		cmp	r3, #6
 8457 011e ABDD     		ble	.L355
3705:Middlewares/Decawave/decadriver/deca_device.c ****     }
3706:Middlewares/Decawave/decadriver/deca_device.c **** 
3707:Middlewares/Decawave/decadriver/deca_device.c ****     // Restore old register values
3708:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, old_pmsc_ctrl0);
 8458              		.loc 1 3708 5
 8459 0120 7B7C     		ldrb	r3, [r7, #17]	@ zero_extendqisi2
 8460 0122 1A46     		mov	r2, r3
 8461 0124 0021     		movs	r1, #0
 8462 0126 3620     		movs	r0, #54
 8463 0128 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3709:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, old_pmsc_ctrl1);
 8464              		.loc 1 3709 5
 8465 012c FB89     		ldrh	r3, [r7, #14]
 8466 012e 1A46     		mov	r2, r3
 8467 0130 0421     		movs	r1, #4
 8468 0132 3620     		movs	r0, #54
 8469 0134 FFF7FEFF 		bl	dwt_write16bitoffsetreg
3710:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, old_rf_conf_txpow_mask);
 8470              		.loc 1 3710 5
 8471 0138 BA68     		ldr	r2, [r7, #8]
 8472 013a 0021     		movs	r1, #0
 8473 013c 2820     		movs	r0, #40
 8474 013e FFF7FEFF 		bl	dwt_write32bitoffsetreg
3711:Middlewares/Decawave/decadriver/deca_device.c **** 
3712:Middlewares/Decawave/decadriver/deca_device.c ****     // Returns the best PG_DELAY setting
3713:Middlewares/Decawave/decadriver/deca_device.c ****     return best_bw;
 8475              		.loc 1 3713 12
 8476 0142 FB69     		ldr	r3, [r7, #28]
3714:Middlewares/Decawave/decadriver/deca_device.c **** }
 8477              		.loc 1 3714 1
ARM GAS  /tmp/cc0TY0Fa.s 			page 212


 8478 0144 1846     		mov	r0, r3
 8479 0146 2837     		adds	r7, r7, #40
 8480              	.LCFI449:
 8481              		.cfi_def_cfa_offset 8
 8482 0148 BD46     		mov	sp, r7
 8483              	.LCFI450:
 8484              		.cfi_def_cfa_register 13
 8485              		@ sp needed
 8486 014a 80BD     		pop	{r7, pc}
 8487              	.L358:
 8488              		.align	2
 8489              	.L357:
 8490 014c 00A71F00 		.word	2074368
 8491              		.cfi_endproc
 8492              	.LFE100:
 8494              		.section	.text._dwt_computetxpowersetting,"ax",%progbits
 8495              		.align	1
 8496              		.global	_dwt_computetxpowersetting
 8497              		.syntax unified
 8498              		.thumb
 8499              		.thumb_func
 8500              		.fpu fpv4-sp-d16
 8502              	_dwt_computetxpowersetting:
 8503              	.LFB101:
3715:Middlewares/Decawave/decadriver/deca_device.c **** 
3716:Middlewares/Decawave/decadriver/deca_device.c **** 
3717:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3718:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn _dwt_computetxpowersetting()
3719:Middlewares/Decawave/decadriver/deca_device.c ****  *
3720:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function calculates the appropriate change to the TX_POWER register to compensate
3721:Middlewares/Decawave/decadriver/deca_device.c ****  * the TX power output at different temperatures.
3722:Middlewares/Decawave/decadriver/deca_device.c ****  *
3723:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3724:Middlewares/Decawave/decadriver/deca_device.c ****  * @param ref_powerreg - uint32 - the TX_POWER register value recorded when reference measurements 
3725:Middlewares/Decawave/decadriver/deca_device.c ****  * @param power_adj - uint32 - the adjustment in power level to be made, in 0.5dB steps
3726:Middlewares/Decawave/decadriver/deca_device.c ****  *
3727:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters:
3728:Middlewares/Decawave/decadriver/deca_device.c ****  *
3729:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: (uint32) The setting to be programmed into the TX_POWER register
3730:Middlewares/Decawave/decadriver/deca_device.c ****  */
3731:Middlewares/Decawave/decadriver/deca_device.c **** uint32 _dwt_computetxpowersetting(uint32 ref_powerreg, int32 power_adj)
3732:Middlewares/Decawave/decadriver/deca_device.c **** {
 8504              		.loc 1 3732 1
 8505              		.cfi_startproc
 8506              		@ args = 0, pretend = 0, frame = 24
 8507              		@ frame_needed = 1, uses_anonymous_args = 0
 8508              		@ link register save eliminated.
 8509 0000 80B4     		push	{r7}
 8510              	.LCFI451:
 8511              		.cfi_def_cfa_offset 4
 8512              		.cfi_offset 7, -4
 8513 0002 87B0     		sub	sp, sp, #28
 8514              	.LCFI452:
 8515              		.cfi_def_cfa_offset 32
 8516 0004 00AF     		add	r7, sp, #0
 8517              	.LCFI453:
 8518              		.cfi_def_cfa_register 7
ARM GAS  /tmp/cc0TY0Fa.s 			page 213


 8519 0006 7860     		str	r0, [r7, #4]
 8520 0008 3960     		str	r1, [r7]
3733:Middlewares/Decawave/decadriver/deca_device.c ****     int8 da_attn_change, mixer_gain_change;
3734:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 current_da_attn, current_mixer_gain;
3735:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 new_da_attn, new_mixer_gain;
3736:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 new_regval = 0;
 8521              		.loc 1 3736 12
 8522 000a 0023     		movs	r3, #0
 8523 000c 3B61     		str	r3, [r7, #16]
3737:Middlewares/Decawave/decadriver/deca_device.c ****     int i;
3738:Middlewares/Decawave/decadriver/deca_device.c **** 
3739:Middlewares/Decawave/decadriver/deca_device.c ****     for(i = 0; i < 4; i++)
 8524              		.loc 1 3739 11
 8525 000e 0023     		movs	r3, #0
 8526 0010 FB60     		str	r3, [r7, #12]
 8527              		.loc 1 3739 5
 8528 0012 6BE0     		b	.L360
 8529              	.L367:
3740:Middlewares/Decawave/decadriver/deca_device.c ****     {
3741:Middlewares/Decawave/decadriver/deca_device.c ****         da_attn_change = 0;
 8530              		.loc 1 3741 24
 8531 0014 0023     		movs	r3, #0
 8532 0016 FB75     		strb	r3, [r7, #23]
3742:Middlewares/Decawave/decadriver/deca_device.c ****         mixer_gain_change = power_adj;
 8533              		.loc 1 3742 27
 8534 0018 3B68     		ldr	r3, [r7]
 8535 001a BB75     		strb	r3, [r7, #22]
3743:Middlewares/Decawave/decadriver/deca_device.c ****         current_da_attn = ((ref_powerreg >> (i*8)) & 0xE0) >> 5;
 8536              		.loc 1 3743 47
 8537 001c FB68     		ldr	r3, [r7, #12]
 8538 001e DB00     		lsls	r3, r3, #3
 8539              		.loc 1 3743 42
 8540 0020 7A68     		ldr	r2, [r7, #4]
 8541 0022 22FA03F3 		lsr	r3, r2, r3
 8542              		.loc 1 3743 60
 8543 0026 5B09     		lsrs	r3, r3, #5
 8544 0028 DBB2     		uxtb	r3, r3
 8545              		.loc 1 3743 25
 8546 002a 03F00703 		and	r3, r3, #7
 8547 002e FB72     		strb	r3, [r7, #11]
3744:Middlewares/Decawave/decadriver/deca_device.c ****         current_mixer_gain = (ref_powerreg >> (i*8)) & 0x1F;
 8548              		.loc 1 3744 49
 8549 0030 FB68     		ldr	r3, [r7, #12]
 8550 0032 DB00     		lsls	r3, r3, #3
 8551              		.loc 1 3744 44
 8552 0034 7A68     		ldr	r2, [r7, #4]
 8553 0036 22FA03F3 		lsr	r3, r2, r3
 8554              		.loc 1 3744 54
 8555 003a DBB2     		uxtb	r3, r3
 8556              		.loc 1 3744 28
 8557 003c 03F01F03 		and	r3, r3, #31
 8558 0040 BB72     		strb	r3, [r7, #10]
3745:Middlewares/Decawave/decadriver/deca_device.c **** 
3746:Middlewares/Decawave/decadriver/deca_device.c ****         // Mixer gain gives best performance between gain value of 4 and 20
3747:Middlewares/Decawave/decadriver/deca_device.c ****         while((current_mixer_gain + mixer_gain_change < 4) ||
 8559              		.loc 1 3747 14
 8560 0042 2AE0     		b	.L361
ARM GAS  /tmp/cc0TY0Fa.s 			page 214


 8561              	.L366:
3748:Middlewares/Decawave/decadriver/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
3749:Middlewares/Decawave/decadriver/deca_device.c ****         {
3750:Middlewares/Decawave/decadriver/deca_device.c ****             // If mixer gain goes outside bounds, adjust the DA attenuation to compensate
3751:Middlewares/Decawave/decadriver/deca_device.c ****             if(current_mixer_gain + mixer_gain_change > 20)
 8562              		.loc 1 3751 35
 8563 0044 BA7A     		ldrb	r2, [r7, #10]	@ zero_extendqisi2
 8564 0046 97F91630 		ldrsb	r3, [r7, #22]
 8565 004a 1344     		add	r3, r3, r2
 8566              		.loc 1 3751 15
 8567 004c 142B     		cmp	r3, #20
 8568 004e 0FDD     		ble	.L362
3752:Middlewares/Decawave/decadriver/deca_device.c ****             {
3753:Middlewares/Decawave/decadriver/deca_device.c ****                 da_attn_change -= 1;
 8569              		.loc 1 3753 32
 8570 0050 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 8571 0052 013B     		subs	r3, r3, #1
 8572 0054 DBB2     		uxtb	r3, r3
 8573 0056 FB75     		strb	r3, [r7, #23]
3754:Middlewares/Decawave/decadriver/deca_device.c **** 
3755:Middlewares/Decawave/decadriver/deca_device.c ****                 if(da_attn_change == 0) //DA attenuation has reached the max value
 8574              		.loc 1 3755 19
 8575 0058 97F91730 		ldrsb	r3, [r7, #23]
 8576 005c 002B     		cmp	r3, #0
 8577 005e 02D1     		bne	.L363
3756:Middlewares/Decawave/decadriver/deca_device.c ****                 {
3757:Middlewares/Decawave/decadriver/deca_device.c ****                     da_attn_change = 1; //restore the value and exit the loop - DA is at max allowe
 8578              		.loc 1 3757 36
 8579 0060 0123     		movs	r3, #1
 8580 0062 FB75     		strb	r3, [r7, #23]
3758:Middlewares/Decawave/decadriver/deca_device.c ****                     break;
 8581              		.loc 1 3758 21
 8582 0064 25E0     		b	.L364
 8583              	.L363:
3759:Middlewares/Decawave/decadriver/deca_device.c ****                 }
3760:Middlewares/Decawave/decadriver/deca_device.c **** 
3761:Middlewares/Decawave/decadriver/deca_device.c ****                 mixer_gain_change -= (int8) (MIX_DA_FACTOR);
 8584              		.loc 1 3761 35
 8585 0066 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 8586 0068 053B     		subs	r3, r3, #5
 8587 006a DBB2     		uxtb	r3, r3
 8588 006c BB75     		strb	r3, [r7, #22]
 8589 006e 14E0     		b	.L361
 8590              	.L362:
3762:Middlewares/Decawave/decadriver/deca_device.c ****             }
3763:Middlewares/Decawave/decadriver/deca_device.c ****             else if(current_mixer_gain + mixer_gain_change < 4)
 8591              		.loc 1 3763 40
 8592 0070 BA7A     		ldrb	r2, [r7, #10]	@ zero_extendqisi2
 8593 0072 97F91630 		ldrsb	r3, [r7, #22]
 8594 0076 1344     		add	r3, r3, r2
 8595              		.loc 1 3763 20
 8596 0078 032B     		cmp	r3, #3
 8597 007a 0EDC     		bgt	.L361
3764:Middlewares/Decawave/decadriver/deca_device.c ****             {
3765:Middlewares/Decawave/decadriver/deca_device.c ****                 da_attn_change += 1;
 8598              		.loc 1 3765 32
 8599 007c FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
ARM GAS  /tmp/cc0TY0Fa.s 			page 215


 8600 007e 0133     		adds	r3, r3, #1
 8601 0080 DBB2     		uxtb	r3, r3
 8602 0082 FB75     		strb	r3, [r7, #23]
3766:Middlewares/Decawave/decadriver/deca_device.c **** 
3767:Middlewares/Decawave/decadriver/deca_device.c ****                 if(da_attn_change == 0x8) //DA attenuation has reached the min value
 8603              		.loc 1 3767 19
 8604 0084 97F91730 		ldrsb	r3, [r7, #23]
 8605 0088 082B     		cmp	r3, #8
 8606 008a 02D1     		bne	.L365
3768:Middlewares/Decawave/decadriver/deca_device.c ****                 {
3769:Middlewares/Decawave/decadriver/deca_device.c ****                     da_attn_change = 7; //restore the value and exit the loop - DA is at min allowe
 8607              		.loc 1 3769 36
 8608 008c 0723     		movs	r3, #7
 8609 008e FB75     		strb	r3, [r7, #23]
3770:Middlewares/Decawave/decadriver/deca_device.c ****                     break;
 8610              		.loc 1 3770 21
 8611 0090 0FE0     		b	.L364
 8612              	.L365:
3771:Middlewares/Decawave/decadriver/deca_device.c ****                 }
3772:Middlewares/Decawave/decadriver/deca_device.c **** 
3773:Middlewares/Decawave/decadriver/deca_device.c ****                 mixer_gain_change += (int8) (MIX_DA_FACTOR);
 8613              		.loc 1 3773 35
 8614 0092 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 8615 0094 0533     		adds	r3, r3, #5
 8616 0096 DBB2     		uxtb	r3, r3
 8617 0098 BB75     		strb	r3, [r7, #22]
 8618              	.L361:
3747:Middlewares/Decawave/decadriver/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 8619              		.loc 1 3747 35
 8620 009a BA7A     		ldrb	r2, [r7, #10]	@ zero_extendqisi2
 8621 009c 97F91630 		ldrsb	r3, [r7, #22]
 8622 00a0 1344     		add	r3, r3, r2
3747:Middlewares/Decawave/decadriver/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 8623              		.loc 1 3747 14
 8624 00a2 032B     		cmp	r3, #3
 8625 00a4 CEDD     		ble	.L366
3748:Middlewares/Decawave/decadriver/deca_device.c ****         {
 8626              		.loc 1 3748 35 discriminator 1
 8627 00a6 BA7A     		ldrb	r2, [r7, #10]	@ zero_extendqisi2
 8628 00a8 97F91630 		ldrsb	r3, [r7, #22]
 8629 00ac 1344     		add	r3, r3, r2
3747:Middlewares/Decawave/decadriver/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 8630              		.loc 1 3747 60 discriminator 1
 8631 00ae 142B     		cmp	r3, #20
 8632 00b0 C8DC     		bgt	.L366
 8633              	.L364:
3774:Middlewares/Decawave/decadriver/deca_device.c ****             }
3775:Middlewares/Decawave/decadriver/deca_device.c ****         }
3776:Middlewares/Decawave/decadriver/deca_device.c **** 
3777:Middlewares/Decawave/decadriver/deca_device.c ****         new_da_attn = (current_da_attn + da_attn_change) & 0x7;
 8634              		.loc 1 3777 58 discriminator 2
 8635 00b2 FA7D     		ldrb	r2, [r7, #23]	@ zero_extendqisi2
 8636              		.loc 1 3777 40 discriminator 2
 8637 00b4 FB7A     		ldrb	r3, [r7, #11]
 8638 00b6 1344     		add	r3, r3, r2
 8639 00b8 DBB2     		uxtb	r3, r3
 8640              		.loc 1 3777 21 discriminator 2
ARM GAS  /tmp/cc0TY0Fa.s 			page 216


 8641 00ba 03F00703 		and	r3, r3, #7
 8642 00be 7B72     		strb	r3, [r7, #9]
3778:Middlewares/Decawave/decadriver/deca_device.c ****         new_mixer_gain = (current_mixer_gain + mixer_gain_change) & 0x1F;
 8643              		.loc 1 3778 67 discriminator 2
 8644 00c0 BA7D     		ldrb	r2, [r7, #22]	@ zero_extendqisi2
 8645              		.loc 1 3778 46 discriminator 2
 8646 00c2 BB7A     		ldrb	r3, [r7, #10]
 8647 00c4 1344     		add	r3, r3, r2
 8648 00c6 DBB2     		uxtb	r3, r3
 8649              		.loc 1 3778 24 discriminator 2
 8650 00c8 03F01F03 		and	r3, r3, #31
 8651 00cc 3B72     		strb	r3, [r7, #8]
3779:Middlewares/Decawave/decadriver/deca_device.c **** 
3780:Middlewares/Decawave/decadriver/deca_device.c ****         new_regval |= ((uint32) ((new_da_attn << 5) | new_mixer_gain)) << (i * 8);
 8652              		.loc 1 3780 47 discriminator 2
 8653 00ce 7B7A     		ldrb	r3, [r7, #9]	@ zero_extendqisi2
 8654 00d0 5A01     		lsls	r2, r3, #5
 8655              		.loc 1 3780 53 discriminator 2
 8656 00d2 3B7A     		ldrb	r3, [r7, #8]	@ zero_extendqisi2
 8657 00d4 1343     		orrs	r3, r3, r2
 8658              		.loc 1 3780 24 discriminator 2
 8659 00d6 1A46     		mov	r2, r3
 8660              		.loc 1 3780 78 discriminator 2
 8661 00d8 FB68     		ldr	r3, [r7, #12]
 8662 00da DB00     		lsls	r3, r3, #3
 8663              		.loc 1 3780 72 discriminator 2
 8664 00dc 02FA03F3 		lsl	r3, r2, r3
 8665              		.loc 1 3780 20 discriminator 2
 8666 00e0 3A69     		ldr	r2, [r7, #16]
 8667 00e2 1343     		orrs	r3, r3, r2
 8668 00e4 3B61     		str	r3, [r7, #16]
3739:Middlewares/Decawave/decadriver/deca_device.c ****     {
 8669              		.loc 1 3739 24 discriminator 2
 8670 00e6 FB68     		ldr	r3, [r7, #12]
 8671 00e8 0133     		adds	r3, r3, #1
 8672 00ea FB60     		str	r3, [r7, #12]
 8673              	.L360:
3739:Middlewares/Decawave/decadriver/deca_device.c ****     {
 8674              		.loc 1 3739 5 discriminator 1
 8675 00ec FB68     		ldr	r3, [r7, #12]
 8676 00ee 032B     		cmp	r3, #3
 8677 00f0 90DD     		ble	.L367
3781:Middlewares/Decawave/decadriver/deca_device.c ****     }
3782:Middlewares/Decawave/decadriver/deca_device.c **** 
3783:Middlewares/Decawave/decadriver/deca_device.c ****     return (uint32)new_regval;
 8678              		.loc 1 3783 12
 8679 00f2 3B69     		ldr	r3, [r7, #16]
3784:Middlewares/Decawave/decadriver/deca_device.c **** }
 8680              		.loc 1 3784 1
 8681 00f4 1846     		mov	r0, r3
 8682 00f6 1C37     		adds	r7, r7, #28
 8683              	.LCFI454:
 8684              		.cfi_def_cfa_offset 4
 8685 00f8 BD46     		mov	sp, r7
 8686              	.LCFI455:
 8687              		.cfi_def_cfa_register 13
 8688              		@ sp needed
ARM GAS  /tmp/cc0TY0Fa.s 			page 217


 8689 00fa 5DF8047B 		ldr	r7, [sp], #4
 8690              	.LCFI456:
 8691              		.cfi_restore 7
 8692              		.cfi_def_cfa_offset 0
 8693 00fe 7047     		bx	lr
 8694              		.cfi_endproc
 8695              	.LFE101:
 8697              		.section	.text.dwt_calcpowertempadj,"ax",%progbits
 8698              		.align	1
 8699              		.global	dwt_calcpowertempadj
 8700              		.syntax unified
 8701              		.thumb
 8702              		.thumb_func
 8703              		.fpu fpv4-sp-d16
 8705              	dwt_calcpowertempadj:
 8706              	.LFB102:
3785:Middlewares/Decawave/decadriver/deca_device.c **** 
3786:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3787:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_calcpowertempadj()
3788:Middlewares/Decawave/decadriver/deca_device.c ****  *
3789:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function determines the corrected power setting (TX_POWER setting) for the
3790:Middlewares/Decawave/decadriver/deca_device.c ****  * DW1000 which changes over temperature.
3791:Middlewares/Decawave/decadriver/deca_device.c ****  *
3792:Middlewares/Decawave/decadriver/deca_device.c ****  * Note: only ch2 or ch5 are supported, if other channel is used - the COMP factor should be calcul
3793:Middlewares/Decawave/decadriver/deca_device.c ****  *
3794:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3795:Middlewares/Decawave/decadriver/deca_device.c ****  * @param channel - uint8 - the channel at which compensation of power level will be applied: 2 or 
3796:Middlewares/Decawave/decadriver/deca_device.c ****  * @param ref_powerreg - uint32 - the TX_POWER register value recorded when reference measurements 
3797:Middlewares/Decawave/decadriver/deca_device.c ****  * @param delta_temp - int - the difference between current ambient temperature (raw value units)
3798:Middlewares/Decawave/decadriver/deca_device.c ****  *                                  and the temperature at which reference measurements were made (
3799:Middlewares/Decawave/decadriver/deca_device.c **** 
3800:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters: None
3801:Middlewares/Decawave/decadriver/deca_device.c ****  *
3802:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: (uint32) The corrected TX_POWER register value
3803:Middlewares/Decawave/decadriver/deca_device.c ****  */
3804:Middlewares/Decawave/decadriver/deca_device.c ****  uint32 dwt_calcpowertempadj(uint8 channel, uint32 ref_powerreg, int delta_temp)
3805:Middlewares/Decawave/decadriver/deca_device.c **** {
 8707              		.loc 1 3805 1
 8708              		.cfi_startproc
 8709              		@ args = 0, pretend = 0, frame = 24
 8710              		@ frame_needed = 1, uses_anonymous_args = 0
 8711 0000 80B5     		push	{r7, lr}
 8712              	.LCFI457:
 8713              		.cfi_def_cfa_offset 8
 8714              		.cfi_offset 7, -8
 8715              		.cfi_offset 14, -4
 8716 0002 86B0     		sub	sp, sp, #24
 8717              	.LCFI458:
 8718              		.cfi_def_cfa_offset 32
 8719 0004 00AF     		add	r7, sp, #0
 8720              	.LCFI459:
 8721              		.cfi_def_cfa_register 7
 8722 0006 0346     		mov	r3, r0
 8723 0008 B960     		str	r1, [r7, #8]
 8724 000a 7A60     		str	r2, [r7, #4]
 8725 000c FB73     		strb	r3, [r7, #15]
3806:Middlewares/Decawave/decadriver/deca_device.c ****     int8 delta_power;
ARM GAS  /tmp/cc0TY0Fa.s 			page 218


3807:Middlewares/Decawave/decadriver/deca_device.c ****     int negative = 0;
 8726              		.loc 1 3807 9
 8727 000e 0023     		movs	r3, #0
 8728 0010 3B61     		str	r3, [r7, #16]
3808:Middlewares/Decawave/decadriver/deca_device.c **** 
3809:Middlewares/Decawave/decadriver/deca_device.c ****     if(delta_temp < 0)
 8729              		.loc 1 3809 7
 8730 0012 7B68     		ldr	r3, [r7, #4]
 8731 0014 002B     		cmp	r3, #0
 8732 0016 04DA     		bge	.L370
3810:Middlewares/Decawave/decadriver/deca_device.c ****     {
3811:Middlewares/Decawave/decadriver/deca_device.c ****         negative = 1;
 8733              		.loc 1 3811 18
 8734 0018 0123     		movs	r3, #1
 8735 001a 3B61     		str	r3, [r7, #16]
3812:Middlewares/Decawave/decadriver/deca_device.c ****         delta_temp = -delta_temp; //make (-)ve into (+)ve number
 8736              		.loc 1 3812 20
 8737 001c 7B68     		ldr	r3, [r7, #4]
 8738 001e 5B42     		rsbs	r3, r3, #0
 8739 0020 7B60     		str	r3, [r7, #4]
 8740              	.L370:
3813:Middlewares/Decawave/decadriver/deca_device.c ****     }
3814:Middlewares/Decawave/decadriver/deca_device.c **** 
3815:Middlewares/Decawave/decadriver/deca_device.c ****     // Calculate the expected power differential at the current temperature
3816:Middlewares/Decawave/decadriver/deca_device.c ****     if(channel == 5)
 8741              		.loc 1 3816 7
 8742 0022 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 8743 0024 052B     		cmp	r3, #5
 8744 0026 07D1     		bne	.L371
3817:Middlewares/Decawave/decadriver/deca_device.c ****     {
3818:Middlewares/Decawave/decadriver/deca_device.c ****         delta_power = ((delta_temp * TEMP_COMP_FACTOR_CH5) >> 12); //>>12 is same as /4096
 8745              		.loc 1 3818 36
 8746 0028 7B68     		ldr	r3, [r7, #4]
 8747 002a 40F25F22 		movw	r2, #607
 8748 002e 02FB03F3 		mul	r3, r2, r3
 8749              		.loc 1 3818 60
 8750 0032 1B13     		asrs	r3, r3, #12
 8751              		.loc 1 3818 21
 8752 0034 FB75     		strb	r3, [r7, #23]
 8753 0036 0CE0     		b	.L372
 8754              	.L371:
3819:Middlewares/Decawave/decadriver/deca_device.c ****     }
3820:Middlewares/Decawave/decadriver/deca_device.c ****     else if(channel == 2)
 8755              		.loc 1 3820 12
 8756 0038 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 8757 003a 022B     		cmp	r3, #2
 8758 003c 07D1     		bne	.L373
3821:Middlewares/Decawave/decadriver/deca_device.c ****     {
3822:Middlewares/Decawave/decadriver/deca_device.c ****         delta_power = ((delta_temp * TEMP_COMP_FACTOR_CH2) >> 12); //>>12 is same as /4096
 8759              		.loc 1 3822 36
 8760 003e 7B68     		ldr	r3, [r7, #4]
 8761 0040 40F24712 		movw	r2, #327
 8762 0044 02FB03F3 		mul	r3, r2, r3
 8763              		.loc 1 3822 60
 8764 0048 1B13     		asrs	r3, r3, #12
 8765              		.loc 1 3822 21
 8766 004a FB75     		strb	r3, [r7, #23]
ARM GAS  /tmp/cc0TY0Fa.s 			page 219


 8767 004c 01E0     		b	.L372
 8768              	.L373:
3823:Middlewares/Decawave/decadriver/deca_device.c ****     }
3824:Middlewares/Decawave/decadriver/deca_device.c ****     else
3825:Middlewares/Decawave/decadriver/deca_device.c ****         delta_power = 0;
 8769              		.loc 1 3825 21
 8770 004e 0023     		movs	r3, #0
 8771 0050 FB75     		strb	r3, [r7, #23]
 8772              	.L372:
3826:Middlewares/Decawave/decadriver/deca_device.c **** 
3827:Middlewares/Decawave/decadriver/deca_device.c ****     if(negative == 1)
 8773              		.loc 1 3827 7
 8774 0052 3B69     		ldr	r3, [r7, #16]
 8775 0054 012B     		cmp	r3, #1
 8776 0056 03D1     		bne	.L374
3828:Middlewares/Decawave/decadriver/deca_device.c ****     {
3829:Middlewares/Decawave/decadriver/deca_device.c ****         delta_power = -delta_power; //restore the sign
 8777              		.loc 1 3829 21
 8778 0058 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 8779 005a 5B42     		rsbs	r3, r3, #0
 8780 005c DBB2     		uxtb	r3, r3
 8781 005e FB75     		strb	r3, [r7, #23]
 8782              	.L374:
3830:Middlewares/Decawave/decadriver/deca_device.c ****     }
3831:Middlewares/Decawave/decadriver/deca_device.c **** 
3832:Middlewares/Decawave/decadriver/deca_device.c ****     if(delta_power == 0)
 8783              		.loc 1 3832 7
 8784 0060 97F91730 		ldrsb	r3, [r7, #23]
 8785 0064 002B     		cmp	r3, #0
 8786 0066 01D1     		bne	.L375
3833:Middlewares/Decawave/decadriver/deca_device.c ****         return ref_powerreg ; //no change to power register
 8787              		.loc 1 3833 16
 8788 0068 BB68     		ldr	r3, [r7, #8]
 8789 006a 06E0     		b	.L376
 8790              	.L375:
3834:Middlewares/Decawave/decadriver/deca_device.c **** 
3835:Middlewares/Decawave/decadriver/deca_device.c ****     // Adjust the TX_POWER register value
3836:Middlewares/Decawave/decadriver/deca_device.c ****     return _dwt_computetxpowersetting(ref_powerreg, delta_power);
 8791              		.loc 1 3836 12
 8792 006c 97F91730 		ldrsb	r3, [r7, #23]
 8793 0070 1946     		mov	r1, r3
 8794 0072 B868     		ldr	r0, [r7, #8]
 8795 0074 FFF7FEFF 		bl	_dwt_computetxpowersetting
 8796 0078 0346     		mov	r3, r0
 8797              	.L376:
3837:Middlewares/Decawave/decadriver/deca_device.c **** }
 8798              		.loc 1 3837 1
 8799 007a 1846     		mov	r0, r3
 8800 007c 1837     		adds	r7, r7, #24
 8801              	.LCFI460:
 8802              		.cfi_def_cfa_offset 8
 8803 007e BD46     		mov	sp, r7
 8804              	.LCFI461:
 8805              		.cfi_def_cfa_register 13
 8806              		@ sp needed
 8807 0080 80BD     		pop	{r7, pc}
 8808              		.cfi_endproc
ARM GAS  /tmp/cc0TY0Fa.s 			page 220


 8809              	.LFE102:
 8811              		.section	.text.dwt_calcpgcount,"ax",%progbits
 8812              		.align	1
 8813              		.global	dwt_calcpgcount
 8814              		.syntax unified
 8815              		.thumb
 8816              		.thumb_func
 8817              		.fpu fpv4-sp-d16
 8819              	dwt_calcpgcount:
 8820              	.LFB103:
3838:Middlewares/Decawave/decadriver/deca_device.c **** 
3839:Middlewares/Decawave/decadriver/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3840:Middlewares/Decawave/decadriver/deca_device.c ****  * @fn dwt_calcpgcount()
3841:Middlewares/Decawave/decadriver/deca_device.c ****  *
3842:Middlewares/Decawave/decadriver/deca_device.c ****  * @brief this function calculates the value in the pulse generator counter register (PGC_STATUS) f
3843:Middlewares/Decawave/decadriver/deca_device.c ****  * This is used to take a reference measurement, and the value recorded as the reference is used to
3844:Middlewares/Decawave/decadriver/deca_device.c ****  * bandwidth of the device when the temperature changes.
3845:Middlewares/Decawave/decadriver/deca_device.c ****  *
3846:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE 1: SPI Frequency must be < 3MHz.
3847:Middlewares/Decawave/decadriver/deca_device.c ****  * NOTE 2: The sleep to allow the calibration to complete is set to 1ms here, but can be as low as 
3848:Middlewares/Decawave/decadriver/deca_device.c ****  *
3849:Middlewares/Decawave/decadriver/deca_device.c ****  * input parameters:
3850:Middlewares/Decawave/decadriver/deca_device.c ****  * @param pgdly - uint8 - the PG_DELAY to set (to control bandwidth), and to find the corresponding
3851:Middlewares/Decawave/decadriver/deca_device.c ****  * output parameters: None
3852:Middlewares/Decawave/decadriver/deca_device.c ****  *
3853:Middlewares/Decawave/decadriver/deca_device.c ****  * returns: (uint16) PGC_STATUS count value calculated from the provided PG_DELAY value - used as r
3854:Middlewares/Decawave/decadriver/deca_device.c ****  * bandwidth adjustments
3855:Middlewares/Decawave/decadriver/deca_device.c ****  */
3856:Middlewares/Decawave/decadriver/deca_device.c **** uint16 dwt_calcpgcount(uint8 pgdly)
3857:Middlewares/Decawave/decadriver/deca_device.c **** {
 8821              		.loc 1 3857 1
 8822              		.cfi_startproc
 8823              		@ args = 0, pretend = 0, frame = 32
 8824              		@ frame_needed = 1, uses_anonymous_args = 0
 8825 0000 80B5     		push	{r7, lr}
 8826              	.LCFI462:
 8827              		.cfi_def_cfa_offset 8
 8828              		.cfi_offset 7, -8
 8829              		.cfi_offset 14, -4
 8830 0002 88B0     		sub	sp, sp, #32
 8831              	.LCFI463:
 8832              		.cfi_def_cfa_offset 40
 8833 0004 00AF     		add	r7, sp, #0
 8834              	.LCFI464:
 8835              		.cfi_def_cfa_register 7
 8836 0006 0346     		mov	r3, r0
 8837 0008 FB71     		strb	r3, [r7, #7]
3858:Middlewares/Decawave/decadriver/deca_device.c ****     // Perform PG count read ten times and take an average to smooth out any noise
3859:Middlewares/Decawave/decadriver/deca_device.c ****     const int NUM_SAMPLES = 10;
 8838              		.loc 1 3859 15
 8839 000a 0A23     		movs	r3, #10
 8840 000c 7B61     		str	r3, [r7, #20]
3860:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 sum_count = 0;
 8841              		.loc 1 3860 12
 8842 000e 0023     		movs	r3, #0
 8843 0010 FB61     		str	r3, [r7, #28]
3861:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 average_count = 0, count = 0;
ARM GAS  /tmp/cc0TY0Fa.s 			page 221


 8844              		.loc 1 3861 12
 8845 0012 0023     		movs	r3, #0
 8846 0014 7B82     		strh	r3, [r7, #18]	@ movhi
 8847              		.loc 1 3861 31
 8848 0016 0023     		movs	r3, #0
 8849 0018 3B82     		strh	r3, [r7, #16]	@ movhi
3862:Middlewares/Decawave/decadriver/deca_device.c ****     int i = 0;
 8850              		.loc 1 3862 9
 8851 001a 0023     		movs	r3, #0
 8852 001c BB61     		str	r3, [r7, #24]
3863:Middlewares/Decawave/decadriver/deca_device.c **** 
3864:Middlewares/Decawave/decadriver/deca_device.c ****     // Used to store the current values of the registers so that they can be restored after
3865:Middlewares/Decawave/decadriver/deca_device.c ****     uint8 old_pmsc_ctrl0;
3866:Middlewares/Decawave/decadriver/deca_device.c ****     uint16 old_pmsc_ctrl1;
3867:Middlewares/Decawave/decadriver/deca_device.c ****     uint32 old_rf_conf_txpow_mask;
3868:Middlewares/Decawave/decadriver/deca_device.c **** 
3869:Middlewares/Decawave/decadriver/deca_device.c ****     // Record the current values of these registers, to restore later
3870:Middlewares/Decawave/decadriver/deca_device.c ****     old_pmsc_ctrl0 = dwt_read8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 8853              		.loc 1 3870 22
 8854 001e 0021     		movs	r1, #0
 8855 0020 3620     		movs	r0, #54
 8856 0022 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 8857 0026 0346     		mov	r3, r0
 8858 0028 FB73     		strb	r3, [r7, #15]
3871:Middlewares/Decawave/decadriver/deca_device.c ****     old_pmsc_ctrl1 = dwt_read16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET);
 8859              		.loc 1 3871 22
 8860 002a 0421     		movs	r1, #4
 8861 002c 3620     		movs	r0, #54
 8862 002e FFF7FEFF 		bl	dwt_read16bitoffsetreg
 8863 0032 0346     		mov	r3, r0
 8864 0034 BB81     		strh	r3, [r7, #12]	@ movhi
3872:Middlewares/Decawave/decadriver/deca_device.c ****     old_rf_conf_txpow_mask = dwt_read32bitreg(RF_CONF_ID);
 8865              		.loc 1 3872 30
 8866 0036 0021     		movs	r1, #0
 8867 0038 2820     		movs	r0, #40
 8868 003a FFF7FEFF 		bl	dwt_read32bitoffsetreg
 8869 003e B860     		str	r0, [r7, #8]
3873:Middlewares/Decawave/decadriver/deca_device.c **** 
3874:Middlewares/Decawave/decadriver/deca_device.c ****     //  Set clock to XTAL
3875:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, PMSC_CTRL0_SYSCLKS_19M);
 8870              		.loc 1 3875 5
 8871 0040 0122     		movs	r2, #1
 8872 0042 0021     		movs	r1, #0
 8873 0044 3620     		movs	r0, #54
 8874 0046 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3876:Middlewares/Decawave/decadriver/deca_device.c ****     //  Disable sequencing
3877:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, PMSC_CTRL1_PKTSEQ_DISABLE);
 8875              		.loc 1 3877 5
 8876 004a 0022     		movs	r2, #0
 8877 004c 0421     		movs	r1, #4
 8878 004e 3620     		movs	r0, #54
 8879 0050 FFF7FEFF 		bl	dwt_write16bitoffsetreg
3878:Middlewares/Decawave/decadriver/deca_device.c ****     //  Turn on CLK PLL, Mix Bias and PG
3879:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXPOW_MASK | RF_CONF_PGMIXBIASEN_MASK);
 8880              		.loc 1 3879 5
 8881 0054 264A     		ldr	r2, .L381
 8882 0056 0021     		movs	r1, #0
ARM GAS  /tmp/cc0TY0Fa.s 			page 222


 8883 0058 2820     		movs	r0, #40
 8884 005a FFF7FEFF 		bl	dwt_write32bitoffsetreg
3880:Middlewares/Decawave/decadriver/deca_device.c ****     //  Set sys and TX clock to PLL
3881:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, PMSC_CTRL0_SYSCLKS_125M | PMSC_CTRL0_TXCLKS_
 8885              		.loc 1 3881 5
 8886 005e 2222     		movs	r2, #34
 8887 0060 0021     		movs	r1, #0
 8888 0062 3620     		movs	r0, #54
 8889 0064 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3882:Middlewares/Decawave/decadriver/deca_device.c **** 
3883:Middlewares/Decawave/decadriver/deca_device.c ****     for(i = 0; i < NUM_SAMPLES; i++) {
 8890              		.loc 1 3883 11
 8891 0068 0023     		movs	r3, #0
 8892 006a BB61     		str	r3, [r7, #24]
 8893              		.loc 1 3883 5
 8894 006c 21E0     		b	.L378
 8895              	.L379:
3884:Middlewares/Decawave/decadriver/deca_device.c ****         // Write bw setting to PG_DELAY register
3885:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGDELAY_OFFSET, pgdly);
 8896              		.loc 1 3885 9 discriminator 3
 8897 006e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 8898 0070 1A46     		mov	r2, r3
 8899 0072 0B21     		movs	r1, #11
 8900 0074 2A20     		movs	r0, #42
 8901 0076 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3886:Middlewares/Decawave/decadriver/deca_device.c **** 
3887:Middlewares/Decawave/decadriver/deca_device.c ****         // Set cal direction and time
3888:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGCCTRL_OFFSET, TC_PGCCTRL_DIR_CONV | TC_PGCCTRL_TMEAS
 8902              		.loc 1 3888 9 discriminator 3
 8903 007a BC22     		movs	r2, #188
 8904 007c 0821     		movs	r1, #8
 8905 007e 2A20     		movs	r0, #42
 8906 0080 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3889:Middlewares/Decawave/decadriver/deca_device.c **** 
3890:Middlewares/Decawave/decadriver/deca_device.c ****         // Start cal
3891:Middlewares/Decawave/decadriver/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGCCTRL_OFFSET, TC_PGCCTRL_DIR_CONV | TC_PGCCTRL_TMEAS
 8907              		.loc 1 3891 9 discriminator 3
 8908 0084 BD22     		movs	r2, #189
 8909 0086 0821     		movs	r1, #8
 8910 0088 2A20     		movs	r0, #42
 8911 008a FFF7FEFF 		bl	dwt_write8bitoffsetreg
3892:Middlewares/Decawave/decadriver/deca_device.c **** 
3893:Middlewares/Decawave/decadriver/deca_device.c ****         // Allow cal to complete - the TC_PGCCTRL_CALSTART bit will clear automatically
3894:Middlewares/Decawave/decadriver/deca_device.c ****         deca_sleep(1);
 8912              		.loc 1 3894 9 discriminator 3
 8913 008e 0120     		movs	r0, #1
 8914 0090 FFF7FEFF 		bl	deca_sleep
3895:Middlewares/Decawave/decadriver/deca_device.c **** 
3896:Middlewares/Decawave/decadriver/deca_device.c ****         // Read count value from the PG cal block
3897:Middlewares/Decawave/decadriver/deca_device.c ****         count = dwt_read16bitoffsetreg(TX_CAL_ID, TC_PGCAL_STATUS_OFFSET) & TC_PGCAL_STATUS_DELAY_M
 8915              		.loc 1 3897 17 discriminator 3
 8916 0094 0921     		movs	r1, #9
 8917 0096 2A20     		movs	r0, #42
 8918 0098 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 8919 009c 0346     		mov	r3, r0
 8920              		.loc 1 3897 15 discriminator 3
 8921 009e C3F30B03 		ubfx	r3, r3, #0, #12
ARM GAS  /tmp/cc0TY0Fa.s 			page 223


 8922 00a2 3B82     		strh	r3, [r7, #16]	@ movhi
3898:Middlewares/Decawave/decadriver/deca_device.c **** 
3899:Middlewares/Decawave/decadriver/deca_device.c ****         sum_count += count;
 8923              		.loc 1 3899 19 discriminator 3
 8924 00a4 3B8A     		ldrh	r3, [r7, #16]
 8925 00a6 FA69     		ldr	r2, [r7, #28]
 8926 00a8 1344     		add	r3, r3, r2
 8927 00aa FB61     		str	r3, [r7, #28]
3883:Middlewares/Decawave/decadriver/deca_device.c ****         // Write bw setting to PG_DELAY register
 8928              		.loc 1 3883 34 discriminator 3
 8929 00ac BB69     		ldr	r3, [r7, #24]
 8930 00ae 0133     		adds	r3, r3, #1
 8931 00b0 BB61     		str	r3, [r7, #24]
 8932              	.L378:
3883:Middlewares/Decawave/decadriver/deca_device.c ****         // Write bw setting to PG_DELAY register
 8933              		.loc 1 3883 5 discriminator 1
 8934 00b2 BA69     		ldr	r2, [r7, #24]
 8935 00b4 7B69     		ldr	r3, [r7, #20]
 8936 00b6 9A42     		cmp	r2, r3
 8937 00b8 D9DB     		blt	.L379
3900:Middlewares/Decawave/decadriver/deca_device.c ****     }
3901:Middlewares/Decawave/decadriver/deca_device.c **** 
3902:Middlewares/Decawave/decadriver/deca_device.c ****      // Restore old register values
3903:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, old_pmsc_ctrl0);
 8938              		.loc 1 3903 5
 8939 00ba FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 8940 00bc 1A46     		mov	r2, r3
 8941 00be 0021     		movs	r1, #0
 8942 00c0 3620     		movs	r0, #54
 8943 00c2 FFF7FEFF 		bl	dwt_write8bitoffsetreg
3904:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, old_pmsc_ctrl1);
 8944              		.loc 1 3904 5
 8945 00c6 BB89     		ldrh	r3, [r7, #12]
 8946 00c8 1A46     		mov	r2, r3
 8947 00ca 0421     		movs	r1, #4
 8948 00cc 3620     		movs	r0, #54
 8949 00ce FFF7FEFF 		bl	dwt_write16bitoffsetreg
3905:Middlewares/Decawave/decadriver/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, old_rf_conf_txpow_mask);
 8950              		.loc 1 3905 5
 8951 00d2 BA68     		ldr	r2, [r7, #8]
 8952 00d4 0021     		movs	r1, #0
 8953 00d6 2820     		movs	r0, #40
 8954 00d8 FFF7FEFF 		bl	dwt_write32bitoffsetreg
3906:Middlewares/Decawave/decadriver/deca_device.c **** 
3907:Middlewares/Decawave/decadriver/deca_device.c ****     average_count = (int)(sum_count / NUM_SAMPLES);
 8955              		.loc 1 3907 37
 8956 00dc 7B69     		ldr	r3, [r7, #20]
 8957 00de FA69     		ldr	r2, [r7, #28]
 8958 00e0 B2FBF3F3 		udiv	r3, r2, r3
 8959              		.loc 1 3907 19
 8960 00e4 7B82     		strh	r3, [r7, #18]	@ movhi
3908:Middlewares/Decawave/decadriver/deca_device.c ****     return average_count;
 8961              		.loc 1 3908 12
 8962 00e6 7B8A     		ldrh	r3, [r7, #18]
3909:Middlewares/Decawave/decadriver/deca_device.c **** }
 8963              		.loc 1 3909 1
 8964 00e8 1846     		mov	r0, r3
ARM GAS  /tmp/cc0TY0Fa.s 			page 224


 8965 00ea 2037     		adds	r7, r7, #32
 8966              	.LCFI465:
 8967              		.cfi_def_cfa_offset 8
 8968 00ec BD46     		mov	sp, r7
 8969              	.LCFI466:
 8970              		.cfi_def_cfa_register 13
 8971              		@ sp needed
 8972 00ee 80BD     		pop	{r7, pc}
 8973              	.L382:
 8974              		.align	2
 8975              	.L381:
 8976 00f0 00A71F00 		.word	2074368
 8977              		.cfi_endproc
 8978              	.LFE103:
 8980              		.text
 8981              	.Letext0:
 8982              		.file 2 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/lib/gcc/arm-none-eabi/9.3.1/include/st
 8983              		.file 3 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/_types.h"
 8984              		.file 4 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/reent.h"
 8985              		.file 5 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/lock.h"
 8986              		.file 6 "/home/ilian/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/stdlib.h"
 8987              		.file 7 "Middlewares/Decawave/decadriver/deca_types.h"
 8988              		.file 8 "Middlewares/Decawave/decadriver/deca_param_types.h"
 8989              		.file 9 "Middlewares/Decawave/decadriver/deca_device_api.h"
ARM GAS  /tmp/cc0TY0Fa.s 			page 225


DEFINED SYMBOLS
                            *ABS*:0000000000000000 deca_device.c
     /tmp/cc0TY0Fa.s:18     .bss.dw1000local:0000000000000000 $d
     /tmp/cc0TY0Fa.s:21     .bss.dw1000local:0000000000000000 dw1000local
     /tmp/cc0TY0Fa.s:24     .data.pdw1000local:0000000000000000 $d
     /tmp/cc0TY0Fa.s:27     .data.pdw1000local:0000000000000000 pdw1000local
     /tmp/cc0TY0Fa.s:30     .text.dwt_apiversion:0000000000000000 $t
     /tmp/cc0TY0Fa.s:38     .text.dwt_apiversion:0000000000000000 dwt_apiversion
     /tmp/cc0TY0Fa.s:69     .text.dwt_apiversion:0000000000000010 $d
     /tmp/cc0TY0Fa.s:74     .text.dwt_setlocaldataptr:0000000000000000 $t
     /tmp/cc0TY0Fa.s:81     .text.dwt_setlocaldataptr:0000000000000000 dwt_setlocaldataptr
     /tmp/cc0TY0Fa.s:138    .text.dwt_setlocaldataptr:0000000000000034 $d
     /tmp/cc0TY0Fa.s:144    .text.dwt_initialise:0000000000000000 $t
     /tmp/cc0TY0Fa.s:151    .text.dwt_initialise:0000000000000000 dwt_initialise
     /tmp/cc0TY0Fa.s:1196   .text.dwt_readdevid:0000000000000000 dwt_readdevid
     /tmp/cc0TY0Fa.s:7364   .text.dwt_softreset:0000000000000000 dwt_softreset
     /tmp/cc0TY0Fa.s:5981   .text._dwt_enableclocks:0000000000000000 _dwt_enableclocks
     /tmp/cc0TY0Fa.s:3067   .text.dwt_write8bitoffsetreg:0000000000000000 dwt_write8bitoffsetreg
     /tmp/cc0TY0Fa.s:3607   .text._dwt_otpread:0000000000000000 _dwt_otpread
     /tmp/cc0TY0Fa.s:2873   .text.dwt_read32bitoffsetreg:0000000000000000 dwt_read32bitoffsetreg
     /tmp/cc0TY0Fa.s:7429   .text.dwt_setxtaltrim:0000000000000000 dwt_setxtaltrim
     /tmp/cc0TY0Fa.s:4823   .text._dwt_loaducodefromrom:0000000000000000 _dwt_loaducodefromrom
     /tmp/cc0TY0Fa.s:2952   .text.dwt_read16bitoffsetreg:0000000000000000 dwt_read16bitoffsetreg
     /tmp/cc0TY0Fa.s:3117   .text.dwt_write16bitoffsetreg:0000000000000000 dwt_write16bitoffsetreg
     /tmp/cc0TY0Fa.s:594    .text.dwt_initialise:0000000000000290 $d
     /tmp/cc0TY0Fa.s:600    .text.dwt_otprevision:0000000000000000 $t
     /tmp/cc0TY0Fa.s:607    .text.dwt_otprevision:0000000000000000 dwt_otprevision
     /tmp/cc0TY0Fa.s:639    .text.dwt_otprevision:0000000000000014 $d
     /tmp/cc0TY0Fa.s:644    .text.dwt_setfinegraintxseq:0000000000000000 $t
     /tmp/cc0TY0Fa.s:651    .text.dwt_setfinegraintxseq:0000000000000000 dwt_setfinegraintxseq
     /tmp/cc0TY0Fa.s:701    .text.dwt_setlnapamode:0000000000000000 $t
     /tmp/cc0TY0Fa.s:708    .text.dwt_setlnapamode:0000000000000000 dwt_setlnapamode
     /tmp/cc0TY0Fa.s:3177   .text.dwt_write32bitoffsetreg:0000000000000000 dwt_write32bitoffsetreg
     /tmp/cc0TY0Fa.s:776    .text.dwt_enablegpioclocks:0000000000000000 $t
     /tmp/cc0TY0Fa.s:783    .text.dwt_enablegpioclocks:0000000000000000 dwt_enablegpioclocks
     /tmp/cc0TY0Fa.s:826    .text.dwt_setgpiodirection:0000000000000000 $t
     /tmp/cc0TY0Fa.s:833    .text.dwt_setgpiodirection:0000000000000000 dwt_setgpiodirection
     /tmp/cc0TY0Fa.s:2612   .text.dwt_writetodevice:0000000000000000 dwt_writetodevice
     /tmp/cc0TY0Fa.s:893    .text.dwt_setgpiovalue:0000000000000000 $t
     /tmp/cc0TY0Fa.s:900    .text.dwt_setgpiovalue:0000000000000000 dwt_setgpiovalue
     /tmp/cc0TY0Fa.s:960    .text.dwt_getgpiovalue:0000000000000000 $t
     /tmp/cc0TY0Fa.s:967    .text.dwt_getgpiovalue:0000000000000000 dwt_getgpiovalue
     /tmp/cc0TY0Fa.s:1013   .text.dwt_geticrefvolt:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1020   .text.dwt_geticrefvolt:0000000000000000 dwt_geticrefvolt
     /tmp/cc0TY0Fa.s:1052   .text.dwt_geticrefvolt:0000000000000014 $d
     /tmp/cc0TY0Fa.s:1057   .text.dwt_geticreftemp:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1064   .text.dwt_geticreftemp:0000000000000000 dwt_geticreftemp
     /tmp/cc0TY0Fa.s:1096   .text.dwt_geticreftemp:0000000000000014 $d
     /tmp/cc0TY0Fa.s:1101   .text.dwt_getpartid:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1108   .text.dwt_getpartid:0000000000000000 dwt_getpartid
     /tmp/cc0TY0Fa.s:1140   .text.dwt_getpartid:0000000000000014 $d
     /tmp/cc0TY0Fa.s:1145   .text.dwt_getlotid:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1152   .text.dwt_getlotid:0000000000000000 dwt_getlotid
     /tmp/cc0TY0Fa.s:1184   .text.dwt_getlotid:0000000000000014 $d
     /tmp/cc0TY0Fa.s:1189   .text.dwt_readdevid:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1222   .text.dwt_configuretxrf:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1229   .text.dwt_configuretxrf:0000000000000000 dwt_configuretxrf
ARM GAS  /tmp/cc0TY0Fa.s 			page 226


     /tmp/cc0TY0Fa.s:1275   .text.dwt_configurefor64plen:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1282   .text.dwt_configurefor64plen:0000000000000000 dwt_configurefor64plen
     /tmp/cc0TY0Fa.s:1337   .text.dwt_configure:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1344   .text.dwt_configure:0000000000000000 dwt_configure
     /tmp/cc0TY0Fa.s:4761   .text._dwt_configlde:0000000000000000 _dwt_configlde
     /tmp/cc0TY0Fa.s:1775   .text.dwt_configure:00000000000002a4 $d
     /tmp/cc0TY0Fa.s:1791   .text.dwt_setrxantennadelay:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1798   .text.dwt_setrxantennadelay:0000000000000000 dwt_setrxantennadelay
     /tmp/cc0TY0Fa.s:1837   .text.dwt_settxantennadelay:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1844   .text.dwt_settxantennadelay:0000000000000000 dwt_settxantennadelay
     /tmp/cc0TY0Fa.s:1883   .text.dwt_writetxdata:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1890   .text.dwt_writetxdata:0000000000000000 dwt_writetxdata
     /tmp/cc0TY0Fa.s:1949   .text.dwt_writetxfctrl:0000000000000000 $t
     /tmp/cc0TY0Fa.s:1956   .text.dwt_writetxfctrl:0000000000000000 dwt_writetxfctrl
     /tmp/cc0TY0Fa.s:2016   .text.dwt_writetxfctrl:000000000000003c $d
     /tmp/cc0TY0Fa.s:2021   .text.dwt_readrxdata:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2028   .text.dwt_readrxdata:0000000000000000 dwt_readrxdata
     /tmp/cc0TY0Fa.s:2743   .text.dwt_readfromdevice:0000000000000000 dwt_readfromdevice
     /tmp/cc0TY0Fa.s:2070   .text.dwt_readaccdata:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2077   .text.dwt_readaccdata:0000000000000000 dwt_readaccdata
     /tmp/cc0TY0Fa.s:2125   .text.dwt_readcarrierintegrator:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2132   .text.dwt_readcarrierintegrator:0000000000000000 dwt_readcarrierintegrator
     /tmp/cc0TY0Fa.s:2218   .text.dwt_readdiagnostics:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2225   .text.dwt_readdiagnostics:0000000000000000 dwt_readdiagnostics
     /tmp/cc0TY0Fa.s:2305   .text.dwt_readtxtimestamp:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2312   .text.dwt_readtxtimestamp:0000000000000000 dwt_readtxtimestamp
     /tmp/cc0TY0Fa.s:2350   .text.dwt_readtxtimestamphi32:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2357   .text.dwt_readtxtimestamphi32:0000000000000000 dwt_readtxtimestamphi32
     /tmp/cc0TY0Fa.s:2383   .text.dwt_readtxtimestamplo32:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2390   .text.dwt_readtxtimestamplo32:0000000000000000 dwt_readtxtimestamplo32
     /tmp/cc0TY0Fa.s:2416   .text.dwt_readrxtimestamp:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2423   .text.dwt_readrxtimestamp:0000000000000000 dwt_readrxtimestamp
     /tmp/cc0TY0Fa.s:2461   .text.dwt_readrxtimestamphi32:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2468   .text.dwt_readrxtimestamphi32:0000000000000000 dwt_readrxtimestamphi32
     /tmp/cc0TY0Fa.s:2494   .text.dwt_readrxtimestamplo32:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2501   .text.dwt_readrxtimestamplo32:0000000000000000 dwt_readrxtimestamplo32
     /tmp/cc0TY0Fa.s:2527   .text.dwt_readsystimestamphi32:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2534   .text.dwt_readsystimestamphi32:0000000000000000 dwt_readsystimestamphi32
     /tmp/cc0TY0Fa.s:2560   .text.dwt_readsystime:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2567   .text.dwt_readsystime:0000000000000000 dwt_readsystime
     /tmp/cc0TY0Fa.s:2605   .text.dwt_writetodevice:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2736   .text.dwt_readfromdevice:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2866   .text.dwt_read32bitoffsetreg:0000000000000000 $t
     /tmp/cc0TY0Fa.s:2945   .text.dwt_read16bitoffsetreg:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3010   .text.dwt_read8bitoffsetreg:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3017   .text.dwt_read8bitoffsetreg:0000000000000000 dwt_read8bitoffsetreg
     /tmp/cc0TY0Fa.s:3060   .text.dwt_write8bitoffsetreg:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3110   .text.dwt_write16bitoffsetreg:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3170   .text.dwt_write32bitoffsetreg:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3246   .text.dwt_enableframefilter:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3253   .text.dwt_enableframefilter:0000000000000000 dwt_enableframefilter
     /tmp/cc0TY0Fa.s:3328   .text.dwt_enableframefilter:0000000000000060 $d
     /tmp/cc0TY0Fa.s:3333   .text.dwt_setpanid:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3340   .text.dwt_setpanid:0000000000000000 dwt_setpanid
     /tmp/cc0TY0Fa.s:3379   .text.dwt_setaddress16:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3386   .text.dwt_setaddress16:0000000000000000 dwt_setaddress16
     /tmp/cc0TY0Fa.s:3425   .text.dwt_seteui:0000000000000000 $t
ARM GAS  /tmp/cc0TY0Fa.s 			page 227


     /tmp/cc0TY0Fa.s:3432   .text.dwt_seteui:0000000000000000 dwt_seteui
     /tmp/cc0TY0Fa.s:3470   .text.dwt_geteui:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3477   .text.dwt_geteui:0000000000000000 dwt_geteui
     /tmp/cc0TY0Fa.s:3515   .text.dwt_otpread:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3522   .text.dwt_otpread:0000000000000000 dwt_otpread
     /tmp/cc0TY0Fa.s:3600   .text._dwt_otpread:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3663   .text._dwt_otpsetmrregs:0000000000000000 $t
     /tmp/cc0TY0Fa.s:3670   .text._dwt_otpsetmrregs:0000000000000000 _dwt_otpsetmrregs
     /tmp/cc0TY0Fa.s:3715   .text._dwt_otpsetmrregs:0000000000000038 $d
     /tmp/cc0TY0Fa.s:3721   .text._dwt_otpsetmrregs:0000000000000050 $t
     /tmp/cc0TY0Fa.s:3999   .text._dwt_otpprogword32:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4006   .text._dwt_otpprogword32:0000000000000000 _dwt_otpprogword32
     /tmp/cc0TY0Fa.s:4137   .text.dwt_otpwriteandverify:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4144   .text.dwt_otpwriteandverify:0000000000000000 dwt_otpwriteandverify
     /tmp/cc0TY0Fa.s:4244   .text._dwt_aonconfigupload:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4251   .text._dwt_aonconfigupload:0000000000000000 _dwt_aonconfigupload
     /tmp/cc0TY0Fa.s:4282   .text._dwt_aonarrayupload:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4289   .text._dwt_aonarrayupload:0000000000000000 _dwt_aonarrayupload
     /tmp/cc0TY0Fa.s:4320   .text.dwt_entersleep:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4327   .text.dwt_entersleep:0000000000000000 dwt_entersleep
     /tmp/cc0TY0Fa.s:4350   .text.dwt_configuresleepcnt:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4357   .text.dwt_configuresleepcnt:0000000000000000 dwt_configuresleepcnt
     /tmp/cc0TY0Fa.s:4423   .text.dwt_calibratesleepcnt:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4430   .text.dwt_calibratesleepcnt:0000000000000000 dwt_calibratesleepcnt
     /tmp/cc0TY0Fa.s:4542   .text.dwt_configuresleep:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4549   .text.dwt_configuresleep:0000000000000000 dwt_configuresleep
     /tmp/cc0TY0Fa.s:4604   .text.dwt_configuresleep:000000000000003c $d
     /tmp/cc0TY0Fa.s:4609   .text.dwt_entersleepaftertx:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4616   .text.dwt_entersleepaftertx:0000000000000000 dwt_entersleepaftertx
     /tmp/cc0TY0Fa.s:4673   .text.dwt_spicswakeup:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4680   .text.dwt_spicswakeup:0000000000000000 dwt_spicswakeup
     /tmp/cc0TY0Fa.s:4749   .text.dwt_spicswakeup:000000000000004c $d
     /tmp/cc0TY0Fa.s:4754   .text._dwt_configlde:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4816   .text._dwt_loaducodefromrom:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4858   .text.dwt_loadopsettabfromotp:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4865   .text.dwt_loadopsettabfromotp:0000000000000000 dwt_loadopsettabfromotp
     /tmp/cc0TY0Fa.s:4922   .text.dwt_setsmarttxpower:0000000000000000 $t
     /tmp/cc0TY0Fa.s:4929   .text.dwt_setsmarttxpower:0000000000000000 dwt_setsmarttxpower
     /tmp/cc0TY0Fa.s:5002   .text.dwt_setsmarttxpower:0000000000000058 $d
     /tmp/cc0TY0Fa.s:5007   .text.dwt_enableautoack:0000000000000000 $t
     /tmp/cc0TY0Fa.s:5014   .text.dwt_enableautoack:0000000000000000 dwt_enableautoack
     /tmp/cc0TY0Fa.s:5068   .text.dwt_enableautoack:0000000000000040 $d
     /tmp/cc0TY0Fa.s:5073   .text.dwt_setdblrxbuffmode:0000000000000000 $t
     /tmp/cc0TY0Fa.s:5080   .text.dwt_setdblrxbuffmode:0000000000000000 dwt_setdblrxbuffmode
     /tmp/cc0TY0Fa.s:5154   .text.dwt_setdblrxbuffmode:0000000000000058 $d
     /tmp/cc0TY0Fa.s:5159   .text.dwt_setrxaftertxdelay:0000000000000000 $t
     /tmp/cc0TY0Fa.s:5166   .text.dwt_setrxaftertxdelay:0000000000000000 dwt_setrxaftertxdelay
     /tmp/cc0TY0Fa.s:5220   .text.dwt_setcallbacks:0000000000000000 $t
     /tmp/cc0TY0Fa.s:5227   .text.dwt_setcallbacks:0000000000000000 dwt_setcallbacks
     /tmp/cc0TY0Fa.s:5289   .text.dwt_setcallbacks:000000000000003c $d
     /tmp/cc0TY0Fa.s:5294   .text.dwt_checkirq:0000000000000000 $t
     /tmp/cc0TY0Fa.s:5301   .text.dwt_checkirq:0000000000000000 dwt_checkirq
     /tmp/cc0TY0Fa.s:5330   .text.dwt_isr:0000000000000000 $t
     /tmp/cc0TY0Fa.s:5337   .text.dwt_isr:0000000000000000 dwt_isr
     /tmp/cc0TY0Fa.s:6395   .text.dwt_forcetrxoff:0000000000000000 dwt_forcetrxoff
     /tmp/cc0TY0Fa.s:7326   .text.dwt_rxreset:0000000000000000 dwt_rxreset
     /tmp/cc0TY0Fa.s:5658   .text.dwt_isr:00000000000001d0 $d
ARM GAS  /tmp/cc0TY0Fa.s 			page 228


     /tmp/cc0TY0Fa.s:5664   .text.dwt_lowpowerlistenisr:0000000000000000 $t
     /tmp/cc0TY0Fa.s:5671   .text.dwt_lowpowerlistenisr:0000000000000000 dwt_lowpowerlistenisr
     /tmp/cc0TY0Fa.s:6644   .text.dwt_setlowpowerlistening:0000000000000000 dwt_setlowpowerlistening
     /tmp/cc0TY0Fa.s:5839   .text.dwt_lowpowerlistenisr:00000000000000f0 $d
     /tmp/cc0TY0Fa.s:5844   .text.dwt_setleds:0000000000000000 $t
     /tmp/cc0TY0Fa.s:5851   .text.dwt_setleds:0000000000000000 dwt_setleds
     /tmp/cc0TY0Fa.s:5974   .text._dwt_enableclocks:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6012   .text._dwt_enableclocks:0000000000000024 $d
     /tmp/cc0TY0Fa.s:6027   .text._dwt_enableclocks:0000000000000060 $t
     /tmp/cc0TY0Fa.s:6183   .text._dwt_disablesequencing:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6190   .text._dwt_disablesequencing:0000000000000000 _dwt_disablesequencing
     /tmp/cc0TY0Fa.s:6219   .text.dwt_setdelayedtrxtime:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6226   .text.dwt_setdelayedtrxtime:0000000000000000 dwt_setdelayedtrxtime
     /tmp/cc0TY0Fa.s:6263   .text.dwt_starttx:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6270   .text.dwt_starttx:0000000000000000 dwt_starttx
     /tmp/cc0TY0Fa.s:6383   .text.dwt_starttx:0000000000000098 $d
     /tmp/cc0TY0Fa.s:6388   .text.dwt_forcetrxoff:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6477   .text.dwt_syncrxbufptrs:0000000000000000 dwt_syncrxbufptrs
     /tmp/cc0TY0Fa.s:6464   .text.dwt_forcetrxoff:0000000000000058 $d
     /tmp/cc0TY0Fa.s:6470   .text.dwt_syncrxbufptrs:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6531   .text.dwt_setsniffmode:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6538   .text.dwt_setsniffmode:0000000000000000 dwt_setsniffmode
     /tmp/cc0TY0Fa.s:6637   .text.dwt_setlowpowerlistening:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6701   .text.dwt_setsnoozetime:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6708   .text.dwt_setsnoozetime:0000000000000000 dwt_setsnoozetime
     /tmp/cc0TY0Fa.s:6747   .text.dwt_rxenable:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6754   .text.dwt_rxenable:0000000000000000 dwt_rxenable
     /tmp/cc0TY0Fa.s:6854   .text.dwt_setrxtimeout:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6861   .text.dwt_setrxtimeout:0000000000000000 dwt_setrxtimeout
     /tmp/cc0TY0Fa.s:6949   .text.dwt_setrxtimeout:000000000000007c $d
     /tmp/cc0TY0Fa.s:6954   .text.dwt_setpreambledetecttimeout:0000000000000000 $t
     /tmp/cc0TY0Fa.s:6961   .text.dwt_setpreambledetecttimeout:0000000000000000 dwt_setpreambledetecttimeout
     /tmp/cc0TY0Fa.s:7000   .text.dwt_setinterrupt:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7007   .text.dwt_setinterrupt:0000000000000000 dwt_setinterrupt
     /tmp/cc0TY0Fa.s:7088   .text.dwt_configeventcounters:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7095   .text.dwt_configeventcounters:0000000000000000 dwt_configeventcounters
     /tmp/cc0TY0Fa.s:7142   .text.dwt_readeventcounters:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7149   .text.dwt_readeventcounters:0000000000000000 dwt_readeventcounters
     /tmp/cc0TY0Fa.s:7319   .text.dwt_rxreset:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7357   .text.dwt_softreset:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7417   .text.dwt_softreset:0000000000000048 $d
     /tmp/cc0TY0Fa.s:7422   .text.dwt_setxtaltrim:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7477   .text.dwt_getxtaltrim:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7484   .text.dwt_getxtaltrim:0000000000000000 dwt_getxtaltrim
     /tmp/cc0TY0Fa.s:7513   .text.dwt_configcwmode:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7520   .text.dwt_configcwmode:0000000000000000 dwt_configcwmode
     /tmp/cc0TY0Fa.s:7618   .text.dwt_configcwmode:0000000000000098 $d
     /tmp/cc0TY0Fa.s:7627   .text.dwt_configcontinuousframemode:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7634   .text.dwt_configcontinuousframemode:0000000000000000 dwt_configcontinuousframemode
     /tmp/cc0TY0Fa.s:7701   .text.dwt_configcontinuousframemode:0000000000000054 $d
     /tmp/cc0TY0Fa.s:7706   .text.dwt_readtempvbat:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7713   .text.dwt_readtempvbat:0000000000000000 dwt_readtempvbat
     /tmp/cc0TY0Fa.s:7867   .text.dwt_convertrawtemperature:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7874   .text.dwt_convertrawtemperature:0000000000000000 dwt_convertrawtemperature
     /tmp/cc0TY0Fa.s:7943   .text.dwt_convertrawtemperature:0000000000000058 $d
     /tmp/cc0TY0Fa.s:7951   .text.dwt_convertdegtemptoraw:0000000000000000 $t
     /tmp/cc0TY0Fa.s:7958   .text.dwt_convertdegtemptoraw:0000000000000000 dwt_convertdegtemptoraw
ARM GAS  /tmp/cc0TY0Fa.s 			page 229


     /tmp/cc0TY0Fa.s:8032   .text.dwt_convertdegtemptoraw:0000000000000050 $d
     /tmp/cc0TY0Fa.s:8038   .text.dwt_convertrawvoltage:0000000000000000 $t
     /tmp/cc0TY0Fa.s:8045   .text.dwt_convertrawvoltage:0000000000000000 dwt_convertrawvoltage
     /tmp/cc0TY0Fa.s:8117   .text.dwt_convertrawvoltage:0000000000000060 $d
     /tmp/cc0TY0Fa.s:8127   .text.dwt_convertvoltstoraw:0000000000000000 $t
     /tmp/cc0TY0Fa.s:8134   .text.dwt_convertvoltstoraw:0000000000000000 dwt_convertvoltstoraw
     /tmp/cc0TY0Fa.s:8208   .text.dwt_convertvoltstoraw:0000000000000060 $d
     /tmp/cc0TY0Fa.s:8215   .text.dwt_readwakeuptemp:0000000000000000 $t
     /tmp/cc0TY0Fa.s:8222   .text.dwt_readwakeuptemp:0000000000000000 dwt_readwakeuptemp
     /tmp/cc0TY0Fa.s:8248   .text.dwt_readwakeupvbat:0000000000000000 $t
     /tmp/cc0TY0Fa.s:8255   .text.dwt_readwakeupvbat:0000000000000000 dwt_readwakeupvbat
     /tmp/cc0TY0Fa.s:8281   .text.dwt_calcbandwidthtempadj:0000000000000000 $t
     /tmp/cc0TY0Fa.s:8288   .text.dwt_calcbandwidthtempadj:0000000000000000 dwt_calcbandwidthtempadj
     /tmp/cc0TY0Fa.s:8490   .text.dwt_calcbandwidthtempadj:000000000000014c $d
     /tmp/cc0TY0Fa.s:8495   .text._dwt_computetxpowersetting:0000000000000000 $t
     /tmp/cc0TY0Fa.s:8502   .text._dwt_computetxpowersetting:0000000000000000 _dwt_computetxpowersetting
     /tmp/cc0TY0Fa.s:8698   .text.dwt_calcpowertempadj:0000000000000000 $t
     /tmp/cc0TY0Fa.s:8705   .text.dwt_calcpowertempadj:0000000000000000 dwt_calcpowertempadj
     /tmp/cc0TY0Fa.s:8812   .text.dwt_calcpgcount:0000000000000000 $t
     /tmp/cc0TY0Fa.s:8819   .text.dwt_calcpgcount:0000000000000000 dwt_calcpgcount
     /tmp/cc0TY0Fa.s:8976   .text.dwt_calcpgcount:00000000000000f0 $d

UNDEFINED SYMBOLS
lde_replicaCoeff
chan_idx
fs_pll_cfg
fs_pll_tune
rx_config
tx_config
sftsh
dtune1
digital_bb_config
agc_config
dwnsSFDlen
writetospi
readfromspi
deca_sleep
decamutexon
decamutexoff
__aeabi_i2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2f
__aeabi_f2d
__aeabi_d2uiz
